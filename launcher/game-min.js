var egret;
(function(b){b.egret_string_code={};b.egret_string_code[-1]="\u4e0d\u5b58\u5728\u7684stringId:{0}";b.egret_string_code[1E3]="Browser.isMobile\u63a5\u53e3\u53c2\u6570\u5df2\u7ecf\u53d8\u66f4\uff0c\u8bf7\u5c3d\u5feb\u8c03\u6574\u7528\u6cd5\u4e3a egret.MainContext.deviceType == egret.MainContext.DEVICE_MOBILE";b.egret_string_code[1001]="\u8be5\u65b9\u6cd5\u76ee\u524d\u4e0d\u5e94\u4f20\u5165 resolutionPolicy \u53c2\u6570\uff0c\u8bf7\u5728 docs/1.0_Final_ReleaseNote\u4e2d\u67e5\u770b\u5982\u4f55\u5347\u7ea7";b.egret_string_code[1002]=
"egret.Ticker\u662f\u6846\u67b6\u5185\u90e8\u4f7f\u7528\u7684\u5355\u4f8b\uff0c\u4e0d\u5141\u8bb8\u5728\u5916\u90e8\u5b9e\u4f8b\u5316\uff0c\u8ba1\u65f6\u5668\u8bf7\u4f7f\u7528egret.Timer\u7c7b\uff01";b.egret_string_code[1003]="Ticker#setTimeout\u65b9\u6cd5\u5373\u5c06\u5e9f\u5f03,\u8bf7\u4f7f\u7528egret.setTimeout";b.egret_string_code[1004]="ExternalInterface\u8c03\u7528\u4e86js\u6ca1\u6709\u6ce8\u518c\u7684\u65b9\u6cd5: {0}";b.egret_string_code[1005]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684blendMode: {0}";
b.egret_string_code[1006]="child\u4e0d\u5728\u5f53\u524d\u5bb9\u5668\u5185";b.egret_string_code[1007]="\u63d0\u4f9b\u7684\u7d22\u5f15\u8d85\u51fa\u8303\u56f4";b.egret_string_code[1008]="child\u672a\u88abaddChild\u5230\u8be5parent";b.egret_string_code[1009]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684\u9002\u914d\u6a21\u5f0f:{0}";b.egret_string_code[1010]="addEventListener\u4fa6\u542c\u51fd\u6570\u4e0d\u80fd\u4e3a\u7a7a";b.egret_string_code[1011]='BitmapText\u627e\u4e0d\u5230\u6587\u5b57\u6240\u5bf9\u5e94\u7684\u7eb9\u7406:"{0}"';
b.egret_string_code[1012]="egret.BitmapTextSpriteSheet\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528egret.BitmapFont\u4ee3\u66ff\u3002";b.egret_string_code[1013]="TextField.setFocus \u6ca1\u6709\u5b9e\u73b0";b.egret_string_code[1014]="Ease\u4e0d\u80fd\u88ab\u5b9e\u4f8b\u5316";b.egret_string_code[1015]="xml not found!";b.egret_string_code[1016]="{0}\u5df2\u7ecf\u5e9f\u5f03";b.egret_string_code[1017]="JSON\u6587\u4ef6\u683c\u5f0f\u4e0d\u6b63\u786e: {0}\ndata: {1}";b.egret_string_code[1018]="egret_html5_localStorage.setItem\u4fdd\u5b58\u5931\u8d25,key={0}&value={1}";
b.egret_string_code[1019]="\u7f51\u7edc\u5f02\u5e38:{0}";b.egret_string_code[1020]="\u65e0\u6cd5\u521d\u59cb\u5316\u7740\u8272\u5668";b.egret_string_code[1021]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301webgl";b.egret_string_code[1022]="{0} ArgumentError";b.egret_string_code[1023]="\u6b64\u65b9\u6cd5\u5728ScrollView\u5185\u4e0d\u53ef\u7528!";b.egret_string_code[1024]="\u4f7f\u7528\u4e86\u5c1a\u672a\u5b9e\u73b0\u7684ScaleMode";b.egret_string_code[1025]="\u9047\u5230\u6587\u4ef6\u5c3e";b.egret_string_code[1026]=
"EncodingError! The code point {0} could not be encoded.";b.egret_string_code[1027]="DecodingError";b.egret_string_code[1028]="\u8c03\u7528\u4e86\u672a\u914d\u7f6e\u7684\u6ce8\u5165\u89c4\u5219:{0}\u3002 \u8bf7\u5148\u5728\u9879\u76ee\u521d\u59cb\u5316\u91cc\u914d\u7f6e\u6307\u5b9a\u7684\u6ce8\u5165\u89c4\u5219\uff0c\u518d\u8c03\u7528\u5bf9\u5e94\u5355\u4f8b\u3002";b.egret_string_code[1029]="Function.prototype.bind - what is trying to be bound is not callable";b.egret_string_code[1030]="\u8be5API\u5df2\u5e9f\u5f03";
b.egret_string_code[1031]="setVolume\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528this.volume = value\u4ee3\u66ff";b.egret_string_code[1032]="getVolume\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528this.volume\u4ee3\u66ff";b.egret_string_code[1033]="\u8de8\u57df\u56fe\u7247\u4e0d\u53ef\u4ee5\u4f7f\u7528toDataURL\u6765\u8f6c\u6362\u6210base64";b.egret_string_code[1034]='\u97f3\u4e50\u6587\u4ef6\u89e3\u7801\u5931\u8d25\uff1a"{0}"\uff0c\u8bf7\u4f7f\u7528\u6807\u51c6\u7684\u8f6c\u6362\u5de5\u5177\u91cd\u65b0\u8f6c\u6362\u4e0bmp3\u3002';
b.egret_string_code[1035]="Native \u4e0b\u6682\u672a\u5b9e\u73b0\u6b64\u529f\u80fd\uff01";b.egret_string_code[2E3]="RES.createGroup()\u4f20\u5165\u4e86\u914d\u7f6e\u4e2d\u4e0d\u5b58\u5728\u7684\u952e\u503c: {0}";b.egret_string_code[2001]='RES\u52a0\u8f7d\u4e86\u4e0d\u5b58\u5728\u6216\u7a7a\u7684\u8d44\u6e90\u7ec4:"{0}"';b.egret_string_code[2002]="\u8bf7\u4e0d\u8981\u4f7f\u7528\u4e0d\u540c\u7684\u7c7b\u578b\u65b9\u5f0f\u6765\u52a0\u8f7d\u540c\u4e00\u4e2a\u7d20\u6750\uff01";b.egret_string_code[3E3]=
"\u4e3b\u9898\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25: {0}";b.egret_string_code[3001]="\u627e\u4e0d\u5230\u4e3b\u9898\u4e2d\u6240\u914d\u7f6e\u7684\u76ae\u80a4\u7c7b\u540d: {0}";b.egret_string_code[3002]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u96c6\u5408\u5143\u7d20\u7d22\u5f15\u8303\u56f4';b.egret_string_code[3003]="\u5728\u6b64\u7ec4\u4ef6\u4e2d\u4e0d\u53ef\u7528\uff0c\u82e5\u6b64\u7ec4\u4ef6\u4e3a\u5bb9\u5668\u7c7b\uff0c\u8bf7\u4f7f\u7528";b.egret_string_code[3004]="addChild(){0}addElement()\u4ee3\u66ff";
b.egret_string_code[3005]="addChildAt(){0}addElementAt()\u4ee3\u66ff";b.egret_string_code[3006]="removeChild(){0}removeElement()\u4ee3\u66ff";b.egret_string_code[3007]="removeChildAt(){0}removeElementAt()\u4ee3\u66ff";b.egret_string_code[3008]="setChildIndex(){0}setElementIndex()\u4ee3\u66ff";b.egret_string_code[3009]="swapChildren(){0}swapElements()\u4ee3\u66ff";b.egret_string_code[3010]="swapChildrenAt(){0}swapElementsAt()\u4ee3\u66ff";b.egret_string_code[3011]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u53ef\u89c6\u5143\u7d20\u7d22\u5f15\u8303\u56f4';
b.egret_string_code[3012]="\u6b64\u65b9\u6cd5\u5728Scroller\u7ec4\u4ef6\u5185\u4e0d\u53ef\u7528!";b.egret_string_code[3013]="UIStage\u662fGUI\u6839\u5bb9\u5668\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u6b64\u5b9e\u4f8b\u5728\u663e\u793a\u5217\u8868\u4e2d\uff01";b.egret_string_code[3014]="propNotPropOrStyle";b.egret_string_code[4E3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)";b.egret_string_code[4001]="Abstract class can not be instantiated!";b.egret_string_code[4002]=
"Unnamed data!";b.egret_string_code[4003]="Nonsupport version!";b.egret_string_code[4004]="Abstract method needs to be implemented in subclass!";b.egret_string_code[3100]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301WebSocket";b.egret_string_code[3101]="\u8bf7\u5148\u8fde\u63a5WebSocket";b.egret_string_code[3102]="\u8bf7\u5148\u8bbe\u7f6etype\u4e3a\u4e8c\u8fdb\u5236\u7c7b\u578b"})(egret||(egret={}));
(function(b){b.egret_string_code={};b.egret_string_code[-1]="\u4e0d\u5b58\u5728\u7684stringId:{0}";b.egret_string_code[1E3]="Browser.isMobile\u63a5\u53e3\u53c2\u6570\u5df2\u7ecf\u53d8\u66f4\uff0c\u8bf7\u5c3d\u5feb\u8c03\u6574\u7528\u6cd5\u4e3a egret.MainContext.deviceType == egret.MainContext.DEVICE_MOBILE";b.egret_string_code[1001]="\u8be5\u65b9\u6cd5\u76ee\u524d\u4e0d\u5e94\u4f20\u5165 resolutionPolicy \u53c2\u6570\uff0c\u8bf7\u5728 docs/1.0_Final_ReleaseNote\u4e2d\u67e5\u770b\u5982\u4f55\u5347\u7ea7";
b.egret_string_code[1002]="egret.Ticker\u662f\u6846\u67b6\u5185\u90e8\u4f7f\u7528\u7684\u5355\u4f8b\uff0c\u4e0d\u5141\u8bb8\u5728\u5916\u90e8\u5b9e\u4f8b\u5316\uff0c\u8ba1\u65f6\u5668\u8bf7\u4f7f\u7528egret.Timer\u7c7b\uff01";b.egret_string_code[1003]="Ticker#setTimeout\u65b9\u6cd5\u5373\u5c06\u5e9f\u5f03,\u8bf7\u4f7f\u7528egret.setTimeout";b.egret_string_code[1004]="ExternalInterface\u8c03\u7528\u4e86js\u6ca1\u6709\u6ce8\u518c\u7684\u65b9\u6cd5: {0}";b.egret_string_code[1005]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684blendMode: {0}";
b.egret_string_code[1006]="child\u4e0d\u5728\u5f53\u524d\u5bb9\u5668\u5185";b.egret_string_code[1007]="\u63d0\u4f9b\u7684\u7d22\u5f15\u8d85\u51fa\u8303\u56f4";b.egret_string_code[1008]="child\u672a\u88abaddChild\u5230\u8be5parent";b.egret_string_code[1009]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684\u9002\u914d\u6a21\u5f0f:{0}";b.egret_string_code[1010]="addEventListener\u4fa6\u542c\u51fd\u6570\u4e0d\u80fd\u4e3a\u7a7a";b.egret_string_code[1011]='BitmapText\u627e\u4e0d\u5230\u6587\u5b57\u6240\u5bf9\u5e94\u7684\u7eb9\u7406:"{0}"';
b.egret_string_code[1012]="egret.BitmapTextSpriteSheet\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528egret.BitmapFont\u4ee3\u66ff\u3002";b.egret_string_code[1013]="TextField.setFocus \u6ca1\u6709\u5b9e\u73b0";b.egret_string_code[1014]="Ease\u4e0d\u80fd\u88ab\u5b9e\u4f8b\u5316";b.egret_string_code[1015]="xml not found!";b.egret_string_code[1016]="{0}\u5df2\u7ecf\u5e9f\u5f03";b.egret_string_code[1017]="JSON\u6587\u4ef6\u683c\u5f0f\u4e0d\u6b63\u786e: {0}\ndata: {1}";b.egret_string_code[1018]="egret_html5_localStorage.setItem\u4fdd\u5b58\u5931\u8d25,key={0}&value={1}";
b.egret_string_code[1019]="\u7f51\u7edc\u5f02\u5e38:{0}";b.egret_string_code[1020]="\u65e0\u6cd5\u521d\u59cb\u5316\u7740\u8272\u5668";b.egret_string_code[1021]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301webgl";b.egret_string_code[1022]="{0} ArgumentError";b.egret_string_code[1023]="\u6b64\u65b9\u6cd5\u5728ScrollView\u5185\u4e0d\u53ef\u7528!";b.egret_string_code[1024]="\u4f7f\u7528\u4e86\u5c1a\u672a\u5b9e\u73b0\u7684ScaleMode";b.egret_string_code[1025]="\u9047\u5230\u6587\u4ef6\u5c3e";b.egret_string_code[1026]=
"EncodingError! The code point {0} could not be encoded.";b.egret_string_code[1027]="DecodingError";b.egret_string_code[1028]="\u8c03\u7528\u4e86\u672a\u914d\u7f6e\u7684\u6ce8\u5165\u89c4\u5219:{0}\u3002 \u8bf7\u5148\u5728\u9879\u76ee\u521d\u59cb\u5316\u91cc\u914d\u7f6e\u6307\u5b9a\u7684\u6ce8\u5165\u89c4\u5219\uff0c\u518d\u8c03\u7528\u5bf9\u5e94\u5355\u4f8b\u3002";b.egret_string_code[1029]="Function.prototype.bind - what is trying to be bound is not callable";b.egret_string_code[1030]="\u8be5API\u5df2\u5e9f\u5f03";
b.egret_string_code[1031]="setVolume\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528this.volume = value\u4ee3\u66ff";b.egret_string_code[1032]="getVolume\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528this.volume\u4ee3\u66ff";b.egret_string_code[1033]="\u8de8\u57df\u56fe\u7247\u4e0d\u53ef\u4ee5\u4f7f\u7528toDataURL\u6765\u8f6c\u6362\u6210base64";b.egret_string_code[1034]='\u97f3\u4e50\u6587\u4ef6\u89e3\u7801\u5931\u8d25\uff1a"{0}"\uff0c\u8bf7\u4f7f\u7528\u6807\u51c6\u7684\u8f6c\u6362\u5de5\u5177\u91cd\u65b0\u8f6c\u6362\u4e0bmp3\u3002';
b.egret_string_code[1035]="Native \u4e0b\u6682\u672a\u5b9e\u73b0\u6b64\u529f\u80fd\uff01";b.egret_string_code[2E3]="RES.createGroup()\u4f20\u5165\u4e86\u914d\u7f6e\u4e2d\u4e0d\u5b58\u5728\u7684\u952e\u503c: {0}";b.egret_string_code[2001]='RES\u52a0\u8f7d\u4e86\u4e0d\u5b58\u5728\u6216\u7a7a\u7684\u8d44\u6e90\u7ec4:"{0}"';b.egret_string_code[2002]="\u8bf7\u4e0d\u8981\u4f7f\u7528\u4e0d\u540c\u7684\u7c7b\u578b\u65b9\u5f0f\u6765\u52a0\u8f7d\u540c\u4e00\u4e2a\u7d20\u6750\uff01";b.egret_string_code[3E3]=
"\u4e3b\u9898\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25: {0}";b.egret_string_code[3001]="\u627e\u4e0d\u5230\u4e3b\u9898\u4e2d\u6240\u914d\u7f6e\u7684\u76ae\u80a4\u7c7b\u540d: {0}";b.egret_string_code[3002]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u96c6\u5408\u5143\u7d20\u7d22\u5f15\u8303\u56f4';b.egret_string_code[3003]="\u5728\u6b64\u7ec4\u4ef6\u4e2d\u4e0d\u53ef\u7528\uff0c\u82e5\u6b64\u7ec4\u4ef6\u4e3a\u5bb9\u5668\u7c7b\uff0c\u8bf7\u4f7f\u7528";b.egret_string_code[3004]="addChild(){0}addElement()\u4ee3\u66ff";
b.egret_string_code[3005]="addChildAt(){0}addElementAt()\u4ee3\u66ff";b.egret_string_code[3006]="removeChild(){0}removeElement()\u4ee3\u66ff";b.egret_string_code[3007]="removeChildAt(){0}removeElementAt()\u4ee3\u66ff";b.egret_string_code[3008]="setChildIndex(){0}setElementIndex()\u4ee3\u66ff";b.egret_string_code[3009]="swapChildren(){0}swapElements()\u4ee3\u66ff";b.egret_string_code[3010]="swapChildrenAt(){0}swapElementsAt()\u4ee3\u66ff";b.egret_string_code[3011]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u53ef\u89c6\u5143\u7d20\u7d22\u5f15\u8303\u56f4';
b.egret_string_code[3012]="\u6b64\u65b9\u6cd5\u5728Scroller\u7ec4\u4ef6\u5185\u4e0d\u53ef\u7528!";b.egret_string_code[3013]="UIStage\u662fGUI\u6839\u5bb9\u5668\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u6b64\u5b9e\u4f8b\u5728\u663e\u793a\u5217\u8868\u4e2d\uff01";b.egret_string_code[3014]="propNotPropOrStyle";b.egret_string_code[4E3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)";b.egret_string_code[4001]="Abstract class can not be instantiated!";b.egret_string_code[4002]=
"Unnamed data!";b.egret_string_code[4003]="Nonsupport version!";b.egret_string_code[4004]="Abstract method needs to be implemented in subclass!";b.egret_string_code[3100]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301WebSocket";b.egret_string_code[3101]="\u8bf7\u5148\u8fde\u63a5WebSocket";b.egret_string_code[3102]="\u8bf7\u5148\u8bbe\u7f6etype\u4e3a\u4e8c\u8fdb\u5236\u7c7b\u578b"})(egret||(egret={}));
var __extends=this.__extends||function(b,e){function d(){this.constructor=b}for(var a in e)e.hasOwnProperty(a)&&(b[a]=e[a]);d.prototype=e.prototype;b.prototype=new d};
(function(b){b.superSetter=function(b,d){for(var a=[],c=2;c<arguments.length;c++)a[c-2]=arguments[c];var h=Object.getPrototypeOf(b),c=h.__sets__;null==c&&(c=h.__sets__={});var k=c[d];if(k)return k.apply(b,a);for(h=Object.getPrototypeOf(h);!h.hasOwnProperty(d);)h=Object.getPrototypeOf(h);k=Object.getOwnPropertyDescriptor(h,d).set;c[d]=k;k.apply(b,a)};b.superGetter=function(b,d){var a=Object.getPrototypeOf(b),c=a.__gets__;null==c&&(c=a.__gets__={});var h=c[d];if(h)return h.call(b);for(a=Object.getPrototypeOf(a);!a.hasOwnProperty(d);)a=
Object.getPrototypeOf(a);h=Object.getOwnPropertyDescriptor(a,d).get;c[d]=h;return h.call(b)}})(egret||(egret={}));
(function(b){function e(a){for(var c=[],h=1;h<arguments.length;h++)c[h-1]=arguments[h];if(h=b.egret_string_code[a])for(var k=c.length,d=0;d<k;d++)h=h.replace("{"+d+"}",c[d]);return h}var d=function(){function a(){}a.openLogByType=function(c){null==a.logFuncs&&(a.logFuncs={error:console.error,debug:console.debug,warn:console.warn,info:console.info,log:console.log});switch(c){case a.OFF:console.error=function(){};case a.ERROR:console.warn=function(){};case a.WARN:console.info=function(){},console.log=
function(){};case a.INFO:console.debug=function(){}}switch(c){case a.ALL:console.debug=a.logFuncs.debug;case a.INFO:console.log=a.logFuncs.log,console.info=a.logFuncs.info;case a.WARN:console.warn=a.logFuncs.warn;case a.ERROR:console.error=a.logFuncs.error}};a.fatal=function(a,h){void 0===h&&(h=null);throw Error(b.Logger.getTraceCode("Fatal",a,h));};a.info=function(a,h){void 0===h&&(h=null);b.Logger.traceToConsole("Info",a,h)};a.warning=function(a,h){void 0===h&&(h=null);b.Logger.traceToConsole("Warning",
a,h)};a.traceToConsole=function(a,h,k){console.log(b.Logger.getTraceCode(a,h,k))};a.getTraceCode=function(a,h,k){return"["+a+"]"+h+(null==k?"":":"+k)};a.ALL="all";a.DEBUG="debug";a.INFO="info";a.WARN="warn";a.ERROR="error";a.OFF="off";return a}();b.Logger=d;d.prototype.__class__="egret.Logger";b.getString=e;b.$error=function(a){for(var c=[],h=1;h<arguments.length;h++)c[h-1]=arguments[h];c.unshift(a);(c=e.apply(null,c))?d.fatal(c):d.fatal(e(-1,a))};b.$warn=function(a){for(var c=[],h=1;h<arguments.length;h++)c[h-
1]=arguments[h];c.unshift(a);(c=e.apply(null,c))?d.warning(c):d.warning(e(-1,a))}})(egret||(egret={}));(function(b){var e=function(){function b(){this._hashCode=b.hashCount++}Object.defineProperty(b.prototype,"hashCode",{get:function(){return this._hashCode},enumerable:!0,configurable:!0});b.hashCount=1;return b}();b.HashObject=e;e.prototype.__class__="egret.HashObject"})(egret||(egret={}));
(function(b){var e=function(b){function a(a){void 0===a&&(a=300);b.call(this);this.objectPool=[];this._length=0;1>a&&(a=1);this.autoDisposeTime=a;this.frameCount=0}__extends(a,b);var c=a.prototype;c._checkFrame=function(){this.frameCount--;0>=this.frameCount&&this.dispose()};Object.defineProperty(c,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});c.push=function(h){var k=this.objectPool;-1==k.indexOf(h)&&(k.push(h),h.__recycle&&h.__recycle(),this._length++,0==this.frameCount&&
(this.frameCount=this.autoDisposeTime,a._callBackList.push(this)))};c.pop=function(){if(0==this._length)return null;this._length--;return this.objectPool.pop()};c.dispose=function(){0<this._length&&(this.objectPool=[],this._length=0);this.frameCount=0;var h=a._callBackList,k=h.indexOf(this);-1!=k&&h.splice(k,1)};a._callBackList=[];return a}(b.HashObject);b.Recycler=e;e.prototype.__class__="egret.Recycler"})(egret||(egret={}));
(function(b){b.__START_TIME;b.getTimer=function(){return Date.now()-b.__START_TIME}})(egret||(egret={}));
(function(b){b.__callLaterFunctionList=[];b.__callLaterThisList=[];b.__callLaterArgsList=[];b.callLater=function(e,d){for(var a=[],c=2;c<arguments.length;c++)a[c-2]=arguments[c];b.__callLaterFunctionList.push(e);b.__callLaterThisList.push(d);b.__callLaterArgsList.push(a)};b.__callAsyncFunctionList=[];b.__callAsyncThisList=[];b.__callAsyncArgsList=[];b.__callAsync=function(e,d){for(var a=[],c=2;c<arguments.length;c++)a[c-2]=arguments[c];b.__callAsyncFunctionList.push(e);b.__callAsyncThisList.push(d);
b.__callAsyncArgsList.push(a)}})(egret||(egret={}));
(function(b){var e=function(){function d(){}var a=d.prototype;a.call=function(a){this.callback&&this.callback.call(this.thisObject,a)};a.dispose=function(){this.thisObject=this.callback=null;d.__freeList.push(this)};d.push=function(a,h){var k;k=d.__freeList.length?d.__freeList.pop():new b.RenderCommand;k.callback=a;k.thisObject=h;b.MainContext.__DRAW_COMMAND_LIST.push(k)};d.__freeList=[];return d}();b.RenderCommand=e;e.prototype.__class__="egret.RenderCommand"})(egret||(egret={}));
(function(b){var e=function(d){function a(a,k,c){void 0===k&&(k=!1);void 0===c&&(c=!1);d.call(this);this.data=null;this._type="";this._cancelable=this._bubbles=!1;this._eventPhase=2;this._target=this._currentTarget=null;this._isPropagationImmediateStopped=this._isPropagationStopped=this._isDefaultPrevented=!1;this.isNew=!0;this._type=a;this._bubbles=k;this._cancelable=c}__extends(a,d);var c=a.prototype;Object.defineProperty(c,"type",{get:function(){return this._type},enumerable:!0,configurable:!0});
Object.defineProperty(c,"bubbles",{get:function(){return this._bubbles},enumerable:!0,configurable:!0});Object.defineProperty(c,"cancelable",{get:function(){return this._cancelable},enumerable:!0,configurable:!0});Object.defineProperty(c,"eventPhase",{get:function(){return this._eventPhase},enumerable:!0,configurable:!0});Object.defineProperty(c,"currentTarget",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0});Object.defineProperty(c,"target",{get:function(){return this._target},
enumerable:!0,configurable:!0});c.isDefaultPrevented=function(){return this._isDefaultPrevented};c.preventDefault=function(){this._cancelable&&(this._isDefaultPrevented=!0)};c.stopPropagation=function(){this._bubbles&&(this._isPropagationStopped=!0)};c.stopImmediatePropagation=function(){this._bubbles&&(this._isPropagationImmediateStopped=!0)};c._reset=function(){this.isNew?this.isNew=!1:(this._isPropagationImmediateStopped=this._isPropagationStopped=this._isDefaultPrevented=!1,this._currentTarget=
this._target=null,this._eventPhase=2)};c.__recycle=function(){this.data=this._target=this._currentTarget=null};a._dispatchByTarget=function(a,k,c,d,e,g){void 0===e&&(e=!1);void 0===g&&(g=!1);var n=a.eventRecycler;n||(n=a.eventRecycler=new b.Recycler);var p=n.pop();p?p._type=c:p=new a(c);p._bubbles=e;p._cancelable=g;if(d)for(var q in d)p[q]=d[q],null!==p[q]&&(d[q]=null);a=k.dispatchEvent(p);n.push(p);return a};a._getPropertyData=function(a){var k=a._props;k||(k=a._props={});return k};a.dispatchEvent=
function(h,k,c,b){void 0===c&&(c=!1);var d=a._getPropertyData(a);void 0!=b&&(d.data=b);a._dispatchByTarget(a,h,k,d,c)};a.ADDED_TO_STAGE="addedToStage";a.REMOVED_FROM_STAGE="removedFromStage";a.ADDED="added";a.REMOVED="removed";a.COMPLETE="complete";a.LOOP_COMPLETE="loopcomplete";a.ENTER_FRAME="enterFrame";a.RENDER="render";a.FINISH_RENDER="finishRender";a.FINISH_UPDATE_TRANSFORM="finishUpdateTransform";a.LEAVE_STAGE="leaveStage";a.RESIZE="resize";a.CHANGE="change";a.ACTIVATE="activate";a.DEACTIVATE=
"deactivate";a.CLOSE="close";a.CONNECT="connect";return a}(b.HashObject);b.Event=e;e.prototype.__class__="egret.Event"})(egret||(egret={}));
(function(b){var e=function(b){function a(a,h,k){void 0===h&&(h=!1);void 0===k&&(k=!1);b.call(this,a,h,k);this._status=0}__extends(a,b);Object.defineProperty(a.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0});a.dispatchHTTPStatusEvent=function(c,h){null==a.httpStatusEvent&&(a.httpStatusEvent=new a(a.HTTP_STATUS));a.httpStatusEvent._status=h;c.dispatchEvent(a.httpStatusEvent)};a.HTTP_STATUS="httpStatus";a.httpStatusEvent=null;return a}(b.Event);b.HTTPStatusEvent=
e;e.prototype.__class__="egret.HTTPStatusEvent"})(egret||(egret={}));(function(b){var e=function(b){function a(a,h,k){void 0===h&&(h=!1);void 0===k&&(k=!1);b.call(this,a,h,k)}__extends(a,b);a.SOUND_COMPLETE="soundComplete";return a}(b.Event);b.SoundEvent=e;e.prototype.__class__="egret.SoundEvent"})(egret||(egret={}));
(function(b){var e=function(b){function a(a,h,k){void 0===h&&(h=!1);void 0===k&&(k=!1);b.call(this,a,h,k)}__extends(a,b);a.FOCUS_IN="focusIn";a.FOCUS_OUT="focusOut";return a}(b.Event);b.FocusEvent=e;e.prototype.__class__="egret.FocusEvent"})(egret||(egret={}));
(function(b){var e=function(d){function a(a,h,k){void 0===h&&(h=!1);void 0===k&&(k=!1);d.call(this,a,h,k)}__extends(a,d);a.dispatchIOErrorEvent=function(c){b.Event._dispatchByTarget(a,c,a.IO_ERROR)};a.IO_ERROR="ioError";return a}(b.Event);b.IOErrorEvent=e;e.prototype.__class__="egret.IOErrorEvent"})(egret||(egret={}));
(function(b){var e=function(d){function a(a,k,c,b,e,g,n,p,q,r){void 0===k&&(k=!0);void 0===c&&(c=!0);void 0===b&&(b=0);void 0===e&&(e=0);void 0===g&&(g=0);void 0===n&&(n=!1);void 0===p&&(p=!1);void 0===r&&(r=!1);d.call(this,a,k,c);this._stageY=this._stageX=0;this.touchPointID=NaN;this.touchDown=this.altKey=this.shiftKey=this.ctrlKey=!1;this.touchPointID=b;this._stageX=e;this._stageY=g;this.ctrlKey=n;this.altKey=p;this.touchDown=r}__extends(a,d);var c=a.prototype;Object.defineProperty(c,"stageX",{get:function(){return this._stageX},
enumerable:!0,configurable:!0});Object.defineProperty(c,"stageY",{get:function(){return this._stageY},enumerable:!0,configurable:!0});Object.defineProperty(c,"localX",{get:function(){return this._currentTarget.globalToLocal(this._stageX,this._stageY,b.Point.identity).x},enumerable:!0,configurable:!0});Object.defineProperty(c,"localY",{get:function(){return this._currentTarget.globalToLocal(this._stageX,this._stageY,b.Point.identity).y},enumerable:!0,configurable:!0});a.dispatchTouchEvent=function(h,
k,c,d,e,g,n,p,q){void 0===c&&(c=0);void 0===d&&(d=0);void 0===e&&(e=0);void 0===g&&(g=!1);void 0===n&&(n=!1);void 0===p&&(p=!1);void 0===q&&(q=!1);var r=b.Event._getPropertyData(a);r.touchPointID=c;r._stageX=d;r._stageY=e;r.ctrlKey=g;r.altKey=n;r.shiftKey=p;r.touchDown=q;b.Event._dispatchByTarget(a,h,k,r,!0,!0)};a.TOUCH_TAP="touchTap";a.TOUCH_MOVE="touchMove";a.TOUCH_BEGIN="touchBegin";a.TOUCH_END="touchEnd";a.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside";a.TOUCH_ROLL_OUT="touchRollOut";a.TOUCH_ROLL_OVER=
"touchRollOver";a.TOUCH_OUT="touchOut";a.TOUCH_OVER="touchOver";return a}(b.Event);b.TouchEvent=e;e.prototype.__class__="egret.TouchEvent"})(egret||(egret={}));(function(b){var e=function(d){function a(a,h,k){void 0===h&&(h=!1);void 0===k&&(k=!1);d.call(this,a,h,k)}__extends(a,d);a.dispatchTimerEvent=function(c,h){b.Event._dispatchByTarget(a,c,h)};a.TIMER="timer";a.TIMER_COMPLETE="timerComplete";return a}(b.Event);b.TimerEvent=e;e.prototype.__class__="egret.TimerEvent"})(egret||(egret={}));
(function(b){var e=function(d){function a(a,h,k,b){void 0===h&&(h=!1);void 0===k&&(k=!1);void 0===b&&(b="");d.call(this,a,h,k);this.text=b}__extends(a,d);a.dispatchTextEvent=function(c,h,k){var d=b.Event._getPropertyData(a);d.text=k;b.Event._dispatchByTarget(a,c,h,d)};a.LINK="link";return a}(b.Event);b.TextEvent=e;e.prototype.__class__="egret.TextEvent"})(egret||(egret={}));
(function(b){var e=function(d){function a(a,h,k,b,e){void 0===h&&(h=!1);void 0===k&&(k=!1);void 0===b&&(b=0);void 0===e&&(e=0);d.call(this,a,h,k);this.bytesTotal=this.bytesLoaded=0;this.bytesLoaded=b;this.bytesTotal=e}__extends(a,d);a.dispatchProgressEvent=function(c,h,k,d){void 0===k&&(k=0);void 0===d&&(d=0);b.Event._dispatchByTarget(a,c,h,{bytesLoaded:k,bytesTotal:d})};a.PROGRESS="progress";a.SOCKET_DATA="socketData";return a}(b.Event);b.ProgressEvent=e;e.prototype.__class__="egret.ProgressEvent"})(egret||
(egret={}));(function(b){var e=function(){function b(){}b.CAPTURING_PHASE=1;b.AT_TARGET=2;b.BUBBLING_PHASE=3;return b}();b.EventPhase=e;e.prototype.__class__="egret.EventPhase"})(egret||(egret={}));
(function(b){var e=function(d){function a(a){void 0===a&&(a=null);d.call(this);this._captureEventsMap=this._eventsMap=this._eventTarget=null;this._eventTarget=a?a:this}__extends(a,d);var c=a.prototype;c.addEventListener=function(a,k,c,d,e){void 0===d&&(d=!1);void 0===e&&(e=0);"undefined"===typeof d&&(d=!1);"undefined"===typeof e&&(e=0);k||b.$error(1010);d?(this._captureEventsMap||(this._captureEventsMap={}),d=this._captureEventsMap):(this._eventsMap||(this._eventsMap={}),d=this._eventsMap);var g=
d[a];g||(g=d[a]=[]);this._insertEventBin(g,k,c,e)};c._insertEventBin=function(a,k,c,b,d){void 0===d&&(d=void 0);for(var e=-1,n=a.length,p=0;p<n;p++){var q=a[p];if(q.listener==k&&q.thisObject==c&&q.display==d)return!1;-1==e&&q.priority<b&&(e=p)}k={listener:k,thisObject:c,priority:b};d&&(k.display=d);-1!=e?a.splice(e,0,k):a.push(k);return!0};c.removeEventListener=function(a,k,c,b){void 0===b&&(b=!1);if(b=b?this._captureEventsMap:this._eventsMap){var d=b[a];d&&(this._removeEventBin(d,k,c),0==d.length&&
delete b[a])}};c._removeEventBin=function(a,k,c,b,d){void 0===b&&(b=void 0);void 0===d&&(d=0);for(var e=a.length;d<e;d++){var n=a[d];if(n.listener==k&&n.thisObject==c&&n.display==b)return a.splice(d,1),!0}return!1};c.hasEventListener=function(a){return!!(this._eventsMap&&this._eventsMap[a]||this._captureEventsMap&&this._captureEventsMap[a])};c.willTrigger=function(a){return this.hasEventListener(a)};c.dispatchEvent=function(a){a._reset();a._target=this._eventTarget;a._currentTarget=this._eventTarget;
return this._notifyListener(a)};c._notifyListener=function(a){var k=1==a._eventPhase?this._captureEventsMap:this._eventsMap;if(!k)return!0;k=k[a._type];if(!k)return!0;var c=k.length;if(0==c)return!0;for(var k=k.concat(),b=0;b<c;b++){var d=k[b];d.listener.call(d.thisObject,a);if(a._isPropagationImmediateStopped)break}return!a._isDefaultPrevented};c.dispatchEventWith=function(a,c,d){void 0===c&&(c=!1);b.Event.dispatchEvent(this,a,c,d)};return a}(b.HashObject);b.EventDispatcher=e;e.prototype.__class__=
"egret.EventDispatcher"})(egret||(egret={}));
(function(b){var e=function(d){function a(){d.call(this);this.stage=this.deviceContext=this.netContext=this.touchContext=this.rendererContext=null;this.reuseEvent=new b.Event("")}__extends(a,d);var c=a.prototype;c.run=function(){b.Ticker.getInstance().run();b.Ticker.getInstance().register(this.renderLoop,this,Number.NEGATIVE_INFINITY);b.Ticker.getInstance().register(this.broadcastEnterFrame,this,Number.POSITIVE_INFINITY);this.touchContext.run();this._profileInstance=b.Profiler.getInstance()};c.renderLoop=
function(h){if(0<b.__callLaterFunctionList.length){var c=b.__callLaterFunctionList;b.__callLaterFunctionList=[];var d=b.__callLaterThisList;b.__callLaterThisList=[];var e=b.__callLaterArgsList;b.__callLaterArgsList=[]}h=this.stage;var f=a.cachedEvent;f._type=b.Event.RENDER;this.dispatchEvent(f);b.Stage._invalidateRenderFlag&&(this.broadcastRender(),b.Stage._invalidateRenderFlag=!1);c&&this.doCallLaterList(c,d,e);0<b.__callAsyncFunctionList.length&&this.doCallAsyncList();c=this.rendererContext;c.onRenderStart();
c.clearScreen();a.__DRAW_COMMAND_LIST=[];a._renderLoopPhase="updateTransform";h._updateTransform();a._renderLoopPhase="draw";f._type=b.Event.FINISH_UPDATE_TRANSFORM;this.dispatchEvent(f);a.__use_new_draw?this._draw(c):h._draw(c);f._type=b.Event.FINISH_RENDER;this.dispatchEvent(f);this._profileInstance._isRunning&&this._profileInstance._drawProfiler(c);c.onRenderFinish()};c._draw=function(h){for(var c=a.__DRAW_COMMAND_LIST,b=c.length,d=0;d<b;d++){var e=c[d];e.call(h);e.dispose()}};c.broadcastEnterFrame=
function(a){a=this.reuseEvent;a._type=b.Event.ENTER_FRAME;this.dispatchEvent(a);for(var c=b.DisplayObject._enterFrameCallBackList.concat(),d=c.length,e=0;e<d;e++){var f=c[e];a._target=f.display;a._currentTarget=f.display;f.listener.call(f.thisObject,a)}c=b.Recycler._callBackList;for(e=c.length-1;0<=e;e--)c[e]._checkFrame()};c.broadcastRender=function(){var a=this.reuseEvent;a._type=b.Event.RENDER;for(var c=b.DisplayObject._renderCallBackList.concat(),d=c.length,e=0;e<d;e++){var f=c[e],g=f.display;
a._target=g;a._currentTarget=g;f.listener.call(f.thisObject,a)}};c.doCallLaterList=function(a,c,b){for(var d=a.length,e=0;e<d;e++){var g=a[e];null!=g&&g.apply(c[e],b[e])}};c.doCallAsyncList=function(){var a=b.__callAsyncFunctionList.concat(),c=b.__callAsyncThisList.concat(),d=b.__callAsyncArgsList.concat();b.__callAsyncFunctionList.length=0;b.__callAsyncThisList.length=0;for(var e=b.__callAsyncArgsList.length=0;e<a.length;e++){var f=a[e];null!=f&&f.apply(c[e],d[e])}};a.deviceType=null;a.DEVICE_PC=
"web";a.DEVICE_MOBILE="native";a.RUNTIME_HTML5="runtimeHtml5";a.RUNTIME_NATIVE="runtimeNative";a.__DRAW_COMMAND_LIST=[];a.__use_new_draw=!0;a.cachedEvent=new b.Event("");return a}(b.EventDispatcher);b.MainContext=e;e.prototype.__class__="egret.MainContext"})(egret||(egret={}));var testDeviceType=function(){if(!this.navigator)return!0;var b=navigator.userAgent.toLowerCase();return-1!=b.indexOf("mobile")||-1!=b.indexOf("android")},testRuntimeType=function(){return this.navigator?!0:!1};
egret.MainContext.instance=new egret.MainContext;egret.MainContext.deviceType=testDeviceType()?egret.MainContext.DEVICE_MOBILE:egret.MainContext.DEVICE_PC;egret.MainContext.runtimeType=testRuntimeType()?egret.MainContext.RUNTIME_HTML5:egret.MainContext.RUNTIME_NATIVE;delete testDeviceType;delete testRuntimeType;
(function(b){var e=function(){function d(){this._preDrawCount=this._updateTransformPerformanceCost=this._renderPerformanceCost=this._logicPerformanceCost=this._lastTime=0;this._calculatePreDrawCount=!0;this._txt=null;this._tick=0;this._maxDeltaTime=500;this._totalDeltaTime=0;this._isRunning=!1}var a=d.prototype;d.getInstance=function(){null==d.instance&&(d.instance=new d);return d.instance};a.stop=function(){if(this._isRunning){this._isRunning=!1;b.Ticker.getInstance().unregister(this.update,this);
var a=b.MainContext.instance;a.removeEventListener(b.Event.ENTER_FRAME,this.onEnterFrame,this);a.removeEventListener(b.Event.RENDER,this.onStartRender,this);a.removeEventListener(b.Event.FINISH_RENDER,this.onFinishRender,this);a.removeEventListener(b.Event.FINISH_UPDATE_TRANSFORM,this.onFinishUpdateTransform,this)}};a.run=function(){null==this._txt&&(this._txt=new b.TextField,this._txt.size=28,this._txt.multiline=!0,this._txt._DO_Props_._parent=new b.DisplayObjectContainer);if(!this._isRunning){this._isRunning=
!0;b.Ticker.getInstance().register(this.update,this);var a=b.MainContext.instance;a.addEventListener(b.Event.ENTER_FRAME,this.onEnterFrame,this);a.addEventListener(b.Event.RENDER,this.onStartRender,this);a.addEventListener(b.Event.FINISH_RENDER,this.onFinishRender,this);a.addEventListener(b.Event.FINISH_UPDATE_TRANSFORM,this.onFinishUpdateTransform,this)}};a._drawProfiler=function(a){"_drawWebGL"in a&&a._drawWebGL();this._calculatePreDrawCount=!1;this._txt._updateTransform();this._txt._draw(a)};a._setTxtFontSize=
function(a){this._txt.size=a};a.onEnterFrame=function(a){this._lastTime=b.getTimer()};a.onStartRender=function(a){a=b.getTimer();this._logicPerformanceCost=a-this._lastTime;this._lastTime=a};a.onFinishUpdateTransform=function(a){a=b.getTimer();this._updateTransformPerformanceCost=a-this._lastTime;this._lastTime=a};a.onFinishRender=function(a){a=b.getTimer();this._renderPerformanceCost=a-this._lastTime;this._lastTime=a};a.update=function(a){this._tick++;this._totalDeltaTime+=a;if(this._totalDeltaTime>=
this._maxDeltaTime){a=this._preDrawCount.toString();var h=Math.ceil(this._logicPerformanceCost).toString()+","+Math.ceil(this._updateTransformPerformanceCost).toString()+","+Math.ceil(this._renderPerformanceCost).toString()+","+Math.ceil(b.MainContext.instance.rendererContext.renderCost).toString();this._txt.text="draw:"+a+"\ncost:"+h+"\nFPS:"+Math.floor(1E3*this._tick/this._totalDeltaTime).toString();this._tick=this._totalDeltaTime=0}this._preDrawCount=0;this._calculatePreDrawCount=!0};a.onDrawImage=
function(){this._calculatePreDrawCount&&this._preDrawCount++};return d}();b.Profiler=e;e.prototype.__class__="egret.Profiler"})(egret||(egret={}));
(function(b){var e=function(d){function a(){d.call(this);this._timeScale=1;this._paused=!1;this._callIndex=-1;this.callBackList=[];null!=a.instance&&b.$error(1002)}__extends(a,d);var c=a.prototype;c.run=function(){b.__START_TIME=(new Date).getTime();b.MainContext.instance.deviceContext.executeMainLoop(this.update,this)};c.update=function(a){if(!this._paused){a*=this._timeScale;this._callList=this.callBackList.concat();for(this._callIndex=0;this._callIndex<this._callList.length;this._callIndex++){var c=
this._callList[this._callIndex];c.listener.call(c.thisObject,a)}this._callIndex=-1;this._callList=null}};c.register=function(a,c,b){void 0===b&&(b=0);this._insertEventBin(this.callBackList,a,c,b)};c.unregister=function(a,c){this._removeEventBin(this.callBackList,a,c);this._callList&&-1<this._callIndex&&this._removeEventBin(this._callList,a,c,null,this._callIndex+1)};c.setTimeout=function(a,c,d){for(var e=[],f=3;f<arguments.length;f++)e[f-3]=arguments[f];b.$warn(1003);b.setTimeout.apply(null,[a,c,
d].concat(e))};c.setTimeScale=function(a){this._timeScale=a};c.getTimeScale=function(){return this._timeScale};c.pause=function(){this._paused=!0};c.resume=function(){this._paused=!1};a.getInstance=function(){null==a.instance&&(a.instance=new a);return a.instance};return a}(b.EventDispatcher);b.Ticker=e;e.prototype.__class__="egret.Ticker"})(egret||(egret={}));
(function(b){var e=function(){function b(){}b.LEFT="left";b.RIGHT="right";b.CENTER="center";b.JUSTIFY="justify";b.CONTENT_JUSTIFY="contentJustify";return b}();b.HorizontalAlign=e;e.prototype.__class__="egret.HorizontalAlign"})(egret||(egret={}));(function(b){var e=function(){function b(){}b.TOP="top";b.BOTTOM="bottom";b.MIDDLE="middle";b.JUSTIFY="justify";b.CONTENT_JUSTIFY="contentJustify";return b}();b.VerticalAlign=e;e.prototype.__class__="egret.VerticalAlign"})(egret||(egret={}));
(function(b){var e=function(d){function a(a,c){void 0===c&&(c=0);d.call(this);this._currentCount=0;this._running=!1;this.lastTime=0;this.delay=a;this.repeatCount=c}__extends(a,d);var c=a.prototype;Object.defineProperty(c,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0});Object.defineProperty(c,"running",{get:function(){return this._running},enumerable:!0,configurable:!0});c.reset=function(){this.stop();this._currentCount=0};c.start=function(){this._running||
(this.lastTime=b.getTimer(),b.Ticker.getInstance().register(this.onEnterFrame,this),this._running=!0)};c.stop=function(){this._running&&(b.Ticker.getInstance().unregister(this.onEnterFrame,this),this._running=!1)};c.onEnterFrame=function(a){a=b.getTimer();a-this.lastTime>this.delay&&(this.lastTime=a,this._currentCount++,b.TimerEvent.dispatchTimerEvent(this,b.TimerEvent.TIMER),0<this.repeatCount&&this._currentCount>=this.repeatCount&&(this.stop(),b.TimerEvent.dispatchTimerEvent(this,b.TimerEvent.TIMER_COMPLETE)))};
return a}(b.EventDispatcher);b.Timer=e;e.prototype.__class__="egret.Timer"})(egret||(egret={}));
(function(b){function e(b){b=b.prototype?b.prototype:Object.getPrototypeOf(b);if(b.hasOwnProperty("__class__"))return b.__class__;var a=b.constructor.toString(),c=a.indexOf("("),a=a.substring(9,c);Object.defineProperty(b,"__class__",{value:a,enumerable:!1,writable:!0});return a}b.getQualifiedClassName=e;b.getQualifiedSuperclassName=function(b){b=b.prototype?b.prototype:Object.getPrototypeOf(b);if(b.hasOwnProperty("__superclass__"))return b.__superclass__;var a=Object.getPrototypeOf(b);if(null==a)return null;
a=e(a.constructor);if(!a)return null;Object.defineProperty(b,"__superclass__",{value:a,enumerable:!1,writable:!0});return a}})(egret||(egret={}));(function(b){var e={};b.getDefinitionByName=function(b){if(!b)return null;var a=e[b];if(a)return a;for(var c=b.split("."),h=c.length,a=__global,k=0;k<h;k++)if(a=a[c[k]],!a)return null;return e[b]=a}})(egret||(egret={}));var __global=__global||this;
(function(b){function e(a){for(var h in d){var k=d[h];k.delay-=a;0>=k.delay&&(k.listener.apply(k.thisObject,k.params),delete d[h])}}var d={},a=0;b.setTimeout=function(c,h,k){for(var m=[],l=3;l<arguments.length;l++)m[l-3]=arguments[l];m={listener:c,thisObject:h,delay:k,params:m};0==a&&b.Ticker.getInstance().register(e,null);a++;d[a]=m;return a};b.clearTimeout=function(a){delete d[a]}})(egret||(egret={}));
(function(b){function e(a){for(var h in d){var k=d[h];k.delay-=a;0>=k.delay&&(k.delay=k.originDelay,k.listener.apply(k.thisObject,k.params))}}var d={},a=0;b.setInterval=function(c,h,k){for(var m=[],l=3;l<arguments.length;l++)m[l-3]=arguments[l];m={listener:c,thisObject:h,delay:k,originDelay:k,params:m};0==a&&b.Ticker.getInstance().register(e,null);a++;d[a]=m;return a};b.clearInterval=function(a){delete d[a]}})(egret||(egret={}));
(function(b){b.hasDefinition=function(e){return b.getDefinitionByName(e)?!0:!1}})(egret||(egret={}));(function(b){b.toColorString=function(b){if(isNaN(b)||0>b)b=0;for(b=b.toString(16).toUpperCase();6<b.length;)b=b.slice(1,b.length);for(;6>b.length;)b="0"+b;return"#"+b}})(egret||(egret={}));
(function(b){var e=function(d){function a(a,c,b,e,f,g){void 0===a&&(a=1);void 0===c&&(c=0);void 0===b&&(b=0);void 0===e&&(e=1);void 0===f&&(f=0);void 0===g&&(g=0);d.call(this);this.a=a;this.b=c;this.c=b;this.d=e;this.tx=f;this.ty=g}__extends(a,d);var c=a.prototype;c.prepend=function(a,c,b,d,e,g){var n=this.tx;if(1!=a||0!=c||0!=b||1!=d){var p=this.a,q=this.c;this.a=p*a+this.b*b;this.b=p*c+this.b*d;this.c=q*a+this.d*b;this.d=q*c+this.d*d}this.tx=n*a+this.ty*b+e;this.ty=n*c+this.ty*d+g;return this};
c.append=function(a,c,b,d,e,g){var n=this.a,p=this.b,q=this.c,r=this.d;if(1!=a||0!=c||0!=b||1!=d)this.a=a*n+c*q,this.b=a*p+c*r,this.c=b*n+d*q,this.d=b*p+d*r;this.tx=e*n+g*q+this.tx;this.ty=e*p+g*r+this.ty;return this};c.prependTransform=function(a,c,d,e,f,g,n,p,q){if(f%360){var r=b.NumberUtils.cos(f);f=b.NumberUtils.sin(f)}else r=1,f=0;if(p||q)this.tx-=p,this.ty-=q;g||n?(this.prepend(r*d,f*d,-f*e,r*e,0,0),this.prepend(b.NumberUtils.cos(n),b.NumberUtils.sin(n),-b.NumberUtils.sin(g),b.NumberUtils.cos(g),
a,c)):this.prepend(r*d,f*d,-f*e,r*e,a,c);return this};c.appendTransform=function(a,c,d,e,f,g,n,p,q){if(f%360){var r=b.NumberUtils.cos(f);f=b.NumberUtils.sin(f)}else r=1,f=0;g||n?(this.append(b.NumberUtils.cos(n),b.NumberUtils.sin(n),-b.NumberUtils.sin(g),b.NumberUtils.cos(g),a,c),this.append(r*d,f*d,-f*e,r*e,0,0)):this.append(r*d,f*d,-f*e,r*e,a,c);if(p||q)this.tx-=p*this.a+q*this.c,this.ty-=p*this.b+q*this.d;return this};c.rotate=function(a){var c=Math.cos(a);a=Math.sin(a);var b=this.a,d=this.c,e=
this.tx;this.a=b*c-this.b*a;this.b=b*a+this.b*c;this.c=d*c-this.d*a;this.d=d*a+this.d*c;this.tx=e*c-this.ty*a;this.ty=e*a+this.ty*c;return this};c.skew=function(a,c){this.append(b.NumberUtils.cos(c),b.NumberUtils.sin(c),-b.NumberUtils.sin(a),b.NumberUtils.cos(a),0,0);return this};c.scale=function(a,c){this.a*=a;this.d*=c;this.c*=a;this.b*=c;this.tx*=a;this.ty*=c;return this};c.translate=function(a,c){this.tx+=a;this.ty+=c;return this};c.identity=function(){this.a=this.d=1;this.b=this.c=this.tx=this.ty=
0;return this};c.identityMatrix=function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.d=a.d;this.tx=a.tx;this.ty=a.ty;return this};c.invert=function(){var a=this.a,c=this.b,b=this.c,d=this.d,e=this.tx,g=a*d-c*b;this.a=d/g;this.b=-c/g;this.c=-b/g;this.d=a/g;this.tx=(b*this.ty-d*e)/g;this.ty=-(a*this.ty-c*e)/g;return this};a.transformCoords=function(a,c,d){var e=b.Point.identity;e.x=a.a*c+a.c*d+a.tx;e.y=a.d*d+a.b*c+a.ty;return e};c.toArray=function(a){this.array||(this.array=new Float32Array(9));a?(this.array[0]=
this.a,this.array[1]=this.b,this.array[2]=0,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=0,this.array[6]=this.tx,this.array[7]=this.ty):(this.array[0]=this.a,this.array[1]=this.b,this.array[2]=this.tx,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=this.ty,this.array[6]=0,this.array[7]=0);this.array[8]=1;return this.array};c.setTo=function(a,c,b,d,e,g){this.a=a;this.b=c;this.c=b;this.d=d;this.tx=e;this.ty=g};c.copyFrom=function(a){this.identityMatrix(a)};c.clone=function(){return new a(this.a,
this.b,this.c,this.d,this.tx,this.ty)};c.concat=function(a){var c=this.a,b=this.b,d=this.c,e=this.d,g=this.tx,n=this.ty,p=a.a,q=a.b,r=a.c,s=a.d,t=c*p,u=0,z=0,w=e*s,x=g*p+a.tx;a=n*s+a.ty;if(0!=b||0!=d||0!=q||0!=r)t+=b*r,w+=d*q,u+=c*q+b*s,z+=d*p+e*r,x+=n*r,a+=g*q;this.a=t;this.b=u;this.c=z;this.d=w;this.tx=x;this.ty=a};c.deltaTransformPoint=function(a){return new b.Point(this.a*a.x+this.c*a.y,this.b*a.x+this.d*a.y)};c.transformPoint=function(a){return new b.Point(this.a*a.x+this.c*a.y+this.tx,this.b*
a.x+this.d*a.y+this.ty)};c.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"};c.createBox=function(a,c,d,e,f){void 0===d&&(d=0);void 0===e&&(e=0);void 0===f&&(f=0);if(0!==d){d/=b.Matrix.DEG_TO_RAD;var g=b.NumberUtils.cos(d);d=b.NumberUtils.sin(d);this.a=g*a;this.b=d*c;this.c=-d*a;this.d=g*c}else this.a=a,this.c=this.b=0,this.d=c;this.tx=e;this.ty=f};c.createGradientBox=function(a,c,b,d,e){void 0===b&&(b=0);void 0===d&&(d=0);void 0===
e&&(e=0);this.createBox(a/1638.4,c/1638.4,b,d+a/2,e+c/2)};a.identity=new a;a.DEG_TO_RAD=Math.PI/180;return a}(b.HashObject);b.Matrix=e;e.prototype.__class__="egret.Matrix"})(egret||(egret={}));
(function(b){var e=function(d){function a(a,c){void 0===a&&(a=0);void 0===c&&(c=0);d.call(this);this.x=a;this.y=c}__extends(a,d);var c=a.prototype;c.clone=function(){return new a(this.x,this.y)};c.equals=function(a){return this.x==a.x&&this.y==a.y};a.distance=function(a,c){return Math.sqrt((a.x-c.x)*(a.x-c.x)+(a.y-c.y)*(a.y-c.y))};c.setTo=function(a,c){this.x=a;this.y=c};c.copyFrom=function(a){this.x=a.x;this.y=a.y};Object.defineProperty(c,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*
this.y)},enumerable:!0,configurable:!0});c.add=function(h){return new a(this.x+h.x,this.y+h.y)};a.interpolate=function(h,c,b){var d=1-b;return new a(h.x*b+c.x*d,h.y*b+c.y*d)};c.normalize=function(a){if(0!=this.x||0!=this.y)a/=this.length,this.x*=a,this.y*=a};c.offset=function(a,c){this.x+=a;this.y+=c};a.polar=function(h,c){return new a(h*b.NumberUtils.cos(c/b.Matrix.DEG_TO_RAD),h*b.NumberUtils.sin(c/b.Matrix.DEG_TO_RAD))};c.subtract=function(h){return new a(this.x-h.x,this.y-h.y)};c.toString=function(){return"(x="+
this.x+", y="+this.y+")"};a.identity=new a(0,0);return a}(b.HashObject);b.Point=e;e.prototype.__class__="egret.Point"})(egret||(egret={}));
(function(b){var e=function(d){function a(a,c,b,e){void 0===a&&(a=0);void 0===c&&(c=0);void 0===b&&(b=0);void 0===e&&(e=0);d.call(this);this.x=a;this.y=c;this.width=b;this.height=e}__extends(a,d);var c=a.prototype;Object.defineProperty(c,"left",{get:function(){return this.x},set:function(a){this.width+=this.x-a;this.x=a},enumerable:!0,configurable:!0});Object.defineProperty(c,"right",{get:function(){return this.x+this.width},set:function(a){this.width=a-this.x},enumerable:!0,configurable:!0});Object.defineProperty(c,
"top",{get:function(){return this.y},set:function(a){this.height+=this.y-a;this.y=a},enumerable:!0,configurable:!0});Object.defineProperty(c,"bottom",{get:function(){return this.y+this.height},set:function(a){this.height=a-this.y},enumerable:!0,configurable:!0});Object.defineProperty(c,"topLeft",{get:function(){return new b.Point(this.left,this.top)},set:function(a){this.top=a.y;this.left=a.x},enumerable:!0,configurable:!0});Object.defineProperty(c,"bottomRight",{get:function(){return new b.Point(this.right,
this.bottom)},set:function(a){this.bottom=a.y;this.right=a.x},enumerable:!0,configurable:!0});c.initialize=function(a,c,b,d){this.x=a;this.y=c;this.width=b;this.height=d;return this};c.contains=function(a,c){return this.x<=a&&this.x+this.width>=a&&this.y<=c&&this.y+this.height>=c};c.intersects=function(a){return Math.max(this.x,a.x)<=Math.min(this.right,a.right)&&Math.max(this.y,a.y)<=Math.min(this.bottom,a.bottom)};c.setEmpty=function(){this.height=this.width=this.y=this.x=0};c.clone=function(){return new a(this.x,
this.y,this.width,this.height)};c.containsPoint=function(a){return this.x<a.x&&this.x+this.width>a.x&&this.y<a.y&&this.y+this.height>a.y?!0:!1};c.setTo=function(a,c,b,d){this.initialize(a,c,b,d)};c.copyFrom=function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};c.inflate=function(a,c){this.x-=a;this.width+=2*a;this.y-=c;this.height+=2*c};c.isEmpty=function(){return 0==this.width||0==this.height};c.containsRect=function(a){var c=a.x+a.width,b=a.y+a.height,d=this.x+this.width,e=
this.y+this.height;return a.x>=this.x&&a.x<d&&a.y>=this.y&&a.y<e&&c>this.x&&c<=d&&b>this.y&&b<=e};c.equals=function(a){return this===a?!0:this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height};c.inflatePoint=function(a){this.inflate(a.x,a.y)};c.intersection=function(a){var c=this.clone(),b=c.x,d=c.y,e=a.x,g=a.y,n=Math.max(b,e),b=Math.min(b+c.width,e+a.width);if(n<=b&&(e=Math.max(d,g),a=Math.min(d+c.height,g+a.height),e<=a))return c.setTo(n,e,b-n,a-e),c;c.setEmpty();return c};c.offset=
function(a,c){this.x+=a;this.y+=c};c.offsetPoint=function(a){this.offset(a.x,a.y)};c.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"};c.union=function(a){var c=this.clone();if(a.isEmpty())return c;if(c.isEmpty())return c.copyFrom(a),c;var b=Math.min(c.x,a.x),d=Math.min(c.y,a.y);c.setTo(b,d,Math.max(c.right,a.right)-b,Math.max(c.bottom,a.bottom)-d);return c};a.identity=new a(0,0,0,0);return a}(b.HashObject);b.Rectangle=e;e.prototype.__class__=
"egret.Rectangle"})(egret||(egret={}));
(function(b){var e=function(b){function a(a,c,e,l,f,g,n,p){void 0===a&&(a=1);void 0===c&&(c=1);void 0===e&&(e=1);void 0===l&&(l=1);void 0===f&&(f=0);void 0===g&&(g=0);void 0===n&&(n=0);void 0===p&&(p=0);b.call(this);this._redMultiplier=a;this._greenMultiplier=c;this._blueMultiplier=e;this._alphaMultiplier=l;this._redOffset=f;this._greenOffset=g;this._blueOffset=n;this._alphaOffset=p}__extends(a,b);var c=a.prototype;Object.defineProperty(c,"alphaMultiplier",{get:function(){return this._alphaMultiplier},set:function(a){this._alphaMultiplier=
a},enumerable:!0,configurable:!0});Object.defineProperty(c,"alphaOffset",{get:function(){return this._alphaOffset},set:function(a){this._alphaOffset=a},enumerable:!0,configurable:!0});Object.defineProperty(c,"blueMultiplier",{get:function(){return this._blueMultiplier},set:function(a){this._blueMultiplier=a},enumerable:!0,configurable:!0});Object.defineProperty(c,"blueOffset",{get:function(){return this._blueOffset},set:function(a){this._blueOffset=a},enumerable:!0,configurable:!0});Object.defineProperty(c,
"greenMultiplier",{get:function(){return this._greenMultiplier},set:function(a){this._greenMultiplier=a},enumerable:!0,configurable:!0});Object.defineProperty(c,"greenOffset",{get:function(){return this._greenOffset},set:function(a){this._greenOffset=a},enumerable:!0,configurable:!0});Object.defineProperty(c,"redMultiplier",{get:function(){return this._redMultiplier},set:function(a){this._redMultiplier=a},enumerable:!0,configurable:!0});Object.defineProperty(c,"redOffset",{get:function(){return this._redOffset},
set:function(a){this._redOffset=a},enumerable:!0,configurable:!0});Object.defineProperty(c,"color",{get:function(){return this._redOffset<<16+this._greenOffset<<8+this._blueOffset},enumerable:!0,configurable:!0});c.identityColorTransform=function(a){this._alphaMultiplier=a._alphaMultiplier;this._alphaOffset=a._alphaOffset;this._redMultiplier=a._redMultiplier;this._redOffset=a._redOffset;this._greenMultiplier=a._greenMultiplier;this._greenOffset=a._greenOffset;this._blueMultiplier=a._blueMultiplier;
this._blueOffset=a._blueOffset};c.concat=function(a){this._redMultiplier*=a._redMultiplier;this._greenMultiplier*=a._greenMultiplier;this._blueMultiplier*=a._blueMultiplier;this._alphaMultiplier*=a._alphaMultiplier;this._redOffset+=a._redOffset;this._greenOffset+=a._greenOffset;this._blueOffset+=a._blueOffset;this._alphaOffset+=a._alphaOffset};c.toString=function(){return"(redMultiplier="+this._redMultiplier+", greenMultiplier="+this._greenMultiplier+", blueMultiplier="+this._blueMultiplier+", alphaMultiplier="+
this._alphaMultiplier+", redOffset="+this._redOffset+", greenOffset="+this._greenOffset+", blueOffset="+this._blueOffset+", alphaOffset="+this._alphaOffset+")"};return a}(b.HashObject);b.ColorTransform=e;e.prototype.__class__="egret.ColorTransform"})(egret||(egret={}));
(function(b){var e=function(d){function a(a){d.call(this);this._matrix=new b.Matrix;this._matrix2=new b.Matrix;this._colorTransform=new b.ColorTransform;this._colorTransform2=new b.ColorTransform;this._display=a}__extends(a,d);var c=a.prototype;Object.defineProperty(c,"matrix",{get:function(){this._matrix2.identityMatrix(this._matrix);return this._matrix2},set:function(a){this._setMatrix(a)},enumerable:!0,configurable:!0});c._setMatrix=function(a){this._display.__hack_local_matrix||(this._display.__hack_local_matrix=
new b.Matrix);this._display.__hack_local_matrix.identityMatrix(a);this._matrix.identityMatrix(a)};Object.defineProperty(c,"colorTransform",{get:function(){this._colorTransform2.identityColorTransform(this._colorTransform);return this._colorTransform2},set:function(a){this._setColorTransform(a)},enumerable:!0,configurable:!0});c._setColorTransform=function(a){this._colorTransform.identityColorTransform(a)};return a}(b.HashObject);b.Transform=e;e.prototype.__class__="egret.Transform"})(egret||(egret=
{}));
(function(b){var e=function(d){function a(){d.call(this);this._isSupportDOMParser=this._xmlDict=this._parser=null;this._xmlDict={};window.DOMParser?(this._isSupportDOMParser=!0,this._parser=new DOMParser):this._isSupportDOMParser=!1}__extends(a,d);var c=a.prototype;a.getInstance=function(){a._instance||(a._instance=new a);return a._instance};c.parserXML=function(a){for(var c=0;"\n"==a.charAt(c)||"\t"==a.charAt(c)||"\r"==a.charAt(c)||" "==a.charAt(c);)c++;0!=c&&(a=a.substring(c,a.length));this._isSupportDOMParser?c=
this._parser.parseFromString(a,"text/xml"):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(a));null==c&&b.$warn(1015);return c};a._instance=null;return a}(b.HashObject);b.SAXParser=e;e.prototype.__class__="egret.SAXParser"})(egret||(egret={}));
(function(b){var e=function(h){function c(){h.call(this);this._designHeight=this._designWidth=0;this._scaleY=this._scaleX=1;this._stageHeight=this._stageWidth=this._offSetY=0}__extends(c,h);var d=c.prototype;c.getInstance=function(){null==c.instance&&(a.initialize(),c.instance=new c);return c.instance};d.setDesignSize=function(a,h,c){this._designWidth=a;this._designHeight=h;c&&(b.$warn(1001),this._setResolutionPolicy(c))};d._setResolutionPolicy=function(a){this._resolutionPolicy=a;a.init(this);a._apply(this,
this._designWidth,this._designHeight)};d.getScaleX=function(){return this._scaleX};d.getScaleY=function(){return this._scaleY};d.getOffSetY=function(){return this._offSetY};c.canvas_name="egretCanvas";c.egret_root_div="gameDiv";c.canvas_div_name="canvasDiv";return c}(b.HashObject);b.StageDelegate=e;e.prototype.__class__="egret.StageDelegate";var d=function(){function a(h,c){this._containerStrategy=h;this._contentStrategy=c}var h=a.prototype;h.init=function(a){this._containerStrategy.init(a);this._contentStrategy.init(a)};
h._apply=function(a,h,c){this._containerStrategy._apply(a,h,c);this._contentStrategy._apply(a,h,c)};return a}();b.ResolutionPolicy=d;d.prototype.__class__="egret.ResolutionPolicy";var a=function(){function a(){}var h=a.prototype;a.initialize=function(){a.EQUAL_TO_FRAME=new c};h.init=function(a){};h._apply=function(a,h,c){};h._setupContainer=function(){var a=document.body,h;a&&(h=a.style)&&(h.paddingTop=h.paddingTop||"0px",h.paddingRight=h.paddingRight||"0px",h.paddingBottom=h.paddingBottom||"0px",
h.paddingLeft=h.paddingLeft||"0px",h.borderTop=h.borderTop||"0px",h.borderRight=h.borderRight||"0px",h.borderBottom=h.borderBottom||"0px",h.borderLeft=h.borderLeft||"0px",h.marginTop=h.marginTop||"0px",h.marginRight=h.marginRight||"0px",h.marginBottom=h.marginBottom||"0px",h.marginLeft=h.marginLeft||"0px")};return a}();b.ContainerStrategy=a;a.prototype.__class__="egret.ContainerStrategy";var c=function(a){function h(){a.apply(this,arguments)}__extends(h,a);h.prototype._apply=function(a){this._setupContainer()};
return h}(a);b.EqualToFrame=c;c.prototype.__class__="egret.EqualToFrame";d=function(){function a(){}var h=a.prototype;h.init=function(a){};h._apply=function(a,h,c){};h.setEgretSize=function(a,h,c,k,d,m){void 0===m&&(m=0);b.StageDelegate.getInstance()._stageWidth=Math.round(a);b.StageDelegate.getInstance()._stageHeight=Math.round(h);a=document.getElementById(e.canvas_div_name);h=document.getElementById(e.egret_root_div);a||(a=b.Browser.getInstance().$new("div"),a.id=e.canvas_div_name,h.appendChild(a));
a.style.width=c+"px";a.style.height=k+"px";h.style.width=c+"px";h.style.height=k+"px";h.style.top=m+"px"};h._getClientWidth=function(){return document.documentElement.clientWidth};h._getClientHeight=function(){return document.documentElement.clientHeight};return a}();b.ContentStrategy=d;d.prototype.__class__="egret.ContentStrategy";var h=function(a){function h(c){void 0===c&&(c=0);a.call(this);this.minWidth=NaN;this.minWidth=c}__extends(h,a);h.prototype._apply=function(a,h,c){h=this._getClientWidth();
var b=this._getClientHeight(),k=b/c,d=h/k,e=1;0!=this.minWidth&&(e=Math.min(1,d/this.minWidth));this.setEgretSize(d/e,c,h,b*e);a._scaleX=k*e;a._scaleY=k*e};return h}(d);b.FixedHeight=h;h.prototype.__class__="egret.FixedHeight";h=function(a){function h(c){void 0===c&&(c=0);a.call(this);this.minHeight=NaN;this.minHeight=c}__extends(h,a);h.prototype._apply=function(a,h,c){c=this._getClientWidth();var b=this._getClientHeight(),k=c/h,d=b/k,e=1;0!=this.minHeight&&(e=Math.min(1,d/this.minHeight));this.setEgretSize(h,
d/e,c*e,b,c*(1-e)/2);a._scaleX=k*e;a._scaleY=k*e};return h}(d);b.FixedWidth=h;h.prototype.__class__="egret.FixedWidth";h=function(a){function h(c,b){a.call(this);this.width=c;this.height=b}__extends(h,a);h.prototype._apply=function(a,h,c){c=this.width;var b=this.height,k=c/h;this.setEgretSize(h,b/k,c,b);a._scaleX=k;a._scaleY=k};return h}(d);b.FixedSize=h;h.prototype.__class__="egret.FixedSize";h=function(a){function h(){a.call(this)}__extends(h,a);h.prototype._apply=function(a,h,c){this.setEgretSize(h,
c,h,c,Math.floor((h-h)/2));a._scaleX=1;a._scaleY=1};return h}(d);b.NoScale=h;h.prototype.__class__="egret.NoScale";h=function(a){function h(){a.call(this)}__extends(h,a);h.prototype._apply=function(a,h,c){var b=this._getClientWidth(),k=this._getClientHeight(),d=b,e=k,m=d/h<e/c?d/h:e/c,d=h*m,e=c*m,b=Math.floor((b-d)/2);a._offSetY=Math.floor((k-e)/2);this.setEgretSize(h,c/1,1*d,e,b,a._offSetY);a._scaleX=1*m;a._scaleY=1*m};return h}(d);b.ShowAll=h;h.prototype.__class__="egret.ShowAll";d=function(a){function h(){a.call(this)}
__extends(h,a);h.prototype._apply=function(a,h,c){var b=this._getClientWidth(),k=this._getClientHeight(),b=b/h,k=k/c;this.setEgretSize(h,c,h*b,c*k);a._scaleX=b;a._scaleY=k};return h}(d);b.FullScreen=d;d.prototype.__class__="egret.FullScreen"})(egret||(egret={}));
(function(b){var e=function(d){function a(){d.call(this);this._originalData={};this._drawAreaList=[]}__extends(a,d);var c=a.prototype;a.getInstance=function(){null==a.instance&&(a.instance=new a);return a.instance};c.addDrawArea=function(a){this._drawAreaList.push(a)};c.clearDrawArea=function(){this._drawAreaList=[]};c.drawImage=function(h,c,d,e,f,g,n,p,q,r,s){void 0===s&&(s=void 0);n=n||0;p=p||0;var t=c._texture_to_render;if(null!=t&&0!=g&&0!=f&&0!=q&&0!=r){var u=b.MainContext.instance.rendererContext._texture_scale_factor;
f/=u;g/=u;if(0!=this._drawAreaList.length&&b.MainContext.instance.rendererContext._cacheCanvasContext){u=b.DisplayObject.getTransformBounds(c._getSize(a.identityRectangle),c._worldTransform);c._worldBounds.initialize(u.x,u.y,u.width,u.height);u=this._originalData;u.sourceX=d;u.sourceY=e;u.sourceWidth=f;u.sourceHeight=g;u.destX=n;u.destY=p;u.destWidth=q;u.destHeight=r;for(var z=this.getDrawAreaList(),w=0;w<z.length;w++)if(!this.ignoreRender(c,z[w],u.destX,u.destY)){h.drawImage(t,d,e,f,g,n,p,q,r,s);
break}}else h.drawImage(t,d,e,f,g,n,p,q,r,s)}};c.ignoreRender=function(a,c,b,d){var e=a._worldBounds;b*=a._worldTransform.a;d*=a._worldTransform.d;return e.x+e.width+b<=c.x||e.x+b>=c.x+c.width||e.y+e.height+d<=c.y||e.y+d>=c.y+c.height?!0:!1};c.getDrawAreaList=function(){var a;0==this._drawAreaList.length?(this._defaultDrawAreaList||(this._defaultDrawAreaList=[new b.Rectangle(0,0,b.MainContext.instance.stage.stageWidth,b.MainContext.instance.stage.stageHeight)],b.MainContext.instance.stage.addEventListener(b.Event.RESIZE,
this.onResize,this)),a=this._defaultDrawAreaList):a=this._drawAreaList;return a};c.onResize=function(){b.MainContext.instance.stage.removeEventListener(b.Event.RESIZE,this.onResize,this);this._defaultDrawAreaList=null};a.identityRectangle=new b.Rectangle;return a}(b.HashObject);b.RenderFilter=e;e.prototype.__class__="egret.RenderFilter"})(egret||(egret={}));
(function(b){var e=function(){function d(){}d.mapClass=function(a,c,h){void 0===h&&(h="");a=this.getKey(a)+"#"+h;this.mapClassDic[a]=c};d.getKey=function(a){return"string"==typeof a?a:b.getQualifiedClassName(a)};d.mapValue=function(a,c,h){void 0===h&&(h="");a=this.getKey(a)+"#"+h;this.mapValueDic[a]=c};d.hasMapRule=function(a,c){void 0===c&&(c="");var h=this.getKey(a)+"#"+c;return this.mapValueDic[h]||this.mapClassDic[h]?!0:!1};d.getInstance=function(a,c){void 0===c&&(c="");var h=this.getKey(a)+"#"+
c;if(this.mapValueDic[h])return this.mapValueDic[h];var k=this.mapClassDic[h];if(k)return k=new k,this.mapValueDic[h]=k,delete this.mapClassDic[h],k;b.$error(1028,h)};d.mapClassDic={};d.mapValueDic={};return d}();b.Injector=e;e.prototype.__class__="egret.Injector"})(egret||(egret={}));(function(b){var e=function(b){function a(){b.apply(this,arguments);this.type=null}__extends(a,b);return a}(b.HashObject);b.Filter=e;e.prototype.__class__="egret.Filter"})(egret||(egret={}));
(function(b){var e=function(b){function a(a,h){b.call(this);this.blurX=a;this.blurY=h;this.type="blur"}__extends(a,b);return a}(b.Filter);b.BlurFilter=e;e.prototype.__class__="egret.BlurFilter"})(egret||(egret={}));
(function(b){var e=function(b){function a(a){void 0===a&&(a=null);b.call(this);this._matrix=[];this._matrix2=[];this.type="colorTransform";this._setMatrix(a)}__extends(a,b);var c=a.prototype;Object.defineProperty(c,"matrix",{get:function(){for(var a=0;20>a;a++)this._matrix2[a]=this._matrix[a];return this._matrix2},set:function(a){this._setMatrix(a)},enumerable:!0,configurable:!0});c._setMatrix=function(a){for(var c=0;20>c;c++)this._matrix[c]=a&&a[c]||0};return a}(b.Filter);b.ColorMatrixFilter=e;e.prototype.__class__=
"egret.ColorMatrixFilter"})(egret||(egret={}));
(function(b){var e=function(b){function a(a,h,k,e,l,f,g,n){void 0===a&&(a=16711680);void 0===h&&(h=1);void 0===k&&(k=6);void 0===e&&(e=6);void 0===l&&(l=2);void 0===f&&(f=1);void 0===g&&(g=!1);void 0===n&&(n=!1);b.call(this);this.color=a;this.alpha=h;this.blurX=k;this.blurY=e;this.strength=l;this.quality=f;this.inner=g;this.knockout=n;this.type="glow";this._blue=a&255;this._green=(a&65280)>>8;this._red=a>>16}__extends(a,b);return a}(b.Filter);b.GlowFilter=e;e.prototype.__class__="egret.GlowFilter"})(egret||
(egret={}));(function(b){var e=function(b){function a(a,h,k,e,l,f,g,n,p,q,r){void 0===a&&(a=4);void 0===h&&(h=45);void 0===k&&(k=0);void 0===e&&(e=1);void 0===l&&(l=4);void 0===f&&(f=4);void 0===g&&(g=1);void 0===n&&(n=1);void 0===p&&(p=!1);void 0===q&&(q=!1);b.call(this,k,e,l,f,g,n,p,q);this.distance=a;this.angle=h}__extends(a,b);return a}(b.GlowFilter);b.DropShadowFilter=e;e.prototype.__class__="egret.DropShadowFilter"})(egret||(egret={}));
(function(b){var e=function(){function b(){}b.NORMAL="normal";b.ADD="add";b.ERASE="erase";b.ERASE_REVERSE="eraseReverse";return b}();b.BlendMode=e;e.prototype.__class__="egret.BlendMode"})(egret||(egret={}));
(function(b){var e=function(){function b(){this._name=null;this._explicitHeight=this._explicitWidth=NaN;this._y=this._x=0;this._scaleY=this._scaleX=1;this._rotation=this._anchorY=this._anchorX=this._anchorOffsetY=this._anchorOffsetX=0;this._alpha=1;this._skewY=this._skewX=0;this._blendMode=null;this._touchEnabled=b.defaultTouchEnabled;this._visible=!0;this._worldAlpha=1;this._scrollRect=null;this._cacheAsBitmap=!1;this._stage=this._parent=null;this._needDraw=!1;this._filters=null;this._hasHeightSet=
this._hasWidthSet=!1;this._sizeDirty=this._normalDirty=!0;this._isContainer=!1}b.defaultTouchEnabled=!1;return b}();b.DisplayObjectProperties=e;e.prototype.__class__="egret.DisplayObjectProperties"})(egret||(egret={}));(function(b){var e=function(){return function(){this._hitTestPointTexture=null;this._rectH=this._rectW=0;this._cacheDirty=!1}}();b.DisplayObjectPrivateProperties=e;e.prototype.__class__="egret.DisplayObjectPrivateProperties"})(egret||(egret={}));
(function(b){var e=function(d){function a(){d.call(this);this.renderTexture=this.mask=this._sizeChangeCallTarget=this._sizeChangeCallBack=this.__hack_local_matrix=this._worldBounds=this._texture_to_render=null;this._DO_Props_=new b.DisplayObjectProperties;this._DO_Privs_=new b.DisplayObjectPrivateProperties;this._worldTransform=new b.Matrix;this._worldBounds=new b.Rectangle(0,0,0,0);this._DO_Privs_._cacheBounds=new b.Rectangle(0,0,0,0)}__extends(a,d);var c=a.prototype;c._setDirty=function(){this._DO_Props_._normalDirty=
!0};c.getDirty=function(){return this._DO_Props_._normalDirty||this._DO_Props_._sizeDirty};c._setParentSizeDirty=function(){var a=this._DO_Props_._parent;a&&(a._DO_Props_._hasWidthSet||a._DO_Props_._hasHeightSet?a._setCacheDirty():a._setSizeDirty())};c._setSizeDirty=function(){var a=this._DO_Props_;a._sizeDirty||(a._sizeDirty=!0,this._setDirty(),this._setCacheDirty(),this._setParentSizeDirty(),null!=this._sizeChangeCallBack&&(this._sizeChangeCallTarget==a._parent?this._sizeChangeCallBack.call(this._sizeChangeCallTarget):
this._sizeChangeCallTarget=this._sizeChangeCallBack=null))};c._clearDirty=function(){this._DO_Props_._normalDirty=!1};c._clearSizeDirty=function(){this._DO_Props_._sizeDirty=!1};Object.defineProperty(c,"name",{get:function(){return this._DO_Props_._name},set:function(a){this._DO_Props_._name=a},enumerable:!0,configurable:!0});Object.defineProperty(c,"parent",{get:function(){return this._DO_Props_._parent},enumerable:!0,configurable:!0});c._parentChanged=function(a){this._DO_Props_._parent=a};Object.defineProperty(c,
"x",{get:function(){return this._DO_Props_._x},set:function(a){this._setX(a)},enumerable:!0,configurable:!0});c._setX=function(a){b.NumberUtils.isNumber(a)&&this._DO_Props_._x!=a&&(this._DO_Props_._x=a,this._setDirty(),this._setParentSizeDirty())};Object.defineProperty(c,"y",{get:function(){return this._DO_Props_._y},set:function(a){this._setY(a)},enumerable:!0,configurable:!0});c._setY=function(a){b.NumberUtils.isNumber(a)&&this._DO_Props_._y!=a&&(this._DO_Props_._y=a,this._setDirty(),this._setParentSizeDirty())};
Object.defineProperty(c,"scaleX",{get:function(){return this._DO_Props_._scaleX},set:function(a){b.NumberUtils.isNumber(a)&&this._DO_Props_._scaleX!=a&&(this._DO_Props_._scaleX=a,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(c,"scaleY",{get:function(){return this._DO_Props_._scaleY},set:function(a){b.NumberUtils.isNumber(a)&&this._DO_Props_._scaleY!=a&&(this._DO_Props_._scaleY=a,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});
Object.defineProperty(c,"anchorOffsetX",{get:function(){return this._DO_Props_._anchorOffsetX},set:function(a){b.NumberUtils.isNumber(a)&&this._DO_Props_._anchorOffsetX!=a&&(this._DO_Props_._anchorOffsetX=a,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(c,"anchorOffsetY",{get:function(){return this._DO_Props_._anchorOffsetY},set:function(a){b.NumberUtils.isNumber(a)&&this._DO_Props_._anchorOffsetY!=a&&(this._DO_Props_._anchorOffsetY=a,this._setDirty(),
this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(c,"anchorX",{get:function(){return this._DO_Props_._anchorX},set:function(a){this._setAnchorX(a)},enumerable:!0,configurable:!0});c._setAnchorX=function(a){b.NumberUtils.isNumber(a)&&this._DO_Props_._anchorX!=a&&(this._DO_Props_._anchorX=a,this._setDirty(),this._setParentSizeDirty())};Object.defineProperty(c,"anchorY",{get:function(){return this._DO_Props_._anchorY},set:function(a){this._setAnchorY(a)},enumerable:!0,
configurable:!0});c._setAnchorY=function(a){b.NumberUtils.isNumber(a)&&this._DO_Props_._anchorY!=a&&(this._DO_Props_._anchorY=a,this._setDirty(),this._setParentSizeDirty())};Object.defineProperty(c,"visible",{get:function(){return this._DO_Props_._visible},set:function(a){this._setVisible(a)},enumerable:!0,configurable:!0});c._setVisible=function(a){this._DO_Props_._visible!=a&&(this._DO_Props_._visible=a,this._setSizeDirty())};Object.defineProperty(c,"rotation",{get:function(){return this._DO_Props_._rotation},
set:function(a){b.NumberUtils.isNumber(a)&&this._DO_Props_._rotation!=a&&(this._DO_Props_._rotation=a,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(c,"alpha",{get:function(){return this._DO_Props_._alpha},set:function(a){this._setAlpha(a)},enumerable:!0,configurable:!0});c._setAlpha=function(a){b.NumberUtils.isNumber(a)&&this._DO_Props_._alpha!=a&&(this._DO_Props_._alpha=a,this._setDirty(),this._setCacheDirty())};Object.defineProperty(c,"skewX",
{get:function(){return this._DO_Props_._skewX},set:function(a){b.NumberUtils.isNumber(a)&&this._DO_Props_._skewX!=a&&(this._DO_Props_._skewX=a,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(c,"skewY",{get:function(){return this._DO_Props_._skewY},set:function(a){b.NumberUtils.isNumber(a)&&this._DO_Props_._skewY!=a&&(this._DO_Props_._skewY=a,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(c,"touchEnabled",
{get:function(){return this._DO_Props_._touchEnabled},set:function(a){this._setTouchEnabled(a)},enumerable:!0,configurable:!0});c._setTouchEnabled=function(a){this._DO_Props_._touchEnabled=a};Object.defineProperty(c,"blendMode",{get:function(){return this._DO_Props_._blendMode},set:function(a){this._DO_Props_._blendMode=a},enumerable:!0,configurable:!0});Object.defineProperty(c,"scrollRect",{get:function(){return this._DO_Props_._scrollRect},set:function(a){this._setScrollRect(a)},enumerable:!0,configurable:!0});
c._setScrollRect=function(a){this._DO_Props_._scrollRect=a;this._setSizeDirty()};Object.defineProperty(c,"measuredWidth",{get:function(){return this._measureBounds().width},enumerable:!0,configurable:!0});Object.defineProperty(c,"measuredHeight",{get:function(){return this._measureBounds().height},enumerable:!0,configurable:!0});Object.defineProperty(c,"explicitWidth",{get:function(){return this._DO_Props_._explicitWidth},enumerable:!0,configurable:!0});Object.defineProperty(c,"explicitHeight",{get:function(){return this._DO_Props_._explicitHeight},
enumerable:!0,configurable:!0});Object.defineProperty(c,"width",{get:function(){return this._getWidth()},set:function(a){this._setWidth(a)},enumerable:!0,configurable:!0});c._getWidth=function(){return this._getSize(b.Rectangle.identity).width};Object.defineProperty(c,"height",{get:function(){return this._getHeight()},set:function(a){this._setHeight(a)},enumerable:!0,configurable:!0});c._getHeight=function(){return this._getSize(b.Rectangle.identity).height};c._setWidth=function(a){this._setSizeDirty();
this._setCacheDirty();this._DO_Props_._explicitWidth=a;this._DO_Props_._hasWidthSet=b.NumberUtils.isNumber(a)};c._setHeight=function(a){this._setSizeDirty();this._setCacheDirty();this._DO_Props_._explicitHeight=a;this._DO_Props_._hasHeightSet=b.NumberUtils.isNumber(a)};Object.defineProperty(c,"worldAlpha",{get:function(){return this._DO_Props_._worldAlpha},set:function(a){this._DO_Props_._worldAlpha=a},enumerable:!0,configurable:!0});c._draw=function(a){if(this._DO_Props_._visible&&!this.drawCacheTexture(a)){var c=
b.MainContext.__use_new_draw&&this._DO_Props_._isContainer;this._hasFilters()&&!c&&this._setGlobalFilters(a);a.setAlpha(this.worldAlpha,this.blendMode);a.setTransform(this._worldTransform);var d=this.mask||this._DO_Props_._scrollRect;d&&!c&&a.pushMask(d);this._render(a);d&&!c&&a.popMask();this._hasFilters()&&!c&&this._removeGlobalFilters(a)}this.destroyCacheBounds()};c._setGlobalFilters=function(h){var c;c=this._DO_Props_._filters?this._DO_Props_._filters.concat():[];if(this._transform){var b=this._transform._colorTransform,
d=a.color;d[0]=b._redMultiplier;d[4]=b._redOffset;d[6]=b._greenMultiplier;d[9]=b._greenOffset;d[12]=b._blueMultiplier;d[14]=b._blueOffset;d[18]=b._alphaMultiplier;d[19]=b._alphaOffset;a.colorMatrixFilter._matrix=d;c.push(a.colorMatrixFilter)}h.setGlobalFilters(c)};c._removeGlobalFilters=function(a){a.setGlobalFilters(null)};c._hasFilters=function(){var a=this._DO_Props_._filters&&0<this._DO_Props_._filters.length;if(this._transform){var c=this._transform._colorTransform;if(1!=c._redMultiplier||0!=
c._redOffset||1!=c._greenMultiplier||0!=c._greenOffset||1!=c._blueMultiplier||0!=c._blueOffset||1!=c._alphaMultiplier||0!=c._alphaOffset)a=!0}return a};c._pushMask=function(a){a.setTransform(this._worldTransform);var c=this.mask||this._DO_Props_._scrollRect;c&&a.pushMask(c)};c._popMask=function(a){a.popMask()};c.drawCacheTexture=function(a){if(!1==this._DO_Props_._cacheAsBitmap)return!1;var c=this.getBounds(b.Rectangle.identity);if(this._DO_Privs_._cacheDirty||null==this._texture_to_render||1<=Math.round(c.width)-
this._texture_to_render._textureWidth||1<=Math.round(c.height)-this._texture_to_render._textureHeight)c=this._makeBitmapCache(),this._DO_Privs_._cacheDirty=!c;if(null==this._texture_to_render)return!1;var d=this._texture_to_render,c=d._offsetX,e=d._offsetY,f=d._textureWidth,d=d._textureHeight;this._updateTransform();a.setAlpha(this.worldAlpha,this.blendMode);a.setTransform(this._worldTransform);b.RenderFilter.getInstance().drawImage(a,this,0,0,f,d,c,e,f,d);return!0};Object.defineProperty(c,"needDraw",
{get:function(){return this._DO_Props_._needDraw},set:function(a){this._DO_Props_._needDraw=a},enumerable:!0,configurable:!0});c._updateTransform=function(){var a=this._DO_Props_;a._visible&&(this._calculateWorldTransform(),"updateTransform"==b.MainContext._renderLoopPhase&&(this.needDraw||this._texture_to_render||a._cacheAsBitmap)&&b.RenderCommand.push(this._draw,this))};c._calculateWorldTransform=function(){var a=this._DO_Props_,c=this._worldTransform,b=a._parent;c.identityMatrix(b._worldTransform);
this._getMatrix(c);var d=a._scrollRect;d&&c.append(1,0,0,1,-d.x,-d.y);this.worldAlpha=b.worldAlpha*a._alpha};c._render=function(a){};c.getBounds=function(a,c){void 0===c&&(c=!0);var d=this._DO_Props_,e=this._DO_Privs_,f=this._measureBounds(),g=d._hasWidthSet?d._explicitWidth:f.width,n=d._hasHeightSet?d._explicitHeight:f.height;e._rectW=f.width;e._rectH=f.height;this._clearSizeDirty();var p=f.x,f=f.y,q=0,r=0;c&&(0!=d._anchorX||0!=d._anchorY?(q=g*d._anchorX,r=n*d._anchorY):(q=d._anchorOffsetX,r=d._anchorOffsetY));
e._cacheBounds.initialize(p-q,f-r,g,n);d=e._cacheBounds;a||(a=new b.Rectangle);return a.initialize(d.x,d.y,d.width,d.height)};c.destroyCacheBounds=function(){var a=this._DO_Privs_;a._cacheBounds.x=0;a._cacheBounds.y=0;a._cacheBounds.width=0;a._cacheBounds.height=0};c._getConcatenatedMatrix=function(){for(var h=a.identityMatrixForGetConcatenated.identity(),c=this;null!=c;){var d=c._DO_Props_;0!=d._anchorX||0!=d._anchorY?(c=c._getSize(b.Rectangle.identity),h.prependTransform(d._x,d._y,d._scaleX,d._scaleY,
d._rotation,d._skewX,d._skewY,c.width*d._anchorX,c.height*d._anchorY)):h.prependTransform(d._x,d._y,d._scaleX,d._scaleY,d._rotation,d._skewX,d._skewY,d._anchorOffsetX,d._anchorOffsetY);d._scrollRect&&h.prepend(1,0,0,1,-d._scrollRect.x,-d._scrollRect.y);c=d._parent}return h};c.localToGlobal=function(a,c,d){void 0===a&&(a=0);void 0===c&&(c=0);var e=this._getConcatenatedMatrix();e.append(1,0,0,1,a,c);d||(d=new b.Point);d.x=e.tx;d.y=e.ty;return d};c.globalToLocal=function(a,c,d){void 0===a&&(a=0);void 0===
c&&(c=0);var e=this._getConcatenatedMatrix();e.invert();e.append(1,0,0,1,a,c);d||(d=new b.Point);d.x=e.tx;d.y=e.ty;return d};c.hitTest=function(a,c,d){void 0===d&&(d=!1);var e=this._DO_Props_;if(!e._visible||!d&&!e._touchEnabled)return null;d=this.getBounds(b.Rectangle.identity,!1);a-=d.x;c-=d.y;return 0<=a&&a<d.width&&0<=c&&c<d.height?this.mask||e._scrollRect?e._scrollRect&&a>e._scrollRect.x&&c>e._scrollRect.y&&a<e._scrollRect.x+e._scrollRect.width&&c<e._scrollRect.y+e._scrollRect.height||this.mask&&
this.mask.x<=a&&a<this.mask.x+this.mask.width&&this.mask.y<=c&&c<this.mask.y+this.mask.height?this:null:this:null};c.hitTestPoint=function(a,c,d){var e=this._DO_Privs_;a=this.globalToLocal(a,c);return d?(e._hitTestPointTexture||(e._hitTestPointTexture=new b.RenderTexture),d=e._hitTestPointTexture,d.drawToTexture(this,new b.Rectangle(a.x-e._hitTestPointTexture._offsetX-1,a.y-e._hitTestPointTexture._offsetY-1,3,3)),0!=d.getPixel32(1,1)[3]?!0:!1):!!this.hitTest(a.x,a.y,!0)};c._getMatrix=function(a){a||
(a=b.Matrix.identity.identity());var c=this._DO_Props_,d,e;e=this._getOffsetPoint();d=e.x;e=e.y;var f=this.__hack_local_matrix;f?(a.append(f.a,f.b,f.c,f.d,f.tx,f.ty),a.append(1,0,0,1,-d,-e)):a.appendTransform(c._x,c._y,c._scaleX,c._scaleY,c._rotation,c._skewX,c._skewY,d,e);return a};c._getSize=function(a){var c=this._DO_Props_;if(c._hasHeightSet&&c._hasWidthSet)return this._clearSizeDirty(),a.initialize(0,0,c._explicitWidth,c._explicitHeight);this._measureSize(a);c._hasWidthSet&&(a.width=c._explicitWidth);
c._hasHeightSet&&(a.height=c._explicitHeight);return a};c._measureSize=function(a){var c=this._DO_Privs_;this._DO_Props_._sizeDirty?(a=this._measureBounds(),c._rectW=a.width,c._rectH=a.height,this._clearSizeDirty()):(a.width=c._rectW,a.height=c._rectH);a.x=0;a.y=0;return a};c._measureBounds=function(){return b.Rectangle.identity.initialize(0,0,0,0)};c._getOffsetPoint=function(){var a=this._DO_Props_,c=a._anchorOffsetX,d=a._anchorOffsetY;if(0!=a._anchorX||0!=a._anchorY)d=this._getSize(b.Rectangle.identity),
c=a._anchorX*d.width,d=a._anchorY*d.height;a=b.Point.identity;a.x=c;a.y=d;return a};c._onAddToStage=function(){this._DO_Props_._stage=b.MainContext.instance.stage;b.DisplayObjectContainer.__EVENT__ADD_TO_STAGE_LIST.push(this)};c._onRemoveFromStage=function(){b.DisplayObjectContainer.__EVENT__REMOVE_FROM_STAGE_LIST.push(this)};Object.defineProperty(c,"stage",{get:function(){return this._DO_Props_._stage},enumerable:!0,configurable:!0});c.addEventListener=function(h,c,e,l,f){void 0===l&&(l=!1);void 0===
f&&(f=0);d.prototype.addEventListener.call(this,h,c,e,l,f);((l=h==b.Event.ENTER_FRAME)||h==b.Event.RENDER)&&this._insertEventBin(l?a._enterFrameCallBackList:a._renderCallBackList,c,e,f,this)};c.removeEventListener=function(h,c,e,l){void 0===l&&(l=!1);d.prototype.removeEventListener.call(this,h,c,e,l);((l=h==b.Event.ENTER_FRAME)||h==b.Event.RENDER)&&this._removeEventBin(l?a._enterFrameCallBackList:a._renderCallBackList,c,e,this)};c.dispatchEvent=function(a){if(!a._bubbles)return d.prototype.dispatchEvent.call(this,
a);for(var c=[],b=this;b;)c.push(b),b=b._DO_Props_._parent;a._reset();this._dispatchPropagationEvent(a,c);return!a._isDefaultPrevented};c._dispatchPropagationEvent=function(a,c,b){b=c.length;for(var d=1,e=b-1;0<=e;e--){var g=c[e];a._currentTarget=g;a._target=this;a._eventPhase=d;g._notifyListener(a);if(a._isPropagationStopped||a._isPropagationImmediateStopped)return}g=c[0];a._currentTarget=g;a._target=this;a._eventPhase=2;g._notifyListener(a);if(!a._isPropagationStopped&&!a._isPropagationImmediateStopped)for(d=
3,e=1;e<b&&(g=c[e],a._currentTarget=g,a._target=this,a._eventPhase=d,g._notifyListener(a),!a._isPropagationStopped&&!a._isPropagationImmediateStopped);e++);};c.willTrigger=function(a){for(var c=this;c;){if(c.hasEventListener(a))return!0;c=c._DO_Props_._parent}return!1};Object.defineProperty(c,"cacheAsBitmap",{get:function(){return this._DO_Props_._cacheAsBitmap},set:function(a){(this._DO_Props_._cacheAsBitmap=a)?b.callLater(this._makeBitmapCache,this):this._texture_to_render=null},enumerable:!0,configurable:!0});
c._makeBitmapCache=function(){this.renderTexture||(this.renderTexture=new b.RenderTexture);var a=this.renderTexture.drawToTexture(this);this._texture_to_render=a?this.renderTexture:null;return a};c._setCacheDirty=function(a){void 0===a&&(a=!0);this._DO_Privs_._cacheDirty=a};a.getTransformBounds=function(a,c){var b=a.x,d=a.y,e=a.width,g=a.height;(b||d)&&c.appendTransform(0,0,1,1,0,0,0,-b,-d);var n=e*c.a,e=e*c.b,p=g*c.c,g=g*c.d,q=c.tx,r=c.ty,s=q,t=q,u=r,z=r;(b=n+q)<s?s=b:b>t&&(t=b);(b=n+p+q)<s?s=b:
b>t&&(t=b);(b=p+q)<s?s=b:b>t&&(t=b);(d=e+r)<u?u=d:d>z&&(z=d);(d=e+g+r)<u?u=d:d>z&&(z=d);(d=g+r)<u?u=d:d>z&&(z=d);return a.initialize(s,u,t-s,z-u)};Object.defineProperty(c,"filters",{get:function(){return this._DO_Props_._filters},set:function(a){this._DO_Props_._filters=a},enumerable:!0,configurable:!0});Object.defineProperty(c,"transform",{get:function(){this._transform||(this._transform=new b.Transform(this));return this._transform},enumerable:!0,configurable:!0});a.color=[1,0,0,0,0,0,1,0,0,0,0,
0,1,0,0,0,0,0,1,0];a.colorMatrixFilter=new b.ColorMatrixFilter;a.identityMatrixForGetConcatenated=new b.Matrix;a._enterFrameCallBackList=[];a._renderCallBackList=[];return a}(b.EventDispatcher);b.DisplayObject=e;e.prototype.__class__="egret.DisplayObject"})(egret||(egret={}));
(function(b){var e=function(d){function a(){d.call(this);this._touchChildren=!0;this._children=[];this._DO_Props_._isContainer=!0}__extends(a,d);var c=a.prototype;Object.defineProperty(c,"touchChildren",{get:function(){return this._touchChildren},set:function(a){this._touchChildren=a},enumerable:!0,configurable:!0});Object.defineProperty(c,"numChildren",{get:function(){return this._children.length},enumerable:!0,configurable:!0});c.setChildIndex=function(a,c){this.doSetChildIndex(a,c)};c.doSetChildIndex=
function(a,c){var d=this._children.indexOf(a);0>d&&b.$error(1006);this._children.splice(d,1);0>c||this._children.length<=c?this._children.push(a):this._children.splice(c,0,a)};c.addChild=function(a){var c=this._children.length;a.parent==this&&c--;return this._doAddChild(a,c)};c.addChildAt=function(a,c){return this._doAddChild(a,c)};c._doAddChild=function(h,c,d){void 0===d&&(d=!0);if(h==this)return h;if(0>c||c>this._children.length)return b.$error(1007),h;var e=h.parent;if(e==this)return this.doSetChildIndex(h,
c),h;if(e){var f=e._children.indexOf(h);0<=f&&e._doRemoveChild(f)}this._children.splice(c,0,h);h._parentChanged(this);d&&h.dispatchEventWith(b.Event.ADDED,!0);if(this._DO_Props_._stage)for(h._onAddToStage(),c=a.__EVENT__ADD_TO_STAGE_LIST;0<c.length;)e=c.shift(),d&&e.dispatchEventWith(b.Event.ADDED_TO_STAGE);h._setDirty();this._setSizeDirty();return h};c.removeChild=function(a){a=this._children.indexOf(a);if(0<=a)return this._doRemoveChild(a);b.$error(1008);return null};c.removeChildAt=function(a){if(0<=
a&&a<this._children.length)return this._doRemoveChild(a);b.$error(1007);return null};c._doRemoveChild=function(h,c){void 0===c&&(c=!0);var d=this._children,e=d[h];c&&e.dispatchEventWith(b.Event.REMOVED,!0);if(this._DO_Props_._stage){e._onRemoveFromStage();for(var f=a.__EVENT__REMOVE_FROM_STAGE_LIST;0<f.length;){var g=f.shift();c&&g.dispatchEventWith(b.Event.REMOVED_FROM_STAGE);g._DO_Props_._stage=null}}e._parentChanged(null);d.splice(h,1);this._setSizeDirty();return e};c.getChildAt=function(a){if(0<=
a&&a<this._children.length)return this._children[a];b.$error(1007);return null};c.contains=function(a){for(;a;){if(a==this)return!0;a=a.parent}return!1};c.swapChildrenAt=function(a,c){0<=a&&a<this._children.length&&0<=c&&c<this._children.length?this._swapChildrenAt(a,c):b.$error(1007)};c.swapChildren=function(a,c){var d=this._children.indexOf(a),e=this._children.indexOf(c);-1==d||-1==e?b.$error(1008):this._swapChildrenAt(d,e)};c._swapChildrenAt=function(a,c){if(a!=c){var b=this._children,d=b[a];b[a]=
b[c];b[c]=d}};c.getChildIndex=function(a){return this._children.indexOf(a)};c.removeChildren=function(){for(var a=this._children.length-1;0<=a;a--)this._doRemoveChild(a)};c._updateTransform=function(){if(this._DO_Props_._visible){this._hasFilters()&&b.RenderCommand.push(this._setGlobalFilters,this);var a=this.mask||this._DO_Props_._scrollRect;a&&b.RenderCommand.push(this._pushMask,this);d.prototype._updateTransform.call(this);if(!this._DO_Props_._cacheAsBitmap||!this._texture_to_render)for(var c=
0,e=this._children,l=e.length;c<l;c++)e[c]._updateTransform();a&&b.RenderCommand.push(this._popMask,this);this._hasFilters()&&b.RenderCommand.push(this._removeGlobalFilters,this)}};c._render=function(a){if(!b.MainContext.__use_new_draw)for(var c=0,d=this._children,e=d.length;c<e;c++)d[c]._draw(a)};c._measureBounds=function(){for(var a=0,c=0,d=0,e=0,f=this._children,g=f.length,n=0;n<g;n++){var p=f[n];if(p.visible){var q=p.getBounds(b.Rectangle.identity,!1),r=q.x,s=q.y,t=q.width,q=q.height,p=p._getMatrix(),
p=b.DisplayObject.getTransformBounds(b.Rectangle.identity.initialize(r,s,t,q),p),r=p.x,s=p.y,t=p.width+p.x,p=p.height+p.y;if(r<a||0==n)a=r;if(t>c||0==n)c=t;if(s<d||0==n)d=s;if(p>e||0==n)e=p}}return b.Rectangle.identity.initialize(a,d,c-a,e-d)};c.hitTest=function(a,c,e){void 0===e&&(e=!1);var l;if(!this._DO_Props_._visible)return null;if(this._DO_Props_._scrollRect){if(a<this._DO_Props_._scrollRect.x||c<this._DO_Props_._scrollRect.y||a>this._DO_Props_._scrollRect.x+this._DO_Props_._scrollRect.width||
c>this._DO_Props_._scrollRect.y+this._DO_Props_._scrollRect.height)return null}else if(this.mask&&(this.mask.x>a||a>this.mask.x+this.mask.width||this.mask.y>c||c>this.mask.y+this.mask.height))return null;for(var f=this._children,g=this._touchChildren,n=f.length-1;0<=n;n--){var p=f[n],q=p._getMatrix(),r=p.scrollRect;r&&q.append(1,0,0,1,-r.x,-r.y);q.invert();q=b.Matrix.transformCoords(q,a,c);if(p=p.hitTest(q.x,q.y,!0)){if(!g)return this;if(p._DO_Props_._touchEnabled&&g)return p;l=this}}return l?l:this._texture_to_render?
d.prototype.hitTest.call(this,a,c,e):null};c._onAddToStage=function(){d.prototype._onAddToStage.call(this);for(var a=this._children.length,c=0;c<a;c++)this._children[c]._onAddToStage()};c._onRemoveFromStage=function(){d.prototype._onRemoveFromStage.call(this);for(var a=this._children,c=a.length,b=0;b<c;b++)a[b]._onRemoveFromStage()};c.getChildByName=function(a){for(var c=this._children,b=c.length,d,e=0;e<b;e++)if(d=c[e],d.name==a)return d;return null};a.__EVENT__ADD_TO_STAGE_LIST=[];a.__EVENT__REMOVE_FROM_STAGE_LIST=
[];return a}(b.DisplayObject);b.DisplayObjectContainer=e;e.prototype.__class__="egret.DisplayObjectContainer"})(egret||(egret={}));(function(b){var e=function(){function b(){}b.NO_BORDER="noBorder";b.NO_SCALE="noScale";b.SHOW_ALL="showAll";b.EXACT_FIT="exactFit";return b}();b.StageScaleMode=e;e.prototype.__class__="egret.StageScaleMode"})(egret||(egret={}));
(function(b){var e=function(d){function a(a,c){void 0===a&&(a=480);void 0===c&&(c=800);d.call(this);this._changeSizeDispatchFlag=!0;this._scaleMode="";this._stageHeight=this._stageWidth=NaN;this._frameRate=60;this.touchEnabled=!0;this._DO_Props_._stage=this;this._stageWidth=a;this._stageHeight=c}__extends(a,d);var c=a.prototype;c.invalidate=function(){a._invalidateRenderFlag=!0};Object.defineProperty(c,"scaleMode",{get:function(){return this._scaleMode},set:function(a){this._scaleMode!=a&&(this._scaleMode=
a,this.setResolutionPolicy())},enumerable:!0,configurable:!0});c.changeSize=function(){this._changeSizeDispatchFlag&&(this.setResolutionPolicy(),this.dispatchEventWith(b.Event.RESIZE))};c.setResolutionPolicy=function(){var h=a.SCALE_MODE_ENUM[this._scaleMode];h||b.$error(1024);var c=new b.EqualToFrame,h=new b.ResolutionPolicy(c,h);b.StageDelegate.getInstance()._setResolutionPolicy(h);this._stageWidth=b.StageDelegate.getInstance()._stageWidth;this._stageHeight=b.StageDelegate.getInstance()._stageHeight};
Object.defineProperty(c,"stageWidth",{get:function(){return this._stageWidth},enumerable:!0,configurable:!0});Object.defineProperty(c,"stageHeight",{get:function(){return this._stageHeight},enumerable:!0,configurable:!0});Object.defineProperty(c,"frameRate",{get:function(){return this._frameRate},set:function(a){this._frameRate=a;b.MainContext.instance.deviceContext.setFrameRate(a)},enumerable:!0,configurable:!0});c.hitTest=function(a,c,d){if(!this._DO_Props_._touchEnabled)return null;var e;if(!this._touchChildren)return this;
d=this._children;for(var f=d.length-1;0<=f;f--){e=d[f];var g=e._getMatrix(),n=e.scrollRect;n&&g.append(1,0,0,1,-n.x,-n.y);g.invert();g=b.Matrix.transformCoords(g,a,c);if((e=e.hitTest(g.x,g.y,!0))&&e.touchEnabled)return e}return this};c.getBounds=function(a){a||(a=new b.Rectangle);return a.initialize(0,0,this._stageWidth,this._stageHeight)};c._updateTransform=function(){for(var a=0,c=this._children.length;a<c;a++)this._children[a]._updateTransform()};Object.defineProperty(c,"focus",{get:function(){return null},
enumerable:!0,configurable:!0});a.registerScaleMode=function(h,c,d){a.SCALE_MODE_ENUM[h]&&!d?b.$warn(1009,h):a.SCALE_MODE_ENUM[h]=c};a._invalidateRenderFlag=!1;a.SCALE_MODE_ENUM={};return a}(b.DisplayObjectContainer);b.Stage=e;e.prototype.__class__="egret.Stage"})(egret||(egret={}));egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.NO_SCALE]=new egret.NoScale;egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.SHOW_ALL]=new egret.ShowAll;egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.NO_BORDER]=new egret.FixedWidth;
egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.EXACT_FIT]=new egret.FullScreen;
(function(b){var e=function(){return function(){this._horizontalScrollPolicy=this._verticalScrollPolicy="auto";this._scrollTop=this._scrollLeft=0;this._vCanScroll=this._hCanScroll=!1;this._lastTouchPosition=new b.Point(0,0);this._touchStartPosition=new b.Point(0,0);this._scrollStarted=!1;this._lastTouchTime=0;this._lastTouchEvent=null;this._velocitys=[];this._isVTweenPlaying=this._isHTweenPlaying=!1;this._vScrollTween=this._hScrollTween=null;this._bounces=!0}}();b.ScrollViewProperties=e;e.prototype.__class__=
"egret.ScrollViewProperties"})(egret||(egret={}));
(function(b){var e=function(d){function a(a){void 0===a&&(a=null);d.call(this);this.scrollBeginThreshold=10;this.scrollSpeed=1;this.touchBeginTimer=this.delayTouchBeginEvent=this._content=null;this.touchEnabled=!0;this._ScrV_Props_=new b.ScrollViewProperties;a&&this.setContent(a)}__extends(a,d);var c=a.prototype;Object.defineProperty(c,"bounces",{get:function(){return this._ScrV_Props_._bounces},set:function(a){this._ScrV_Props_._bounces=!!a},enumerable:!0,configurable:!0});c.setContent=function(a){this._content!==
a&&(this.removeContent(),a&&(this._content=a,d.prototype.addChild.call(this,a),this._addEvents()))};c.removeContent=function(){this._content&&(this._removeEvents(),d.prototype.removeChildAt.call(this,0));this._content=null};Object.defineProperty(c,"verticalScrollPolicy",{get:function(){return this._ScrV_Props_._verticalScrollPolicy},set:function(a){a!=this._ScrV_Props_._verticalScrollPolicy&&(this._ScrV_Props_._verticalScrollPolicy=a)},enumerable:!0,configurable:!0});Object.defineProperty(c,"horizontalScrollPolicy",
{get:function(){return this._ScrV_Props_._horizontalScrollPolicy},set:function(a){a!=this._ScrV_Props_._horizontalScrollPolicy&&(this._ScrV_Props_._horizontalScrollPolicy=a)},enumerable:!0,configurable:!0});Object.defineProperty(c,"scrollLeft",{get:function(){return this._ScrV_Props_._scrollLeft},set:function(a){a!=this._ScrV_Props_._scrollLeft&&(this._ScrV_Props_._scrollLeft=a,this._validatePosition(!1,!0),this._updateContentPosition())},enumerable:!0,configurable:!0});Object.defineProperty(c,"scrollTop",
{get:function(){return this._ScrV_Props_._scrollTop},set:function(a){a!=this._ScrV_Props_._scrollTop&&(this._ScrV_Props_._scrollTop=a,this._validatePosition(!0,!1),this._updateContentPosition())},enumerable:!0,configurable:!0});c.setScrollPosition=function(a,c,b){void 0===b&&(b=!1);if(!b||0!=a||0!=c)if(b||this._ScrV_Props_._scrollTop!=a||this._ScrV_Props_._scrollLeft!=c){var d=this._ScrV_Props_._scrollTop,e=this._ScrV_Props_._scrollLeft;if(b){b=this.getMaxScrollLeft();var g=this.getMaxScrollTop();
if(0>=d||d>=g)a/=2;if(0>=e||e>=b)c/=2;a=d+a;c=e+c;if(!this._ScrV_Props_._bounces){if(0>=a||a>=g)a=Math.max(0,Math.min(a,g));if(0>=c||c>=b)c=Math.max(0,Math.min(c,b))}}this._ScrV_Props_._scrollTop=a;this._ScrV_Props_._scrollLeft=c;this._validatePosition(!0,!0);this._updateContentPosition()}};c._validatePosition=function(a,c){void 0===a&&(a=!1);void 0===c&&(c=!1);if(a){var b=this.height,d=this._getContentHeight();this._ScrV_Props_._scrollTop=Math.max(this._ScrV_Props_._scrollTop,(0-b)/2);this._ScrV_Props_._scrollTop=
Math.min(this._ScrV_Props_._scrollTop,d>b?d-b/2:b/2)}c&&(b=this.width,d=this._getContentWidth(),this._ScrV_Props_._scrollLeft=Math.max(this._ScrV_Props_._scrollLeft,(0-b)/2),this._ScrV_Props_._scrollLeft=Math.min(this._ScrV_Props_._scrollLeft,d>b?d-b/2:b/2))};c._setWidth=function(a){this._DO_Props_._explicitWidth!=a&&(d.prototype._setWidth.call(this,a),this._updateContentPosition())};c._setHeight=function(a){this._DO_Props_._explicitHeight!=a&&(d.prototype._setHeight.call(this,a),this._updateContentPosition())};
c._updateContentPosition=function(){var a=this.getBounds(b.Rectangle.identity),c=a.height,a=a.width;this.scrollRect=new b.Rectangle(Math.round(this._ScrV_Props_._scrollLeft),Math.round(this._ScrV_Props_._scrollTop),a,c);this.dispatchEvent(new b.Event(b.Event.CHANGE))};c._checkScrollPolicy=function(){var a=this.__checkScrollPolicy(this._ScrV_Props_._horizontalScrollPolicy,this._getContentWidth(),this.width);this._ScrV_Props_._hCanScroll=a;var c=this.__checkScrollPolicy(this._ScrV_Props_._verticalScrollPolicy,
this._getContentHeight(),this.height);this._ScrV_Props_._vCanScroll=c;return a||c};c.__checkScrollPolicy=function(a,c,b){return"on"==a?!0:"off"==a?!1:c>b};c._addEvents=function(){this.addEventListener(b.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this);this.addEventListener(b.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0);this.addEventListener(b.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)};c._removeEvents=function(){this.removeEventListener(b.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,
this);this.removeEventListener(b.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0);this.removeEventListener(b.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)};c._onTouchBegin=function(a){!a._isDefaultPrevented&&this._checkScrollPolicy()&&(this._ScrV_Props_._touchStartPosition.x=a.stageX,this._ScrV_Props_._touchStartPosition.y=a.stageY,(this._ScrV_Props_._isHTweenPlaying||this._ScrV_Props_._isVTweenPlaying)&&this._onScrollFinished(),this.stage.addEventListener(b.TouchEvent.TOUCH_MOVE,
this._onTouchMove,this),this.stage.addEventListener(b.TouchEvent.TOUCH_END,this._onTouchEnd,this),this.stage.addEventListener(b.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.addEventListener(b.Event.ENTER_FRAME,this._onEnterFrame,this),this._logTouchEvent(a),a.preventDefault())};c._onTouchBeginCapture=function(a){var c=this._checkScrollPolicy();if(c){for(var d=a.target;d!=this;){if("_checkScrollPolicy"in d&&(c=d._checkScrollPolicy()))return;d=d.parent}a.stopPropagation();this.delayTouchBeginEvent=
this.cloneTouchEvent(a);this.touchBeginTimer||(this.touchBeginTimer=new b.Timer(100,1),this.touchBeginTimer.addEventListener(b.TimerEvent.TIMER_COMPLETE,this._onTouchBeginTimer,this));this.touchBeginTimer.start();this._onTouchBegin(a)}};c._onTouchEndCapture=function(a){this.delayTouchBeginEvent&&this._onTouchBeginTimer()};c._onTouchBeginTimer=function(){this.touchBeginTimer.stop();var a=this.delayTouchBeginEvent;this.delayTouchBeginEvent=null;this.stage&&this.dispatchPropagationEvent(a)};c.dispatchPropagationEvent=
function(a){for(var c=[],b=a._target,d=0;b;)b==this&&(d=c.length),c.push(b),b=b.parent;b=c.slice(0,d);b=b.reverse();c=b.concat(c);this._dispatchPropagationEvent(a,c,d)};c._dispatchPropagationEvent=function(a,c,b){for(var d=c.length,e=0;e<d;e++){var g=c[e];a._currentTarget=g;a._eventPhase=e<b?1:e==b?2:3;g._notifyListener(a);if(a._isPropagationStopped||a._isPropagationImmediateStopped)break}};c._onTouchMove=function(a){if(this._ScrV_Props_._lastTouchPosition.x!=a.stageX||this._ScrV_Props_._lastTouchPosition.y!=
a.stageY){if(!this._ScrV_Props_._scrollStarted){var c=a.stageX-this._ScrV_Props_._touchStartPosition.x,b=a.stageY-this._ScrV_Props_._touchStartPosition.y;if(Math.sqrt(c*c+b*b)<this.scrollBeginThreshold){this._logTouchEvent(a);return}}this._ScrV_Props_._scrollStarted=!0;this.delayTouchBeginEvent&&(this.delayTouchBeginEvent=null,this.touchBeginTimer.stop());this.touchChildren=!1;c=this._getPointChange(a);this.setScrollPosition(c.y,c.x,!0);this._calcVelocitys(a);this._logTouchEvent(a)}};c._onTouchEnd=
function(a){this.touchChildren=!0;this._ScrV_Props_._scrollStarted=!1;b.MainContext.instance.stage.removeEventListener(b.TouchEvent.TOUCH_MOVE,this._onTouchMove,this);b.MainContext.instance.stage.removeEventListener(b.TouchEvent.TOUCH_END,this._onTouchEnd,this);b.MainContext.instance.stage.removeEventListener(b.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this);this.removeEventListener(b.Event.ENTER_FRAME,this._onEnterFrame,this);this._moveAfterTouchEnd()};c._onEnterFrame=function(a){a=b.getTimer();100<
a-this._ScrV_Props_._lastTouchTime&&300>a-this._ScrV_Props_._lastTouchTime&&this._calcVelocitys(this._ScrV_Props_._lastTouchEvent)};c._logTouchEvent=function(a){this._ScrV_Props_._lastTouchPosition.x=a.stageX;this._ScrV_Props_._lastTouchPosition.y=a.stageY;this._ScrV_Props_._lastTouchEvent=this.cloneTouchEvent(a);this._ScrV_Props_._lastTouchTime=b.getTimer()};c._getPointChange=function(a){return{x:!1===this._ScrV_Props_._hCanScroll?0:this._ScrV_Props_._lastTouchPosition.x-a.stageX,y:!1===this._ScrV_Props_._vCanScroll?
0:this._ScrV_Props_._lastTouchPosition.y-a.stageY}};c._calcVelocitys=function(a){var c=b.getTimer();if(0==this._ScrV_Props_._lastTouchTime)this._ScrV_Props_._lastTouchTime=c;else{var d=this._getPointChange(a),c=c-this._ScrV_Props_._lastTouchTime;d.x/=c;d.y/=c;this._ScrV_Props_._velocitys.push(d);5<this._ScrV_Props_._velocitys.length&&this._ScrV_Props_._velocitys.shift();this._ScrV_Props_._lastTouchPosition.x=a.stageX;this._ScrV_Props_._lastTouchPosition.y=a.stageY}};c._getContentWidth=function(){return this._content.explicitWidth||
this._content.width};c._getContentHeight=function(){return this._content.explicitHeight||this._content.height};c.getMaxScrollLeft=function(){var a=this._getContentWidth()-this.width;return Math.max(0,a)};c.getMaxScrollTop=function(){var a=this._getContentHeight()-this.height;return Math.max(0,a)};c._moveAfterTouchEnd=function(){if(0!=this._ScrV_Props_._velocitys.length){for(var h=0,c=0,b=0,d=0;d<this._ScrV_Props_._velocitys.length;d++)var e=this._ScrV_Props_._velocitys[d],g=a.weight[d],h=h+e.x*g,
c=c+e.y*g,b=b+g;this._ScrV_Props_._velocitys.length=0;0>=this.scrollSpeed&&(this.scrollSpeed=1);h=h/b*this.scrollSpeed;c=c/b*this.scrollSpeed;e=Math.abs(h);b=Math.abs(c);g=this.getMaxScrollLeft();d=this.getMaxScrollTop();h=0.02<e?this.getAnimationDatas(h,this._ScrV_Props_._scrollLeft,g):{position:this._ScrV_Props_._scrollLeft,duration:1};c=0.02<b?this.getAnimationDatas(c,this._ScrV_Props_._scrollTop,d):{position:this._ScrV_Props_._scrollTop,duration:1};this.setScrollLeft(h.position,h.duration);this.setScrollTop(c.position,
c.duration)}};c._onTweenFinished=function(a){a==this._ScrV_Props_._vScrollTween&&(this._ScrV_Props_._isVTweenPlaying=!1);a==this._ScrV_Props_._hScrollTween&&(this._ScrV_Props_._isHTweenPlaying=!1);!1==this._ScrV_Props_._isHTweenPlaying&&!1==this._ScrV_Props_._isVTweenPlaying&&this._onScrollFinished()};c._onScrollStarted=function(){};c._onScrollFinished=function(){b.Tween.removeTweens(this);this._ScrV_Props_._hScrollTween=null;this._ScrV_Props_._vScrollTween=null;this._ScrV_Props_._isHTweenPlaying=
!1;this._ScrV_Props_._isVTweenPlaying=!1;this.dispatchEvent(new b.Event(b.Event.COMPLETE))};c.setScrollTop=function(a,c){void 0===c&&(c=0);var d=Math.min(this.getMaxScrollTop(),Math.max(a,0));if(0==c)return this.scrollTop=d,null;!1==this._ScrV_Props_._bounces&&(a=d);var e=b.Tween.get(this).to({scrollTop:a},c,b.Ease.quartOut);d!=a&&e.to({scrollTop:d},300,b.Ease.quintOut);this._ScrV_Props_._isVTweenPlaying=!0;this._ScrV_Props_._vScrollTween=e;e.call(this._onTweenFinished,this,[e]);this._ScrV_Props_._isHTweenPlaying||
this._onScrollStarted();return e};c.setScrollLeft=function(a,c){void 0===c&&(c=0);var d=Math.min(this.getMaxScrollLeft(),Math.max(a,0));if(0==c)return this.scrollLeft=d,null;!1==this._ScrV_Props_._bounces&&(a=d);var e=b.Tween.get(this).to({scrollLeft:a},c,b.Ease.quartOut);d!=a&&e.to({scrollLeft:d},300,b.Ease.quintOut);this._ScrV_Props_._isHTweenPlaying=!0;this._ScrV_Props_._hScrollTween=e;e.call(this._onTweenFinished,this,[e]);this._ScrV_Props_._isVTweenPlaying||this._onScrollStarted();return e};
c.getAnimationDatas=function(a,c,b){var d=Math.abs(a),e=0,g=c+500*a;if(0>g||g>b)for(g=c;Infinity!=Math.abs(a)&&0.02<Math.abs(a);)g+=a,a=0>g||g>b?0.998*a*0.95:0.998*a,e++;else e=500*-Math.log(0.02/d);return{position:Math.min(b+50,Math.max(g,-50)),duration:e}};c.cloneTouchEvent=function(a){var c=new b.TouchEvent(a._type,a._bubbles,a.cancelable);c.touchPointID=a.touchPointID;c._stageX=a._stageX;c._stageY=a._stageY;c.ctrlKey=a.ctrlKey;c.altKey=a.altKey;c.shiftKey=a.shiftKey;c.touchDown=a.touchDown;c._isDefaultPrevented=
!1;c._target=a._target;return c};c.throwNotSupportedError=function(){b.$error(1023)};c.addChild=function(a){this.throwNotSupportedError();return null};c.addChildAt=function(a,c){this.throwNotSupportedError();return null};c.removeChild=function(a){this.throwNotSupportedError();return null};c.removeChildAt=function(a){this.throwNotSupportedError();return null};c.setChildIndex=function(a,c){this.throwNotSupportedError()};c.swapChildren=function(a,c){this.throwNotSupportedError()};c.swapChildrenAt=function(a,
c){this.throwNotSupportedError()};c.hitTest=function(a,c,e){void 0===e&&(e=!1);var l=d.prototype.hitTest.call(this,a,c,e);return l?l:b.DisplayObject.prototype.hitTest.call(this,a,c,e)};a.weight=[1,1.33,1.66,2,2.33];return a}(b.DisplayObjectContainer);b.ScrollView=e;e.prototype.__class__="egret.ScrollView"})(egret||(egret={}));(function(b){var e=function(){function b(){}b.REPEAT="repeat";b.SCALE="scale";return b}();b.BitmapFillMode=e;e.prototype.__class__="egret.BitmapFillMode"})(egret||(egret={}));
(function(b){var e=function(d){function a(a){d.call(this);this.scale9Grid=this._texture=null;this.fillMode="scale";a&&(this._texture=a,this._setSizeDirty());this.needDraw=!0}__extends(a,d);var c=a.prototype;Object.defineProperty(c,"texture",{get:function(){return this._texture},set:function(a){a!=this._texture&&(this._setSizeDirty(),this._texture=a)},enumerable:!0,configurable:!0});c._render=function(h){var c=this._texture;c?(this._texture_to_render=c,a._drawBitmap(h,this._DO_Props_._hasWidthSet?
this._DO_Props_._explicitWidth:c._textureWidth,this._DO_Props_._hasHeightSet?this._DO_Props_._explicitHeight:c._textureHeight,this)):this._texture_to_render=null};a._drawBitmap=function(h,c,b,d){var e=d._texture_to_render;if(e){var g=e._textureWidth,n=e._textureHeight;if("scale"==d.fillMode){var p=d.scale9Grid||e.scale9Grid;if(p&&g-p.width<c&&n-p.height<b)a.drawScale9GridImage(h,d,p,c,b);else{var p=e._offsetX,q=e._offsetY,r=e._bitmapWidth||g,s=e._bitmapHeight||n;c/=g;p=Math.round(p*c);c=Math.round(r*
c);b/=n;q=Math.round(q*b);b=Math.round(s*b);a.renderFilter.drawImage(h,d,e._bitmapX,e._bitmapY,r,s,p,q,c,b)}}else a.drawRepeatImage(h,d,c,b,d.fillMode)}};a.drawRepeatImage=function(a,c,d,e,f){var g=c._texture_to_render;if(g){var n=g._textureWidth,p=g._textureHeight,q=g._bitmapX,r=g._bitmapY,n=g._bitmapWidth||n,p=g._bitmapHeight||p,s=g._offsetX,g=g._offsetY;b.RenderFilter.getInstance().drawImage(a,c,q,r,n,p,s,g,d,e,f)}};a.drawScale9GridImage=function(a,c,d,e,f){var g=b.MainContext.instance.rendererContext._texture_scale_factor,
n=c._texture_to_render;if(n&&d){var p=n._textureWidth,q=n._textureHeight,r=n._bitmapX,s=n._bitmapY,t=n._bitmapWidth||p,u=n._bitmapHeight||q;e-=p-t;f-=q-u;if(!a.drawImageScale9(n,r,s,t,u,n._offsetX,n._offsetY,e,f,d)){p=n._offsetX/g;q=n._offsetY/g;n=b.RenderFilter.getInstance();d=b.Rectangle.identity.initialize(d.x-Math.round(p),d.y-Math.round(p),d.width,d.height);p=Math.round(p);q=Math.round(q);d.y==d.bottom&&(d.bottom<u?d.bottom++:d.y--);d.x==d.right&&(d.right<t?d.right++:d.x--);var z=r+d.x/g,w=r+
d.right/g,x=t-d.right,y=s+d.y/g,g=s+d.bottom/g,v=u-d.bottom,B=p+d.x,A=q+d.y,u=f-(u-d.bottom),t=e-(t-d.right);n.drawImage(a,c,r,s,d.x,d.y,p,q,d.x,d.y);n.drawImage(a,c,z,s,d.width,d.y,B,q,t-d.x,d.y);n.drawImage(a,c,w,s,x,d.y,p+t,q,e-t,d.y);n.drawImage(a,c,r,y,d.x,d.height,p,A,d.x,u-d.y);n.drawImage(a,c,z,y,d.width,d.height,B,A,t-d.x,u-d.y);n.drawImage(a,c,w,y,x,d.height,p+t,A,e-t,u-d.y);n.drawImage(a,c,r,g,d.x,v,p,q+u,d.x,f-u);n.drawImage(a,c,z,g,d.width,v,B,q+u,t-d.x,f-u);n.drawImage(a,c,w,g,x,v,p+
t,q+u,e-t,f-u)}}};c._measureBounds=function(){var a=this._texture;return a?b.Rectangle.identity.initialize(0,0,a._textureWidth,a._textureHeight):d.prototype._measureBounds.call(this)};a.renderFilter=b.RenderFilter.getInstance();return a}(b.DisplayObject);b.Bitmap=e;e.prototype.__class__="egret.Bitmap"})(egret||(egret={}));
(function(b){var e=function(d){function a(){d.call(this);this._text="";this._textChanged=!1;this._font=null;this._fontChanged=!1;this._textOffsetY=this._textOffsetX=this._textHeight=this._textWidth=this._lineSpacing=this._letterSpacing=0;this.textLinesChange=!0;this._lineHeights=[];this.needDraw=this.cacheAsBitmap=!0}__extends(a,d);var c=a.prototype;Object.defineProperty(c,"text",{get:function(){return this._text},set:function(a){this.$setText(a)},enumerable:!0,configurable:!0});c.$setText=function(a){this._text!=
a&&(this._textChanged=!0,this._text=a,this._setSizeDirty())};Object.defineProperty(c,"font",{get:function(){return this._font},set:function(a){this.$setFont(a)},enumerable:!0,configurable:!0});c.$setFont=function(a){this._font!=a&&(this._font=a,this._fontChanged=!0,this._setSizeDirty())};Object.defineProperty(c,"letterSpacing",{get:function(){return this._letterSpacing},set:function(a){this._setLetterSpacing(a)},enumerable:!0,configurable:!0});c._setLetterSpacing=function(a){this._letterSpacing=a;
this._setSizeDirty()};Object.defineProperty(c,"lineSpacing",{get:function(){return this._lineSpacing},set:function(a){this._setLineSpacing(a)},enumerable:!0,configurable:!0});c._setLineSpacing=function(a){this._lineSpacing=a};c._setSizeDirty=function(){d.prototype._setSizeDirty.call(this);this.textLinesChange=!0};c._render=function(h){var c=this._getTextLines(),d=c.length;if(0!=d){for(var e=this._font,f=e._getFirstCharHeight(),f=Math.ceil(f*a.EMPTY_FACTOR),g=0,n=this._DO_Props_._hasHeightSet?this._DO_Props_._explicitHeight:
Number.POSITIVE_INFINITY,p=this._lineHeights,q=0;q<d;q++){var r=p[q];if(0<q&&g+r>n)break;for(var s=c[q],t=s.length,u=0,z=0;z<t;z++){var w=s.charAt(z),x=e.getTexture(w);if(x){var w=x._bitmapWidth||x._textureWidth,y=x._bitmapHeight||x._textureHeight;this._texture_to_render=x;b.RenderFilter.getInstance().drawImage(h,this,x._bitmapX,x._bitmapY,w,y,u+x._offsetX,g+x._offsetY,w,y);u+=x._textureWidth+this._letterSpacing}else" "==w?u+=f:b.$warn(1011,w)}g+=r+this._lineSpacing}this._texture_to_render=null}};
c._measureBounds=function(){var a=this._getTextLines();return 0==a.length?b.Rectangle.identity.initialize(0,0,0,0):b.Rectangle.identity.initialize(this._textOffsetX,this._textOffsetY,this._textWidth-this._textOffsetX,this._textHeight-this._textOffsetY+(a.length-1)*this._lineSpacing)};c._getTextLines=function(){if(!this.textLinesChange)return this._textLines;var h=[];this._textLines=h;this.textLinesChange=!1;var c=[];this._lineHeights=c;if(!this._text||!this._font)return h;for(var d=0,e=0,f=0,g=0,
n=this._DO_Props_._hasWidthSet,p=this._DO_Props_._hasWidthSet?this._DO_Props_._explicitWidth:Number.POSITIVE_INFINITY,q=this._font,r=q._getFirstCharHeight(),s=Math.ceil(r*a.EMPTY_FACTOR),t=this._text.split(/(?:\r\n|\r|\n)/),u=t.length,z=!0,w=0;w<u;w++){for(var x=t[w],y=x.length,v=0,B=0,A=!0,C=0;C<y;C++){A||(B+=this._letterSpacing);var D=x.charAt(C),E,G=0,H=0,F=q.getTexture(D);if(F)D=F._textureWidth,E=F._textureHeight,G=F._offsetX,H=F._offsetY;else if(" "==D)D=s,E=r;else{b.$warn(1011,D);A&&(A=!1);
continue}A&&(A=!1,f=Math.min(G,f));z&&(g=Math.min(H,g));n&&0<C&&B+D>p?(h.push(x.substring(0,C)),c.push(v),e+=v,d=Math.max(B,d),x=x.substring(C),y=x.length,C=0,B=D,v=E):(B+=D,v=Math.max(E,v))}z&&(z=!1);h.push(x);c.push(v);e+=v;d=Math.max(B,d)}this._textWidth=d;this._textHeight=e;this._textOffsetX=f;this._textOffsetY=g;return h};a.EMPTY_FACTOR=0.33;return a}(b.DisplayObject);b.BitmapText=e;e.prototype.__class__="egret.BitmapText"})(egret||(egret={}));
(function(b){var e=function(){function b(){}b.LINEAR="linear";b.RADIAL="radial";return b}();b.GradientType=e;e.prototype.__class__="egret.GradientType"})(egret||(egret={}));
(function(b){var e=function(){function a(){this.fillStyle=this.strokeStyle=this.commandQueue=this._renderContext=null;this._dirty=!1;this.lineY=this.lineX=0;this._firstCheck=!0;this._lastY=this._lastX=this._maxY=this._maxX=this._minY=this._minX=0;this.commandQueue=[]}var c=a.prototype;c.beginFill=function(a,c){void 0===c&&(c=1);this.fillStyle=this._parseColor(a,c);this._pushCommand(new d(this._setStyle,this,[this.fillStyle]))};c._parseColor=function(a,c){return"rgba("+(a>>16)+","+((a&65280)>>8)+","+
(a&255)+","+c+")"};c._setStyle=function(a){b.Graphics._currentFillStyle=a;this._renderContext.fillStyle=a;this._renderContext.beginPath()};c.beginGradientFill=function(a,c,b,e,f){void 0===f&&(f=null);this.fillStyle=a=this.getGradient(a,c,b,e,f);this._pushCommand(new d(this._setStyle,this,[a]))};c.getGradient=function(a,c,d,e,f){var g=b.MainContext.instance.rendererContext,n=new b.Matrix;f?(n.a=819.2*f.a,n.b=819.2*f.b,n.c=819.2*f.c,n.d=819.2*f.d,n.tx=f.tx,n.ty=f.ty):(n.a=100,n.d=100);a=a==b.GradientType.LINEAR?
g.createLinearGradient(-1,0,1,0):g.createRadialGradient(0,0,0,0,0,1);f=c.length;for(g=0;g<f;g++)a.addColorStop(e[g]/255,this._parseColor(c[g],d[g]));a.matrix=n;return a};c.drawRect=function(a,c,b,e){this._pushCommand(new d(function(a,h,c,b){this._renderContext.beginPath();this._renderContext.rect(a,h,c,b);this._renderContext.closePath()},this,[a,c,b,e]));this._checkRect(a,c,b,e)};c.drawCircle=function(a,c,b){this._pushCommand(new d(function(a,h,c){this._renderContext.beginPath();this._renderContext.arc(a,
h,c,0,2*Math.PI);this._renderContext.closePath()},this,[a,c,b]));this._checkRect(a-b,c-b,2*b,2*b)};c.drawRoundRect=function(a,c,b,e,f,g){this._pushCommand(new d(function(a,h,c,b,d,e){d/=2;e=e?e/2:d;c=a+c;b=h+b;var k=b-e;this._renderContext.beginPath();this._renderContext.moveTo(c,k);this._renderContext.quadraticCurveTo(c,b,c-d,b);this._renderContext.lineTo(a+d,b);this._renderContext.quadraticCurveTo(a,b,a,b-e);this._renderContext.lineTo(a,h+e);this._renderContext.quadraticCurveTo(a,h,a+d,h);this._renderContext.lineTo(c-
d,h);this._renderContext.quadraticCurveTo(c,h,c,h+e);this._renderContext.lineTo(c,k);this._renderContext.closePath()},this,[a,c,b,e,f,g]));this._checkRect(a,c,b,e)};c.drawEllipse=function(a,c,b,e){this._pushCommand(new d(function(a,c,h,b){a+=h/2;c+=b/2;var d=h>b?h:b;h/=d;b/=d;d/=2;this._renderContext.scale(h,b);this._renderContext.beginPath();this._renderContext.arc(a/h,c/b,d,0,2*Math.PI);this._renderContext.closePath();this._renderContext.scale(1/h,1/b)},this,[a,c,b,e]));this._checkRect(a,c,b,e)};
c.lineStyle=function(a,c,b,e,f,g,n,p){void 0===a&&(a=NaN);void 0===c&&(c=0);void 0===b&&(b=1);void 0===e&&(e=!1);void 0===f&&(f="normal");void 0===g&&(g=null);void 0===n&&(n=null);void 0===p&&(p=3);this.strokeStyle&&(this._createEndLineCommand(),this._pushCommand(this._endLineCommand));this.strokeStyle=this._parseColor(c,b);this._pushCommand(new d(function(a,c){this._renderContext.lineWidth=a;this._renderContext.strokeStyle=c;this._renderContext.beginPath()},this,[a,this.strokeStyle]));this.moveTo(this.lineX,
this.lineY)};c.lineTo=function(a,c){this._pushCommand(new d(function(a,c){this._renderContext.lineTo(a,c)},this,[a,c]));this._checkPoint(this.lineX,this.lineY);this.lineX=a;this.lineY=c;this._checkPoint(a,c)};c.curveTo=function(a,c,b,e){this._pushCommand(new d(function(a,c,h,b){this._renderContext.quadraticCurveTo(a,c,h,b)},this,[a,c,b,e]));this._checkPoint(this.lineX,this.lineY);this.lineX=b;this.lineY=e;this._checkPoint(a,c);this._checkPoint(b,e)};c.cubicCurveTo=function(a,c,b,e,f,g){this._pushCommand(new d(function(a,
c,h,b,d,e){this._renderContext.bezierCurveTo(a,c,h,b,d,e)},this,[a,c,b,e,f,g]));this._checkPoint(this.lineX,this.lineY);this.lineX=f;this.lineY=g;this._checkPoint(a,c);this._checkPoint(b,e);this._checkPoint(f,g)};c.moveTo=function(a,c){this._pushCommand(new d(function(a,c){this._renderContext.moveTo(a,c)},this,[a,c]));this.lineX=a;this.lineY=c};c.clear=function(){this.lineY=this.lineX=this.commandQueue.length=0;this.fillStyle=this.strokeStyle=null;this._maxY=this._maxX=this._minY=this._minX=0;this._dirty=
this._firstCheck=!0};c.endFill=function(){null!=this.fillStyle&&(this._fill(),this.fillStyle=null)};c._beginDraw=function(a){};c._endDraw=function(a){};c._draw=function(a){var c=this.commandQueue.length;if(0!=c){this._beginDraw(a);for(var b=0;b<c;b++){var d=this.commandQueue[b];d.method.apply(d.thisObject,d.args)}this.fillStyle&&(this._createEndFillCommand(),d=this._endFillCommand,d.method.apply(d.thisObject,d.args));this.strokeStyle&&(this._createEndLineCommand(),d=this._endLineCommand,d.method.apply(d.thisObject,
d.args));this._endDraw(a);this._dirty=!1}};c._checkRect=function(a,c,b,d){this._firstCheck?(this._firstCheck=!1,this._minX=a,this._minY=c,this._maxX=a+b,this._maxY=c+d):(this._minX=Math.min(this._minX,a),this._minY=Math.min(this._minY,c),this._maxX=Math.max(this._maxX,a+b),this._maxY=Math.max(this._maxY,c+d));this._dirty=!0};c._checkPoint=function(a,c){this._firstCheck?(this._firstCheck=!1,this._minX=a,this._minY=c,this._maxX=a,this._maxY=c):(this._minX=Math.min(this._minX,a),this._minY=Math.min(this._minY,
c),this._maxX=Math.max(this._maxX,a),this._maxY=Math.max(this._maxY,c));this._lastX=a;this._lastY=c;this._dirty=!0};c._measureBounds=function(){return b.Rectangle.identity.initialize(this._minX,this._minY,this._maxX-this._minX,this._maxY-this._minY)};c._createEndFillCommand=function(){this._endFillCommand||(this._endFillCommand=new d(function(){this._renderContext.fill();this._renderContext.closePath()},this,null))};c._fill=function(){this.fillStyle&&(this._createEndFillCommand(),this._pushCommand(this._endFillCommand));
this.strokeStyle&&(this._createEndLineCommand(),this._pushCommand(this._endLineCommand))};c._createEndLineCommand=function(){this._endLineCommand||(this._endLineCommand=new d(function(){this._renderContext.stroke();this._renderContext.closePath()},this,null))};c._pushCommand=function(a){this.commandQueue.push(a);this._dirty=!0};return a}();b.Graphics=e;e.prototype.__class__="egret.Graphics";var d=function(){return function(a,c,h){this.method=a;this.thisObject=c;this.args=h}}();d.prototype.__class__=
"egret.Command"})(egret||(egret={}));
(function(b){var e=function(d){function a(){d.call(this);this._graphics=null}__extends(a,d);var c=a.prototype;Object.defineProperty(c,"graphics",{get:function(){this._graphics||(this._graphics=new b.Graphics,this.needDraw=!0);return this._graphics},enumerable:!0,configurable:!0});c._draw=function(a){this._graphics&&this._graphics._dirty&&this._setCacheDirty();d.prototype._draw.call(this,a)};c._render=function(a){this._graphics&&this._graphics._draw(a)};c._measureBounds=function(){var a=this._graphics;
return a?a._measureBounds():d.prototype._measureBounds.call(this)};return a}(b.DisplayObject);b.Shape=e;e.prototype.__class__="egret.Shape"})(egret||(egret={}));
(function(b){var e=function(d){function a(){d.call(this);this._graphics=null}__extends(a,d);var c=a.prototype;Object.defineProperty(c,"graphics",{get:function(){this._graphics||(this._graphics=new b.Graphics,this.needDraw=!0);return this._graphics},enumerable:!0,configurable:!0});c._draw=function(a){this._graphics&&this._graphics._dirty&&this._setCacheDirty();d.prototype._draw.call(this,a)};c._render=function(a){this._graphics&&this._graphics._draw(a);d.prototype._render.call(this,a)};c._measureBounds=
function(){for(var a=0,c=0,d=0,e=0,f=this._children.length,g=0;g<f;g++){var n=this._children[g];if(n.visible){var p=n.getBounds(b.Rectangle.identity,!1),q=p.x,r=p.y,s=p.width,p=p.height,n=n._getMatrix(),n=b.DisplayObject.getTransformBounds(b.Rectangle.identity.initialize(q,r,s,p),n),q=n.x,r=n.y,s=n.width+n.x,n=n.height+n.y;if(q<a||0==g)a=q;if(s>c||0==g)c=s;if(r<d||0==g)d=r;if(n>e||0==g)e=n}}if(this._graphics){f=this._graphics._measureBounds();q=f.x;r=f.y;s=f.width+f.x;n=f.height+f.y;if(q<a||0==g)a=
q;if(s>c||0==g)c=s;if(r<d||0==g)d=r;if(n>e||0==g)e=n}return b.Rectangle.identity.initialize(a,d,c-a,e-d)};c.hitTest=function(a,c,e){void 0===e&&(e=!1);var l=d.prototype.hitTest.call(this,a,c,e);return l?l:this._graphics?b.DisplayObject.prototype.hitTest.call(this,a,c,e):null};return a}(b.DisplayObjectContainer);b.Sprite=e;e.prototype.__class__="egret.Sprite"})(egret||(egret={}));
(function(b){var e=function(){function d(){}d._getStartLine=function(a){var c=d._getTextHeight(a),h=0;a._DO_Props_._hasHeightSet&&(!(c<a._DO_Props_._explicitHeight)&&c>a._DO_Props_._explicitHeight&&(h=Math.max(a._TF_Props_._scrollV-1,0),h=Math.min(a._TF_Props_._numLines-1,h)),a._TF_Props_._multiline||(h=Math.max(a._TF_Props_._scrollV-1,0),h=Math.min(a._TF_Props_._numLines-1,h)));return h};d._getHalign=function(a){var c=a._getLinesArr(),h=0;a._TF_Props_._textAlign==b.HorizontalAlign.CENTER?h=0.5:a._TF_Props_._textAlign==
b.HorizontalAlign.RIGHT&&(h=1);a._TF_Props_._type==b.TextFieldType.INPUT&&!a._TF_Props_._multiline&&1<c.length&&(h=0);return h};d._getTextHeight=function(a){return b.TextFieldType.INPUT!=a._TF_Props_._type||a._TF_Props_._multiline?a._TF_Props_._textMaxHeight+(a._TF_Props_._numLines-1)*a._TF_Props_._lineSpacing:a._TF_Props_._size};d._getValign=function(a){var c=d._getTextHeight(a);return a._DO_Props_._hasHeightSet&&c<a._DO_Props_._explicitHeight?(c=0,a._TF_Props_._verticalAlign==b.VerticalAlign.MIDDLE?
c=0.5:a._TF_Props_._verticalAlign==b.VerticalAlign.BOTTOM&&(c=1),c):0};d._getTextElement=function(a,c,h){c=d._getHit(a,c,h);a=a._getLinesArr();return c&&a[c.lineIndex]&&a[c.lineIndex].elements[c.textElementIndex]?a[c.lineIndex].elements[c.textElementIndex]:null};d._getHit=function(a,c,h){var b=a._getLinesArr();if(0==a._TF_Props_._textMaxWidth)return null;var e=0,l=d._getTextHeight(a),f=0;a._DO_Props_._hasHeightSet&&a._DO_Props_._explicitHeight>l&&(f=d._getValign(a)*(a._DO_Props_._explicitHeight-l),
0!=f&&(h-=f));f=0;for(l=d._getStartLine(a);l<b.length;l++){var g=b[l];if(f+g.height>=h){e=l+1;break}else f+=g.height;if(f+a._TF_Props_._lineSpacing>h)return null;f+=a._TF_Props_._lineSpacing}if(0===e)return null;a=b[e-1];for(l=h=0;l<a.elements.length;l++)if(b=a.elements[l],h+b.width<c)h+=b.width;else return{lineIndex:e-1,textElementIndex:l};return null};d._getScrollNum=function(a){var c=1;if(a._TF_Props_._multiline){var h=a.height,b=a.size;a=a.lineSpacing;c=Math.floor(h/(b+a));h-(b+a)*c>b/2&&c++}return c};
return d}();b.TextFieldUtils=e;e.prototype.__class__="egret.TextFieldUtils"})(egret||(egret={}));
(function(b){var e=function(){return function(){this._text=this._type="";this._displayAsPassword=!1;this._fontFamily=b.TextField.default_fontFamily;this._size=30;this._bold=this._italic=!1;this._textColorString="#FFFFFF";this._textColor=16777215;this._strokeColorString="#000000";this._stroke=this._strokeColor=0;this._border=!1;this._borderColor=0;this._background=!1;this._backgroundColor=16777215;this._textAlign="left";this._verticalAlign="top";this._maxChars=this._textMaxHeight=this._textMaxWidth=
0;this._scrollV=-1;this._numLines=this._lineSpacing=0;this._wordWrap=this._multiline=!1;this._restrictNot=this._restrictAnd=null}}();b.TextFieldProperties=e;e.prototype.__class__="egret.TextFieldProperties"})(egret||(egret={}));
(function(b){var e=function(d){function a(){d.call(this);this._inputEnabled=!1;this._bgGraphics=this._inputUtils=null;this._isFlow=!1;this._textArr=[];this._isArrayChanged=!1;this._linesArr=[];this._isTyping=!1;this.needDraw=!0;this._TF_Props_=new b.TextFieldProperties}__extends(a,d);var c=a.prototype;c.isInput=function(){return this._TF_Props_._type==b.TextFieldType.INPUT};c._setTouchEnabled=function(a){d.prototype._setTouchEnabled.call(this,a);this.isInput()&&(this._inputEnabled=!0)};Object.defineProperty(c,
"type",{get:function(){return this._TF_Props_._type},set:function(a){this._setType(a)},enumerable:!0,configurable:!0});c._setType=function(a){var c=this._TF_Props_;c._type!=a&&(c._type=a,c._type==b.TextFieldType.INPUT?(this._DO_Props_._hasWidthSet||this._setWidth(100),this._DO_Props_._hasHeightSet||this._setHeight(30),null==this._inputUtils&&(this._inputUtils=new b.InputController),this._inputUtils.init(this),this._setDirty(),this._DO_Props_._stage&&this._inputUtils._addStageText()):this._inputUtils&&
(this._inputUtils._removeStageText(),this._inputUtils=null))};Object.defineProperty(c,"text",{get:function(){return this._getText()},set:function(a){this._setText(a)},enumerable:!0,configurable:!0});c._getText=function(){return this._TF_Props_._type==b.TextFieldType.INPUT?this._inputUtils._getText():this._TF_Props_._text};c._setSizeDirty=function(){d.prototype._setSizeDirty.call(this);this._isArrayChanged=!0};c._setTextDirty=function(){this._setSizeDirty()};c._setBaseText=function(a){null==a&&(a=
"");var c=this._TF_Props_;a=a.toString();this._isFlow=!1;c._text!=a&&(this._setTextDirty(),c._text=a,a="",a=c._displayAsPassword?this.changeToPassText(c._text):c._text,this.setMiddleStyle([{text:a}]))};c._setText=function(a){null==a&&(a="");this._setBaseText(a);this._inputUtils&&this._inputUtils._setText(this._TF_Props_._text)};Object.defineProperty(c,"displayAsPassword",{get:function(){return this._TF_Props_._displayAsPassword},set:function(a){this._setDisplayAsPassword(a)},enumerable:!0,configurable:!0});
c._setDisplayAsPassword=function(a){var c=this._TF_Props_;c._displayAsPassword!=a&&(c._displayAsPassword=a,this._setTextDirty(),a="",a=c._displayAsPassword?this.changeToPassText(c._text):c._text,this.setMiddleStyle([{text:a}]))};Object.defineProperty(c,"fontFamily",{get:function(){return this._TF_Props_._fontFamily},set:function(a){this._setFontFamily(a)},enumerable:!0,configurable:!0});c._setFontFamily=function(a){this._TF_Props_._fontFamily!=a&&(this._setTextDirty(),this._TF_Props_._fontFamily=
a)};Object.defineProperty(c,"size",{get:function(){return this._TF_Props_._size},set:function(a){this._setSize(a)},enumerable:!0,configurable:!0});c._setSize=function(a){this._TF_Props_._size!=a&&(this._setTextDirty(),this._TF_Props_._size=a)};Object.defineProperty(c,"italic",{get:function(){return this._TF_Props_._italic},set:function(a){this._setItalic(a)},enumerable:!0,configurable:!0});c._setItalic=function(a){this._TF_Props_._italic!=a&&(this._setTextDirty(),this._TF_Props_._italic=a)};Object.defineProperty(c,
"bold",{get:function(){return this._TF_Props_._bold},set:function(a){this._setBold(a)},enumerable:!0,configurable:!0});c._setBold=function(a){this._TF_Props_._bold!=a&&(this._setTextDirty(),this._TF_Props_._bold=a)};Object.defineProperty(c,"textColor",{get:function(){return this._TF_Props_._textColor},set:function(a){this._setTextColor(a)},enumerable:!0,configurable:!0});c._setTextColor=function(a){this._TF_Props_._textColor!=a&&(this._setTextDirty(),this._TF_Props_._textColor=a,this._TF_Props_._textColorString=
b.toColorString(a))};Object.defineProperty(c,"strokeColor",{get:function(){return this._TF_Props_._strokeColor},set:function(a){this._setStrokeColor(a)},enumerable:!0,configurable:!0});c._setStrokeColor=function(a){this._TF_Props_._strokeColor!=a&&(this._setTextDirty(),this._TF_Props_._strokeColor=a,this._TF_Props_._strokeColorString=b.toColorString(a))};Object.defineProperty(c,"stroke",{get:function(){return this._TF_Props_._stroke},set:function(a){this._setStroke(a)},enumerable:!0,configurable:!0});
c._setStroke=function(a){this._TF_Props_._stroke!=a&&(this._setTextDirty(),this._TF_Props_._stroke=a)};Object.defineProperty(c,"textAlign",{get:function(){return this._TF_Props_._textAlign},set:function(a){this._setTextAlign(a)},enumerable:!0,configurable:!0});c._setTextAlign=function(a){this._TF_Props_._textAlign!=a&&(this._setTextDirty(),this._TF_Props_._textAlign=a)};Object.defineProperty(c,"verticalAlign",{get:function(){return this._TF_Props_._verticalAlign},set:function(a){this._setVerticalAlign(a)},
enumerable:!0,configurable:!0});c._setVerticalAlign=function(a){this._TF_Props_._verticalAlign!=a&&(this._setTextDirty(),this._TF_Props_._verticalAlign=a)};Object.defineProperty(c,"maxChars",{get:function(){return this._TF_Props_._maxChars},set:function(a){this._setMaxChars(a)},enumerable:!0,configurable:!0});c._setMaxChars=function(a){this._TF_Props_._maxChars!=a&&(this._TF_Props_._maxChars=a)};Object.defineProperty(c,"scrollV",{get:function(){return Math.min(Math.max(this._TF_Props_._scrollV,1),
this.maxScrollV)},set:function(a){this._TF_Props_._scrollV=Math.max(a,1);this._setDirty()},enumerable:!0,configurable:!0});Object.defineProperty(c,"maxScrollV",{get:function(){this._getLinesArr();return Math.max(this._TF_Props_._numLines-b.TextFieldUtils._getScrollNum(this)+1,1)},enumerable:!0,configurable:!0});Object.defineProperty(c,"selectionBeginIndex",{get:function(){return 0},enumerable:!0,configurable:!0});Object.defineProperty(c,"selectionEndIndex",{get:function(){return 0},enumerable:!0,
configurable:!0});Object.defineProperty(c,"caretIndex",{get:function(){return 0},enumerable:!0,configurable:!0});c._setSelection=function(a,c){};Object.defineProperty(c,"lineSpacing",{get:function(){return this._TF_Props_._lineSpacing},set:function(a){this._setLineSpacing(a)},enumerable:!0,configurable:!0});c._setLineSpacing=function(a){this._TF_Props_._lineSpacing!=a&&(this._setTextDirty(),this._TF_Props_._lineSpacing=a)};c._getLineHeight=function(){return this._TF_Props_._lineSpacing+this._TF_Props_._size};
Object.defineProperty(c,"numLines",{get:function(){return this._TF_Props_._numLines},enumerable:!0,configurable:!0});Object.defineProperty(c,"multiline",{get:function(){return this._TF_Props_._multiline},set:function(a){this._setMultiline(a)},enumerable:!0,configurable:!0});c._setMultiline=function(a){this._TF_Props_._multiline=a;this._setDirty()};Object.defineProperty(c,"restrict",{get:function(){var a=this._TF_Props_,c=null;null!=a._restrictAnd&&(c=a._restrictAnd);null!=a._restrictNot&&(null==c&&
(c=""),c+="^"+a._restrictNot);return c},set:function(a){var c=this._TF_Props_;if(null==a)c._restrictAnd=null,c._restrictNot=null;else{for(var b=-1;b<a.length&&(b=a.indexOf("^",b),0!=b);)if(0<b){if("\\"!=a.charAt(b-1))break;b++}else break;0==b?(c._restrictAnd=null,c._restrictNot=a.substring(b+1)):0<b?(c._restrictAnd=a.substring(0,b),c._restrictNot=a.substring(b+1)):(c._restrictAnd=a,c._restrictNot=null)}},enumerable:!0,configurable:!0});c._setWidth=function(a){d.prototype._setWidth.call(this,a)};c._setHeight=
function(a){d.prototype._setHeight.call(this,a)};Object.defineProperty(c,"border",{get:function(){return this._TF_Props_._border},set:function(a){this._TF_Props_._border=a;this.fillBackground()},enumerable:!0,configurable:!0});Object.defineProperty(c,"borderColor",{get:function(){return this._TF_Props_._borderColor},set:function(a){this._TF_Props_._borderColor=a;this.fillBackground()},enumerable:!0,configurable:!0});Object.defineProperty(c,"background",{get:function(){return this._TF_Props_._background},
set:function(a){this._TF_Props_._background=a;this.fillBackground()},enumerable:!0,configurable:!0});Object.defineProperty(c,"backgroundColor",{get:function(){return this._TF_Props_._backgroundColor},set:function(a){this._TF_Props_._backgroundColor=a;this.fillBackground()},enumerable:!0,configurable:!0});c.fillBackground=function(){var a=this._bgGraphics,c=this._TF_Props_;a&&a.clear();if(c._background||c._border)null==a&&(a=this._bgGraphics=new b.Graphics),c._background&&a.beginFill(c._backgroundColor,
1),c._border&&a.lineStyle(1,c._borderColor),a.drawRect(0,0,this._getWidth(),this._getHeight()),a.endFill()};c.setFocus=function(){b.$warn(1013)};c._onRemoveFromStage=function(){d.prototype._onRemoveFromStage.call(this);this._removeEvent();this._TF_Props_._type==b.TextFieldType.INPUT&&this._inputUtils._removeStageText()};c._onAddToStage=function(){d.prototype._onAddToStage.call(this);this._addEvent();this._TF_Props_._type==b.TextFieldType.INPUT&&this._inputUtils._addStageText()};c._updateBaseTransform=
function(){this._getLinesArr();0==this._TF_Props_._textMaxWidth&&this._TF_Props_._type!=b.TextFieldType.INPUT||d.prototype._updateTransform.call(this)};c._updateTransform=function(){this._TF_Props_._type==b.TextFieldType.INPUT?this._DO_Props_._normalDirty?this._inputUtils._updateProperties():this._inputUtils._updateTransform():this._updateBaseTransform()};c._draw=function(a){d.prototype._draw.call(this,a)};c._render=function(a){this._bgGraphics&&this._bgGraphics._draw(a);var c=this._TF_Props_;if(c._type==
b.TextFieldType.INPUT){if(this._isTyping)return}else if(0==c._textMaxWidth)return;this.drawText(a);this._clearDirty()};c._measureBounds=function(){var a=this._TF_Props_;this._getLinesArr();return 0==a._textMaxWidth?b.Rectangle.identity.initialize(0,0,0,0):b.Rectangle.identity.initialize(0,0,a._textMaxWidth,b.TextFieldUtils._getTextHeight(this))};Object.defineProperty(c,"textFlow",{get:function(){return this._textArr},set:function(a){var c=this._TF_Props_;this._isFlow=!0;var b="";null==a&&(a=[]);for(var d=
0;d<a.length;d++)b+=a[d].text;c._displayAsPassword?this._setBaseText(b):(c._text=b,this.setMiddleStyle(a))},enumerable:!0,configurable:!0});c.changeToPassText=function(a){if(this._TF_Props_._displayAsPassword){for(var c="",b=0,d=a.length;b<d;b++)switch(a.charAt(b)){case "\n":c+="\n";break;case "\r":break;default:c+="*"}return c}return a};c.setMiddleStyle=function(a){this._isArrayChanged=!0;this._textArr=a;this._setSizeDirty()};Object.defineProperty(c,"textWidth",{get:function(){return this._TF_Props_._textMaxWidth},
enumerable:!0,configurable:!0});Object.defineProperty(c,"textHeight",{get:function(){return b.TextFieldUtils._getTextHeight(this)},enumerable:!0,configurable:!0});c.appendText=function(a){this.appendElement({text:a})};c.appendElement=function(a){var c=this._TF_Props_,b=c._text+a.text;c._displayAsPassword?this._setBaseText(b):(c._text=b,this._textArr.push(a),this.setMiddleStyle(this._textArr))};c._getLinesArr=function(){var a=this._TF_Props_;if(!this._isArrayChanged)return this._linesArr;this._isArrayChanged=
!1;var c=this._textArr,d=b.MainContext.instance.rendererContext;this._linesArr.length=0;a._textMaxHeight=0;a._textMaxWidth=0;if(this._DO_Props_._hasWidthSet&&0==this._DO_Props_._explicitWidth)return a._numLines=0,[{width:0,height:0,charNum:0,elements:[],hasNextLine:!1}];this._isFlow||d.setupFont(this);for(var e=this._linesArr,f=0,g=0,n=0,p=0,q,r=0,s=c.length;r<s;r++){var t=c[r];t.style=t.style||{};for(var u=t.text.toString().split(/(?:\r\n|\r|\n)/),z=0,w=u.length;z<w;z++){null==e[p]&&(q={width:0,
height:0,elements:[],charNum:0,hasNextLine:!1},e[p]=q,g=n=f=0);var n=a._type==b.TextFieldType.INPUT?a._size:Math.max(n,t.style.size||a._size),x=!0;if(""==u[z])z==w-1&&(x=!1);else{this._isFlow&&d.setupFont(this,t.style);var y=d.measureText(u[z]);if(this._DO_Props_._hasWidthSet)if(f+y<=this._DO_Props_._explicitWidth)q.elements.push({width:y,text:u[z],style:t.style}),f+=y,g+=u[z].length,z==w-1&&(x=!1);else{for(var v=0,B=0,A=u[z],C=this._TF_Props_._wordWrap?A.split(/\b/):A.match(/./g),D=C.length,E=0;v<
D;v++){y=d.measureText(C[v]);if(0!=f&&f+y>this._DO_Props_._explicitWidth&&0!=f+v)break;E+=C[v].length;B+=y;f+=y;g+=E}if(0<v){q.elements.push({width:B,text:A.substring(0,E),style:t.style});y=A.substring(E);v=0;for(B=y.length;v<B&&" "==y.charAt(v);v++);u[z]=y.substring(v)}""!=u[z]&&(z--,x=!1)}else f+=y,g+=u[z].length,q.elements.push({width:y,text:u[z],style:t.style}),z==w-1&&(x=!1)}x&&(g++,q.hasNextLine=!0);z<u.length-1&&(q.width=f,q.height=n,q.charNum=g,a._textMaxWidth=Math.max(a._textMaxWidth,f),
a._textMaxHeight+=n,p++)}r==c.length-1&&q&&(q.width=f,q.height=n,q.charNum=g,a._textMaxWidth=Math.max(a._textMaxWidth,f),a._textMaxHeight+=n)}a._numLines=e.length;this.fillBackground();return e};Object.defineProperty(c,"wordWrap",{get:function(){return this._TF_Props_._wordWrap},set:function(a){this._TF_Props_._wordWrap=a},enumerable:!0,configurable:!0});c.drawText=function(a){var c=this._TF_Props_,d=this._getLinesArr();if(0!=c._textMaxWidth){var e=this._DO_Props_._hasWidthSet?this._DO_Props_._explicitWidth:
c._textMaxWidth,f=b.TextFieldUtils._getTextHeight(this),g=0,n=b.TextFieldUtils._getStartLine(this);if(this._DO_Props_._hasHeightSet&&this._DO_Props_._explicitHeight>f)var p=b.TextFieldUtils._getValign(this),g=g+p*(this._DO_Props_._explicitHeight-f);for(var g=Math.round(g),f=b.TextFieldUtils._getHalign(this),p=0,q=n,r=c._numLines;q<r;q++){var s=d[q],t=s.height,g=g+t/2;if(q!=n){if(c._type==b.TextFieldType.INPUT&&!c._multiline)break;if(this._DO_Props_._hasHeightSet&&g>this._DO_Props_._explicitHeight)break}for(var p=
Math.round((e-s.width)*f),u=0,z=s.elements.length;u<z;u++){var w=s.elements[u];a.drawText(this,w.text,p,g+(t-(w.style.size||c._size))/2,w.width,w.style);p+=w.width}g+=t/2+c._lineSpacing}}};c._addEvent=function(){this.addEventListener(b.TouchEvent.TOUCH_TAP,this.onTapHandler,this)};c._removeEvent=function(){this.removeEventListener(b.TouchEvent.TOUCH_TAP,this.onTapHandler,this)};c.onTapHandler=function(a){if(this._TF_Props_._type!=b.TextFieldType.INPUT&&(a=b.TextFieldUtils._getTextElement(this,a.localX,
a.localY),null!=a&&(a=a.style)&&a.href&&a.href.match(/^event:/))){var c=a.href.match(/^event:/)[0];b.TextEvent.dispatchTextEvent(this,b.TextEvent.LINK,a.href.substring(c.length))}};a.default_fontFamily="Arial";return a}(b.DisplayObject);b.TextField=e;e.prototype.__class__="egret.TextField"})(egret||(egret={}));
(function(b){var e=function(){function b(){this._replaceArr=[];this.resutlArr=[];this.initReplaceArr()}var a=b.prototype;a.initReplaceArr=function(){this._replaceArr=[];this._replaceArr.push([/&lt;/g,"<"]);this._replaceArr.push([/&gt;/g,">"]);this._replaceArr.push([/&amp;/g,"&"]);this._replaceArr.push([/&quot;/g,'"']);this._replaceArr.push([/&apos;/g,"'"])};a.replaceSpecial=function(a){for(var h=0;h<this._replaceArr.length;h++)a=a.replace(this._replaceArr[h][0],this._replaceArr[h][1]);return a};a.parser=
function(a){this.stackArray=[];this.resutlArr=[];for(var h=0,b=a.length;h<b;){var d=a.indexOf("<",h);0>d?(this.addToResultArr(a.substring(h)),h=b):(this.addToResultArr(a.substring(h,d)),h=a.indexOf(">",d),"/"==a.charAt(d+1)?this.stackArray.pop():this.addToArray(a.substring(d+1,h)),h+=1)}return this.resutlArr};a.addToResultArr=function(a){""!=a&&(a=this.replaceSpecial(a),0<this.stackArray.length?this.resutlArr.push({text:a,style:this.stackArray[this.stackArray.length-1]}):this.resutlArr.push({text:a}))};
a.changeStringToObject=function(a){a=a.trim();var h={},b=[];if("i"==a.charAt(0)||"b"==a.charAt(0))this.addProperty(h,a,"true");else if(b=a.match(/^(font|a)\s/))for(a=a.substring(b[0].length).trim(),b=0;b=a.match(this.getHeadReg());){var d=b[0],e="";a=a.substring(d.length).trim();'"'==a.charAt(0)?(b=a.indexOf('"',1),e=a.substring(1,b),b+=1):"'"==a.charAt(0)?(b=a.indexOf("'",1),e=a.substring(1,b),b+=1):(e=a.match(/(\S)+/)[0],b=e.length);this.addProperty(h,d.substring(0,d.length-1).trim(),e.trim());
a=a.substring(b).trim()}return h};a.getHeadReg=function(){return/^(color|textcolor|strokecolor|stroke|b|bold|i|italic|size|fontfamily|href)(\s)*=/};a.addProperty=function(a,h,b){switch(h.toLowerCase()){case "color":case "textcolor":b=b.replace(/#/,"0x");a.textColor=parseInt(b);break;case "strokecolor":b=b.replace(/#/,"0x");a.strokeColor=parseInt(b);break;case "stroke":a.stroke=parseInt(b);break;case "b":case "bold":a.bold="true"==b;break;case "i":case "italic":a.italic="true"==b;break;case "size":a.size=
parseInt(b);break;case "fontfamily":a.fontFamily=b;break;case "href":a.href=this.replaceSpecial(b)}};a.addToArray=function(a){a=this.changeStringToObject(a);if(0!=this.stackArray.length){var h=this.stackArray[this.stackArray.length-1],b;for(b in h)null==a[b]&&(a[b]=h[b])}this.stackArray.push(a)};return b}();b.HtmlTextParser=e;e.prototype.__class__="egret.HtmlTextParser"})(egret||(egret={}));
(function(b){var e=function(){function b(){}b.DYNAMIC="dynamic";b.INPUT="input";return b}();b.TextFieldType=e;e.prototype.__class__="egret.TextFieldType"})(egret||(egret={}));
(function(b){var e=function(d){function a(a){d.call(this);this._bitmapY=this._bitmapX=this._sourceHeight=this._sourceWidth=0;this._textureMap={};this.texture=a;this._sourceWidth=a._sourceWidth;this._sourceHeight=a._sourceHeight;this._bitmapX=a._bitmapX-a._offsetX;this._bitmapY=a._bitmapY-a._offsetY}__extends(a,d);var c=a.prototype;c.getTexture=function(a){return this._textureMap[a]};c.createTexture=function(a,c,d,e,f,g,n,p,q){void 0===g&&(g=0);void 0===n&&(n=0);"undefined"===typeof p&&(p=g+e);"undefined"===
typeof q&&(q=n+f);var r=this.texture._clone(),s=b.MainContext.instance.rendererContext._texture_scale_factor;r._bitmapX=this._bitmapX+c;r._bitmapY=this._bitmapY+d;r._bitmapWidth=e*s;r._bitmapHeight=f*s;r._offsetX=g;r._offsetY=n;r._textureWidth=p*s;r._textureHeight=q*s;r._sourceWidth=this._sourceWidth;r._sourceHeight=this._sourceHeight;return this._textureMap[a]=r};c.dispose=function(){this.texture&&this.texture.dispose()};return a}(b.HashObject);b.SpriteSheet=e;e.prototype.__class__="egret.SpriteSheet"})(egret||
(egret={}));
(function(b){var e=function(d){function a(){d.call(this);this._text=null;this._isFocus=!1}__extends(a,d);var c=a.prototype;c.init=function(a){this._text=a;this.stageText=b.StageText.create();this.stageText._setTextField(this._text)};c._addStageText=function(){this._text._inputEnabled||(this._text._DO_Props_._touchEnabled=!0);this.stageText._add();this.stageText._addListeners();this.stageText.addEventListener("updateText",this.updateTextHandler,this);this._text.addEventListener(b.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,
this);b.MainContext.instance.stage.addEventListener(b.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this);this.stageText.addEventListener("blur",this.blurHandler,this);this.stageText.addEventListener("focus",this.focusHandler,this)};c._removeStageText=function(){this._text._inputEnabled||(this._text._DO_Props_._touchEnabled=!1);this.stageText._remove();this.stageText._removeListeners();this.stageText._removeInput();this.stageText.removeEventListener("updateText",this.updateTextHandler,this);this._text.removeEventListener(b.TouchEvent.TOUCH_BEGIN,
this.onMouseDownHandler,this);b.MainContext.instance.stage.removeEventListener(b.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this);this.stageText.removeEventListener("blur",this.blurHandler,this);this.stageText.removeEventListener("focus",this.focusHandler,this)};c._getText=function(){return this.stageText._getText()};c._setText=function(a){this.stageText._setText(a)};c.focusHandler=function(a){this._isFocus||(this._isFocus=!0,a.showing||(this._text._isTyping=!0),this._text.dispatchEvent(new b.FocusEvent(b.FocusEvent.FOCUS_IN,
!0)))};c.blurHandler=function(a){this._isFocus&&(this._isFocus=!1,this._text._isTyping=!1,this.stageText.$onBlur(),this._text.dispatchEvent(new b.FocusEvent(b.FocusEvent.FOCUS_OUT,!0)))};c.onMouseDownHandler=function(a){a.stopPropagation();this._text._DO_Props_._visible&&!this._isFocus&&(this.stageText._show(this._text._TF_Props_._multiline,this._text.size,this._text.width,this._text.height),a=this._text.localToGlobal(),this.stageText._initElement(a.x,a.y,this._text._worldTransform.a,this._text._worldTransform.d))};
c.onStageDownHandler=function(a){this.stageText._hide()};c.updateTextHandler=function(a){a=this._text._TF_Props_;var c=this.stageText._getText(),d=!1;null!=a._restrictAnd&&(d=new RegExp("["+a._restrictAnd+"]","g"),c=(c=c.match(d))?c.join(""):"",d=!0);null!=a._restrictNot&&(d=new RegExp("[^"+a._restrictNot+"]","g"),c=(c=c.match(d))?c.join(""):"",d=!0);d&&this.stageText._setText(c);this.resetText();this._text.dispatchEvent(new b.Event(b.Event.CHANGE,!0))};c.resetText=function(){this._text._setBaseText(this.stageText._getText())};
c._hideInput=function(){this.stageText._removeInput()};c._updateTransform=function(){this._text._updateBaseTransform();!this._text._DO_Props_._visible&&this.stageText&&this._hideInput()};c._updateProperties=function(){if(!this._isFocus){var a=this._text._DO_Props_._stage;if(null==a)this.stageText._setVisible(!1);else{for(var c=this._text,b=c._DO_Props_._visible;b;){c=c.parent;if(c==a)break;b=c._DO_Props_._visible}this.stageText._setVisible(b)}this.stageText._setMultiline(this._text._TF_Props_._multiline);
this.stageText._setTextType(this._text._TF_Props_._displayAsPassword?"password":"text");this.stageText._setText(this._text._TF_Props_._text);this.stageText._resetStageText()}this._updateTransform()};return a}(b.HashObject);b.InputController=e;e.prototype.__class__="egret.InputController"})(egret||(egret={}));
(function(b){var e=function(b){function a(a,c){b.call(this,a);this.firstCharHeight=0;"string"==typeof c?this.charList=this.parseConfig(c):c&&c.hasOwnProperty("frames")?this.charList=c.frames:this.charList={}}__extends(a,b);var c=a.prototype;c.getTexture=function(a){var c=this._textureMap[a];if(!c){c=this.charList[a];if(!c)return null;c=this.createTexture(a,c.x,c.y,c.w,c.h,c.offX,c.offY,c.sourceW,c.sourceH);this._textureMap[a]=c}return c};c._getFirstCharHeight=function(){if(0==this.firstCharHeight)for(var a in this.charList){var c=
this.charList[a];if(c){var b=c.sourceH;void 0===b&&(b=c.h,void 0===b&&(b=0),c=c.offY,void 0===c&&(c=0),b+=c);if(!(0>=b)){this.firstCharHeight=b;break}}}return this.firstCharHeight};c.parseConfig=function(a){a=a.split("\r\n").join("\n");a=a.split("\n");for(var c=this.getConfigByKey(a[3],"count"),b={},d=4;d<4+c;d++){var e=a[d],g=String.fromCharCode(this.getConfigByKey(e,"id")),n={};b[g]=n;n.x=this.getConfigByKey(e,"x");n.y=this.getConfigByKey(e,"y");n.w=this.getConfigByKey(e,"width");n.h=this.getConfigByKey(e,
"height");n.offX=this.getConfigByKey(e,"xoffset");n.offY=this.getConfigByKey(e,"yoffset")}return b};c.getConfigByKey=function(a,c){for(var b=a.split(" "),d=0,e=b.length;d<e;d++){var g=b[d];if(c==g.substring(0,c.length))return b=g.substring(c.length+1),parseInt(b)}return 0};return a}(b.SpriteSheet);b.BitmapFont=e;e.prototype.__class__="egret.BitmapFont"})(egret||(egret={}));
(function(b){var e=function(d){function a(a){d.call(this);this._isAddedToStage=!1;this._frames=this._movieClipData=this._textureToRender=null;this._totalFrames=0;this._frameLabels=null;this._frameIntervalTime=0;this._eventPool=null;this._isPlaying=!1;this._isStopped=!0;this._passedTime=this._displayedKeyFrameNum=this._nextFrameNum=this._currentFrameNum=this._playTimes=0;this._setMovieClipData(a);this.needDraw=!0}__extends(a,d);var c=a.prototype;c._init=function(){this._reset();var a=this._movieClipData;
a&&a._isDataValid()&&(this._frames=a.frames,this._totalFrames=a.numFrames,this._frameLabels=a.labels,this._frameIntervalTime=1E3/a.frameRate,this._initFrame())};c._reset=function(){this._frames=null;this._playTimes=0;this._isPlaying=!1;this.setIsStopped(!0);this._currentFrameNum=0;this._nextFrameNum=1;this._passedTime=this._displayedKeyFrameNum=0;this._eventPool=[]};c._initFrame=function(){this._movieClipData._isTextureValid()&&(this._advanceFrame(),this._constructFrame())};c._render=function(c){var b=
this._textureToRender;if(this._texture_to_render=b){var d=Math.round(b._offsetX),e=Math.round(b._offsetY),f=b._bitmapWidth||b._textureWidth,g=b._bitmapHeight||b._textureHeight,n=Math.round(f),p=Math.round(g);a.renderFilter.drawImage(c,this,b._bitmapX,b._bitmapY,f,g,d,e,n,p)}};c._measureBounds=function(){var a=this._textureToRender;return a?b.Rectangle.identity.initialize(a._offsetX,a._offsetY,a._textureWidth,a._textureHeight):d.prototype._measureBounds.call(this)};c._onAddToStage=function(){d.prototype._onAddToStage.call(this);
this._isAddedToStage=!0;this._isPlaying&&1<this._totalFrames&&this.setIsStopped(!1)};c._onRemoveFromStage=function(){d.prototype._onRemoveFromStage.call(this);this._isAddedToStage=!1;this.setIsStopped(!0)};c._getFrameLabelByName=function(a,c){void 0===c&&(c=!1);c&&(a=a.toLowerCase());var b=this._frameLabels;if(b)for(var d=null,e=0;e<b.length;e++)if(d=b[e],c?d.name.toLowerCase()===a:d.name===a)return d;return null};c._getFrameLabelByFrame=function(a){var c=this._frameLabels;if(c)for(var b=null,d=0;d<
c.length;d++)if(b=c[d],b.frame===a)return b;return null};c._getFrameLabelForFrame=function(a){var c=null,b=null,d=this._frameLabels;if(d)for(var e=0;e<d.length;e++){b=d[e];if(b.frame>a)break;c=b}return c};c.play=function(a){void 0===a&&(a=0);this._isPlaying=!0;this.setPlayTimes(a);1<this._totalFrames&&this._isAddedToStage&&this.setIsStopped(!1)};c.stop=function(){this._isPlaying=!1;this.setIsStopped(!0)};c.prevFrame=function(){this.gotoAndStop(this._currentFrameNum-1)};c.nextFrame=function(){this.gotoAndStop(this._currentFrameNum+
1)};c.gotoAndPlay=function(a,c){void 0===c&&(c=0);(0===arguments.length||2<arguments.length)&&b.$error(1022,"MovieClip.gotoAndPlay()");this.play(c);this._gotoFrame(a)};c.gotoAndStop=function(a){1!=arguments.length&&b.$error(1022,"MovieClip.gotoAndStop()");this.stop();this._gotoFrame(a)};c._gotoFrame=function(a){var c;"string"===typeof a?c=this._getFrameLabelByName(a).frame:(c=parseInt(a+"",10),c!=a&&b.$error(1022,"Frame Label Not Found"));1>c?c=1:c>this._totalFrames&&(c=this._totalFrames);c!==this._nextFrameNum&&
(this._nextFrameNum=c,this._advanceFrame(),this._constructFrame(),this._handlePendingEvent())};c._advanceTime=function(a){var c=this._frameIntervalTime;a=this._passedTime+a;this._passedTime=a%c;c=a/c;if(!(1>c)){for(;1<=c;){c--;this._nextFrameNum++;if(this._nextFrameNum>this._totalFrames)if(-1==this._playTimes)this._eventPool.push(b.Event.LOOP_COMPLETE),this._nextFrameNum=1;else if(this._playTimes--,0<this._playTimes)this._eventPool.push(b.Event.LOOP_COMPLETE),this._nextFrameNum=1;else{this._nextFrameNum=
this._totalFrames;this._eventPool.push(b.Event.COMPLETE);this.stop();break}this._advanceFrame()}this._constructFrame();this._handlePendingEvent();this._setDirty()}};c._advanceFrame=function(){this._currentFrameNum=this._nextFrameNum};c._constructFrame=function(){var a=this._currentFrameNum;this._displayedKeyFrameNum!=a&&(this._textureToRender=this._movieClipData.getTextureByFrame(a),this._DO_Props_._sizeDirty=!0,this._displayedKeyFrameNum=a)};c._handlePendingEvent=function(){if(0!=this._eventPool.length){this._eventPool.reverse();
for(var a=this._eventPool,c=a.length,d=!1,e=!1,f=0;f<c;f++){var g=a.pop();g==b.Event.LOOP_COMPLETE?e=!0:g==b.Event.COMPLETE?d=!0:this.dispatchEventWith(g)}e&&this.dispatchEventWith(b.Event.LOOP_COMPLETE);d&&this.dispatchEventWith(b.Event.COMPLETE)}};Object.defineProperty(c,"totalFrames",{get:function(){return this._totalFrames},enumerable:!0,configurable:!0});Object.defineProperty(c,"currentFrame",{get:function(){return this._currentFrameNum},enumerable:!0,configurable:!0});Object.defineProperty(c,
"currentFrameLabel",{get:function(){var a=this._getFrameLabelByFrame(this._currentFrameNum);return a&&a.name},enumerable:!0,configurable:!0});Object.defineProperty(c,"currentLabel",{get:function(){var a=this._getFrameLabelForFrame(this._currentFrameNum);return a?a.name:null},enumerable:!0,configurable:!0});Object.defineProperty(c,"frameRate",{get:function(){return this.movieClipData.frameRate},set:function(a){a!=this._movieClipData.frameRate&&(this._movieClipData.frameRate=a,this._frameIntervalTime=
1E3/this._movieClipData.frameRate)},enumerable:!0,configurable:!0});Object.defineProperty(c,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0});Object.defineProperty(c,"movieClipData",{get:function(){return this._movieClipData},set:function(a){this._setMovieClipData(a)},enumerable:!0,configurable:!0});c._setMovieClipData=function(a){this._movieClipData!=a&&(this._movieClipData=a,this._init())};c.setPlayTimes=function(a){if(0>a||1<=a)this._playTimes=0>a?-1:Math.floor(a)};
c.setIsStopped=function(a){this._isStopped!=a&&((this._isStopped=a)?(this._playTimes=0,b.Ticker.getInstance().unregister(this._advanceTime,this)):(this._playTimes=0==this._playTimes?1:this._playTimes,b.Ticker.getInstance().register(this._advanceTime,this)))};a.renderFilter=b.RenderFilter.getInstance();return a}(b.DisplayObject);b.MovieClip=e;e.prototype.__class__="egret.MovieClip"})(egret||(egret={}));
(function(b){var e=function(b){function a(a,c){b.call(this);this._name=a;this._frame=c|0}__extends(a,b);var c=a.prototype;Object.defineProperty(c,"name",{get:function(){return this._name},enumerable:!0,configurable:!0});Object.defineProperty(c,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0});c.clone=function(){return new a(this._name,this._frame)};return a}(b.EventDispatcher);b.FrameLabel=e;e.prototype.__class__="egret.FrameLabel"})(egret||(egret={}));
(function(b){var e=function(d){function a(){d.call(this);this._mcData=null;this.numFrames=1;this.frames=[];this.labels=null;this.frameRate=0;this.spriteSheet=this.textureData=null}__extends(a,d);var c=a.prototype;c._init=function(a,c,b){this.textureData=c;this.spriteSheet=b;this._setMCData(a)};c.getKeyFrameData=function(a){a=this.frames[a-1];a.frame&&(a=this.frames[a.frame-1]);return a};c.getTextureByFrame=function(a){a=this.getKeyFrameData(a);if(a.res){var c=this.getTextureByResName(a.res);c._offsetX=
a.x|0;c._offsetY=a.y|0;return c}return null};c.getTextureByResName=function(a){var c=this.spriteSheet.getTexture(a);c||(c=this.textureData[a],c=this.spriteSheet.createTexture(a,c.x,c.y,c.w,c.h));return c};c._isDataValid=function(){return 0<this.frames.length};c._isTextureValid=function(){return null!=this.textureData&&null!=this.spriteSheet};c._fillMCData=function(a){this.frameRate=a.frameRate||24;this._fillFramesData(a.frames);this._fillFrameLabelsData(a.labels)};c._fillFramesData=function(a){for(var c=
this.frames,b=a?a.length:0,d,e=0;e<b;e++)if(d=a[e],c.push(d),d.duration){var g=parseInt(d.duration);if(1<g){d=c.length;for(var n=1;n<g;n++)c.push({frame:d})}}this.numFrames=c.length};c._fillFrameLabelsData=function(a){if(a){var c=a.length;if(0<c){this.labels=[];for(var d=0;d<c;d++){var e=a[d];this.labels.push(new b.FrameLabel(e.name,e.frame))}}}};Object.defineProperty(c,"mcData",{get:function(){return this._mcData},set:function(a){this._setMCData(a)},enumerable:!0,configurable:!0});c._setMCData=function(a){this._mcData!=
a&&(this._mcData=a)&&this._fillMCData(a)};return a}(b.HashObject);b.MovieClipData=e;e.prototype.__class__="egret.MovieClipData"})(egret||(egret={}));
(function(b){var e=function(d){function a(a,c){d.call(this);this.enableCache=!0;this._mcDataCache={};this._mcDataSet=a;this.setTexture(c)}__extends(a,d);var c=a.prototype;c.clearCache=function(){this._mcDataCache={}};c.generateMovieClipData=function(a){void 0===a&&(a="");if(""==a&&this._mcDataSet)for(a in this._mcDataSet.mc)break;if(""==a)return null;var c=this._findFromCache(a,this._mcDataCache);c||(c=new b.MovieClipData,this._fillData(a,c,this._mcDataCache));return c};c._findFromCache=function(a,
c){return this.enableCache&&c[a]?c[a]:null};c._fillData=function(a,c,b){if(this._mcDataSet){var d=this._mcDataSet.mc[a];d&&(c._init(d,this._mcDataSet.res,this._spriteSheet),this.enableCache&&(b[a]=c))}};Object.defineProperty(c,"mcDataSet",{get:function(){return this._mcDataSet},set:function(a){this._mcDataSet=a},enumerable:!0,configurable:!0});Object.defineProperty(c,"texture",{set:function(a){this.setTexture(a)},enumerable:!0,configurable:!0});Object.defineProperty(c,"spriteSheet",{get:function(){return this._spriteSheet},
enumerable:!0,configurable:!0});c.setTexture=function(a){this._spriteSheet=a?new b.SpriteSheet(a):null};return a}(b.EventDispatcher);b.MovieClipDataFactory=e;e.prototype.__class__="egret.MovieClipDataFactory"})(egret||(egret={}));
(function(b){var e=function(b){function a(){b.call(this);this._scaleY=this._scaleX=1;this._size=30;this._color="#FFFFFF";this._fontFamily="Arial";this._italic=this._bold=!1;this._textAlign="left";this._verticalAlign="top";this._visible=!1;this._height=this._width=0;this._multiline=!1;this._maxChars=0}__extends(a,b);var c=a.prototype;c._setTextField=function(a){this._textfield=a};c._getText=function(){return null};c._setText=function(a){};c._setTextType=function(a){};c._getTextType=function(){return null};
c._show=function(a,c,b,d){};c._add=function(){};c._remove=function(){};c._hide=function(){};c._addListeners=function(){};c._removeListeners=function(){};c._setScale=function(a,c){this._scaleX=a;this._scaleY=c};c.changePosition=function(a,c){};c._setSize=function(a){this._size=a};c._setTextColor=function(a){this._color=a};c._setTextFontFamily=function(a){this._fontFamily=a};c._setBold=function(a){this._bold=a};c._setItalic=function(a){this._italic=a};c._setTextAlign=function(a){this._textAlign=a};
c._setVerticalAlign=function(a){this._verticalAlign=a};c._setVisible=function(a){this._visible=a};c._setWidth=function(a){this._width=a};c._setHeight=function(a){this._height=a};c._setMultiline=function(a){this._multiline=a};c._setMaxChars=function(a){this._maxChars=a};c._resetStageText=function(){};c._initElement=function(a,c,b,d){};c._removeInput=function(){};a.create=function(){return null};c.$onBlur=function(){};return a}(b.EventDispatcher);b.StageText=e;e.prototype.__class__="egret.StageText"})(egret||
(egret={}));(function(b){var e=function(){function b(){}b.GET="get";b.POST="post";return b}();b.URLRequestMethod=e;e.prototype.__class__="egret.URLRequestMethod"})(egret||(egret={}));(function(b){var e=function(){function b(){}b.BINARY="binary";b.TEXT="text";b.VARIABLES="variables";b.TEXTURE="texture";b.SOUND="sound";return b}();b.URLLoaderDataFormat=e;e.prototype.__class__="egret.URLLoaderDataFormat"})(egret||(egret={}));
(function(b){var e=function(b){function a(a){void 0===a&&(a=null);b.call(this);this.variables=null;null!==a&&this.decode(a)}__extends(a,b);var c=a.prototype;c.decode=function(a){this.variables||(this.variables={});a=a.split("+").join(" ");for(var c,b=/[?&]?([^=]+)=([^&]*)/g;c=b.exec(a);){var d=decodeURIComponent(c[1]);c=decodeURIComponent(c[2]);if(!1==d in this.variables)this.variables[d]=c;else{var e=this.variables[d];e instanceof Array?e.push(c):this.variables[d]=[e,c]}}};c.toString=function(){if(!this.variables)return"";
var a=this.variables,c=[],b;for(b in a)c.push(this.encodeValue(b,a[b]));return c.join("&")};c.encodeValue=function(a,c){return c instanceof Array?this.encodeArray(a,c):encodeURIComponent(a)+"="+encodeURIComponent(c)};c.encodeArray=function(a,c){return a?0==c.length?encodeURIComponent(a)+"=":c.map(function(c){return encodeURIComponent(a)+"="+encodeURIComponent(c)}).join("&"):""};return a}(b.HashObject);b.URLVariables=e;e.prototype.__class__="egret.URLVariables"})(egret||(egret={}));
(function(b){var e=function(){return function(b,a){this.value=this.name="";this.name=b;this.value=a}}();b.URLRequestHeader=e;e.prototype.__class__="egret.URLRequestHeader"})(egret||(egret={}));(function(b){var e=function(d){function a(a){void 0===a&&(a=null);d.call(this);this.data=null;this.method=b.URLRequestMethod.GET;this.url="";this.requestHeaders=[];this.url=a}__extends(a,d);return a}(b.HashObject);b.URLRequest=e;e.prototype.__class__="egret.URLRequest"})(egret||(egret={}));
(function(b){var e=function(d){function a(a){void 0===a&&(a=null);d.call(this);this.dataFormat=b.URLLoaderDataFormat.TEXT;this._request=this.data=null;this._status=-1;a&&this.load(a)}__extends(a,d);var c=a.prototype;c.load=function(a){this._request=a;this.data=null;b.MainContext.instance.netContext.proceed(this)};c.__recycle=function(){this.data=this._request=null};return a}(b.EventDispatcher);b.URLLoader=e;e.prototype.__class__="egret.URLLoader"})(egret||(egret={}));
(function(b){var e=function(d){function a(){d.call(this);this._sourceHeight=this._sourceWidth=this._textureHeight=this._textureWidth=this._offsetY=this._offsetX=this._bitmapHeight=this._bitmapWidth=this._bitmapY=this._bitmapX=0;this._bitmapData=null}__extends(a,d);var c=a.prototype;Object.defineProperty(c,"textureWidth",{get:function(){return this._textureWidth},enumerable:!0,configurable:!0});Object.defineProperty(c,"textureHeight",{get:function(){return this._textureHeight},enumerable:!0,configurable:!0});
c._setBitmapData=function(a){var c=b.MainContext.instance.rendererContext._texture_scale_factor;this._bitmapData=a;this._sourceWidth=a.width;this._sourceHeight=a.height;this._textureWidth=this._sourceWidth*c;this._textureHeight=this._sourceHeight*c;this._bitmapWidth=this._textureWidth;this._bitmapHeight=this._textureHeight;this._offsetX=this._offsetY=this._bitmapX=this._bitmapY=0};c.getPixel32=function(a,c){throw Error();};c.dispose=function(){var a=this._bitmapData;a.dispose&&a.dispose()};c._clone=
function(){var c=new a;c._bitmapData=this._bitmapData;return c};c.draw=function(a,c,b,d,e,g,n,p,q,r){};c.toDataURL=function(a,c){throw Error();};c.saveToFile=function(a,c,b){throw Error();};c._drawForCanvas=function(a,c,b,d,e,g,n,p,q,r){var s=this._bitmapData;s&&s.avaliable&&(void 0!=r?this._drawRepeatImageForCanvas(a,c,b,d,e,g,n,p,q,r):a.drawImage(s,c,b,d,e,g,n,p,q))};c._drawForNative=function(a,c,b,d,e,g,n,p,q,r){var s=this._bitmapData;s&&s.avaliable&&(c=Math.max(0,c),b=Math.max(0,b),d=Math.max(0,
d),e=Math.max(0,e),void 0!==r?this._drawRepeatImageForNative(a,c,b,d,e,g,n,p,q,r):a.drawImage(s,c,b,d,e,g,n,p,q))};c._drawRepeatImageForNative=function(a,c,d,e,f,g,n,p,q,r){r=b.MainContext.instance.rendererContext._texture_scale_factor;e*=r;for(f*=r;g<p;g+=e)for(var s=n;s<q;s+=f){var t=Math.min(e,p-g),u=Math.min(f,q-s);this._drawForNative(a,c,d,t/r,u/r,g,s,t,u,void 0)}};c._drawRepeatImageForCanvas=function(a,c,d,e,f,g,n,p,q,r){if(void 0===this.pattern){var s=b.MainContext.instance.rendererContext._texture_scale_factor,
t=this._bitmapData,u=t;if(t.width!=e||t.height!=f||1!=s)u=document.createElement("canvas"),u.width=e*s,u.height=f*s,u.getContext("2d").drawImage(t,c,d,e,f,0,0,e*s,f*s);this.pattern=a.createPattern(u,r)}a.fillStyle=this.pattern;a.translate(g,n);a.fillRect(0,0,p,q);a.translate(-g,-n)};c._disposeForCanvas=function(){a.deleteWebGLTexture(this);var c=this._bitmapData;c.onload=null;c.onerror=null;c.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAATSURBVHjaYvj//z8DAAAA//8DAAj8Av7TpXVhAAAAAElFTkSuQmCC";
c.avaliable=!1;console.log("_disposeForCanvas")};c._disposeForNative=function(){var a=this._bitmapData;a.dispose();a.avaliable=!1;console.log("_disposeForNative")};a.deleteWebGLTexture=function(a){if(a=a._bitmapData){var c=a.webGLTexture;if(c)for(var b in c){var d=c[b];d.glContext.deleteTexture(d)}a.webGLTexture=null}};a.createBitmapData=function(a,c){};a._createBitmapDataForCanvasAndWebGl=function(c,d){var e=a._bitmapDataFactory[c];e||(e=document.createElement("img"),e.setAttribute("bitmapSrc",c),
a._bitmapDataFactory[c]=e);if(e.avaliable)d(0,e);else{a.crossOrigin?e.setAttribute("crossOrigin",a.crossOrigin):e.hasAttribute("crossOrigin")&&e.removeAttribute("crossOrigin");var l=window.URL||window.webkitURL;if(null==a._bitmapCallbackMap[c])if(a._addToCallbackList(c,d),0!=c.indexOf("data:")&&0!=c.indexOf("http:")&&0!=c.indexOf("https:")&&b.Browser.getInstance().isIOS()&&7<=parseInt(b.Browser.getInstance().getIOSVersion().charAt(0))&&l){var f=new XMLHttpRequest;f.open("get",c,!0);f.responseType=
"blob";f.onerror=function(){a._onError(c,e)};f.onload=function(){if(200==this.status){var b=this.response;e.onload=function(){l.revokeObjectURL(e.src);a._onLoad(c,e)};e.onerror=function(){a._onError(c,e)};e.src=l.createObjectURL(b)}else a._onError(c,e)};f.send()}else e.onload=function(){a._onLoad(c,e)},e.onerror=function(){a._onError(c,e)},e.src=c;else a._addToCallbackList(c,d)}};a._onLoad=function(c,b){b.avaliable=!0;b.onload&&(b.onload=null);b.onerror&&(b.onerror=null);var d=a._bitmapCallbackMap[c];
if(d&&d.length){delete a._bitmapCallbackMap[c];for(var e=d.length,f=0;f<e;f++)(0,d[f])(0,b)}};a._onError=function(c,b){var d=a._bitmapCallbackMap[c];if(d&&d.length){delete a._bitmapCallbackMap[c];for(var e=d.length,f=0;f<e;f++)(0,d[f])(1,b)}};a._createBitmapDataForNative=function(c,d){console.log("_createBitmapDataForNative:"+c);var e=a._bitmapDataFactory[c];e?(e.avaliable||(console.log("reload"),e.reload(),e.avaliable=!0),d(0,e)):b.NativeNetContext.__use_asyn?a._bitmapCallbackMap[c]?a._addToCallbackList(c,
d):(a._addToCallbackList(c,d),e=new b.PromiseObject,e.onSuccessFunc=function(b){a._bitmapDataFactory[c]=b;a._onLoad(c,b)},e.onErrorFunc=function(){a._onError(c,null)},console.log("addTextureAsyn"),egret_native.Texture.addTextureAsyn(c,e)):(console.log("addTexture"),e=egret_native.Texture.addTexture(c),a._bitmapDataFactory[c]=e,e.avaliable=!0,d(0,e))};a._addToCallbackList=function(c,b){var d=a._bitmapCallbackMap[c];d||(d=[]);d.push(b);a._bitmapCallbackMap[c]=d};a.crossOrigin=null;a._bitmapDataFactory=
{};a._bitmapCallbackMap={};return a}(b.HashObject);b.Texture=e;e.prototype.__class__="egret.Texture"})(egret||(egret={}));
(function(b){var e=function(d){function a(){d.call(this)}__extends(a,d);var c=a.prototype;c.init=function(){this._bitmapData=document.createElement("canvas");this._bitmapData.avaliable=!0;this.renderContext=b.RendererContext.createRendererContext(this._bitmapData)};c.drawToTexture=function(c,d,e){var l=d||c.getBounds(b.Rectangle.identity);if(0==l.width||0==l.height)return!1;this._bitmapData||this.init();var f=l.x,g=l.y,n=l.width,l=l.height,p,q,r=b.MainContext.instance.rendererContext._texture_scale_factor;
p=n/r;q=l/r;p=Math.round(p);q=Math.round(q);this.setSize(p,q);this.begin();c._worldTransform.identity();c._worldTransform.a=1/r;c._worldTransform.d=1/r;e&&(c._worldTransform.a*=e,c._worldTransform.d*=e);e=c._DO_Props_._anchorOffsetX;r=c._DO_Props_._anchorOffsetY;if(0!=c._DO_Props_._anchorX||0!=c._DO_Props_._anchorY)e=c._DO_Props_._anchorX*p,r=c._DO_Props_._anchorY*q;this._offsetX=f+e;this._offsetY=g+r;c._worldTransform.append(1,0,0,1,-this._offsetX,-this._offsetY);d&&(this._offsetX-=f,this._offsetY-=
g);c.worldAlpha=1;if(c instanceof b.DisplayObjectContainer)for(d=c._children,f=0,g=d.length;f<g;f++)d[f]._updateTransform();this.renderContext.setTransform(c._worldTransform);d=b.RenderFilter.getInstance();f=d._drawAreaList.concat();d._drawAreaList.length=0;this.renderContext.clearScreen();this.renderContext.onRenderStart();b.Texture.deleteWebGLTexture(this);c._hasFilters()&&c._setGlobalFilters(this.renderContext);(g=c.mask||c._DO_Props_._scrollRect)&&this.renderContext.pushMask(g);e=b.MainContext.__use_new_draw;
b.MainContext.__use_new_draw=!1;c._render(this.renderContext);b.MainContext.__use_new_draw=e;g&&this.renderContext.popMask();c._hasFilters()&&c._removeGlobalFilters(this.renderContext);a.identityRectangle.width=p;a.identityRectangle.height=q;d.addDrawArea(a.identityRectangle);this.renderContext.onRenderFinish();d._drawAreaList=f;this._sourceWidth=p;this._sourceHeight=q;this._textureWidth=Math.round(n);this._textureHeight=Math.round(l);this.end();return!0};c.setSize=function(a,c){var b=this._bitmapData;
b.width=a;b.height=c;b.style.width=a+"px";b.style.height=c+"px";this.renderContext._cacheCanvas&&(this.renderContext._cacheCanvas.width=a,this.renderContext._cacheCanvas.height=c)};c.begin=function(){};c.end=function(){};c.dispose=function(){this._bitmapData&&(this.renderContext=this._bitmapData=null)};a.create=function(){return a._pool.length?a._pool.pop():new a};a.release=function(c){a._pool.push(c)};a.identityRectangle=new b.Rectangle;a._pool=[];return a}(b.Texture);b.RenderTexture=e;e.prototype.__class__=
"egret.RenderTexture"})(egret||(egret={}));
(function(b){var e=function(d){function a(){d.call(this);this.renderCost=0;this._texture_scale_factor=1;this.profiler=b.Profiler.getInstance();a.blendModesForGL||a.initBlendMode()}__extends(a,d);var c=a.prototype;Object.defineProperty(c,"texture_scale_factor",{get:function(){return this._texture_scale_factor},set:function(a){this._setTextureScaleFactor(a)},enumerable:!0,configurable:!0});c._setTextureScaleFactor=function(a){this._texture_scale_factor=a};c.clearScreen=function(){};c.clearRect=function(a,
c,b,d){};c.drawImage=function(a,c,b,d,e,g,n,p,q,r){this.profiler.onDrawImage()};c.drawImageScale9=function(a,c,b,d,e,g,n,p,q,r){return!1};c._addOneDraw=function(){this.profiler.onDrawImage()};c.setTransform=function(a){};c.setAlpha=function(a,c){};c.setupFont=function(a,c){};c.measureText=function(a){return 0};c.drawText=function(a,c,b,d,e,g){this.profiler.onDrawImage()};c.strokeRect=function(a,c,b,d,e){};c.pushMask=function(a){};c.popMask=function(){};c.onRenderStart=function(){};c.onRenderFinish=
function(){};c.createLinearGradient=function(a,c,b,d){return null};c.createRadialGradient=function(a,c,b,d,e,g){return null};c.setGlobalFilters=function(a){};c.drawCursor=function(a,c,b,d){};a.createRendererContext=function(a){return null};a.initBlendMode=function(){a.blendModesForGL={};a.blendModesForGL[b.BlendMode.NORMAL]=[1,771];a.blendModesForGL[b.BlendMode.ADD]=[770,1];a.blendModesForGL[b.BlendMode.ERASE]=[0,771];a.blendModesForGL[b.BlendMode.ERASE_REVERSE]=[0,770]};a.registerBlendModeForGL=
function(c,d,e,l){a.blendModesForGL[c]&&!l?b.$warn(1005,c):a.blendModesForGL[c]=[d,e]};a.imageSmoothingEnabled=!0;a.blendModesForGL=null;return a}(b.HashObject);b.RendererContext=e;e.prototype.__class__="egret.RendererContext"})(egret||(egret={}));(function(b){var e=function(){function b(){}b.MOUSE="mouse";b.TOUCH="touch";b.mode="touch";return b}();b.InteractionMode=e;e.prototype.__class__="egret.InteractionMode"})(egret||(egret={}));
(function(b){var e=function(d){function a(){d.call(this);this._currentTouchTarget={};this.maxTouches=2;this.touchDownTarget={};this.touchingIdentifiers=[];this.lastTouchY=this.lastTouchX=-1}__extends(a,d);var c=a.prototype;c.run=function(){};c.getTouchData=function(a,c,b){var d=this._currentTouchTarget[a];null==d&&(d={},this._currentTouchTarget[a]=d);d.stageX=c;d.stageY=b;d.identifier=a;return d};c.dispatchEvent=function(a,c){b.TouchEvent.dispatchTouchEvent(c.target,a,c.identifier,c.stageX,c.stageY,
!1,!1,!1,!0==this.touchDownTarget[c.identifier])};c.onTouchBegan=function(a,c,d){if(this.touchingIdentifiers.length!=this.maxTouches){this.lastTouchX=a;this.lastTouchY=c;var e=b.MainContext.instance.stage.hitTest(a,c);e&&(a=this.getTouchData(d,a,c),this.touchDownTarget[d]=!0,a.target=e,a.beginTarget=e,this.dispatchEvent(b.TouchEvent.TOUCH_BEGIN,a));this.touchingIdentifiers.push(d)}};c.onTouchMove=function(a,c,d){if(-1!=this.touchingIdentifiers.indexOf(d)&&(a!=this.lastTouchX||c!=this.lastTouchY)){this.lastTouchX=
a;this.lastTouchY=c;var e=b.MainContext.instance.stage.hitTest(a,c);e&&(a=this.getTouchData(d,a,c),a.target=e,this.dispatchEvent(b.TouchEvent.TOUCH_MOVE,a))}};c.onTouchEnd=function(a,c,d){var e=this.touchingIdentifiers.indexOf(d);-1!=e&&(this.touchingIdentifiers.splice(e,1),e=b.MainContext.instance.stage.hitTest(a,c))&&(a=this.getTouchData(d,a,c),delete this.touchDownTarget[d],d=a.beginTarget,a.target=e,this.dispatchEvent(b.TouchEvent.TOUCH_END,a),d==e?this.dispatchEvent(b.TouchEvent.TOUCH_TAP,a):
a.beginTarget&&(a.target=a.beginTarget,this.dispatchEvent(b.TouchEvent.TOUCH_RELEASE_OUTSIDE,a)),delete this._currentTouchTarget[a.identifier])};return a}(b.HashObject);b.TouchContext=e;e.prototype.__class__="egret.TouchContext"})(egret||(egret={}));
(function(b){var e=function(d){function a(){d.call(this)}__extends(a,d);var c=a.prototype;c.proceed=function(a){};a._getUrl=function(a){var c=a.url;-1==c.indexOf("?")&&a.method==b.URLRequestMethod.GET&&a.data&&a.data instanceof b.URLVariables&&(c=c+"?"+a.data.toString());return c};c.getChangeList=function(){return[]};c.getVirtualUrl=function(a){return a};return a}(b.HashObject);b.NetContext=e;e.prototype.__class__="egret.NetContext"})(egret||(egret={}));
(function(b){var e=function(b){function a(){b.call(this)}__extends(a,b);var c=a.prototype;c.executeMainLoop=function(a,c){};c.setFrameRate=function(a){};return a}(b.HashObject);b.DeviceContext=e;e.prototype.__class__="egret.DeviceContext"})(egret||(egret={}));(function(b){var e=function(){function b(){}b.call=function(a,c){};b.addCallback=function(a,c){};return b}();b.ExternalInterface=e;e.prototype.__class__="egret.ExternalInterface"})(egret||(egret={}));
(function(b){var e=function(d){function a(){d.call(this);this.trans=null;this.webPSupport=!1;this.header=null;this.ua=navigator.userAgent.toLowerCase();this.trans=this.getTrans("transform")}__extends(a,d);var c=a.prototype;a.getInstance=function(){null==a.instance&&(a.instance=new a);return a.instance};Object.defineProperty(c,"isMobile",{get:function(){b.$warn(1E3);return b.MainContext.deviceType==b.MainContext.DEVICE_MOBILE},enumerable:!0,configurable:!0});c.isIOS=function(){return 0>this.ua.indexOf("windows")&&
(0<=this.ua.indexOf("iphone")||0<=this.ua.indexOf("ipad")||0<=this.ua.indexOf("ipod"))};c.getIOSVersion=function(){return this.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0].match(/\d(_\d)*/)[0]};c.getUserAgent=function(){return this.ua};c.getTrans=function(a,c){void 0===c&&(c=!1);var b="";c?b=this.getHeader(a):(null==this.header&&(this.header=this.getHeader("transform")),b=this.header);return""==b?a:b+a.charAt(0).toUpperCase()+a.substring(1,a.length)};c.getHeader=function(a){var c=document.createElement("div").style;
if(a in c)return"";a=a.charAt(0).toUpperCase()+a.substring(1,a.length);for(var b=["webkit","ms","Moz","O"],d=0;d<b.length;d++)if(b[d]+a in c)return b[d];return""};c.$new=function(a){return this.$(document.createElement(a))};c.$=function(c){var d=document;if(c=c instanceof HTMLElement?c:d.querySelector(c))c.find=c.find||this.$,c.hasClass=c.hasClass||function(a){return this.className.match(new RegExp("(\\s|^)"+a+"(\\s|$)"))},c.addClass=c.addClass||function(a){this.hasClass(a)||(this.className&&(this.className+=
" "),this.className+=a);return this},c.removeClass=c.removeClass||function(a){this.hasClass(a)&&(this.className=this.className.replace(a,""));return this},c.remove=c.remove||function(){},c.appendTo=c.appendTo||function(a){a.appendChild(this);return this},c.prependTo=c.prependTo||function(a){a.childNodes[0]?a.insertBefore(this,a.childNodes[0]):a.appendChild(this);return this},c.transforms=c.transforms||function(){this.style[a.getInstance().trans]=a.getInstance().translate(this.position)+a.getInstance().rotate(this.rotation)+
a.getInstance().scale(this.scale)+a.getInstance().skew(this.skew);return this},c.position=c.position||{x:0,y:0},c.rotation=c.rotation||0,c.scale=c.scale||{x:1,y:1},c.skew=c.skew||{x:0,y:0},c.translates=function(a,c){this.position.x=a;this.position.y=c-b.MainContext.instance.stage.stageHeight;this.transforms();return this},c.rotate=function(a){this.rotation=a;this.transforms();return this},c.resize=function(a,c){this.scale.x=a;this.scale.y=c;this.transforms();return this},c.setSkew=function(a,c){this.skew.x=
a;this.skew.y=c;this.transforms();return this};return c};c.translate=function(a){return"translate("+a.x+"px, "+a.y+"px) "};c.rotate=function(a){return"rotate("+a+"deg) "};c.scale=function(a){return"scale("+a.x+", "+a.y+") "};c.skew=function(a){return"skewX("+-a.x+"deg) skewY("+a.y+"deg)"};return a}(b.HashObject);b.Browser=e;e.prototype.__class__="egret.Browser"})(egret||(egret={}));
(function(b){var e=function(){function b(){}b.getItem=function(a){return null};b.setItem=function(a,c){return!1};b.removeItem=function(a){};b.clear=function(){};return b}();b.localStorage=e;e.prototype.__class__="egret.localStorage"})(egret||(egret={}));
(function(b){var e=function(){function d(){}d.parse=function(a){a=b.SAXParser.getInstance().parserXML(a);if(!a||!a.childNodes)return null;for(var c=a.childNodes.length,h=!1,e=0;e<c;e++){var m=a.childNodes[e];if(1==m.nodeType){h=!0;break}}return h?d.parseNode(m):null};d.parseNode=function(a){if(!a||1!=a.nodeType)return null;var c={};c.localName=a.localName;c.name=a.nodeName;a.namespaceURI&&(c.namespace=a.namespaceURI);a.prefix&&(c.prefix=a.prefix);for(var b=a.attributes,e=b.length,m=0;m<e;m++){var l=
b[m],f=l.name;0!=f.indexOf("xmlns:")&&(c["$"+f]=l.value)}b=a.childNodes;e=b.length;for(m=0;m<e;m++)if(l=d.parseNode(b[m]))c.children||(c.children=[]),l.parent=c,c.children.push(l);!c.children&&(a=a.textContent.trim())&&(c.text=a);return c};d.findChildren=function(a,c,b){b?b.length=0:b=[];d.findByPath(a,c,b);return b};d.findByPath=function(a,c,b){var e=c.indexOf("."),m;-1==e?(m=c,e=!0):(m=c.substring(0,e),c=c.substring(e+1),e=!1);if(a=a.children)for(var l=a.length,f=0;f<l;f++){var g=a[f];g.localName==
m&&(e?b.push(g):d.findByPath(g,c,b))}};d.getAttributes=function(a,c){c?c.length=0:c=[];for(var b in a)"$"==b.charAt(0)&&c.push(b.substring(1));return c};return d}();b.XML=e;e.prototype.__class__="egret.XML"})(egret||(egret={}));
(function(b){var e=function(){function a(){}a.LITTLE_ENDIAN="littleEndian";a.BIG_ENDIAN="bigEndian";return a}();b.Endian=e;e.prototype.__class__="egret.Endian";var d=function(){function a(a){this.BUFFER_EXT_SIZE=0;this.EOF_code_point=this.EOF_byte=-1;this._setArrayBuffer(a||new ArrayBuffer(this.BUFFER_EXT_SIZE));this.endian=e.BIG_ENDIAN}var c=a.prototype;c._setArrayBuffer=function(a){this.write_position=a.byteLength;this.data=new DataView(a);this._position=0};Object.defineProperty(c,"buffer",{get:function(){return this.data.buffer},
set:function(a){this.data=new DataView(a)},enumerable:!0,configurable:!0});Object.defineProperty(c,"dataView",{get:function(){return this.data},set:function(a){this.data=a;this.write_position=a.byteLength},enumerable:!0,configurable:!0});Object.defineProperty(c,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0});Object.defineProperty(c,"position",{get:function(){return this._position},set:function(a){this._position=a;this.write_position=a>this.write_position?
a:this.write_position},enumerable:!0,configurable:!0});Object.defineProperty(c,"length",{get:function(){return this.write_position},set:function(a){this.write_position=a;var c=new Uint8Array(new ArrayBuffer(a)),b=this.data.buffer.byteLength;b>a&&(this._position=a);a=Math.min(b,a);c.set(new Uint8Array(this.data.buffer,0,a));this.buffer=c.buffer},enumerable:!0,configurable:!0});Object.defineProperty(c,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!0,configurable:!0});
c.clear=function(){this._setArrayBuffer(new ArrayBuffer(this.BUFFER_EXT_SIZE))};c.readBoolean=function(){return this.validate(a.SIZE_OF_BOOLEAN)?0!=this.data.getUint8(this.position++):null};c.readByte=function(){return this.validate(a.SIZE_OF_INT8)?this.data.getInt8(this.position++):null};c.readBytes=function(c,b,d){void 0===b&&(b=0);void 0===d&&(d=0);if(0==d)d=this.bytesAvailable;else if(!this.validate(d))return null;c?c.validateBuffer(d):c=new a(new ArrayBuffer(d));for(var e=0;e<d;e++)c.data.setUint8(e+
b,this.data.getUint8(this.position++))};c.readDouble=function(){if(!this.validate(a.SIZE_OF_FLOAT64))return null;var c=this.data.getFloat64(this.position,this.endian==e.LITTLE_ENDIAN);this.position+=a.SIZE_OF_FLOAT64;return c};c.readFloat=function(){if(!this.validate(a.SIZE_OF_FLOAT32))return null;var c=this.data.getFloat32(this.position,this.endian==e.LITTLE_ENDIAN);this.position+=a.SIZE_OF_FLOAT32;return c};c.readInt=function(){if(!this.validate(a.SIZE_OF_INT32))return null;var c=this.data.getInt32(this.position,
this.endian==e.LITTLE_ENDIAN);this.position+=a.SIZE_OF_INT32;return c};c.readShort=function(){if(!this.validate(a.SIZE_OF_INT16))return null;var c=this.data.getInt16(this.position,this.endian==e.LITTLE_ENDIAN);this.position+=a.SIZE_OF_INT16;return c};c.readUnsignedByte=function(){return this.validate(a.SIZE_OF_UINT8)?this.data.getUint8(this.position++):null};c.readUnsignedInt=function(){if(!this.validate(a.SIZE_OF_UINT32))return null;var c=this.data.getUint32(this.position,this.endian==e.LITTLE_ENDIAN);
this.position+=a.SIZE_OF_UINT32;return c};c.readUnsignedShort=function(){if(!this.validate(a.SIZE_OF_UINT16))return null;var c=this.data.getUint16(this.position,this.endian==e.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT16;return c};c.readUTF=function(){if(!this.validate(a.SIZE_OF_UINT16))return null;var c=this.data.getUint16(this.position,this.endian==e.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT16;return 0<c?this.readUTFBytes(c):""};c.readUTFBytes=function(a){if(!this.validate(a))return null;var c=
new Uint8Array(this.buffer,this.bufferOffset+this.position,a);this.position+=a;return this.decodeUTF8(c)};c.writeBoolean=function(c){this.validateBuffer(a.SIZE_OF_BOOLEAN);this.data.setUint8(this.position++,c?1:0)};c.writeByte=function(c){this.validateBuffer(a.SIZE_OF_INT8);this.data.setInt8(this.position++,c)};c.writeBytes=function(a,c,b){void 0===c&&(c=0);void 0===b&&(b=0);if(!(0>c||0>b)&&(b=0==b?a.length-c:Math.min(a.length-c,b),0<b)){this.validateBuffer(b);a=new DataView(a.buffer);for(var d=c;d<
b+c;d++)this.data.setUint8(this.position++,a.getUint8(d))}};c.writeDouble=function(c){this.validateBuffer(a.SIZE_OF_FLOAT64);this.data.setFloat64(this.position,c,this.endian==e.LITTLE_ENDIAN);this.position+=a.SIZE_OF_FLOAT64};c.writeFloat=function(c){this.validateBuffer(a.SIZE_OF_FLOAT32);this.data.setFloat32(this.position,c,this.endian==e.LITTLE_ENDIAN);this.position+=a.SIZE_OF_FLOAT32};c.writeInt=function(c){this.validateBuffer(a.SIZE_OF_INT32);this.data.setInt32(this.position,c,this.endian==e.LITTLE_ENDIAN);
this.position+=a.SIZE_OF_INT32};c.writeShort=function(c){this.validateBuffer(a.SIZE_OF_INT16);this.data.setInt16(this.position,c,this.endian==e.LITTLE_ENDIAN);this.position+=a.SIZE_OF_INT16};c.writeUnsignedInt=function(c){this.validateBuffer(a.SIZE_OF_UINT32);this.data.setUint32(this.position,c,this.endian==e.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT32};c.writeUTF=function(c){c=this.encodeUTF8(c);var b=c.length;this.validateBuffer(a.SIZE_OF_UINT16+b);this.data.setUint16(this.position,b,this.endian===
e.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT16;this._writeUint8Array(c,!1)};c.writeUTFBytes=function(a){this._writeUint8Array(this.encodeUTF8(a))};c.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable};c._writeUint8Array=function(a,c){void 0===c&&(c=!0);c&&this.validateBuffer(this.position+a.length);for(var b=0;b<a.length;b++)this.data.setUint8(this.position++,a[b])};c.validate=function(a){if(0<this.data.byteLength&&this._position+a<=this.data.byteLength)return!0;
b.$error(1025)};c.validateBuffer=function(a,c){void 0===c&&(c=!1);this.write_position=a>this.write_position?a:this.write_position;a+=this._position;if(this.data.byteLength<a||c){var b=new Uint8Array(new ArrayBuffer(a+this.BUFFER_EXT_SIZE)),d=Math.min(this.data.buffer.byteLength,a+this.BUFFER_EXT_SIZE);b.set(new Uint8Array(this.data.buffer,0,d));this.buffer=b.buffer}};c.encodeUTF8=function(a){var c=0;a=this.stringToCodePoints(a);for(var b=[];a.length>c;){var d=a[c++];if(this.inRange(d,55296,57343))this.encoderError(d);
else if(this.inRange(d,0,127))b.push(d);else{var e,g;this.inRange(d,128,2047)?(e=1,g=192):this.inRange(d,2048,65535)?(e=2,g=224):this.inRange(d,65536,1114111)&&(e=3,g=240);for(b.push(this.div(d,Math.pow(64,e))+g);0<e;){var n=this.div(d,Math.pow(64,e-1));b.push(128+n%64);e-=1}}}return new Uint8Array(b)};c.decodeUTF8=function(a){for(var c=0,b="",d,e=0,g=0,n=0,p=0;a.length>c;){d=a[c++];if(d===this.EOF_byte)d=0!==g?this.decoderError(!1):this.EOF_code_point;else if(0===g)this.inRange(d,0,127)||(this.inRange(d,
194,223)?(g=1,p=128,e=d-192):this.inRange(d,224,239)?(g=2,p=2048,e=d-224):this.inRange(d,240,244)?(g=3,p=65536,e=d-240):this.decoderError(!1),e*=Math.pow(64,g),d=null);else if(this.inRange(d,128,191))if(n+=1,e+=(d-128)*Math.pow(64,g-n),n!==g)d=null;else{var q=e,r=p,p=n=g=e=0;d=this.inRange(q,r,1114111)&&!this.inRange(q,55296,57343)?q:this.decoderError(!1,d)}else p=n=g=e=0,c--,d=this.decoderError(!1,d);null!==d&&d!==this.EOF_code_point&&(65535>=d?0<d&&(b+=String.fromCharCode(d)):(d-=65536,b+=String.fromCharCode(55296+
(d>>10&1023)),b+=String.fromCharCode(56320+(d&1023))))}return b};c.encoderError=function(a){b.$error(1026,a)};c.decoderError=function(a,c){a&&b.$error(1027);return c||65533};c.inRange=function(a,c,b){return c<=a&&a<=b};c.div=function(a,c){return Math.floor(a/c)};c.stringToCodePoints=function(a){for(var c=[],b=0,d=a.length;b<a.length;){var e=a.charCodeAt(b);if(this.inRange(e,55296,57343))if(this.inRange(e,56320,57343))c.push(65533);else if(b===d-1)c.push(65533);else{var g=a.charCodeAt(b+1);this.inRange(g,
56320,57343)?(e&=1023,g&=1023,b+=1,c.push(65536+(e<<10)+g)):c.push(65533)}else c.push(e);b+=1}return c};a.SIZE_OF_BOOLEAN=1;a.SIZE_OF_INT8=1;a.SIZE_OF_INT16=2;a.SIZE_OF_INT32=4;a.SIZE_OF_UINT8=1;a.SIZE_OF_UINT16=2;a.SIZE_OF_UINT32=4;a.SIZE_OF_FLOAT32=4;a.SIZE_OF_FLOAT64=8;return a}();b.ByteArray=d;d.prototype.__class__="egret.ByteArray"})(egret||(egret={}));
(function(b){b.getOption=function(b){if(window.location){var d=location.search;if(""==d)return"";for(var d=d.slice(1),d=d.split("&"),a=d.length,c=0;c<a;c++){var h=d[c].split("=");if(h[0]==b)return h[1]}}return""}})(egret||(egret={}));
(function(b){var e=function(d){function a(a,c,b){d.call(this);this._target=null;this.loop=this.ignoreGlobalPause=this._useTicks=!1;this._actions=this._steps=this.pluginData=null;this.paused=!1;this.duration=0;this._prevPos=-1;this.position=null;this._stepPosition=this._prevPosition=0;this.passive=!1;this.initialize(a,c,b)}__extends(a,d);var c=a.prototype;a.get=function(c,b,d,e){void 0===b&&(b=null);void 0===d&&(d=null);void 0===e&&(e=!1);e&&a.removeTweens(c);return new a(c,b,d)};a.removeTweens=function(c){if(c.tween_count){for(var b=
a._tweens,d=b.length-1;0<=d;d--)b[d]._target==c&&(b[d].paused=!0,b.splice(d,1));c.tween_count=0}};a.pauseTweens=function(a){if(a.tween_count)for(var c=b.Tween._tweens,d=c.length-1;0<=d;d--)c[d]._target==a&&(c[d].paused=!0)};a.resumeTweens=function(a){if(a.tween_count)for(var c=b.Tween._tweens,d=c.length-1;0<=d;d--)c[d]._target==a&&(c[d].paused=!1)};a.tick=function(c,b){void 0===b&&(b=!1);for(var d=a._tweens.concat(),e=d.length-1;0<=e;e--){var f=d[e];b&&!f.ignoreGlobalPause||f.paused||f.tick(f._useTicks?
1:c)}};a._register=function(c,d){var e=c._target,l=a._tweens;if(d)e&&(e.tween_count=0<e.tween_count?e.tween_count+1:1),l.push(c),a._inited||(b.Ticker.getInstance().register(a.tick,null),a._inited=!0);else for(e&&e.tween_count--,e=l.length;e--;)if(l[e]==c){l.splice(e,1);break}};a.removeAllTweens=function(){for(var c=a._tweens,b=0,d=c.length;b<d;b++){var e=c[b];e.paused=!0;e._target.tweenjs_count=0}c.length=0};c.initialize=function(c,b,d){this._target=c;b&&(this._useTicks=b.useTicks,this.ignoreGlobalPause=
b.ignoreGlobalPause,this.loop=b.loop,b.onChange&&this.addEventListener("change",b.onChange,b.onChangeObj),b.override&&a.removeTweens(c));this.pluginData=d||{};this._curQueueProps={};this._initQueueProps={};this._steps=[];this._actions=[];b&&b.paused?this.paused=!0:a._register(this,!0);b&&null!=b.position&&this.setPosition(b.position,a.NONE)};c.setPosition=function(a,c){void 0===c&&(c=1);0>a&&(a=0);var b=a,d=!1;b>=this.duration&&(this.loop?b%=this.duration:(b=this.duration,d=!0));if(b==this._prevPos)return d;
var e=this._prevPos;this.position=this._prevPos=b;this._prevPosition=a;if(this._target)if(d)this._updateTargetProps(null,1);else if(0<this._steps.length){for(var g=0,n=this._steps.length;g<n&&!(this._steps[g].t>b);g++);g=this._steps[g-1];this._updateTargetProps(g,(this._stepPosition=b-g.t)/g.d)}0!=c&&0<this._actions.length&&(this._useTicks?this._runActions(b,b):1==c&&b<e?(e!=this.duration&&this._runActions(e,this.duration),this._runActions(0,b,!0)):this._runActions(e,b));d&&this.setPaused(!0);this.dispatchEventWith("change");
return d};c._runActions=function(a,c,b){void 0===b&&(b=!1);var d=a,e=c,g=-1,n=this._actions.length,p=1;a>c&&(d=c,e=a,g=n,n=p=-1);for(;(g+=p)!=n;){c=this._actions[g];var q=c.t;(q==e||q>d&&q<e||b&&q==a)&&c.f.apply(c.o,c.p)}};c._updateTargetProps=function(c,b){var d,e,f,g;if(c||1!=b){if(this.passive=!!c.v)return;c.e&&(b=c.e(b,0,1,1));d=c.p0;e=c.p1}else this.passive=!1,d=e=this._curQueueProps;for(var n in this._initQueueProps){null==(f=d[n])&&(d[n]=f=this._initQueueProps[n]);null==(g=e[n])&&(e[n]=g=f);
f=f==g||0==b||1==b||"number"!=typeof f?1==b?g:f:f+(g-f)*b;var p=!1;if(g=a._plugins[n])for(var q=0,r=g.length;q<r;q++){var s=g[q].tween(this,n,f,d,e,b,!!c&&d==e,!c);s==a.IGNORE?p=!0:f=s}p||(this._target[n]=f)}};c.setPaused=function(c){this.paused=c;a._register(this,!c);return this};c._cloneProps=function(a){var c={},b;for(b in a)c[b]=a[b];return c};c._addStep=function(a){0<a.d&&(this._steps.push(a),a.t=this.duration,this.duration+=a.d);return this};c._appendQueueProps=function(c){var b,d,e,f,g,n;for(n in c)if(void 0===
this._initQueueProps[n]){d=this._target[n];if(b=a._plugins[n])for(e=0,f=b.length;e<f;e++)d=b[e].init(this,n,d);this._initQueueProps[n]=this._curQueueProps[n]=void 0===d?null:d}for(n in c){d=this._curQueueProps[n];if(b=a._plugins[n])for(g=g||{},e=0,f=b.length;e<f;e++)b[e].step&&b[e].step(this,n,d,c[n],g);this._curQueueProps[n]=c[n]}g&&this._appendQueueProps(g);return this._curQueueProps};c._addAction=function(a){a.t=this.duration;this._actions.push(a);return this};c._set=function(a,c){for(var b in a)c[b]=
a[b]};c.wait=function(a,c){if(null==a||0>=a)return this;var b=this._cloneProps(this._curQueueProps);return this._addStep({d:a,p0:b,p1:b,v:c})};c.to=function(a,c,b){void 0===b&&(b=void 0);if(isNaN(c)||0>c)c=0;return this._addStep({d:c||0,p0:this._cloneProps(this._curQueueProps),e:b,p1:this._cloneProps(this._appendQueueProps(a))})};c.call=function(a,c,b){void 0===c&&(c=void 0);void 0===b&&(b=void 0);return this._addAction({f:a,p:b?b:[],o:c?c:this._target})};c.set=function(a,c){void 0===c&&(c=null);
return this._addAction({f:this._set,o:this,p:[a,c?c:this._target]})};c.play=function(a){a||(a=this);return this.call(a.setPaused,a,[!1])};c.pause=function(a){a||(a=this);return this.call(a.setPaused,a,[!0])};c.tick=function(a){this.paused||this.setPosition(this._prevPosition+a)};a.NONE=0;a.LOOP=1;a.REVERSE=2;a._tweens=[];a.IGNORE={};a._plugins={};a._inited=!1;return a}(b.EventDispatcher);b.Tween=e;e.prototype.__class__="egret.Tween"})(egret||(egret={}));
(function(b){var e=function(){function d(){b.$error(1014)}d.get=function(a){-1>a&&(a=-1);1<a&&(a=1);return function(c){return 0==a?c:0>a?c*(c*-a+1+a):c*((2-c)*a+(1-a))}};d.getPowIn=function(a){return function(c){return Math.pow(c,a)}};d.getPowOut=function(a){return function(c){return 1-Math.pow(1-c,a)}};d.getPowInOut=function(a){return function(c){return 1>(c*=2)?0.5*Math.pow(c,a):1-0.5*Math.abs(Math.pow(2-c,a))}};d.sineIn=function(a){return 1-Math.cos(a*Math.PI/2)};d.sineOut=function(a){return Math.sin(a*
Math.PI/2)};d.sineInOut=function(a){return-0.5*(Math.cos(Math.PI*a)-1)};d.getBackIn=function(a){return function(c){return c*c*((a+1)*c-a)}};d.getBackOut=function(a){return function(c){return--c*c*((a+1)*c+a)+1}};d.getBackInOut=function(a){a*=1.525;return function(c){return 1>(c*=2)?0.5*c*c*((a+1)*c-a):0.5*((c-=2)*c*((a+1)*c+a)+2)}};d.circIn=function(a){return-(Math.sqrt(1-a*a)-1)};d.circOut=function(a){return Math.sqrt(1- --a*a)};d.circInOut=function(a){return 1>(a*=2)?-0.5*(Math.sqrt(1-a*a)-1):0.5*
(Math.sqrt(1-(a-=2)*a)+1)};d.bounceIn=function(a){return 1-d.bounceOut(1-a)};d.bounceOut=function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375};d.bounceInOut=function(a){return 0.5>a?0.5*d.bounceIn(2*a):0.5*d.bounceOut(2*a-1)+0.5};d.getElasticIn=function(a,c){var b=2*Math.PI;return function(d){if(0==d||1==d)return d;var e=c/b*Math.asin(1/a);return-(a*Math.pow(2,10*(d-=1))*Math.sin((d-e)*b/c))}};d.getElasticOut=
function(a,c){var b=2*Math.PI;return function(d){if(0==d||1==d)return d;var e=c/b*Math.asin(1/a);return a*Math.pow(2,-10*d)*Math.sin((d-e)*b/c)+1}};d.getElasticInOut=function(a,c){var b=2*Math.PI;return function(d){var e=c/b*Math.asin(1/a);return 1>(d*=2)?-0.5*a*Math.pow(2,10*(d-=1))*Math.sin((d-e)*b/c):a*Math.pow(2,-10*(d-=1))*Math.sin((d-e)*b/c)*0.5+1}};d.quadIn=d.getPowIn(2);d.quadOut=d.getPowOut(2);d.quadInOut=d.getPowInOut(2);d.cubicIn=d.getPowIn(3);d.cubicOut=d.getPowOut(3);d.cubicInOut=d.getPowInOut(3);
d.quartIn=d.getPowIn(4);d.quartOut=d.getPowOut(4);d.quartInOut=d.getPowInOut(4);d.quintIn=d.getPowIn(5);d.quintOut=d.getPowOut(5);d.quintInOut=d.getPowInOut(5);d.backIn=d.getBackIn(1.7);d.backOut=d.getBackOut(1.7);d.backInOut=d.getBackInOut(1.7);d.elasticIn=d.getElasticIn(1,0.3);d.elasticOut=d.getElasticOut(1,0.3);d.elasticInOut=d.getElasticInOut(1,0.3*1.5);return d}();b.Ease=e;e.prototype.__class__="egret.Ease"})(egret||(egret={}));
(function(b){var e=function(d){function a(){d.call(this);this.path="";this.audio=null;this.type=a.EFFECT;this._pauseTime=0;this._listeners=[]}__extends(a,d);var c=a.prototype;Object.defineProperty(c,"position",{get:function(){return this.audio?Math.floor(1E3*this.audio._getCurrentTime()):0},enumerable:!0,configurable:!0});c.play=function(a,c){void 0===a&&(a=!1);void 0===c&&(c=0);var b=this.audio;b&&(b._setCurrentTime(c/1E3),b._setLoop(a),b._play(this.type))};c.stop=function(){var a=this.audio;a&&
(this._pauseTime=0,a._setCurrentTime(0),a._pause())};c.pause=function(){var a=this.audio;a&&(this._pauseTime=a._getCurrentTime(),a._pause())};c.resume=function(){var a=this.audio;a&&(a._setCurrentTime(this._pauseTime),this._pauseTime=0,a._play(this.type))};c.load=function(){var a=this.audio;a&&a._load()};c.addEventListener=function(a,c,e){d.prototype.addEventListener.call(this,a,c,e);var l=this;this.audio&&1==this._eventsMap[a].length&&(c=a==b.SoundEvent.SOUND_COMPLETE||"ended"==a?function(a){b.Event._dispatchByTarget(b.SoundEvent,
l,b.SoundEvent.SOUND_COMPLETE);b.Event._dispatchByTarget(b.Event,l,"ended")}:function(a){b.Event._dispatchByTarget(b.Event,l,a.type)},this._listeners.push({type:a,func:c}),a=l.getVirtualType(a),this.audio._addEventListener(a,c,!1))};c.removeEventListener=function(a,c,b){d.prototype.removeEventListener.call(this,a,c,b);if(this.audio&&(!this._eventsMap||!this._eventsMap[a]||0==this._eventsMap[a].length))for(b=0;b<this._listeners.length;b++)if(c=this._listeners[b],c.type==a){this._listeners.splice(b,
1);a=this.getVirtualType(a);this.audio._removeEventListener(a,c.func,!1);break}};c.getVirtualType=function(a){switch(a){case b.SoundEvent.SOUND_COMPLETE:return"ended";default:return a}};Object.defineProperty(c,"volume",{get:function(){return this.audio?this.audio._getVolume():0},set:function(a){var c=this.audio;c&&c._setVolume(Math.max(0,Math.min(a,1)))},enumerable:!0,configurable:!0});c.setVolume=function(a){b.$warn(1031);this.volume=a};c.getVolume=function(){b.$warn(1032);return this.volume};c.preload=
function(a,c,b){void 0===c&&(c=null);void 0===b&&(b=null);this.type=a;this.audio._preload(a,c,b)};c._setAudio=function(a){this.audio=a};c.destroy=function(){this.audio._destroy()};a.MUSIC="music";a.EFFECT="effect";return a}(b.EventDispatcher);b.Sound=e;e.prototype.__class__="egret.Sound"})(egret||(egret={}));
(function(b){var e=function(){function b(){}b.isNumber=function(a){return"number"===typeof a&&!isNaN(a)};b.sin=function(a){var c=Math.floor(a),e=c+1,k=b.sinInt(c),m=b.sinInt(e);return(a-c)*m+(e-a)*k};b.sinInt=function(a){a%=360;0>a&&(a+=360);return 90>a?egret_sin_map[a]:180>a?egret_cos_map[a-90]:270>a?-egret_sin_map[a-180]:-egret_cos_map[a-270]};b.cos=function(a){var c=Math.floor(a),e=c+1,k=b.cosInt(c),m=b.cosInt(e);return(a-c)*m+(e-a)*k};b.cosInt=function(a){a%=360;0>a&&(a+=360);return 90>a?egret_cos_map[a]:
180>a?-egret_sin_map[a-90]:270>a?-egret_cos_map[a-180]:egret_sin_map[a-270]};return b}();b.NumberUtils=e;e.prototype.__class__="egret.NumberUtils"})(egret||(egret={}));for(var egret_sin_map={},egret_cos_map={},NumberUtils_i=0;90>=NumberUtils_i;NumberUtils_i++)egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*egret.Matrix.DEG_TO_RAD),egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*egret.Matrix.DEG_TO_RAD);
Function.prototype.bind||(Function.prototype.bind=function(b){"function"!==typeof this&&egret.$error(1029);var e=Array.prototype.slice.call(arguments,1),d=this,a=function(){},c=function(){return d.apply(this instanceof a&&b?this:b,e.concat(Array.prototype.slice.call(arguments)))};a.prototype=this.prototype;c.prototype=new a;return c});
(function(b){var e=function(){function d(){this.downloadingSizeThisObject=this.downloadingSizeFunc=this.onErrorThisObject=this.onErrorFunc=this.onSuccessThisObject=this.onSuccessFunc=null}var a=d.prototype;d.create=function(){return d.promiseObjectList.length?d.promiseObjectList.pop():new b.PromiseObject};a.onSuccess=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this.onSuccessFunc&&this.onSuccessFunc.apply(this.onSuccessThisObject,a);this.destroy()};a.onError=function(){for(var a=
[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this.onErrorFunc&&this.onErrorFunc.apply(this.onErrorThisObject,a);this.destroy()};a.downloadingSize=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this.downloadingSizeFunc&&this.downloadingSizeFunc.apply(this.downloadingSizeThisObject,a)};a.destroy=function(){this.downloadingSizeThisObject=this.downloadingSizeFunc=this.onErrorThisObject=this.onErrorFunc=this.onSuccessThisObject=this.onSuccessFunc=void 0;d.promiseObjectList.push(this)};
d.promiseObjectList=[];return d}();b.PromiseObject=e;e.prototype.__class__="egret.PromiseObject"})(egret||(egret={}));
(function(b){var e=function(d){function a(c){void 0===c&&(c=60);d.call(this);this.frameRate=c;this._time=0;this._requestAnimationId=NaN;this._isActivate=!0;a.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;a.cancelAnimationFrame=window.cancelAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.oCancelAnimationFrame||
window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame;a.requestAnimationFrame||(a.requestAnimationFrame=function(a){return window.setTimeout(a,1E3/c)});a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){return window.clearTimeout(a)});a.instance=this;this.registerListener()}__extends(a,d);var c=a.prototype;c.setFrameRate=function(c){0==60%c&&(a.countTime=
60/c-1)};c.enterFrame=function(){var c=a.instance,d=a._thisObject,e=a._callback,l=b.getTimer(),f=l-c._time;c._requestAnimationId=a.requestAnimationFrame.call(window,a.prototype.enterFrame);a.count<a.countTime?a.count++:(a.count=0,e.call(d,f),c._time=l)};c.executeMainLoop=function(c,b){a._callback=c;a._thisObject=b;this.enterFrame()};c.reset=function(){var c=a.instance;c._requestAnimationId&&(c._time=b.getTimer(),a.cancelAnimationFrame.call(window,c._requestAnimationId),c.enterFrame())};c.registerListener=
function(){var c=this,d=function(){c._isActivate&&(c._isActivate=!1,b.MainContext.instance.stage.dispatchEvent(new b.Event(b.Event.DEACTIVATE)))},e=function(){c._isActivate||(c._isActivate=!0,a.instance.reset(),b.MainContext.instance.stage.dispatchEvent(new b.Event(b.Event.ACTIVATE)))},l=function(){document[f]?d():e()};window.addEventListener("focus",e,!1);window.addEventListener("blur",d,!1);var f,g;"undefined"!==typeof document.hidden?(f="hidden",g="visibilitychange"):"undefined"!==typeof document.mozHidden?
(f="mozHidden",g="mozvisibilitychange"):"undefined"!==typeof document.msHidden?(f="msHidden",g="msvisibilitychange"):"undefined"!==typeof document.webkitHidden?(f="webkitHidden",g="webkitvisibilitychange"):"undefined"!==typeof document.oHidden&&(f="oHidden",g="ovisibilitychange");"onpageshow"in window&&"onpagehide"in window&&(window.addEventListener("pageshow",e,!1),window.addEventListener("pagehide",d,!1));f&&g&&document.addEventListener(g,l,!1);l=navigator.userAgent;g=/micromessenger/gi.test(l);
var n=/mqq/ig.test(l);if(/mobile.*qq/gi.test(l)||g)n=!1;n&&(l=window.browser||{},l.execWebFn=l.execWebFn||{},l.execWebFn.postX5GamePlayerMessage=function(a){a=a.type;"app_enter_background"==a?d():"app_enter_foreground"==a&&e()},window.browser=l)};a.instance=null;a.countTime=0;a.requestAnimationFrame=null;a.cancelAnimationFrame=null;a._thisObject=null;a._callback=null;a.count=0;return a}(b.DeviceContext);b.HTML5DeviceContext=e;e.prototype.__class__="egret.HTML5DeviceContext"})(egret||(egret={}));var egret_html5_localStorage;
(function(b){b.getItem=function(b){return window.localStorage.getItem(b)};b.setItem=function(b,d){try{return window.localStorage.setItem(b,d),!0}catch(a){return egret.$warn(1018,b,d),!1}};b.removeItem=function(b){window.localStorage.removeItem(b)};b.clear=function(){window.localStorage.clear()};b.init=function(){for(var e in b)egret.localStorage[e]=b[e]}})(egret_html5_localStorage||(egret_html5_localStorage={}));egret_html5_localStorage.init();
(function(b){var e=function(d){function a(a,c){void 0===c&&(c=!0);d.call(this);this.useCacheCanvas=c;b.Texture.prototype.draw=b.Texture.prototype._drawForCanvas;b.Texture.prototype.dispose=b.Texture.prototype._disposeForCanvas;this.canvas=a||this.createCanvas();this.canvasContext=this.canvas.getContext("2d");c?(this._cacheCanvas=document.createElement("canvas"),this._cacheCanvas.width=this.canvas.width,this._cacheCanvas.height=this.canvas.height,this.drawCanvasContext=this._cacheCanvasContext=this._cacheCanvas.getContext("2d")):
this.drawCanvasContext=this.canvasContext;var e=this.drawCanvasContext;if(void 0==e.imageSmoothingEnabled){for(var l=["webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled"],f=0;f<l.length;f++){var g=l[f];if(void 0!=e[g])break}Object.defineProperty(e,"imageSmoothingEnabled",{get:function(){return this[g]},set:function(a){this[g]=a},enumerable:!0,configurable:!0})}this.onResize();var n=this.drawCanvasContext.setTransform,p=this;this.drawCanvasContext.setTransform=function(a,
c,b,d,e,h){p._matrixA=a;p._matrixB=c;p._matrixC=b;p._matrixD=d;p._matrixTx=e;p._matrixTy=h;n.call(p.drawCanvasContext,a,c,b,d,e,h)};this._matrixA=1;this._matrixC=this._matrixB=0;this._matrixD=1;this._transformTy=this._transformTx=this._matrixTy=this._matrixTx=0;this.initBlendMode()}__extends(a,d);var c=a.prototype;c.createCanvas=function(){var a=b.Browser.getInstance().$("#egretCanvas");if(!a){var c=document.getElementById(b.StageDelegate.canvas_div_name),a=b.Browser.getInstance().$new("canvas");
a.id="egretCanvas";c.appendChild(a)}b.MainContext.instance.stage.addEventListener(b.Event.RESIZE,this.onResize,this);return a};c.onResize=function(){if(this.canvas){var a=document.getElementById(b.StageDelegate.canvas_div_name);this.canvas.width=b.MainContext.instance.stage.stageWidth;this.canvas.height=b.MainContext.instance.stage.stageHeight;this.canvas.style.width=a.style.width;this.canvas.style.height=a.style.height;this.useCacheCanvas&&(this._cacheCanvas.width=this.canvas.width,this._cacheCanvas.height=
this.canvas.height);this.drawCanvasContext.imageSmoothingEnabled=b.RendererContext.imageSmoothingEnabled}};c.clearScreen=function(){for(var a=b.RenderFilter.getInstance().getDrawAreaList(),c=0,d=a.length;c<d;c++){var e=a[c];this.clearRect(e.x,e.y,e.width,e.height)}a=b.MainContext.instance.stage;this.useCacheCanvas&&this._cacheCanvasContext.clearRect(0,0,a.stageWidth,a.stageHeight);this.renderCost=0};c.clearRect=function(a,c,b,d){this.canvasContext.clearRect(a,c,b,d)};c.drawImage=function(a,c,e,l,
f,g,n,p,q,r){void 0===r&&(r=void 0);g+=this._transformTx;n+=this._transformTy;var s=b.getTimer();a.draw(this.drawCanvasContext,c,e,l,f,g,n,p,q,r);d.prototype.drawImage.call(this,a,c,e,l,f,g,n,p,q,r);this.renderCost+=b.getTimer()-s};c.setTransform=function(a){1==a.a&&0==a.b&&0==a.c&&1==a.d&&1==this._matrixA&&0==this._matrixB&&0==this._matrixC&&1==this._matrixD?(this._transformTx=a.tx-this._matrixTx,this._transformTy=a.ty-this._matrixTy):(this._transformTx=this._transformTy=0,this._matrixA==a.a&&this._matrixB==
a.b&&this._matrixC==a.c&&this._matrixD==a.d&&this._matrixTx==a.tx&&this._matrixTy==a.ty||this.drawCanvasContext.setTransform(a.a,a.b,a.c,a.d,a.tx,a.ty))};c.setAlpha=function(a,c){this.drawCanvasContext.globalAlpha=a;c?(this.blendValue=this.blendModes[c],this.drawCanvasContext.globalCompositeOperation=this.blendValue):this.blendValue!=b.BlendMode.NORMAL&&(this.blendValue=this.blendModes[b.BlendMode.NORMAL],this.drawCanvasContext.globalCompositeOperation=this.blendValue)};c.initBlendMode=function(){this.blendModes=
{};this.blendModes[b.BlendMode.NORMAL]="source-over";this.blendModes[b.BlendMode.ADD]="lighter";this.blendModes[b.BlendMode.ERASE]="destination-out";this.blendModes[b.BlendMode.ERASE_REVERSE]="destination-in"};c.setupFont=function(a,c){void 0===c&&(c=null);c=c||{};var b=a._TF_Props_,d=null==c.size?b._size:c.size,e=null==c.fontFamily?b._fontFamily:c.fontFamily,g=this.drawCanvasContext,n=(null==c.italic?b._italic:c.italic)?"italic ":"normal ",n=n+((null==c.bold?b._bold:c.bold)?"bold ":"normal ");g.font=
n+(d+"px "+e);g.textAlign="left";g.textBaseline="middle"};c.measureText=function(a){return this.drawCanvasContext.measureText(a).width};c.drawText=function(a,c,e,l,f,g){void 0===g&&(g=null);this.setupFont(a,g);g=g||{};var n=a._TF_Props_,p;p=null!=g.textColor?b.toColorString(g.textColor):n._textColorString;var q;q=null!=g.strokeColor?b.toColorString(g.strokeColor):n._strokeColorString;var n=null!=g.stroke?g.stroke:n._stroke,r=this.drawCanvasContext;r.fillStyle=p;r.strokeStyle=q;n&&(r.lineWidth=2*n,
r.strokeText(c,e+this._transformTx,l+this._transformTy,f||65535));r.fillText(c,e+this._transformTx,l+this._transformTy,f||65535);d.prototype.drawText.call(this,a,c,e,l,f,g)};c.strokeRect=function(a,c,b,d,e){this.drawCanvasContext.strokeStyle=e;this.drawCanvasContext.strokeRect(a,c,b,d)};c.pushMask=function(a){this.drawCanvasContext.save();this.drawCanvasContext.beginPath();this.drawCanvasContext.rect(a.x+this._transformTx,a.y+this._transformTy,a.width,a.height);this.drawCanvasContext.clip();this.drawCanvasContext.closePath()};
c.popMask=function(){this.drawCanvasContext.restore();this.drawCanvasContext.setTransform(1,0,0,1,0,0)};c.onRenderStart=function(){this.drawCanvasContext.save()};c.onRenderFinish=function(){this.drawCanvasContext.restore();this.drawCanvasContext.setTransform(1,0,0,1,0,0);if(this.useCacheCanvas)for(var a=this._cacheCanvas.width,c=this._cacheCanvas.height,d=b.RenderFilter.getInstance().getDrawAreaList(),e=0,f=d.length;e<f;e++){var g=d[e],n=g.x,p=g.y,q=g.width,g=g.height;n+q>a&&(q=a-n);p+g>c&&(g=c-p);
0<q&&0<g&&this.canvasContext.drawImage(this._cacheCanvas,n,p,q,g,n,p,q,g)}};c.drawCursor=function(a,c,b,d){this.drawCanvasContext.strokeStyle="#40a5ff";this.drawCanvasContext.lineWidth=2;this.drawCanvasContext.beginPath();this.drawCanvasContext.moveTo(Math.round(a+this._transformTx),Math.round(c+this._transformTy));this.drawCanvasContext.lineTo(Math.round(b+this._transformTx),Math.round(d+this._transformTy));this.drawCanvasContext.closePath();this.drawCanvasContext.stroke()};c.createLinearGradient=
function(a,c,b,d){return this.drawCanvasContext.createLinearGradient(a,c,b,d)};c.createRadialGradient=function(a,c,b,d,e,g){return this.drawCanvasContext.createRadialGradient(a,c,b,d,e,g)};return a}(b.RendererContext);b.HTML5CanvasRenderer=e;e.prototype.__class__="egret.HTML5CanvasRenderer"})(egret||(egret={}));egret.RendererContext.createRendererContext=function(b){return new egret.HTML5CanvasRenderer(b,!1)};
egret.Graphics.prototype._beginDraw=function(b){this._renderContext=b.drawCanvasContext;var e=b._transformTx;b=b._transformTy;0==e&&0==b||this._renderContext.translate(e,b)};egret.Graphics.prototype._endDraw=function(b){this._renderContext=b.drawCanvasContext;var e=b._transformTx;b=b._transformTy;0==e&&0==b||this._renderContext.translate(-e,-b)};var originCanvas2DFill=CanvasRenderingContext2D.prototype.fill;
CanvasRenderingContext2D.prototype.fill=function(){var b=this.fillStyle;"string"!=typeof b?(b=b.matrix)?(this.transform(b.a,b.b,b.c,b.d,b.tx,b.ty),originCanvas2DFill.call(this),b=egret.MainContext.instance.rendererContext,b._transformTx=b._transformTy=0,this.setTransform(b._matrixA,b._matrixB,b._matrixC,b._matrixD,b._matrixTx,b._matrixTy)):originCanvas2DFill.call(this):originCanvas2DFill.call(this)};
(function(b){var e=function(d){function a(a){d.call(this);this.glID=this.gl=this.canvas=null;this.size=2E3;this.vertices=null;this.vertSize=5;this.indices=null;this.projectionY=this.projectionX=NaN;this.shaderManager=null;this.contextLost=!1;this.glContextId=0;this.currentBlendMode="";this.currentBaseTexture=null;this.currentBatchSize=0;this.worldTransform=null;this.worldAlpha=1;this.maskList=[];this.maskDataFreeList=[];this.graphicsIndexBuffer=this.graphicsBuffer=this.graphicsIndices=this.graphicsPoints=
this.filterType=null;this.graphicsStyle={};b.Texture.prototype.dispose=b.Texture.prototype._disposeForCanvas;this.canvas=a||this.createCanvas();this.canvas.addEventListener("webglcontextlost",this.handleContextLost.bind(this),!1);this.canvas.addEventListener("webglcontextrestored",this.handleContextRestored.bind(this),!1);this.html5Canvas=document.createElement("canvas");this.canvasContext=new b.HTML5CanvasRenderer(this.html5Canvas);this.onResize();this.projectionX=this.canvas.width/2;this.projectionY=
-this.canvas.height/2;a=6*this.size;this.vertices=new Float32Array(4*this.size*this.vertSize);this.indices=new Uint16Array(a);for(var c=0,e=0;c<a;c+=6,e+=4)this.indices[c+0]=e+0,this.indices[c+1]=e+1,this.indices[c+2]=e+2,this.indices[c+3]=e+0,this.indices[c+4]=e+2,this.indices[c+5]=e+3;this.initWebGL();this.shaderManager=new b.WebGLShaderManager(this.gl);this.worldTransform=new b.Matrix;this.initAll()}__extends(a,d);var c=a.prototype;c.onRenderFinish=function(){this._drawWebGL()};a.initWebGLCanvas=
function(){b.RenderTexture.WebGLCanvas||(b.RenderTexture.WebGLCanvas=document.createElement("canvas"),b.RenderTexture.WebGLCanvas.avaliable=!0,b.RenderTexture.WebGLRenderer=new b.WebGLRenderer(b.RenderTexture.WebGLCanvas),b.RenderTexture.WebGLRenderer.setAlpha(1))};c.initAll=function(){a.isInit||(a.isInit=!0,egret_webgl_graphics.init(),b.TextField.prototype._makeBitmapCache=function(){this.renderTexture||(this.renderTexture=new b.RenderTexture);var a=this.getBounds(b.Rectangle.identity);if(0==a.width||
0==a.height)return this._texture_to_render=null,!1;this._bitmapData||(this._bitmapData=document.createElement("canvas"),this._bitmapData.avaliable=!0,this.renderContext=b.RendererContext.createRendererContext(this._bitmapData));var c=this._bitmapData,d=a.width,a=a.height,e,f,g=b.MainContext.instance.rendererContext._texture_scale_factor;e=d/g;f=a/g;e=Math.round(e);f=Math.round(f);c.width=e;c.height=f;c.style.width=e+"px";c.style.height=f+"px";this.renderContext._cacheCanvas&&(this.renderContext._cacheCanvas.width=
e,this.renderContext._cacheCanvas.height=f);this._worldTransform.identity();this._worldTransform.a=1/g;this._worldTransform.d=1/g;this.renderContext.setTransform(this._worldTransform);this.worldAlpha=1;c=b.RenderFilter.getInstance();g=c._drawAreaList.concat();c._drawAreaList.length=0;this.renderContext.clearScreen();this.renderContext.onRenderStart();b.Texture.deleteWebGLTexture(this.renderTexture);this.renderTexture.dispose();this._hasFilters()&&this._setGlobalFilters(this.renderContext);var n=this.mask||
this._DO_Props_._scrollRect;n&&this.renderContext.pushMask(n);this._render(this.renderContext);n&&this.renderContext.popMask();this._hasFilters()&&this._removeGlobalFilters(this.renderContext);b.RenderTexture.identityRectangle.width=e;b.RenderTexture.identityRectangle.height=f;c.addDrawArea(b.RenderTexture.identityRectangle);this.renderContext.onRenderFinish();c._drawAreaList=g;this.renderTexture._bitmapData=this._bitmapData;this.renderTexture._sourceWidth=e;this.renderTexture._sourceHeight=f;this.renderTexture._textureWidth=
d;this.renderTexture._textureHeight=a;this._texture_to_render=this.renderTexture;return!0},b.TextField.prototype._draw=function(a){this._TF_Props_._type==b.TextFieldType.INPUT&&this._isTyping||(this.getDirty()&&(this._texture_to_render=this.renderTexture,this._DO_Props_._cacheAsBitmap=!0),b.DisplayObject.prototype._draw.call(this,a))},b.RenderTexture.prototype.init=function(){this._bitmapData=document.createElement("canvas");this._bitmapData.avaliable=!0;this.canvasContext=this._bitmapData.getContext("2d");
a.initWebGLCanvas();this._webglBitmapData=b.RenderTexture.WebGLCanvas;this.renderContext=b.RenderTexture.WebGLRenderer},b.RenderTexture.prototype.setSize=function(a,c){this._webglBitmapData&&this.renderContext.setSize(a,c);if(this._bitmapData){var b=this._bitmapData;b.width=a;b.height=c;b.style.width=a+"px";b.style.height=c+"px"}},b.RenderTexture.prototype.end=function(){},b.RenderTexture.prototype.drawToTexture=function(a,c,d){var e=c||a.getBounds(b.Rectangle.identity);if(0==e.width||0==e.height)return!1;
"undefined"==typeof d&&(d=1);this._bitmapData||this.init();var f=e.x,g=e.y,n=e.width,e=e.height,e=e/d,p=b.MainContext.instance.rendererContext._texture_scale_factor,n=Math.round(n/d),e=Math.round(e);this.setSize(n,e);var q=this._bitmapData,r=n/p*d,s=e/p*d;q.width=r;q.height=s;q.style.width=r+"px";q.style.height=s+"px";this.begin();a._worldTransform.identity();q=a._DO_Props_._anchorOffsetX;r=a._DO_Props_._anchorOffsetY;if(0!=a._DO_Props_._anchorX||0!=a._DO_Props_._anchorY)q=a._DO_Props_._anchorX*n,
r=a._DO_Props_._anchorY*e;this._offsetX=f+q;this._offsetY=g+r;a._worldTransform.append(1,0,0,1,-this._offsetX,-this._offsetY);c&&(this._offsetX-=f,this._offsetY-=g);a.worldAlpha=1;c=b.MainContext.__use_new_draw;b.MainContext.__use_new_draw=!1;if(a instanceof b.DisplayObjectContainer)for(f=a._children,g=0,q=f.length;g<q;g++)f[g]._updateTransform();this.renderContext.setTransform(a._worldTransform);f=b.RenderFilter.getInstance();g=f._drawAreaList.concat();f._drawAreaList.length=0;q=this.renderContext.gl;
q.viewport(0,0,n,e);q.bindFramebuffer(q.FRAMEBUFFER,null);q.clearColor(0,0,0,0);q.clear(q.COLOR_BUFFER_BIT);this.renderContext.onRenderStart();b.Texture.deleteWebGLTexture(this);a._hasFilters()&&a._setGlobalFilters(this.renderContext);(q=a.mask||a._DO_Props_._scrollRect)&&this.renderContext.pushMask(q);a._render(this.renderContext);this.renderContext._drawWebGL();b.MainContext.__use_new_draw=c;q&&this.renderContext.popMask();a._hasFilters()&&a._removeGlobalFilters(this.renderContext);b.RenderTexture.identityRectangle.width=
n;b.RenderTexture.identityRectangle.height=e;f.addDrawArea(b.RenderTexture.identityRectangle);this.renderContext.onRenderFinish();f._drawAreaList=g;this._sourceWidth=n/p*d;this._sourceHeight=e/p*d;this._textureWidth=n*d;this._textureHeight=e*d;this.canvasContext.drawImage(this._webglBitmapData,0,0,n,e,0,0,this._sourceWidth,this._sourceHeight);return!0})};c.createCanvas=function(){var a=b.Browser.getInstance().$("#egretCanvas");if(!a){var c=document.getElementById(b.StageDelegate.canvas_div_name),
a=b.Browser.getInstance().$new("canvas");a.id="egretCanvas";c.appendChild(a)}b.MainContext.instance.stage.addEventListener(b.Event.RESIZE,this.onResize,this);return a};c.onResize=function(){this.setSize(b.MainContext.instance.stage.stageWidth,b.MainContext.instance.stage.stageHeight)};c.setSize=function(a,c){var d=document.getElementById(b.StageDelegate.canvas_div_name);this.canvas&&(this.canvas.width=a,this.canvas.height=c,this.canvas.style.width=d.style.width,this.canvas.style.height=d.style.height,
this.projectionX=this.canvas.width/2,this.projectionY=-this.canvas.height/2);this.html5Canvas&&(this.html5Canvas.width=a,this.html5Canvas.height=c,this.html5Canvas.style.width=d.style.width,this.html5Canvas.style.height=d.style.height);this.width=a;this.height=c};c.handleContextLost=function(){this.contextLost=!0};c.handleContextRestored=function(){this.initWebGL();this.shaderManager.setContext(this.gl);this.contextLost=!1};c.initWebGL=function(){for(var c={},d,e=["experimental-webgl","webgl"],l=
0;l<e.length;l++){try{d=this.canvas.getContext(e[l],c)}catch(f){}if(d)break}d||b.$error(1021);a.glID++;this.glID=a.glID;this.setContext(d)};c.setContext=function(a){this.gl=a;a.id=this.glContextId++;this.vertexBuffer=a.createBuffer();this.indexBuffer=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bufferData(a.ARRAY_BUFFER,this.vertices,a.DYNAMIC_DRAW);a.disable(a.DEPTH_TEST);
a.disable(a.CULL_FACE);a.enable(a.BLEND);a.colorMask(!0,!0,!0,!0)};c.start=function(){if(!this.contextLost){var a=this.gl;a.activeTexture(a.TEXTURE0);a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var c;c="colorTransform"==this.filterType?this.shaderManager.colorTransformShader:"blur"==this.filterType?this.shaderManager.blurShader:this.shaderManager.defaultShader;this.shaderManager.activateShader(c);c.syncUniforms();a.uniform2f(c.projectionVector,
this.projectionX,this.projectionY);var b=4*this.vertSize;a.vertexAttribPointer(c.aVertexPosition,2,a.FLOAT,!1,b,0);a.vertexAttribPointer(c.aTextureCoord,2,a.FLOAT,!1,b,8);a.vertexAttribPointer(c.colorAttribute,2,a.FLOAT,!1,b,16)}};c.clearScreen=function(){var a=this.gl;a.colorMask(!0,!0,!0,!0);for(var c=b.RenderFilter.getInstance().getDrawAreaList(),d=0,e=c.length;d<e;d++){var f=c[d];a.viewport(f.x,f.y,f.width,f.height);a.bindFramebuffer(a.FRAMEBUFFER,null);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT)}a.viewport(0,
0,this.width,this.height);this.renderCost=0};c.setBlendMode=function(a){a||(a=b.BlendMode.NORMAL);if(this.currentBlendMode!=a){var c=b.RendererContext.blendModesForGL[a];c&&(this._drawWebGL(),this.gl.blendFunc(c[0],c[1]),this.currentBlendMode=a)}};c.drawRepeatImage=function(a,c,d,e,f,g,n,p,q,r){r=b.MainContext.instance.rendererContext._texture_scale_factor;e*=r;for(f*=r;g<p;g+=e)for(var s=n;s<q;s+=f){var t=Math.min(e,p-g),u=Math.min(f,q-s);this.drawImage(a,c,d,t/r,u/r,g,s,t,u)}};c.drawImage=function(a,
c,b,d,e,g,n,p,q,r){void 0===r&&(r=void 0);if(!this.contextLost){var s=a._bitmapData;if(s&&s.avaliable)if(void 0!==r)this.drawRepeatImage(a,c,b,d,e,g,n,p,q,r);else{if(this.filters)for(r=0;1>r;r++)if("glow"==this.filters[0].type){this.useGlow(a,c,b,d,e,g,n,p,q);return}this._drawImage(a,c,b,d,e,g,n,p,q)}}};c._drawImage=function(a,c,b,d,e,g,n,p,q){this.createWebGLTexture(a);var r=a._bitmapData.webGLTexture[this.glID];if(r!==this.currentBaseTexture||this.currentBatchSize>=this.size-1)this._drawWebGL(),
this.currentBaseTexture=r;var s=this.worldTransform,t=s.a,u=s.b,z=s.c,w=s.d,x=s.tx,y=s.ty;0==g&&0==n||s.append(1,0,0,1,g,n);1==d/p&&1==e/q||s.append(p/d,0,0,q/e,0,0);g=s.a;n=s.b;p=s.c;q=s.d;var r=s.tx,v=s.ty;s.a=t;s.b=u;s.c=z;s.d=w;s.tx=x;s.ty=y;t=a._sourceWidth;u=a._sourceHeight;a=d;s=e;c/=t;b/=u;d/=t;e/=u;t=this.vertices;u=4*this.currentBatchSize*this.vertSize;z=this.worldAlpha;t[u++]=r;t[u++]=v;t[u++]=c;t[u++]=b;t[u++]=z;t[u++]=g*a+r;t[u++]=n*a+v;t[u++]=d+c;t[u++]=b;t[u++]=z;t[u++]=g*a+p*s+r;t[u++]=
q*s+n*a+v;t[u++]=d+c;t[u++]=e+b;t[u++]=z;t[u++]=p*s+r;t[u++]=q*s+v;t[u++]=c;t[u++]=e+b;t[u++]=z;this.currentBatchSize++};c.useGlow=function(c,d,e,l,f,g,n,p,q){var r=this.filters[0],s=r.distance||0,t=r.angle||0,u=0,z=0;0!=s&&0!=t&&(u=Math.ceil(s*b.NumberUtils.cos(t)),z=Math.ceil(s*b.NumberUtils.sin(t)));var s=r.quality,t=r.blurX/10,w=r.blurY/10,x=p+2*t+20+Math.abs(u),y=q+2*w+20+Math.abs(z);a.initWebGLCanvas();var v=b.RenderTexture.WebGLRenderer,B=b.RenderTexture.WebGLCanvas,A=b.RenderTexture.create();
A._bitmapData||A.init();A.setSize(x,y);A._sourceWidth=x;A._sourceHeight=y;var C=b.RenderTexture.create();C._bitmapData||C.init();C.setSize(x,y);C._sourceWidth=x;C._sourceHeight=y;v.clearScreen();v.filterType="colorTransform";v.setGlobalColorTransform([0,0,0,0,r._red,0,0,0,0,r._green,0,0,0,0,r._blue,0,0,0,0,255*r.alpha]);v.setAlpha(1,b.BlendMode.NORMAL);v.setTransform(new b.Matrix(1,0,0,1,0,0));v.drawImage(c,d,e,l,f,t+10,w+10,p,q);v._drawWebGL();v.filterType=null;A.canvasContext.clearRect(0,0,x,y);
A.canvasContext.drawImage(B,0,0,x,y,0,0,x,y);v.clearScreen();v.setAlpha(1,b.BlendMode.NORMAL);v.setTransform(new b.Matrix(1,0,0,1,0,0));v.filterType="blur";v.setBlurData(t,0);b.Texture.deleteWebGLTexture(A);v.drawImage(A,t,w,x-2*t,y-2*w,t,w,x-2*t,y-2*w);v._drawWebGL();v.filterType=null;C.canvasContext.clearRect(0,0,x,y);C.canvasContext.drawImage(B,0,0,x,y,0,0,x,y);v.clearScreen();v.setAlpha(1,b.BlendMode.NORMAL);v.setTransform(new b.Matrix(1,0,0,1,0,0));v.filterType="blur";v.setBlurData(0,w);b.Texture.deleteWebGLTexture(C);
v.drawImage(C,0,w,x,y-2*w,0,w+5,x,y-2*w);v._drawWebGL();v.filterType=null;A.canvasContext.clearRect(0,0,x,y);A.canvasContext.drawImage(B,0,0,x,y,0,0,x,y);v.clearScreen();v.setAlpha(1,b.BlendMode.NORMAL);v.setTransform(new b.Matrix(1,0,0,1,0,0));b.Texture.deleteWebGLTexture(A);for(r=0;r<s;r++)v.drawImage(A,0,0,x,y,u,z,x,y);v._drawWebGL();v.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);v.currentBlendMode=null;v.drawImage(c,d,e,l,f,g+t+10,n+w+15,p,q);v._drawWebGL();C.canvasContext.clearRect(0,
0,x,y);C.canvasContext.drawImage(B,0,0,x,y,0,0,x,y);b.Texture.deleteWebGLTexture(C);this._drawImage(C,0,0,x,y,g-t-10,n-w-15,x,y);this._drawWebGL();b.RenderTexture.release(A);b.RenderTexture.release(C)};c._drawWebGL=function(){if(0!=this.currentBatchSize&&!this.contextLost){var a=b.getTimer();this.start();var c=this.gl;c.bindTexture(c.TEXTURE_2D,this.currentBaseTexture);var d=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);c.bufferSubData(c.ARRAY_BUFFER,0,d);c.drawElements(c.TRIANGLES,
6*this.currentBatchSize,c.UNSIGNED_SHORT,0);this.currentBatchSize=0;this.renderCost+=b.getTimer()-a;b.Profiler.getInstance().onDrawImage()}};c.setTransform=function(a){var c=this.worldTransform;c.a=a.a;c.b=a.b;c.c=a.c;c.d=a.d;c.tx=a.tx;c.ty=a.ty};c.setAlpha=function(a,c){this.worldAlpha=a;this.setBlendMode(c)};c.createWebGLTexture=function(a){a=a._bitmapData;a.webGLTexture||(a.webGLTexture={});if(!a.webGLTexture[this.glID]){var c=this.gl;a.webGLTexture[this.glID]=c.createTexture();a.webGLTexture[this.glID].glContext=
c;c.bindTexture(c.TEXTURE_2D,a.webGLTexture[this.glID]);c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,a);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.bindTexture(c.TEXTURE_2D,null)}};c.pushMask=function(a){this._drawWebGL();var c=this.gl;
0==this.maskList.length&&c.enable(c.SCISSOR_TEST);a=this.getScissorRect(a);this.maskList.push(a);this.scissor(a.x,a.y,a.width,a.height)};c.getScissorRect=function(a){var c=this.maskList[this.maskList.length-1],d,e,f;c?c.intersects(c)?(d=Math.max(a.x+this.worldTransform.tx,c.x),e=Math.max(a.y+this.worldTransform.ty,c.y),f=Math.min(a.x+this.worldTransform.tx+a.width,c.x+c.width)-d,a=Math.min(a.y+this.worldTransform.ty+a.height,c.y+c.height)-e):a=f=e=d=0:(d=a.x+this.worldTransform.tx,e=a.y+this.worldTransform.ty,
f=a.width,a=a.height);(c=this.maskDataFreeList.pop())?(c.x=d,c.y=e,c.width=f,c.height=a):c=new b.Rectangle(d,e,f,a);return c};c.popMask=function(){this._drawWebGL();var a=this.gl,c=this.maskList.pop();this.maskDataFreeList.push(c);c=this.maskList.length;0!=c?(c=this.maskList[c-1],(0<c.width||0<c.height)&&this.scissor(c.x,c.y,c.width,c.height)):a.disable(a.SCISSOR_TEST)};c.scissor=function(a,c,d,e){var f=this.gl;0>d&&(d=0);0>e&&(e=0);f.scissor(a,-c+b.MainContext.instance.stage.stageHeight-e,d,e)};
c.setGlobalColorTransform=function(a){this._drawWebGL();if(a){a=a.concat();var c=this.shaderManager.colorTransformShader;c.uniforms.colorAdd.value.w=a.splice(19,1)[0]/255;c.uniforms.colorAdd.value.z=a.splice(14,1)[0]/255;c.uniforms.colorAdd.value.y=a.splice(9,1)[0]/255;c.uniforms.colorAdd.value.x=a.splice(4,1)[0]/255;c.uniforms.matrix.value=a}};c.setBlurData=function(a,c){var b=this.shaderManager.blurShader;b.uniforms.blur.value.x=a;b.uniforms.blur.value.y=c};c.setGlobalFilters=function(a){this._drawWebGL();
this.setFilterProperties(a)};c.setFilterProperties=function(a){if((this.filters=a)&&a.length)for(var c=0;1>c;c++){var b=a[c];this.filterType=b.type;switch(b.type){case "blur":this.setBlurData(b.blurX,b.blurY);break;case "colorTransform":this.setGlobalColorTransform(b._matrix)}}else this.filterType=null};c.setupFont=function(a,c){void 0===c&&(c=null);this.canvasContext.setupFont(a,c)};c.measureText=function(a){return this.canvasContext.measureText(a)};c.renderGraphics=function(a){this._drawWebGL();
var c=this.gl,b=this.shaderManager.primitiveShader;this.graphicsPoints?(this.graphicsPoints.length=0,this.graphicsIndices.length=0):(this.graphicsPoints=[],this.graphicsIndices=[],this.graphicsBuffer=c.createBuffer(),this.graphicsIndexBuffer=c.createBuffer());this.updateGraphics(a);this.shaderManager.activateShader(b);c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA);c.uniformMatrix3fv(b.translationMatrix,!1,this.worldTransform.toArray(!0));c.uniform2f(b.projectionVector,this.projectionX,-this.projectionY);
c.uniform2f(b.offsetVector,0,0);c.uniform3fv(b.tintColor,[1,1,1]);c.uniform1f(b.alpha,this.worldAlpha);c.bindBuffer(c.ARRAY_BUFFER,this.graphicsBuffer);c.vertexAttribPointer(b.aVertexPosition,2,c.FLOAT,!1,24,0);c.vertexAttribPointer(b.colorAttribute,4,c.FLOAT,!1,24,8);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.graphicsIndexBuffer);c.drawElements(c.TRIANGLE_STRIP,this.graphicsIndices.length,c.UNSIGNED_SHORT,0);this.shaderManager.activateShader(this.shaderManager.defaultShader)};c.updateGraphics=function(a){var c=
this.gl;this.buildRectangle(a);c.bindBuffer(c.ARRAY_BUFFER,this.graphicsBuffer);c.bufferData(c.ARRAY_BUFFER,new Float32Array(this.graphicsPoints),c.STATIC_DRAW);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.graphicsIndexBuffer);c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.graphicsIndices),c.STATIC_DRAW)};c.buildRectangle=function(a){var c=a.x,b=a.y,d=a.w;a=a.h;var e=this.graphicsStyle.a,g=this.graphicsStyle.r*e,n=this.graphicsStyle.g*e,p=this.graphicsStyle.b*e,q=this.graphicsPoints,r=this.graphicsIndices,
s=q.length/6;q.push(c,b);q.push(g,n,p,e);q.push(c+d,b);q.push(g,n,p,e);q.push(c,b+a);q.push(g,n,p,e);q.push(c+d,b+a);q.push(g,n,p,e);r.push(s,s,s+1,s+2,s+3,s+3)};c.setGraphicsStyle=function(a,c,b,d){this.graphicsStyle.r=a;this.graphicsStyle.g=c;this.graphicsStyle.b=b;this.graphicsStyle.a=d};a.glID=0;a.isInit=!1;return a}(b.RendererContext);b.WebGLRenderer=e;e.prototype.__class__="egret.WebGLRenderer"})(egret||(egret={}));var egret_webgl_graphics;
(function(b){b.beginFill=function(b,a){void 0===a&&(a=1);this._pushCommand(new e(this._setStyle,this,[(b>>16)/255,((b&65280)>>8)/255,(b&255)/255,a]))};b.beginGradientFill=function(b,a,c,e,k){};b.drawRect=function(b,a,c,h){this._pushCommand(new e(function(a){this.renderContext.renderGraphics(a)},this,[{x:b,y:a,w:c,h:h}]));this._checkRect(b,a,c,h)};b.drawCircle=function(b,a,c){};b.drawRoundRect=function(b,a,c,e,k,m){};b.drawEllipse=function(b,a,c,e){};b.lineStyle=function(b,a,c,e,k,m,l,f){};b.lineTo=
function(b,a){};b.curveTo=function(b,a,c,e){};b.cubicCurveTo=function(b,a,c,e,k,m){};b.moveTo=function(b,a){};b.clear=function(){this._maxY=this._maxX=this._minY=this._minX=this.commandQueue.length=0};b.endFill=function(){};b._pushCommand=function(b){this.commandQueue.push(b)};b._draw=function(b){var a=this.commandQueue.length;if(0!=a)for(this.renderContext=b,b=0;b<a;b++){var c=this.commandQueue[b];c.method.apply(c.thisObject,c.args)}};var e=function(){return function(b,a,c){this.method=b;this.thisObject=
a;this.args=c}}();e.prototype.__class__="egret_webgl_graphics.Command";b._setStyle=function(b,a,c,e){this.renderContext.setGraphicsStyle(b,a,c,e)};b.init=function(){for(var d in b)egret.Graphics.prototype[d]=b[d]}})(egret_webgl_graphics||(egret_webgl_graphics={}));
(function(b){var e=function(){function d(){}d.compileProgram=function(a,c,e){e=d.compileFragmentShader(a,e);c=d.compileVertexShader(a,c);var k=a.createProgram();a.attachShader(k,c);a.attachShader(k,e);a.linkProgram(k);a.getProgramParameter(k,a.LINK_STATUS)||b.$warn(1020);return k};d.compileFragmentShader=function(a,c){return d._compileShader(a,c,a.FRAGMENT_SHADER)};d.compileVertexShader=function(a,c){return d._compileShader(a,c,a.VERTEX_SHADER)};d._compileShader=function(a,c,d){d=a.createShader(d);
a.shaderSource(d,c);a.compileShader(d);return a.getShaderParameter(d,a.COMPILE_STATUS)?d:(b.Logger.info(a.getShaderInfoLog(d)),null)};d.checkCanUseWebGL=function(){if(void 0==d.canUseWebGL)try{var a=document.createElement("canvas");d.canUseWebGL=!!window.WebGLRenderingContext&&!(!a.getContext("webgl")&&!a.getContext("experimental-webgl"))}catch(c){d.canUseWebGL=!1}return d.canUseWebGL};return d}();b.WebGLUtils=e;e.prototype.__class__="egret.WebGLUtils"})(egret||(egret={}));
(function(b){var e=function(){function d(a){this.defaultVertexSrc="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}";
this.program=this.gl=null;this.fragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void) {\ngl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;\n}";this.uniforms=null;this.gl=a;this.init()}var a=d.prototype;a.init=function(){var a=this.gl,d=b.WebGLUtils.compileProgram(a,this.defaultVertexSrc,this.fragmentSrc);a.useProgram(d);this.uSampler=a.getUniformLocation(d,"uSampler");this.projectionVector=a.getUniformLocation(d,
"projectionVector");this.offsetVector=a.getUniformLocation(d,"offsetVector");this.dimensions=a.getUniformLocation(d,"dimensions");this.aVertexPosition=a.getAttribLocation(d,"aVertexPosition");this.aTextureCoord=a.getAttribLocation(d,"aTextureCoord");this.colorAttribute=a.getAttribLocation(d,"aColor");-1===this.colorAttribute&&(this.colorAttribute=2);this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var e in this.uniforms)this.uniforms[e].uniformLocation=a.getUniformLocation(d,
e);this.initUniforms();this.program=d};a.initUniforms=function(){if(this.uniforms){var a=this.gl,b,d;for(d in this.uniforms){b=this.uniforms[d];var e=b.type;"mat2"===e||"mat3"===e||"mat4"===e?(b.glMatrix=!0,b.glValueLength=1,"mat2"===e?b.glFunc=a.uniformMatrix2fv:"mat3"===e?b.glFunc=a.uniformMatrix3fv:"mat4"===e&&(b.glFunc=a.uniformMatrix4fv)):(b.glFunc=a["uniform"+e],b.glValueLength="2f"===e||"2i"===e?2:"3f"===e||"3i"===e?3:"4f"===e||"4i"===e?4:1)}}};a.syncUniforms=function(){if(this.uniforms){var a,
b=this.gl,d;for(d in this.uniforms)a=this.uniforms[d],1===a.glValueLength?!0===a.glMatrix?a.glFunc.call(b,a.uniformLocation,a.transpose,a.value):a.glFunc.call(b,a.uniformLocation,a.value):2===a.glValueLength?a.glFunc.call(b,a.uniformLocation,a.value.x,a.value.y):3===a.glValueLength?a.glFunc.call(b,a.uniformLocation,a.value.x,a.value.y,a.value.z):4===a.glValueLength&&a.glFunc.call(b,a.uniformLocation,a.value.x,a.value.y,a.value.z,a.value.w)}};return d}();b.EgretShader=e;e.prototype.__class__="egret.EgretShader"})(egret||
(egret={}));
(function(b){var e=function(b){function a(a){b.call(this,a);this.fragmentSrc="precision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform float invert;\nuniform mat4 matrix;\nuniform vec4 colorAdd;\nuniform sampler2D uSampler;\nvoid main(void) {\nvec4 texColor = texture2D(uSampler, vTextureCoord);\nvec4 locColor = texColor * matrix;\nif(texColor.a != 0.0){\nlocColor += colorAdd;\n}\ngl_FragColor = vColor*vec4(locColor.rgb*locColor.a,locColor.a);\n}";this.uniforms={matrix:{type:"mat4",
value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},colorAdd:{type:"4f",value:{x:0,y:0,z:0,w:0}}};this.init()}__extends(a,b);return a}(b.EgretShader);b.ColorTransformShader=e;e.prototype.__class__="egret.ColorTransformShader"})(egret||(egret={}));
(function(b){var e=function(b){function a(a){b.call(this,a);this.fragmentSrc="precision mediump float;uniform vec2 blur;uniform sampler2D uSampler;varying vec2 vTextureCoord;void main(){gl_FragColor = vec4(0.0);gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.028 * blur.x, -0.028 * blur.y))) * 0.0044299121055113265;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.024 * blur.x, -0.024 * blur.y))) * 0.00895781211794;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.020 * blur.x, -0.020 * blur.y))) * 0.0215963866053;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.016 * blur.x, -0.016 * blur.y))) * 0.0443683338718;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.012 * blur.x, -0.012 * blur.y))) * 0.0776744219933;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.008 * blur.x, -0.008 * blur.y))) * 0.115876621105;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.004 * blur.x, -0.004 * blur.y))) * 0.147308056121;gl_FragColor += texture2D(uSampler, vTextureCoord) * 0.159576912161;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.004 * blur.x,  0.004 * blur.y))) * 0.147308056121;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.008 * blur.x,  0.008 * blur.y))) * 0.115876621105;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.012 * blur.x,  0.012 * blur.y))) * 0.0776744219933;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.016 * blur.x,  0.016 * blur.y))) * 0.0443683338718;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.020 * blur.x,  0.020 * blur.y))) * 0.0215963866053;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.024 * blur.x,  0.024 * blur.y))) * 0.00895781211794;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.028 * blur.x,  0.028 * blur.y))) * 0.0044299121055113265;}";this.uniforms=
{blur:{type:"2f",value:{x:2,y:2}}};this.init()}__extends(a,b);return a}(b.EgretShader);b.BlurShader=e;e.prototype.__class__="egret.BlurShader"})(egret||(egret={}));
(function(b){var e=function(){function d(a){this.alpha=this.translationMatrix=this.attributes=this.colorAttribute=this.aVertexPosition=this.tintColor=this.offsetVector=this.projectionVector=this.program=this.gl=null;this.fragmentSrc="precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n   gl_FragColor = vColor;\n}";this.vertexSrc="attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void) {\n   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);\n   v -= offsetVector.xyx;\n   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}";
this.gl=a;this.init()}d.prototype.init=function(){var a=this.gl,c=b.WebGLUtils.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(c);this.projectionVector=a.getUniformLocation(c,"projectionVector");this.offsetVector=a.getUniformLocation(c,"offsetVector");this.tintColor=a.getUniformLocation(c,"tint");this.aVertexPosition=a.getAttribLocation(c,"aVertexPosition");this.colorAttribute=a.getAttribLocation(c,"aColor");this.attributes=[this.aVertexPosition,this.colorAttribute];this.translationMatrix=
a.getUniformLocation(c,"translationMatrix");this.alpha=a.getUniformLocation(c,"alpha");this.program=c};return d}();b.PrimitiveShader=e;e.prototype.__class__="egret.PrimitiveShader"})(egret||(egret={}));
(function(b){var e=function(){function d(a){this.gl=null;this.maxAttibs=10;this.attribState=[];this.tempAttribState=[];this.blurShader=this.colorTransformShader=this.primitiveShader=this.defaultShader=this.currentShader=null;for(var b=0;b<this.maxAttibs;b++)this.attribState[b]=!1;this.setContext(a)}var a=d.prototype;a.setContext=function(a){this.gl=a;this.primitiveShader=new b.PrimitiveShader(a);this.defaultShader=new b.EgretShader(a);this.colorTransformShader=new b.ColorTransformShader(a);this.blurShader=
new b.BlurShader(a);this.activateShader(this.defaultShader)};a.activateShader=function(a){this.currentShader!=a&&(this.gl.useProgram(a.program),this.setAttribs(a.attributes),this.currentShader=a)};a.setAttribs=function(a){var b,d;d=this.tempAttribState.length;for(b=0;b<d;b++)this.tempAttribState[b]=!1;d=a.length;for(b=0;b<d;b++)this.tempAttribState[a[b]]=!0;a=this.gl;d=this.attribState.length;for(b=0;b<d;b++)this.attribState[b]!==this.tempAttribState[b]&&(this.attribState[b]=this.tempAttribState[b],
this.tempAttribState[b]?a.enableVertexAttribArray(b):a.disableVertexAttribArray(b))};return d}();b.WebGLShaderManager=e;e.prototype.__class__="egret.WebGLShaderManager"})(egret||(egret={}));
(function(b){var e=function(d){function a(){d.call(this);b.Texture.createBitmapData=b.Texture._createBitmapDataForCanvasAndWebGl}__extends(a,d);var c=a.prototype;c.initVersion=function(a){this._versionCtr=a};c.proceed=function(a){function c(){if(4==e.readyState)if(e.status!=a._status&&(a._status=e.status,b.HTTPStatusEvent.dispatchHTTPStatusEvent(a,e.status)),400<=e.status||0==e.status)b.IOErrorEvent.dispatchIOErrorEvent(a);else{switch(a.dataFormat){case b.URLLoaderDataFormat.TEXT:a.data=e.responseText;
break;case b.URLLoaderDataFormat.VARIABLES:a.data=new b.URLVariables(e.responseText);break;case b.URLLoaderDataFormat.BINARY:a.data=e.response;break;default:a.data=e.responseText}b.__callAsync(b.Event.dispatchEvent,b.Event,a,b.Event.COMPLETE)}}if(a.dataFormat==b.URLLoaderDataFormat.TEXTURE)this.loadTexture(a);else if(a.dataFormat==b.URLLoaderDataFormat.SOUND)b.Html5Capatibility._audioType==b.AudioType.WEB_AUDIO?this.loadWebAudio(a):b.Html5Capatibility._audioType==b.AudioType.QQ_AUDIO?this.loadQQAudio(a):
this.loadSound(a);else{var d=a._request,e=this.getXHR();e.onreadystatechange=c;var f=this.getVirtualUrl(b.NetContext._getUrl(d));e.open(d.method,f,!0);this.setResponseType(e,a.dataFormat);d.method!=b.URLRequestMethod.GET&&d.data?d.data instanceof b.URLVariables?(e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(d.data.toString())):(e.setRequestHeader("Content-Type","multipart/form-data"),e.send(d.data)):e.send()}};c.loadSound=function(a){function c(e){b.clearTimeout(f.__timeoutId);
f.removeEventListener("canplaythrough",c,!1);f.removeEventListener("error",d,!1);e=new b.Html5Audio;e._setAudio(f);var l=new b.Sound;l._setAudio(e);a.data=l;b.__callAsync(b.Event.dispatchEvent,b.Event,a,b.Event.COMPLETE)}function d(e){b.clearTimeout(f.__timeoutId);f.removeEventListener("canplaythrough",c,!1);f.removeEventListener("error",d,!1);b.IOErrorEvent.dispatchIOErrorEvent(a)}var e=this.getVirtualUrl(a._request.url),f=new Audio(e);f.__timeoutId=b.setTimeout(c,this,100);f.addEventListener("canplaythrough",
c,!1);f.addEventListener("error",d,!1);f.load()};c.loadQQAudio=function(a){var c=b.Html5Capatibility._QQRootPath+this.getVirtualUrl(a._request.url);console.log("loadQQAudio");QZAppExternal.preloadSound(function(d){if(0==d.code){d=new b.QQAudio;d._setPath(c);var e=new b.Sound;e._setAudio(d);a.data=e;b.__callAsync(b.Event.dispatchEvent,b.Event,a,b.Event.COMPLETE)}else b.IOErrorEvent.dispatchIOErrorEvent(a)},{bid:-1,url:c,refresh:1})};c.loadWebAudio=function(a){var c=this.getVirtualUrl(a._request.url),
d=new XMLHttpRequest;d.open("GET",c,!0);d.responseType="arraybuffer";console.log("loadWebAudio");d.onload=function(){var e=new b.WebAudio;e._setArrayBuffer(d.response,c,function(){var c=new b.Sound;c._setAudio(e);a.data=c;b.__callAsync(b.Event.dispatchEvent,b.Event,a,b.Event.COMPLETE)})};d.send()};c.getXHR=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")};c.setResponseType=function(a,c){switch(c){case b.URLLoaderDataFormat.TEXT:case b.URLLoaderDataFormat.VARIABLES:a.responseType=
b.URLLoaderDataFormat.TEXT;break;case b.URLLoaderDataFormat.BINARY:a.responseType="arraybuffer";break;default:a.responseType=c}};c.loadTexture=function(a){var c=this.getVirtualUrl(a._request.url);b.Browser.getInstance().webPSupport&&0!=c.indexOf("http:")&&(-1!=c.indexOf(".png")?c=c.replace(".png",".webp"):-1!=c.indexOf(".jpg")&&(c=c.replace(".jpg",".webp")));b.Texture.createBitmapData(c,function(c,d){if(0!=c)b.IOErrorEvent.dispatchIOErrorEvent(a);else{var e=new b.Texture;e._setBitmapData(d);a.data=
e;b.__callAsync(b.Event.dispatchEvent,b.Event,a,b.Event.COMPLETE)}})};c.getVirtualUrl=function(a){return this._versionCtr?this._versionCtr.getVirtualUrl(a):a};return a}(b.NetContext);b.HTML5NetContext=e;e.prototype.__class__="egret.HTML5NetContext"})(egret||(egret={}));
(function(b){var e=function(d){function a(){d.call(this);this._isTouchDown=!1;this.rootDiv=null;this.rootDiv=document.getElementById(b.StageDelegate.canvas_div_name);if(!this.rootDiv){var a=document.getElementById(b.StageDelegate.egret_root_div);this.rootDiv=b.Browser.getInstance().$new("div");this.rootDiv.id=b.StageDelegate.canvas_div_name;a.appendChild(this.rootDiv)}}__extends(a,d);var c=a.prototype;c.prevent=function(a){a.stopPropagation();!0==a.isScroll||b.HTMLInput.getInstance().isInputOn()||
a.preventDefault()};c.run=function(){var a=this;window.navigator.msPointerEnabled?(this.rootDiv.addEventListener("MSPointerDown",function(c){a._onTouchBegin(c);a.prevent(c)},!1),this.rootDiv.addEventListener("MSPointerMove",function(c){a._onTouchMove(c);a.prevent(c)},!1),this.rootDiv.addEventListener("MSPointerUp",function(c){a._onTouchEnd(c);a.prevent(c)},!1)):b.MainContext.deviceType==b.MainContext.DEVICE_MOBILE?this.addTouchListener():b.MainContext.deviceType==b.MainContext.DEVICE_PC&&(this.addTouchListener(),
this.addMouseListener());window.addEventListener("mousedown",function(c){a.inOutOfCanvas(c)?a.dispatchLeaveStageEvent():a._isTouchDown=!0});window.addEventListener("mouseup",function(c){a._isTouchDown&&(a.inOutOfCanvas(c)?a.dispatchLeaveStageEvent():a._onTouchEnd(c));a._isTouchDown=!1})};c.addMouseListener=function(){var a=this;this.rootDiv.addEventListener("mousedown",function(c){a._onTouchBegin(c)});this.rootDiv.addEventListener("mousemove",function(c){a._onTouchMove(c)});this.rootDiv.addEventListener("mouseup",
function(c){a._onTouchEnd(c)})};c.addTouchListener=function(){var a=this;this.rootDiv.addEventListener("touchstart",function(c){for(var b=c.changedTouches.length,d=0;d<b;d++)a._onTouchBegin(c.changedTouches[d]);a.prevent(c)},!1);this.rootDiv.addEventListener("touchmove",function(c){for(var b=c.changedTouches.length,d=0;d<b;d++)a._onTouchMove(c.changedTouches[d]);a.prevent(c)},!1);this.rootDiv.addEventListener("touchend",function(c){for(var b=c.changedTouches.length,d=0;d<b;d++)a._onTouchEnd(c.changedTouches[d]);
a.prevent(c)},!1);this.rootDiv.addEventListener("touchcancel",function(c){for(var b=c.changedTouches.length,d=0;d<b;d++)a._onTouchEnd(c.changedTouches[d]);a.prevent(c)},!1)};c.inOutOfCanvas=function(a){var c=this.getLocation(this.rootDiv,a);a=c.x;var c=c.y,d=b.MainContext.instance.stage;return 0>a||0>c||a>d.stageWidth||c>d.stageHeight?!0:!1};c.dispatchLeaveStageEvent=function(){this.touchingIdentifiers.length=0;b.MainContext.instance.stage.dispatchEventWith(b.Event.LEAVE_STAGE)};c._onTouchBegin=function(a){var c=
this.getLocation(this.rootDiv,a),b=-1;a.hasOwnProperty("identifier")&&(b=a.identifier);this.onTouchBegan(c.x,c.y,b)};c._onTouchMove=function(a){var c=this.getLocation(this.rootDiv,a),b=-1;a.hasOwnProperty("identifier")&&(b=a.identifier);this.onTouchMove(c.x,c.y,b)};c._onTouchEnd=function(a){var c=this.getLocation(this.rootDiv,a),b=-1;a.hasOwnProperty("identifier")&&(b=a.identifier);this.onTouchEnd(c.x,c.y,b)};c.getLocation=function(a,c){var d=document.documentElement,e=window,f,g;"function"===typeof a.getBoundingClientRect?
(g=a.getBoundingClientRect(),f=g.left,g=g.top):g=f=0;f+=e.pageXOffset-d.clientLeft;g+=e.pageYOffset-d.clientTop;null!=c.pageX?(d=c.pageX,e=c.pageY):(f-=document.body.scrollLeft,g-=document.body.scrollTop,d=c.clientX,e=c.clientY);var n=b.Point.identity;n.x=(d-f)/b.StageDelegate.getInstance().getScaleX();n.y=(e-g)/b.StageDelegate.getInstance().getScaleY();return n};return a}(b.TouchContext);b.HTML5TouchContext=e;e.prototype.__class__="egret.HTML5TouchContext"})(egret||(egret={}));
(function(b){var e=function(a){function c(){a.call(this);this._isNeedShow=!1;this.inputDiv=this.inputElement=null;this._gscaleY=this._gscaleX=0;this._isNeesHide=!1;this.textValue="";this._styleInfoes={};d.getInstance()}__extends(c,a);var e=c.prototype;e._initElement=function(a,c,d,e){var h=b.StageDelegate.getInstance().getScaleX(),n=b.StageDelegate.getInstance().getScaleY();this.inputDiv.style.left=a*h+"px";this._textfield._TF_Props_._multiline?(this.inputDiv.style.top=c*n+"px",this.inputElement.style.top=
-this._textfield._TF_Props_._lineSpacing/2+"px"):(this.inputDiv.style.top=c*n+"px",this.inputElement.style.top="0px");this._gscaleX=h*d;this._gscaleY=n*e};e._show=function(a,c,b,e){this._multiline=a;d.getInstance().isCurrentStageText(this)?this.inputElement.onblur=null:(this.inputElement=d.getInstance().getInputElement(this),this.inputDiv=d.getInstance()._inputDIV);this._isNeedShow=d.getInstance()._needShow=!0};e.onBlurHandler=function(){d.getInstance().clearInputElement();window.scrollTo(0,0)};e.executeShow=
function(){this.inputElement.value=this._getText();null==this.inputElement.onblur&&(this.inputElement.onblur=this.onBlurHandler);this._resetStageText();0<this._textfield._TF_Props_._maxChars?this.inputElement.setAttribute("maxlength",this._textfield._TF_Props_._maxChars):this.inputElement.removeAttribute("maxlength");this.inputElement.selectionStart=this.inputElement.value.length;this.inputElement.selectionEnd=this.inputElement.value.length;this.inputElement.focus()};e._hide=function(){this._isNeesHide=
!0;0<=b.Browser.getInstance().getUserAgent().indexOf("ios")&&d.getInstance().disconnectStageText(this)};e._getText=function(){this.textValue||(this.textValue="");return this.textValue};e._setText=function(a){this.textValue=a;this.resetText()};e.resetText=function(){this.inputElement&&(this.inputElement.value=this.textValue)};e.$onBlur=function(){b.Html5Capatibility._System_OS==b.SystemOSType.WPHONE&&b.Event.dispatchEvent(this,"updateText",!1)};e._onInput=function(){if(b.Html5Capatibility._System_OS==
b.SystemOSType.WPHONE){var a=this._textfield._TF_Props_;null==a._restrictAnd&&null==a._restrictNot&&(this.textValue=this.inputElement.value,b.Event.dispatchEvent(this,"updateText",!1),this._textfield._getLinesArr(),this.setAreaHeight())}else this.inputElement.selectionStart==this.inputElement.selectionEnd&&(this.textValue=this.inputElement.value,b.Event.dispatchEvent(this,"updateText",!1),this._textfield._getLinesArr(),this.setAreaHeight())};e.setAreaHeight=function(){var a=this._textfield;if(a.multiline){var c=
b.TextFieldUtils._getTextHeight(a);if(a.height<c)this.setElementStyle("height",(a.height+a.lineSpacing)*this._gscaleY+"px"),this.setElementStyle("padding","0px");else{this.setElementStyle("height",(c+a.lineSpacing)*this._gscaleY+"px");var c=(a.height-c)*this._gscaleY,d=b.TextFieldUtils._getValign(a),d=c*d;this.setElementStyle("padding",d+"px 0px "+(c-d)+"px 0px")}this.setElementStyle("lineHeight",(a.size+a.lineSpacing)*this._gscaleY+"px")}};e._onClickHandler=function(a){this._isNeedShow&&(a.stopImmediatePropagation(),
this._isNeedShow=!1,this.executeShow(),this.dispatchEvent(new b.Event("focus")))};e._onDisconnect=function(){this.inputElement=null;this.dispatchEvent(new b.Event("blur"))};e.setElementStyle=function(a,c){this.inputElement&&this._styleInfoes[a]!=c&&(this.inputElement.style[a]=c)};e._removeInput=function(){this.inputElement&&d.getInstance().disconnectStageText(this)};e._resetStageText=function(){if(this.inputElement){var a=this._textfield,c=a._TF_Props_;this.setElementStyle("fontFamily",c._fontFamily);
this.setElementStyle("fontStyle",c._italic?"italic":"normal");this.setElementStyle("fontWeight",c._bold?"bold":"normal");this.setElementStyle("textAlign",c._textAlign);this.setElementStyle("fontSize",c._size*this._gscaleY+"px");this.setElementStyle("color",c._textColorString);this.setElementStyle("width",a._getSize(b.Rectangle.identity).width*this._gscaleX+"px");this.setElementStyle("verticalAlign",c._verticalAlign);if(c._multiline)this.setAreaHeight();else if(this.setElementStyle("lineHeight",a.size*
this._gscaleY+"px"),a.height<a.size)this.setElementStyle("height",a.height*this._gscaleY+"px"),this.setElementStyle("padding","0px");else{this.setElementStyle("height",a.size*this._gscaleY+"px");var c=(a.height-a.size)*this._gscaleY,d=b.TextFieldUtils._getValign(a),d=c*d;this.setElementStyle("padding",d+"px 0px "+(c-d)+"px 0px")}this.inputDiv.style.clip="rect(0px "+a.width*this._gscaleX+"px "+a.height*this._gscaleY+"px 0px)";this.inputDiv.style.height=a.height*this._gscaleY+"px";this.inputDiv.style.width=
a.width*this._gscaleX+"px"}};return c}(b.StageText);b.HTML5StageText=e;e.prototype.__class__="egret.HTML5StageText";var d=function(){function a(){this._needShow=!1}var c=a.prototype;c.isInputOn=function(){return null!=this._stageText};c.isCurrentStageText=function(a){return this._stageText==a};c.initValue=function(a){a.style.position="absolute";a.style.left="0px";a.style.top="0px";a.style.border="none";a.style.padding="0"};c._initStageDelegateDiv=function(){var c=this,d=b.Browser.getInstance().$("#StageDelegateDiv");
d||(d=b.Browser.getInstance().$new("div"),d.id="StageDelegateDiv",document.getElementById(b.StageDelegate.egret_root_div).appendChild(d),c.initValue(d),d.style.width="0px",d.style.height="0px",c._inputDIV=b.Browser.getInstance().$new("div"),c.initValue(c._inputDIV),c._inputDIV.style.width="0px",c._inputDIV.style.height="0px",c._inputDIV.style.left="0px",c._inputDIV.style.top="-100px",c._inputDIV.style[b.Browser.getInstance().getTrans("transformOrigin")]="0% 0% 0px",d.appendChild(c._inputDIV),document.getElementById(b.StageDelegate.canvas_div_name).addEventListener("click",
function(d){c._needShow?(c._needShow=!1,b.MainContext.instance.stage._changeSizeDispatchFlag=!1,c._stageText._onClickHandler(d),a.getInstance().show()):c._inputElement&&(c.clearInputElement(),c._inputElement.blur(),c._inputElement=null)}),c.initInputElement(!0),c.initInputElement(!1))};c.initInputElement=function(a){var c=this;a?(a=document.createElement("textarea"),a.style.resize="none",c._multiElement=a,a.id="egretTextarea"):(a=document.createElement("input"),c._simpleElement=a,a.id="egretInput");
a.type="text";c._inputDIV.appendChild(a);a.setAttribute("tabindex","-1");a.style.width="1px";a.style.height="12px";c.initValue(a);a.style.outline="thin";a.style.background="none";a.style.overflow="hidden";a.style.wordBreak="break-all";a.style.opacity=0;a.oninput=function(){c._stageText&&c._stageText._onInput()}};c.show=function(){var a=this._inputElement;b.__callAsync(function(){a.style.opacity=1},this)};c.disconnectStageText=function(a){if(null==this._stageText||this._stageText==a)this.clearInputElement(),
this._inputElement&&this._inputElement.blur()};c.clearInputElement=function(){this._inputElement&&(this._inputElement.value="",this._inputElement.onblur=null,this._inputElement.style.width="1px",this._inputElement.style.height="12px",this._inputElement.style.left="0px",this._inputElement.style.top="0px",this._inputElement.style.opacity=0,(this._simpleElement==this._inputElement?this._multiElement:this._simpleElement).style.display="block",this._inputDIV.style.left="0px",this._inputDIV.style.top="-100px",
this._inputDIV.style.height="0px",this._inputDIV.style.width="0px");this._stageText&&(this._stageText._onDisconnect(),this._stageText=null);b.MainContext.instance.stage._changeSizeDispatchFlag=!0};c.getInputElement=function(a){this.clearInputElement();this._stageText=a;this._inputElement=this._stageText._multiline?this._multiElement:this._simpleElement;(this._simpleElement==this._inputElement?this._multiElement:this._simpleElement).style.display="none";return this._inputElement};a.getInstance=function(){null==
a._instance&&(a._instance=new b.HTMLInput);return a._instance};return a}();b.HTMLInput=d;d.prototype.__class__="egret.HTMLInput"})(egret||(egret={}));egret.StageText.create=function(){egret.HTMLInput.getInstance()._initStageDelegateDiv();return new egret.HTML5StageText};
(function(b){var e=function(){function d(){var a=this;this._loop=!1;this.func=function(b){a._audio.removeEventListener("ended",a.func);a._onEndedCall&&a._onEndedCall.call(null,b);a.clear()};this.paused=!0;this._listeners=[];this._onEndedCall=null;this._volume=1;this._startTime=0}var a=d.prototype;a._play=function(a){this.removeListeners();b.Html5Capatibility._audioMustLoad&&this._audio.load();this.paused=!1;this._audio.autoplay=!0;this._audio.volume=this._volume;this._audio.removeEventListener("ended",
this.func);this._audio.addEventListener("ended",this.func);this.initStart();try{this._audio.currentTime=this._startTime}catch(d){}finally{this._audio.play()}};a.clear=function(){try{this._audio.pause()}catch(a){}finally{this.removeListeners(),this._loop&&!this.paused&&this._play()}};a._pause=function(){this.paused=!0;this._audio.pause()};a._load=function(){this._audio.load()};a._setAudio=function(a){this._audio=a};a.initStart=function(){for(var a=0;a<this._listeners.length;a++){var b=this._listeners[a];
this._audio.addEventListener(b.type,b.listener,b.useCapture)}};a._addEventListener=function(a,b,d){void 0===d&&(d=!1);"ended"==a?this._onEndedCall=b:(this._listeners.push({type:a,listener:b,useCapture:d}),this._audio&&this._audio.addEventListener(a,b,d))};a.removeListeners=function(){for(var a=0;a<this._listeners.length;a++){var b=this._listeners[a];this._audio&&this._audio.removeEventListener(b.type,b.listener,b.useCapture)}};a._removeEventListener=function(a,b,d){void 0===d&&(d=!1);if("ended"==
a)this._onEndedCall=null;else for(var e=0;e<this._listeners.length;e++){var l=this._listeners[e];if(l.listener==b&&l.useCapture==d&&l.type==a){this._listeners.splice(e,1);this._audio&&this._audio.removeEventListener(a,b,d);break}}};a._preload=function(a,d,e){void 0===d&&(d=null);void 0===e&&(e=null);b.callLater(d,e)};a._destroy=function(){};a._getVolume=function(){return this._volume};a._setVolume=function(a){this._volume=Math.max(0,Math.min(a,1));this._audio.volume=this._volume};a._setLoop=function(a){this._loop=
a};a._getCurrentTime=function(){return this._audio.currentTime};a._setCurrentTime=function(a){this._startTime=a};return d}();b.Html5Audio=e;e.prototype.__class__="egret.Html5Audio"})(egret||(egret={}));
(function(b){var e=function(){function d(){this.context=d.ctx;this.bufferSource=null;this.paused=!0;this._loop=!1;this._listeners=[];this._onEndedCall=null;this._volume=1;this._currentTime=this._startTime=0;this.gain=d.ctx.createGain?d.ctx.createGain():d.ctx.createGainNode()}var a=d.prototype;d.decodeAudios=function(){if(!(0>=d.decodeArr.length||d.isDecoding)){d.isDecoding=!0;var a=d.decodeArr.shift();d.ctx.decodeAudioData(a.buffer,function(b){a.self.audioBuffer=b;a.callback&&a.callback();d.isDecoding=
!1;d.decodeAudios()},function(){alert(b.getString(1034,a.url));a.callback&&a.callback();d.isDecoding=!1;d.decodeAudios()})}};a._play=function(a){var b=this;this.bufferSource&&(this.bufferSource.onended=null,this.removeListeners(),this.bufferSource=null);a=this.context;var d=this.gain,e=a.createBufferSource();this.bufferSource=e;this.addListeners();e.buffer=this.audioBuffer;e.connect(d);d.connect(a.destination);e.onended=function(a){b.clear();b._onEndedCall&&b._onEndedCall.call(null,a);b._loop&&!b.paused&&
b._play()};this.paused=!1;this._startTime=Date.now();this.gain.gain.value=this._volume;e.start(0,this._currentTime);this._currentTime=0};a.clear=function(){if(this.bufferSource){this.removeListeners();var a=this.bufferSource;a.stop?a.stop(0):a.noteOff(0);this.bufferSource.disconnect();this.bufferSource=null}};a.addListeners=function(){for(var a=0;a<this._listeners.length;a++){var b=this._listeners[a];this.bufferSource.addEventListener(b.type,b.listener,b.useCapture)}};a.removeListeners=function(){for(var a=
0;a<this._listeners.length;a++){var b=this._listeners[a];this.bufferSource.removeEventListener(b.type,b.listener,b.useCapture)}};a._pause=function(){this.paused=!0;this.clear()};a._addEventListener=function(a,b,d){void 0===d&&(d=!1);"ended"==a?this._onEndedCall=b:(this._listeners.push({type:a,listener:b,useCapture:d}),this.bufferSource&&this.bufferSource.addEventListener(a,b,d))};a._removeEventListener=function(a,b,d){void 0===d&&(d=!1);if("ended"==a)this._onEndedCall=null;else for(var e=0;e<this._listeners.length;e++){var l=
this._listeners[e];if(l.listener==b&&l.useCapture==d&&l.type==a){this._listeners.splice(e,1);this.bufferSource&&this.bufferSource.removeEventListener(a,b,d);break}}};a._load=function(){this._setArrayBuffer(this._arrayBuffer,this._url,null)};a._setArrayBuffer=function(a,b,e){this._url=b;this._arrayBuffer=a;d.decodeArr.push({buffer:a,callback:e,self:this,url:b});d.decodeAudios()};a._preload=function(a,d,e){void 0===d&&(d=null);void 0===e&&(e=null);b.callLater(d,e)};a._getVolume=function(){return this._volume};
a._setVolume=function(a){this._volume=a;this.gain.gain.value=a};a._setLoop=function(a){this._loop=a};a._getCurrentTime=function(){return this.bufferSource?(Date.now()-this._startTime)/1E3:0};a._setCurrentTime=function(a){this._currentTime=a};a._destroy=function(){};d.canUseWebAudio=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;d.ctx=d.canUseWebAudio?new (window.AudioContext||window.webkitAudioContext||window.mozAudioContext):void 0;d.decodeArr=[];d.isDecoding=!1;return d}();
b.WebAudio=e;e.prototype.__class__="egret.WebAudio"})(egret||(egret={}));
(function(b){var e=function(){function d(){this._loop=!1;this._currentTime=0}var a=d.prototype;a._play=function(a){this._type=a;a==b.Sound.EFFECT?QZAppExternal.playLocalSound(function(a){},{bid:-1,url:this._path,loop:this._loop?-1:0}):QZAppExternal.playLocalBackSound({bid:-1,url:this._path,loop:this._loop?-1:0})};a._pause=function(){this._type==b.Sound.EFFECT?QZAppExternal.stopSound():QZAppExternal.stopBackSound()};a._addEventListener=function(a,b,d){};a._removeEventListener=function(a,b,d){};a._load=
function(){};a._preload=function(a,d,e){void 0===d&&(d=null);void 0===e&&(e=null);b.callLater(d,e)};a._setPath=function(a){this._path=a};a._getVolume=function(){return 1};a._setVolume=function(a){};a._setLoop=function(a){this._loop=a};a._getCurrentTime=function(){return 0};a._setCurrentTime=function(a){this._currentTime=a};a._destroy=function(){};return d}();b.QQAudio=e;e.prototype.__class__="egret.QQAudio"})(egret||(egret={}));
(function(b){(function(e){function d(a,d){var e=document.createElement("canvas"),m=b.RendererContext.createRendererContext(e),l=a._textureWidth,f=a._textureHeight;null==d&&(d=new b.Rectangle,d.x=0,d.y=0,d.width=l,d.height=f);d.x=Math.min(d.x,l-1);d.y=Math.min(d.y,f-1);d.width=Math.min(d.width,l-d.x);d.height=Math.min(d.height,f-d.y);var g=d.width,n=d.height;e.width=g;e.height=n;e.style.width=g+"px";e.style.height=n+"px";var g={_texture_to_render:a},n=b.MainContext.instance.rendererContext._texture_scale_factor,
p=a._offsetX,q=a._offsetY,r=a._bitmapWidth||l,s=a._bitmapHeight||f,p=Math.round(p*n),q=Math.round(q*n);b.RenderFilter.getInstance().drawImage(m,g,a._bitmapX+d.x/n,a._bitmapY+d.y/n,r*d.width/l,s*d.height/f,p,q,d.width,d.height);return e}function a(a,e){try{return d(this,e).toDataURL(a)}catch(k){return b.$error(1033),null}}b.Texture.prototype.toDataURL=a;b.Texture.prototype.saveToFile=function(c,b,d){c=a.call(this,c,d);null!=c&&(d=c.replace(/^data:image[^;]*/,"data:image/octet-stream"),c=document.createElement("a"),
c.download=b,c.href=d,b=document.createEvent("HTMLEvents"),b.initEvent("click",!1,!1),c.dispatchEvent(b))};b.Texture.prototype.getPixel32=function(a,e){if(this._bitmapData&&this._bitmapData.getContext){var k=this._bitmapData.getContext("2d").getImageData(a-this._offsetX,e-this._offsetY,1,1);return k.data}k=d(this,new b.Rectangle(a-1,e-1,3,3)).getContext("2d").getImageData(1,1,1,1);return k.data}})(b.web||(b.web={}))})(egret||(egret={}));
(function(b){var e=function(){function a(){}a.QQ_AUDIO=1;a.WEB_AUDIO=2;a.HTML5_AUDIO=3;return a}();b.AudioType=e;e.prototype.__class__="egret.AudioType";var d=function(){function a(){}a.WPHONE=1;a.IOS=2;a.ADNROID=3;return a}();b.SystemOSType=d;d.prototype.__class__="egret.SystemOSType";var a=function(a){function h(){a.call(this)}__extends(h,a);h._init=function(){var a=navigator.userAgent.toLowerCase();h.ua=a;h._canUseBlob=!1;h._audioType=e.HTML5_AUDIO;h._AudioClass=b.Html5Audio;h._audioMustLoad=!0;
if(0<=a.indexOf("windows phone"))h._System_OS=d.WPHONE,h._audioMustLoad=!1;else if(0<=a.indexOf("android"))h._System_OS=d.ADNROID,0<=a.indexOf("ucbrowser")&&(h._audioMustLoad=!1),window.hasOwnProperty("QZAppExternal")&&0<=a.indexOf("qzone")&&(h._AudioClass=b.QQAudio,h._audioType=e.QQ_AUDIO,(a=document.getElementsByTagName("base"))&&0<a.length?h._QQRootPath=a[0].baseURI:(a=window.location.href.indexOf("?"),-1==a&&(a=window.location.href.length),a=window.location.href.substring(0,a),a=a.substring(0,
a.lastIndexOf("/")),h._QQRootPath=a+"/"));else if(0<=a.indexOf("iphone")||0<=a.indexOf("ipad")||0<=a.indexOf("ipod"))h._System_OS=d.IOS,7<=h.getIOSVersion()&&(h._canUseBlob=!0,h._AudioClass=b.WebAudio,h._audioType=e.WEB_AUDIO);window.URL||window.webkitURL||(h._canUseBlob=!1);window.AudioContext||window.webkitAudioContext||window.mozAudioContext||h._audioType!=e.WEB_AUDIO||(h._audioType=e.HTML5_AUDIO,h._AudioClass=b.Html5Audio)};h.getIOSVersion=function(){var a=h.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0];
return parseInt(a.match(/\d(_\d)*/)[0])||0};h._canUseBlob=!1;h._audioType=0;h._audioMustLoad=!1;h._QQRootPath="";h._System_OS=0;h.ua="";return h}(b.HashObject);b.Html5Capatibility=a;a.prototype.__class__="egret.Html5Capatibility";a._init()})(egret||(egret={}));
(function(b){var e=function(d){function a(){d.call(this);this.localVersionDataPath="localVersion.manifest";this.localVersionData=null;this.changeVersionDataPath="version.manifest";this.changeVersionData=null;this.baseVersionDataPath="base.manifest";this.baseVersionData=null;this.localVersionCodePath="localCode.manifest";this.serverVersionCodePath="code.manifest";this._call=this._load=null}__extends(a,d);var c=a.prototype;c.fetchVersion=function(){this._load=new b.NativeResourceLoader;this._load.addEventListener(b.IOErrorEvent.IO_ERROR,
this.loadError,this);this._load.addEventListener(b.Event.COMPLETE,this.fileLoadComplete,this);this.initLocalVersionData()};c.initLocalVersionData=function(){var a=this.getData("appVersion.manifest",!0);if(a){if(1==a.debug){this.baseVersionData=null;if(a=this.getData(this.localVersionDataPath,!1))for(var c in a)this.deleteFile(c);this.deleteFile(this.localVersionDataPath);this.deleteFile(this.localVersionCodePath);this.loadOver();return}var b=this.getData("appVersion.manifest",!1);if(null==b||b.version!=
a.version){this.localVersionData=this.getData(this.localVersionDataPath,!0);null==this.localVersionData&&(this.localVersionData={});this.deleteFile(this.localVersionCodePath);this.save("appVersion.manifest",JSON.stringify(a));if(a=this.getData(this.localVersionCodePath,!1))for(c in a)a[c]!=this.localVersionData[c]&&this.deleteFile(c);else a={};for(c in this.localVersionData)a[c]!=this.localVersionData[c]&&this.deleteFile(c);this.save(this.localVersionDataPath,JSON.stringify(this.localVersionData));
this.loadCodeVersion();return}}this.localVersionData=this.getLocalData(this.localVersionDataPath);null==this.localVersionData&&(this.localVersionData=this.getLocalData(this.baseVersionDataPath),null==this.localVersionData&&(this.localVersionData={}),this.save(this.localVersionDataPath,JSON.stringify(this.localVersionData)));this.loadCodeVersion()};c.deleteFile=function(a){egret_native.deleteUpdateFile&&egret_native.deleteUpdateFile(a)};c.loadCodeVersion=function(){var a=1;this.newCode=1;var c=this.getLocalData(this.localVersionCodePath);
null!=c&&(a=c.code);c=this.getLocalData(this.serverVersionCodePath);null!=c&&(this.newCode=c.code);this.loadBaseVersion(a!=this.newCode)};c.loadBaseVersion=function(a){this.baseVersionData=this.getLocalData(this.baseVersionDataPath);this.changeVersionData=this.getLocalData(this.changeVersionDataPath);var c=this;null==c.baseVersionData||a?c.loadFile(c.baseVersionDataPath,function(){c.baseVersionData=c.getLocalData(c.baseVersionDataPath);c.loadBaseOver()}):c.loadBaseOver()};c.loadBaseOver=function(){this.save(this.localVersionCodePath,
JSON.stringify({code:this.newCode}));this.loadOver()};c.loadFile=function(a,c){void 0===c&&(c=null);this._call=c;this._load.load(a,1E3)};c.fileLoadComplete=function(a){this._call&&this._call()};c.loadError=function(a){this._load.removeEventListener(b.IOErrorEvent.IO_ERROR,this.loadError,this);this._load.removeEventListener(b.Event.COMPLETE,this.fileLoadComplete,this);this.dispatchEvent(a)};c.loadOver=function(){this._load.removeEventListener(b.IOErrorEvent.IO_ERROR,this.loadError,this);this._load.removeEventListener(b.Event.COMPLETE,
this.fileLoadComplete,this);this.dispatchEvent(new b.Event(b.Event.COMPLETE))};c.save=function(a,c){egret_native.writeFileSync?egret_native.writeFileSync(a,c):egret_native.saveRecord&&egret_native.saveRecord(a,c)};c.getData=function(a,c){if(egret_native.readUpdateFileSync&&egret_native.readResourceFileSync){var b=c?egret_native.readResourceFileSync(a):egret_native.readUpdateFileSync(a);return null!=b?JSON.parse(b):null}return this.getLocalDataByOld(a)};c.getLocalData=function(a){if(egret_native.readUpdateFileSync&&
egret_native.readResourceFileSync){var c=egret_native.readUpdateFileSync(a);if(null!=c)return JSON.parse(c);c=egret_native.readResourceFileSync(a);return null!=c?JSON.parse(c):null}return this.getLocalDataByOld(a)};c.getLocalDataByOld=function(a){var c=null;egret_native.isRecordExists(a)?(a=egret_native.loadRecord(a),c=JSON.parse(a)):egret_native.isFileExists(a)&&(a=egret_native.readFileSync(a),c=JSON.parse(a));return c};c.getChangeList=function(){if(!this.baseVersionData)return[];var a={},c;for(c in this.changeVersionData)1==
this.changeVersionData[c].d?delete this.baseVersionData[c]:this.baseVersionData[c]=this.changeVersionData[c];for(c in this.baseVersionData)null!=this.localVersionData[c]&&this.compareVersion(this.localVersionData,this.baseVersionData,c)||(a[c]={url:c,size:this.baseVersionData[c].s});var b=[];for(c in a)b.push(a[c]);return b};c.compareVersion=function(a,c,b){return null==a[b]||null==c[b]?!1:a[b].v==c[b].v};c.checkIsNewVersion=function(a){return this.baseVersionData?null!=this.changeVersionData[a]?
this.compareVersion(this.changeVersionData,this.localVersionData,a):null!=this.baseVersionData[a]?this.compareVersion(this.baseVersionData,this.localVersionData,a):!0:!0};c.saveVersion=function(a){if(this.baseVersionData){var c=!1;null!=this.changeVersionData[a]?this.compareVersion(this.changeVersionData,this.localVersionData,a)||(c=!0,this.localVersionData[a]=this.changeVersionData[a]):null==this.baseVersionData[a]||this.compareVersion(this.baseVersionData,this.localVersionData,a)||(c=!0,this.localVersionData[a]=
this.baseVersionData[a]);c&&this.save(this.localVersionDataPath,JSON.stringify(this.localVersionData))}};c.getVirtualUrl=function(a){return a};return a}(b.EventDispatcher);b.NativeVersionController=e;e.prototype.__class__="egret.NativeVersionController"})(egret||(egret={}));var RES;
(function(b){var e=function(b){function a(a,e,k){void 0===e&&(e=!1);void 0===k&&(k=!1);b.call(this,a,e,k);this.itemsTotal=this.itemsLoaded=0;this.groupName="";this.resItem=null}__extends(a,b);a.dispatchResourceEvent=function(c,b,d,e,l,f){void 0===d&&(d="");void 0===e&&(e=null);void 0===l&&(l=0);void 0===f&&(f=0);var g=egret.Event._getPropertyData(a);g.groupName=d;g.resItem=e;g.itemsLoaded=l;g.itemsTotal=f;egret.Event._dispatchByTarget(a,c,b,g)};a.ITEM_LOAD_ERROR="itemLoadError";a.CONFIG_COMPLETE=
"configComplete";a.CONFIG_LOAD_ERROR="configLoadError";a.GROUP_PROGRESS="groupProgress";a.GROUP_COMPLETE="groupComplete";a.GROUP_LOAD_ERROR="groupLoadError";return a}(egret.Event);b.ResourceEvent=e;e.prototype.__class__="RES.ResourceEvent"})(RES||(RES={}));
(function(b){var e=function(){function b(a,d,e){this.groupName="";this.data=null;this._loaded=!1;this.name=a;this.url=d;this.type=e}var a=b.prototype;Object.defineProperty(a,"loaded",{get:function(){return this.data?this.data.loaded:this._loaded},set:function(a){this.data&&(this.data.loaded=a);this._loaded=a},enumerable:!0,configurable:!0});a.toString=function(){return'[ResourceItem name="'+this.name+'" url="'+this.url+'" type="'+this.type+'"]'};b.TYPE_XML="xml";b.TYPE_IMAGE="image";b.TYPE_BIN="bin";
b.TYPE_TEXT="text";b.TYPE_JSON="json";b.TYPE_SHEET="sheet";b.TYPE_FONT="font";b.TYPE_SOUND="sound";return b}();b.ResourceItem=e;e.prototype.__class__="RES.ResourceItem"})(RES||(RES={}));
(function(b){var e=function(){function d(){this.keyMap={};this.groupDic={};b.configInstance=this}var a=d.prototype;a.getGroupByName=function(a){var b=[];if(!this.groupDic[a])return b;a=this.groupDic[a];for(var d=a.length,e=0;e<d;e++)b.push(this.parseResourceItem(a[e]));return b};a.getRawGroupByName=function(a){return this.groupDic[a]?this.groupDic[a]:[]};a.createGroup=function(a,b,d){void 0===d&&(d=!1);if(!d&&this.groupDic[a]||!b||0==b.length)return!1;d=this.groupDic;for(var e=[],l=b.length,f=0;f<
l;f++){var g=b[f],n=d[g];if(n)for(var g=n.length,p=0;p<g;p++){var q=n[p];-1==e.indexOf(q)&&e.push(q)}else(q=this.keyMap[g])?-1==e.indexOf(q)&&e.push(q):egret.$warn(2E3,g)}if(0==e.length)return!1;this.groupDic[a]=e;return!0};a.parseConfig=function(a,b){if(a){var d=a.resources;if(d)for(var e=d.length,l=0;l<e;l++){var f=d[l],g=f.url;g&&-1==g.indexOf("://")&&(f.url=b+g);this.addItemToKeyMap(f)}if(d=a.groups)for(e=d.length,l=0;l<e;l++){for(var g=d[l],n=[],p=g.keys.split(","),q=p.length,r=0;r<q;r++)f=p[r].trim(),
(f=this.keyMap[f])&&-1==n.indexOf(f)&&n.push(f);this.groupDic[g.name]=n}}};a.addSubkey=function(a,b){var d=this.keyMap[b];d&&!this.keyMap[a]&&(this.keyMap[a]=d)};a.addItemToKeyMap=function(a){this.keyMap[a.name]||(this.keyMap[a.name]=a);if(a.hasOwnProperty("subkeys")){var b=a.subkeys.split(",");a.subkeys=b;for(var d=b.length,e=0;e<d;e++){var l=b[e];null==this.keyMap[l]&&(this.keyMap[l]=a)}}};a.getName=function(a){return(a=this.keyMap[a])?a.name:""};a.getType=function(a){return(a=this.keyMap[a])?a.type:
""};a.getRawResourceItem=function(a){return this.keyMap[a]};a.getResourceItem=function(a){return(a=this.keyMap[a])?this.parseResourceItem(a):null};a.parseResourceItem=function(a){var d=new b.ResourceItem(a.name,a.url,a.type);d.data=a;return d};return d}();b.ResourceConfig=e;e.prototype.__class__="RES.ResourceConfig"})(RES||(RES={}));
(function(b){var e=function(d){function a(){d.call(this);this.thread=2;this.loadingCount=0;this.resInstance=this.callBack=null;this.groupTotalDic={};this.numLoadedDic={};this.itemListDic={};this.groupErrorDic={};this.retryTimesDic={};this.maxRetryTimes=3;this.failedList=[];this.priorityQueue={};this.lazyLoadList=[];this.analyzerDic={};this.queueIndex=0}__extends(a,d);var c=a.prototype;c.isGroupInLoading=function(a){return void 0!==this.itemListDic[a]};c.loadGroup=function(a,c,d){void 0===d&&(d=0);
if(!this.itemListDic[c]&&c)if(a&&0!=a.length){this.priorityQueue[d]?this.priorityQueue[d].push(c):this.priorityQueue[d]=[c];this.itemListDic[c]=a;d=a.length;for(var e=0;e<d;e++)a[e].groupName=c;this.groupTotalDic[c]=a.length;this.numLoadedDic[c]=0;this.next()}else egret.$warn(2001,c),a=new b.ResourceEvent(b.ResourceEvent.GROUP_LOAD_ERROR),a.groupName=c,this.dispatchEvent(a)};c.loadItem=function(a){this.lazyLoadList.push(a);a.groupName="";this.next()};c.next=function(){for(;this.loadingCount<this.thread;){var a=
this.getOneResourceItem();if(!a)break;this.loadingCount++;if(a.loaded)this.onItemComplete(a);else{var c=this.analyzerDic[a.type];c||(c=this.analyzerDic[a.type]=egret.Injector.getInstance(b.AnalyzerBase,a.type));c.loadFile(a,this.onItemComplete,this)}}};c.getOneResourceItem=function(){if(0<this.failedList.length)return this.failedList.shift();var a=Number.NEGATIVE_INFINITY,c;for(c in this.priorityQueue)a=Math.max(a,c);a=this.priorityQueue[a];if(!a||0==a.length)return 0==this.lazyLoadList.length?null:
this.lazyLoadList.pop();c=a.length;for(var b,d=0;d<c;d++){this.queueIndex>=c&&(this.queueIndex=0);b=this.itemListDic[a[this.queueIndex]];if(0<b.length)break;this.queueIndex++}return 0==b.length?null:b.shift()};c.onItemComplete=function(a){this.loadingCount--;var c=a.groupName;if(!a.loaded){var d=this.retryTimesDic[a.name]||1;if(d>this.maxRetryTimes)delete this.retryTimesDic[a.name],b.ResourceEvent.dispatchResourceEvent(this.resInstance,b.ResourceEvent.ITEM_LOAD_ERROR,c,a);else{this.retryTimesDic[a.name]=
d+1;this.failedList.push(a);this.next();return}}if(c){this.numLoadedDic[c]++;var d=this.numLoadedDic[c],e=this.groupTotalDic[c];a.loaded||(this.groupErrorDic[c]=!0);b.ResourceEvent.dispatchResourceEvent(this.resInstance,b.ResourceEvent.GROUP_PROGRESS,c,a,d,e);d==e&&(a=this.groupErrorDic[c],this.removeGroupName(c),delete this.groupTotalDic[c],delete this.numLoadedDic[c],delete this.itemListDic[c],delete this.groupErrorDic[c],a?b.ResourceEvent.dispatchResourceEvent(this,b.ResourceEvent.GROUP_LOAD_ERROR,
c):b.ResourceEvent.dispatchResourceEvent(this,b.ResourceEvent.GROUP_COMPLETE,c))}else this.callBack.call(this.resInstance,a);this.next()};c.removeGroupName=function(a){for(var c in this.priorityQueue){for(var b=this.priorityQueue[c],d=b.length,e=0,g=!1,d=b.length,n=0;n<d;n++){if(b[n]==a){b.splice(e,1);g=!0;break}e++}if(g){0==b.length&&delete this.priorityQueue[c];break}}};return a}(egret.EventDispatcher);b.ResourceLoader=e;e.prototype.__class__="RES.ResourceLoader"})(RES||(RES={}));
(function(b){var e=function(d){function a(){d.call(this);this.resourceConfig=null;this.resourceConfig=b.configInstance}__extends(a,d);var c=a.prototype;c.addSubkey=function(a,c){this.resourceConfig.addSubkey(a,c)};c.loadFile=function(a,c,b){};c.getRes=function(a){};c.destroyRes=function(a){return!1};a.getStringPrefix=function(a){if(!a)return"";var c=a.indexOf(".");return-1!=c?a.substring(0,c):""};a.getStringTail=function(a){if(!a)return"";var c=a.indexOf(".");return-1!=c?a.substring(c+1):""};return a}(egret.HashObject);
b.AnalyzerBase=e;e.prototype.__class__="RES.AnalyzerBase"})(RES||(RES={}));
(function(b){var e=function(b){function a(){b.call(this);this.fileDic={};this.resItemDic=[];this._dataFormat=egret.URLLoaderDataFormat.BINARY;this.recycler=new egret.Recycler}__extends(a,b);var c=a.prototype;c.loadFile=function(a,c,b){if(this.fileDic[a.name])c.call(b,a);else{var d=this.getLoader();this.resItemDic[d.hashCode]={item:a,func:c,thisObject:b};d.load(new egret.URLRequest(a.url))}};c.getLoader=function(){var a=this.recycler.pop();a||(a=new egret.URLLoader,a.addEventListener(egret.Event.COMPLETE,
this.onLoadFinish,this),a.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this));a.dataFormat=this._dataFormat;return a};c.onLoadFinish=function(a){var c=a.target,b=this.resItemDic[c.hashCode];delete this.resItemDic[c.hashCode];var d=b.item,e=b.func;d.loaded=a.type==egret.Event.COMPLETE;d.loaded&&this.analyzeData(d,c.data);this.recycler.push(c);e.call(b.thisObject,d)};c.analyzeData=function(a,c){var b=a.name;!this.fileDic[b]&&c&&(this.fileDic[b]=c)};c.getRes=function(a){return this.fileDic[a]};
c.hasRes=function(a){return null!=this.getRes(a)};c.destroyRes=function(a){return this.fileDic[a]?(this.onResourceDestroy(this.fileDic[a]),delete this.fileDic[a],!0):!1};c.onResourceDestroy=function(a){};return a}(b.AnalyzerBase);b.BinAnalyzer=e;e.prototype.__class__="RES.BinAnalyzer"})(RES||(RES={}));
(function(b){var e=function(b){function a(){b.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXTURE}__extends(a,b);var c=a.prototype;c.analyzeData=function(a,c){var b=a.name;!this.fileDic[b]&&c&&(this.fileDic[b]=c,(b=a.data)&&b.scale9grid&&(b=b.scale9grid.split(","),c.scale9Grid=new egret.Rectangle(parseInt(b[0]),parseInt(b[1]),parseInt(b[2]),parseInt(b[3]))))};c.onResourceDestroy=function(a){a.dispose()};return a}(b.BinAnalyzer);b.ImageAnalyzer=e;e.prototype.__class__="RES.ImageAnalyzer"})(RES||
(RES={}));(function(b){var e=function(b){function a(){b.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(a,b);a.prototype.analyzeData=function(a,b){var d=a.name;if(!this.fileDic[d]&&b)try{this.fileDic[d]=JSON.parse(b)}catch(e){egret.$warn(1017,a.url,b)}};return a}(b.BinAnalyzer);b.JsonAnalyzer=e;e.prototype.__class__="RES.JsonAnalyzer"})(RES||(RES={}));
(function(b){var e=function(b){function a(){b.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(a,b);return a}(b.BinAnalyzer);b.TextAnalyzer=e;e.prototype.__class__="RES.TextAnalyzer"})(RES||(RES={}));
(function(b){var e=function(d){function a(){d.call(this);this.sheetMap={};this.textureMap={};this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(a,d);var c=a.prototype;c.getRes=function(a){var c=this.fileDic[a];c||(c=this.textureMap[a]);!c&&(c=b.AnalyzerBase.getStringPrefix(a),c=this.fileDic[c])&&(a=b.AnalyzerBase.getStringTail(a),c=c.getTexture(a));return c};c.onLoadFinish=function(a){var c=a.target,b=this.resItemDic[c.hashCode];delete this.resItemDic[c.hashCode];var d=b.item,e=b.func;d.loaded=
a.type==egret.Event.COMPLETE;if(d.loaded)if("string"==typeof c.data){if(d.loaded=!1,a=this.analyzeConfig(d,c.data)){c=d.url;d.url=a;this._dataFormat=egret.URLLoaderDataFormat.TEXTURE;this.loadFile(d,e,b.thisObject);this._dataFormat=egret.URLLoaderDataFormat.TEXT;d.url=c;return}}else this.analyzeBitmap(d,c.data);this.recycler.push(c);e.call(b.thisObject,d)};c.analyzeConfig=function(a,c){var b=a.name,d,e="";try{d=JSON.parse(c)}catch(g){egret.$warn(1017,a.url,c)}d&&(this.sheetMap[b]=d,e=this.getRelativePath(a.url,
d.file));return e};c.analyzeBitmap=function(a,c){var b=a.name;if(!this.fileDic[b]&&c){var d=this.sheetMap[b];delete this.sheetMap[b];d=this.parseSpriteSheet(c,d,a.data&&a.data.subkeys?"":b);this.fileDic[b]=d}};c.getRelativePath=function(a,c){a=a.split("\\").join("/");var b=a.lastIndexOf("/");return a=-1!=b?a.substring(0,b+1)+c:c};c.parseSpriteSheet=function(a,c,b){c=c.frames;if(!c)return null;var d=new egret.SpriteSheet(a),e=this.textureMap,g;for(g in c){var n=c[g];a=d.createTexture(g,n.x,n.y,n.w,
n.h,n.offX,n.offY,n.sourceW,n.sourceH);n.scale9grid&&(n=n.scale9grid.split(","),a.scale9Grid=new egret.Rectangle(parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])));null==e[g]&&(e[g]=a,b&&this.addSubkey(g,b))}return d};c.destroyRes=function(a){var c=this.fileDic[a];if(c){delete this.fileDic[a];for(var b in c._textureMap)this.textureMap[b]&&delete this.textureMap[b];this.onResourceDestroy(c);return!0}return!1};c.onResourceDestroy=function(a){a.dispose()};return a}(b.BinAnalyzer);b.SheetAnalyzer=
e;e.prototype.__class__="RES.SheetAnalyzer"})(RES||(RES={}));
(function(b){var e=function(b){function a(){b.call(this)}__extends(a,b);var c=a.prototype;c.analyzeConfig=function(a,c){var b=a.name,d,e="";try{d=JSON.parse(c)}catch(g){}d?e=this.getRelativePath(a.url,d.file):(d=c,e=this.getTexturePath(a.url,d));this.sheetMap[b]=d;return e};c.analyzeBitmap=function(a,c){var b=a.name;if(!this.fileDic[b]&&c){var d=this.sheetMap[b];delete this.sheetMap[b];d=new egret.BitmapFont(c,d);this.fileDic[b]=d}};c.getTexturePath=function(a,c){var b="",d=c.split("\n")[2],e=d.indexOf('file="');
-1!=e&&(d=d.substring(e+6),e=d.indexOf('"'),b=d.substring(0,e));a=a.split("\\").join("/");e=a.lastIndexOf("/");return a=-1!=e?a.substring(0,e+1)+b:b};c.onResourceDestroy=function(a){a.dispose()};return a}(b.SheetAnalyzer);b.FontAnalyzer=e;e.prototype.__class__="RES.FontAnalyzer"})(RES||(RES={}));
(function(b){var e=function(b){function a(){b.call(this);this._dataFormat=egret.URLLoaderDataFormat.SOUND}__extends(a,b);a.prototype.analyzeData=function(a,b){var d=a.name;!this.fileDic[d]&&b&&(this.fileDic[d]=b,(d=a.data)&&d.soundType?b.preload(d.soundType):b.preload(egret.Sound.EFFECT))};return a}(b.BinAnalyzer);b.SoundAnalyzer=e;e.prototype.__class__="RES.SoundAnalyzer"})(RES||(RES={}));
(function(b){var e=function(b){function a(){b.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(a,b);a.prototype.analyzeData=function(a,b){var d=a.name;if(!this.fileDic[d]&&b)try{var e=egret.XML.parse(b);this.fileDic[d]=e}catch(l){}};return a}(b.BinAnalyzer);b.XMLAnalyzer=e;e.prototype.__class__="RES.XMLAnalyzer"})(RES||(RES={}));
(function(b){b.loadConfig=function(a,c,b){void 0===c&&(c="");void 0===b&&(b="json");d.loadConfig(a,c,b)};b.loadGroup=function(a,c){void 0===c&&(c=0);d.loadGroup(a,c)};b.isGroupLoaded=function(a){return d.isGroupLoaded(a)};b.getGroupByName=function(a){return d.getGroupByName(a)};b.createGroup=function(a,c,b){void 0===b&&(b=!1);return d.createGroup(a,c,b)};b.hasRes=function(a){return d.hasRes(a)};b.parseConfig=function(a,c){void 0===c&&(c="");d.parseConfig(a,c)};b.getRes=function(a){return d.getRes(a)};
b.getResAsync=function(a,c,b){d.getResAsync(a,c,b)};b.getResByUrl=function(a,c,b,e){void 0===e&&(e="");d.getResByUrl(a,c,b,e)};b.destroyRes=function(a,c){return d.destroyRes(a,c)};b.setMaxLoadingThread=function(a){d.setMaxLoadingThread(a)};b.setMaxRetryTimes=function(a){d.setMaxRetryTimes(a)};b.addEventListener=function(a,c,b,e,m){void 0===e&&(e=!1);void 0===m&&(m=0);d.addEventListener(a,c,b,e,m)};b.removeEventListener=function(a,c,b,e){void 0===e&&(e=!1);d.removeEventListener(a,c,b,e)};var e=function(a){function c(){a.call(this);
this.analyzerDic={};this.configItemList=[];this.configComplete=this.callLaterFlag=!1;this.loadedGroups=[];this.groupNameList=[];this.asyncDic={};this._loadedUrlTypes={};this.init()}__extends(c,a);var d=c.prototype;d.getAnalyzerByType=function(a){var c=this.analyzerDic[a];c||(c=this.analyzerDic[a]=egret.Injector.getInstance(b.AnalyzerBase,a));return c};d.init=function(){egret.Injector.hasMapRule(b.AnalyzerBase,b.ResourceItem.TYPE_BIN)||egret.Injector.mapClass(b.AnalyzerBase,b.BinAnalyzer,b.ResourceItem.TYPE_BIN);
egret.Injector.hasMapRule(b.AnalyzerBase,b.ResourceItem.TYPE_IMAGE)||egret.Injector.mapClass(b.AnalyzerBase,b.ImageAnalyzer,b.ResourceItem.TYPE_IMAGE);egret.Injector.hasMapRule(b.AnalyzerBase,b.ResourceItem.TYPE_TEXT)||egret.Injector.mapClass(b.AnalyzerBase,b.TextAnalyzer,b.ResourceItem.TYPE_TEXT);egret.Injector.hasMapRule(b.AnalyzerBase,b.ResourceItem.TYPE_JSON)||egret.Injector.mapClass(b.AnalyzerBase,b.JsonAnalyzer,b.ResourceItem.TYPE_JSON);egret.Injector.hasMapRule(b.AnalyzerBase,b.ResourceItem.TYPE_SHEET)||
egret.Injector.mapClass(b.AnalyzerBase,b.SheetAnalyzer,b.ResourceItem.TYPE_SHEET);egret.Injector.hasMapRule(b.AnalyzerBase,b.ResourceItem.TYPE_FONT)||egret.Injector.mapClass(b.AnalyzerBase,b.FontAnalyzer,b.ResourceItem.TYPE_FONT);egret.Injector.hasMapRule(b.AnalyzerBase,b.ResourceItem.TYPE_SOUND)||egret.Injector.mapClass(b.AnalyzerBase,b.SoundAnalyzer,b.ResourceItem.TYPE_SOUND);egret.Injector.hasMapRule(b.AnalyzerBase,b.ResourceItem.TYPE_XML)||egret.Injector.mapClass(b.AnalyzerBase,b.XMLAnalyzer,
b.ResourceItem.TYPE_XML);this.resConfig=new b.ResourceConfig;this.resLoader=new b.ResourceLoader;this.resLoader.callBack=this.onResourceItemComp;this.resLoader.resInstance=this;this.resLoader.addEventListener(b.ResourceEvent.GROUP_COMPLETE,this.onGroupComp,this);this.resLoader.addEventListener(b.ResourceEvent.GROUP_LOAD_ERROR,this.onGroupError,this)};d.loadConfig=function(a,c,b){void 0===b&&(b="json");this.configItemList.push({url:a,resourceRoot:c,type:b});this.callLaterFlag||(egret.callLater(this.startLoadConfig,
this),this.callLaterFlag=!0)};d.startLoadConfig=function(){this.callLaterFlag=!1;var a=this.configItemList;this.configItemList=[];this.loadingConfigList=a;for(var d=a.length,e=[],h=0;h<d;h++){var g=a[h],g=new b.ResourceItem(g.url,g.url,g.type);e.push(g)}this.resLoader.loadGroup(e,c.GROUP_CONFIG,Number.MAX_VALUE)};d.isGroupLoaded=function(a){return-1!=this.loadedGroups.indexOf(a)};d.getGroupByName=function(a){return this.resConfig.getGroupByName(a)};d.loadGroup=function(a,c){void 0===c&&(c=0);if(-1!=
this.loadedGroups.indexOf(a))b.ResourceEvent.dispatchResourceEvent(this,b.ResourceEvent.GROUP_COMPLETE,a);else if(!this.resLoader.isGroupInLoading(a))if(this.configComplete){var d=this.resConfig.getGroupByName(a);this.resLoader.loadGroup(d,a,c)}else this.groupNameList.push({name:a,priority:c})};d.createGroup=function(a,c,b){void 0===b&&(b=!1);if(b){var d=this.loadedGroups.indexOf(a);-1!=d&&this.loadedGroups.splice(d,1)}return this.resConfig.createGroup(a,c,b)};d.onGroupComp=function(a){if(a.groupName==
c.GROUP_CONFIG){a=this.loadingConfigList.length;for(var d=0;d<a;d++){var e=this.loadingConfigList[d],h=this.getAnalyzerByType(e.type),g=h.getRes(e.url);h.destroyRes(e.url);this.resConfig.parseConfig(g,e.resourceRoot)}this.configComplete=!0;this.loadingConfigList=null;b.ResourceEvent.dispatchResourceEvent(this,b.ResourceEvent.CONFIG_COMPLETE);this.loadDelayGroups()}else this.loadedGroups.push(a.groupName),this.dispatchEvent(a)};d.loadDelayGroups=function(){var a=this.groupNameList;this.groupNameList=
[];for(var c=a.length,b=0;b<c;b++){var d=a[b];this.loadGroup(d.name,d.priority)}};d.onGroupError=function(a){a.groupName==c.GROUP_CONFIG?(this.loadingConfigList=null,b.ResourceEvent.dispatchResourceEvent(this,b.ResourceEvent.CONFIG_LOAD_ERROR)):this.dispatchEvent(a)};d.hasRes=function(a){var c=this.resConfig.getType(a);return""==c&&(a=b.AnalyzerBase.getStringPrefix(a),c=this.resConfig.getType(a),""==c)?!1:!0};d.parseConfig=function(a,c){this.resConfig.parseConfig(a,c);this.configComplete||this.loadingConfigList||
(this.configComplete=!0,this.loadDelayGroups())};d.getRes=function(a){var c=this.resConfig.getType(a);return""==c&&(c=b.AnalyzerBase.getStringPrefix(a),c=this.resConfig.getType(c),""==c)?null:this.getAnalyzerByType(c).getRes(a)};d.getResAsync=function(a,c,d){var e=this.resConfig.getType(a),h=this.resConfig.getName(a);if(""==e&&(h=b.AnalyzerBase.getStringPrefix(a),e=this.resConfig.getType(h),""==e)){egret.__callAsync(c,d);return}(e=this.getAnalyzerByType(e).getRes(a))?egret.__callAsync(c,d,e,a):(a=
{key:a,compFunc:c,thisObject:d},this.asyncDic[h]?this.asyncDic[h].push(a):(this.asyncDic[h]=[a],h=this.resConfig.getResourceItem(h),this.resLoader.loadItem(h)))};d.getResByUrl=function(a,c,d,e){void 0===e&&(e="");if(a){e||(e=this.getTypeByUrl(a));null!=this._loadedUrlTypes[a]&&this._loadedUrlTypes[a]!=e&&egret.$warn(2002);this._loadedUrlTypes[a]=e;var h=this.getAnalyzerByType(e).getRes(a);h?egret.__callAsync(c,d,h,a):(c={key:a,compFunc:c,thisObject:d},this.asyncDic[a]?this.asyncDic[a].push(c):(this.asyncDic[a]=
[c],a=new b.ResourceItem(a,a,e),this.resLoader.loadItem(a)))}else egret.__callAsync(c,d)};d.getTypeByUrl=function(a){(a=a.substr(a.lastIndexOf(".")+1))&&(a=a.toLowerCase());switch(a){case b.ResourceItem.TYPE_XML:case b.ResourceItem.TYPE_JSON:case b.ResourceItem.TYPE_SHEET:break;case "png":case "jpg":case "gif":case "jpeg":case "bmp":a=b.ResourceItem.TYPE_IMAGE;break;case "fnt":a=b.ResourceItem.TYPE_FONT;break;case "txt":a=b.ResourceItem.TYPE_TEXT;break;case "mp3":case "ogg":case "mpeg":case "wav":case "m4a":case "mp4":case "aiff":case "wma":case "mid":a=
b.ResourceItem.TYPE_SOUND;break;default:a=b.ResourceItem.TYPE_BIN}return a};d.onResourceItemComp=function(a){var c=this.asyncDic[a.name];delete this.asyncDic[a.name];a=this.getAnalyzerByType(a.type);for(var b=c.length,d=0;d<b;d++){var e=c[d],h=a.getRes(e.key);e.compFunc.call(e.thisObject,h,e.key)}};d.destroyRes=function(a,c){void 0===c&&(c=!0);var b=this.resConfig.getRawGroupByName(a);if(b&&0<b.length){var d=this.loadedGroups.indexOf(a);-1!=d&&this.loadedGroups.splice(d,1);for(var e=b.length,h=0;h<
e;h++)if(d=b[h],c||!this.isResInLoadedGroup(d.name)){d.loaded=!1;var p=this.getAnalyzerByType(d.type);p.destroyRes(d.name);this.removeLoadedGroupsByItemName(d.name)}return!0}b=this.resConfig.getType(a);if(""==b){b=this._loadedUrlTypes[a];if(null==b||""==b)return!1;delete this._loadedUrlTypes[a];p=this.getAnalyzerByType(b);p.destroyRes(a);return!0}d=this.resConfig.getRawResourceItem(a);d.loaded=!1;p=this.getAnalyzerByType(b);b=p.destroyRes(a);this.removeLoadedGroupsByItemName(d.name);return b};d.removeLoadedGroupsByItemName=
function(a){for(var c=this.loadedGroups,b=c.length,d=0;d<b;d++)for(var e=this.resConfig.getRawGroupByName(c[d]),h=e.length,p=0;p<h;p++)if(e[p].name==a){c.splice(d,1);d--;b=c.length;break}};d.isResInLoadedGroup=function(a){for(var c=this.loadedGroups,b=c.length,d=0;d<b;d++)for(var e=this.resConfig.getRawGroupByName(c[d]),h=e.length,p=0;p<h;p++)if(e[p].name==a)return!0;return!1};d.setMaxLoadingThread=function(a){1>a&&(a=1);this.resLoader.thread=a};d.setMaxRetryTimes=function(a){a=Math.max(a,0);this.resLoader.maxRetryTimes=
a};c.GROUP_CONFIG="RES__CONFIG";return c}(egret.EventDispatcher);e.prototype.__class__="RES.Resource";var d=new e})(RES||(RES={}));
!function(b,e){"function"==typeof define&&(define.amd||define.cmd)?define(function(){return e(b)}):e(b,!0)}(this,function(b,e){function d(a,d,e){b.WeixinJSBridge?WeixinJSBridge.invoke(a,c(d),function(c){h(a,c,e)}):l(a,e)}function a(a,c,d){b.WeixinJSBridge?WeixinJSBridge.on(a,function(b){d&&d.trigger&&d.trigger(b);h(a,b,c)}):d?l(a,d):l(a,c)}function c(a){return a=a||{},a.appId=B.appId,a.verifyAppId=B.appId,a.verifySignType="sha1",a.verifyTimestamp=B.timestamp+"",a.verifyNonceStr=B.nonceStr,a.verifySignature=
B.signature,a}function h(a,c,b){var d,e;switch(delete c.err_code,delete c.err_desc,delete c.err_detail,d=c.errMsg,d||(d=c.err_msg,delete c.err_msg,d=k(a,d,b),c.errMsg=d),b=b||{},b._complete&&(b._complete(c),delete b._complete),d=c.errMsg||"",B.debug&&!b.isInnerInvoke&&alert(JSON.stringify(c)),e=d.indexOf(":"),d.substring(e+1)){case "ok":b.success&&b.success(c);break;case "cancel":b.cancel&&b.cancel(c);break;default:b.fail&&b.fail(c)}b.complete&&b.complete(c)}function k(a,c){var b,d,e;if(c){switch(b=
c.indexOf(":"),a){case p.config:d="config";break;case p.openProductSpecificView:d="openProductSpecificView";break;default:d=c.substring(0,b),d=d.replace(/_/g," "),d=d.replace(/\b\w+\b/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}),d=d.substring(0,1).toLowerCase()+d.substring(1),d=d.replace(/ /g,""),-1!=d.indexOf("Wcpay")&&(d=d.replace("Wcpay","WCPay")),(e=q[d])&&(d=e)}b=c.substring(b+1);"confirm"==b&&(b="ok");"failed"==b&&(b="fail");-1!=b.indexOf("failed_")&&(b=b.substring(7));
-1!=b.indexOf("fail_")&&(b=b.substring(5));b=b.replace(/_/g," ");b=b.toLowerCase();"access denied"!=b&&"no permission to execute"!=b||(b="permission denied");"config"==d&&"function not exist"==b&&(b="ok");c=d+":"+b}return c}function m(a){var c,b,d;if(a){c=0;for(b=a.length;b>c;++c)d=a[c],(d=p[d])&&(a[c]=d);return a}}function l(a,c){if(!(!B.debug||c&&c.isInnerInvoke)){var b=q[a];b&&(a=b);c&&c._complete&&delete c._complete;console.log('"'+a+'",',c||"")}}function f(){if(!("6.0.2">x||0>v.systemType)){var a=
new Image;v.appId=B.appId;v.initTime=y.initEndTime-y.initStartTime;v.preVerifyTime=y.preVerifyEndTime-y.preVerifyStartTime;D.getNetworkType({isInnerInvoke:!0,success:function(c){v.networkType=c.networkType;a.src="https://open.weixin.qq.com/sdk/report?v="+v.version+"&o="+v.isPreVerifyOk+"&s="+v.systemType+"&c="+v.clientVersion+"&a="+v.appId+"&n="+v.networkType+"&i="+v.initTime+"&p="+v.preVerifyTime+"&u="+v.url}})}}function g(a){u&&(b.WeixinJSBridge?a():r.addEventListener&&r.addEventListener("WeixinJSBridgeReady",
a,!1))}function n(){D.invoke||(D.invoke=function(a,d,e){b.WeixinJSBridge&&WeixinJSBridge.invoke(a,c(d),e)},D.on=function(a,c){b.WeixinJSBridge&&WeixinJSBridge.on(a,c)})}var p,q,r,s,t,u,z,w,x,y,v,B,A,C,D;if(!b.jWeixin)return p={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",
addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest"},q=function(){var a,c={};for(a in p)c[p[a]]=a;return c}(),r=b.document,s=r.title,t=navigator.userAgent.toLowerCase(),u=-1!=t.indexOf("micromessenger"),z=-1!=t.indexOf("android"),w=-1!=t.indexOf("iphone")||-1!=t.indexOf("ipad"),x=function(){var a=t.match(/micromessenger\/(\d+\.\d+\.\d+)/)||t.match(/micromessenger\/(\d+\.\d+)/);return a?a[1]:""}(),y={initStartTime:(new Date).getTime(),initEndTime:0,preVerifyStartTime:0,
preVerifyEndTime:0},v={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:w?1:z?2:-1,clientVersion:x,url:encodeURIComponent(location.href)},B={},A={_completes:[]},C={state:0,res:{}},g(function(){y.initEndTime=(new Date).getTime()}),D={config:function(a){B=a;l("config",a);var c=!1===B.check?!1:!0;g(function(){var a,b,e;if(c)d(p.config,{verifyJsApiList:m(B.jsApiList)},function(){A._complete=function(a){y.preVerifyEndTime=(new Date).getTime();C.state=1;C.res=a};A.success=
function(){v.isPreVerifyOk=0};A.fail=function(a){A._fail?A._fail(a):C.state=-1};var a=A._completes;return a.push(function(){B.debug||f()}),A.complete=function(){for(var c=0,b=a.length;b>c;++c)a[c]();A._completes=[]},A}()),y.preVerifyStartTime=(new Date).getTime();else{C.state=1;a=A._completes;b=0;for(e=a.length;e>b;++b)a[b]();A._completes=[]}});B.beta&&n()},ready:function(a){0!=C.state?a():(A._completes.push(a),!u&&B.debug&&a())},error:function(a){"6.0.2">x||(-1==C.state?a(C.res):A._fail=a)},checkJsApi:function(a){d("checkJsApi",
{jsApiList:m(a.jsApiList)},function(){return a._complete=function(a){if(z){var c=a.checkResult;c&&(a.checkResult=JSON.parse(c))}var b,c=a.checkResult;for(b in c)(a=q[b])&&(c[a]=c[b],delete c[b])},a}())},onMenuShareTimeline:function(c){a(p.onMenuShareTimeline,{complete:function(){d("shareTimeline",{title:c.title||s,desc:c.title||s,img_url:c.imgUrl||"",link:c.link||location.href},c)}},c)},onMenuShareAppMessage:function(c){a(p.onMenuShareAppMessage,{complete:function(){d("sendAppMessage",{title:c.title||
s,desc:c.desc||"",link:c.link||location.href,img_url:c.imgUrl||"",type:c.type||"link",data_url:c.dataUrl||""},c)}},c)},onMenuShareQQ:function(c){a(p.onMenuShareQQ,{complete:function(){d("shareQQ",{title:c.title||s,desc:c.desc||"",img_url:c.imgUrl||"",link:c.link||location.href},c)}},c)},onMenuShareWeibo:function(c){a(p.onMenuShareWeibo,{complete:function(){d("shareWeiboApp",{title:c.title||s,desc:c.desc||"",img_url:c.imgUrl||"",link:c.link||location.href},c)}},c)},onMenuShareQZone:function(c){a(p.onMenuShareQZone,
{complete:function(){d("shareQZone",{title:c.title||s,desc:c.desc||"",img_url:c.imgUrl||"",link:c.link||location.href},c)}},c)},startRecord:function(a){d("startRecord",{},a)},stopRecord:function(a){d("stopRecord",{},a)},onVoiceRecordEnd:function(c){a("onVoiceRecordEnd",c)},playVoice:function(a){d("playVoice",{localId:a.localId},a)},pauseVoice:function(a){d("pauseVoice",{localId:a.localId},a)},stopVoice:function(a){d("stopVoice",{localId:a.localId},a)},onVoicePlayEnd:function(c){a("onVoicePlayEnd",
c)},uploadVoice:function(a){d("uploadVoice",{localId:a.localId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},downloadVoice:function(a){d("downloadVoice",{serverId:a.serverId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},translateVoice:function(a){d("translateVoice",{localId:a.localId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},chooseImage:function(a){d("chooseImage",{scene:"1|2",count:a.count||9,sizeType:a.sizeType||["original","compressed"],sourceType:a.sourceType||["album","camera"]},
function(){return a._complete=function(a){if(z){var c=a.localIds;c&&(a.localIds=JSON.parse(c))}},a}())},previewImage:function(a){d(p.previewImage,{current:a.current,urls:a.urls},a)},uploadImage:function(a){d("uploadImage",{localId:a.localId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},downloadImage:function(a){d("downloadImage",{serverId:a.serverId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},getNetworkType:function(a){d("getNetworkType",{},function(){return a._complete=function(a){var c,
b,d=a.errMsg;if(a.errMsg="getNetworkType:ok",c=a.subtype,delete a.subtype,c)a.networkType=c;else switch(b=d.indexOf(":"),c=d.substring(b+1)){case "wifi":case "edge":case "wwan":a.networkType=c;break;default:a.errMsg="getNetworkType:fail"}},a}())},openLocation:function(a){d("openLocation",{latitude:a.latitude,longitude:a.longitude,name:a.name||"",address:a.address||"",scale:a.scale||28,infoUrl:a.infoUrl||""},a)},getLocation:function(a){a=a||{};d(p.getLocation,{type:a.type||"wgs84"},function(){return a._complete=
function(a){delete a.type},a}())},hideOptionMenu:function(a){d("hideOptionMenu",{},a)},showOptionMenu:function(a){d("showOptionMenu",{},a)},closeWindow:function(a){a=a||{};d("closeWindow",{immediate_close:a.immediateClose||0},a)},hideMenuItems:function(a){d("hideMenuItems",{menuList:a.menuList},a)},showMenuItems:function(a){d("showMenuItems",{menuList:a.menuList},a)},hideAllNonBaseMenuItem:function(a){d("hideAllNonBaseMenuItem",{},a)},showAllNonBaseMenuItem:function(a){d("showAllNonBaseMenuItem",
{},a)},scanQRCode:function(a){a=a||{};d("scanQRCode",{needResult:a.needResult||0,scanType:a.scanType||["qrCode","barCode"]},function(){return a._complete=function(a){var c,b;w&&(c=a.resultStr,c&&(b=JSON.parse(c),a.resultStr=b&&b.scan_code&&b.scan_code.scan_result))},a}())},openProductSpecificView:function(a){d(p.openProductSpecificView,{pid:a.productId,view_type:a.viewType||0},a)},addCard:function(a){var c,b,e,h=a.cardList,k=[];c=0;for(b=h.length;b>c;++c)e=h[c],e={card_id:e.cardId,card_ext:e.cardExt},
k.push(e);d(p.addCard,{card_list:k},function(){return a._complete=function(a){var c,b,d,e=a.card_list;if(e){e=JSON.parse(e);c=0;for(b=e.length;b>c;++c)d=e[c],d.cardId=d.card_id,d.cardExt=d.card_ext,d.isSuccess=d.is_succ?!0:!1,delete d.card_id,delete d.card_ext,delete d.is_succ;a.cardList=e;delete a.card_list}},a}())},chooseCard:function(a){d("chooseCard",{app_id:B.appId,location_id:a.shopId||"",sign_type:a.signType||"SHA1",card_id:a.cardId||"",card_type:a.cardType||"",card_sign:a.cardSign,time_stamp:a.timestamp+
"",nonce_str:a.nonceStr},function(){return a._complete=function(a){a.cardList=a.choose_card_info;delete a.choose_card_info},a}())},openCard:function(a){var c,b,e,h=a.cardList,k=[];c=0;for(b=h.length;b>c;++c)e=h[c],e={card_id:e.cardId,code:e.code},k.push(e);d(p.openCard,{card_list:k},a)},chooseWXPay:function(a){d(p.chooseWXPay,{timeStamp:a.timestamp+"",nonceStr:a.nonceStr,"package":a.package,paySign:a.paySign,signType:a.signType||"SHA1"},a)}},e&&(b.wx=b.jWeixin=D),D});
var BodyConfig=function(){},BodyCheckJsAPISupport=function(){},BodyMenuShareTimeline=function(){},BodyMenuShareAppMessage=function(){},BodyMenuShareQQ=function(){},BodyMenuShareWeibo=function(){},BodyMenuShareQZone=function(){},AIObject=function(b){function e(){b.call(this);this.id=0;this.name="Object";this.isVisual=this.isModel=!1;this.timeScale=1;this.parallaxY=this.parallaxX=100;this.variables={};this.global=this.isDead=!1;this.paramInstances={};this.actionSaves={};this.selfStatus=this.currentStatus=
!0;this._uid=0;e._uniqueID++;this.name="Object";e.U_ID++;this._uid=e.U_ID}__extends(e,b);var d=e.prototype;Object.defineProperty(d,"u_id",{get:function(){return this._uid},enumerable:!0,configurable:!0});d.addVariable=function(a,c){this[a]=eval_e(c);this.variables[a]=eval_e(c)};Object.defineProperty(d,"dt",{get:function(){return this.timeScale/EventSheetDecoder.tickInterval},enumerable:!0,configurable:!0});d.getFirstPicked=function(){var a=EgretWorld.getInstance().objectHash[this.name];if(a)return a[0]};
d.compareTwoValue=function(a){return{instances:[this],status:Utils.compare(a.value1,a.operationType,a.value2)}};d.isBetweenValues=function(a){var c=eval_e(a.value),b=eval_e(a.lowerValue);a=eval_e(a.highValue);return b<a?{instances:[this],status:c>b&&c<a}:{instances:[this],status:c<b&&c>a}};d.isNumberNaN=function(a){return{instances:[this],status:"number"===typeof eval_e(a.value)}};d.getClass=function(){return this.constructor};d.loadFromJSON=function(a){};d.destory=function(){};d.saveToJSON=function(){};
d.clone=function(){var a=new e;a.name=this.name;a.isModel=this.isModel;a.isVisual=this.isVisual;a.timeScale=this.timeScale;a.global=this.global;for(var c in this.variables)a.addVariable(c,this.variables[c]);return a};e._uniqueID=0;e.U_ID=0;return e}(egret.EventDispatcher);AIObject.prototype.__class__="AIObject";
var BaseClass=function(b){function e(){b.call(this)}__extends(e,b);var d=e.prototype;Object.defineProperty(d,"className",{get:function(){return egret.getQualifiedClassName(this)},enumerable:!0,configurable:!0});d.getClass=function(){return this.constructor};d.clone=function(){return new e};return e}(egret.EventDispatcher);BaseClass.prototype.__class__="BaseClass";
var AIDisplayObject=function(b){function e(){b.call(this);this._isCollisioning=this._collision=this._isAddToStage=!1;this._mirrored=3;this._scale=this._scaleY=this._scaleX=1;this.behaivors=[];this.collisionGroupID=this.vy=this.vx=this.layer=0;this.collisionsEnabled=this.jumpthruEnabled=this.solidEnabeld=this.isInScreenOnce=!1;this.update=!0;this._scaleYChanged=this._scaleXChanged=this.isOldCollision=!1;this._container=new egret.Sprite;this._container.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStageHanlder,
this);this._container.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveToStageHanlder,this);this._container.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchEvent,this);this._container.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchEvent,this);this._container.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEvent,this);this._container.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchEvent,this);this._container.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,
this.onTouchEvent,this);trigger.register(this)}__extends(e,b);var d=e.prototype;d.onTouchEvent=function(a){this._isTouchDown=a.touchDown;this._touchPointID=a.touchPointID;this._touchX=a.localX;this._touchY=a.localY;this._touchStageX=a.stageX;this._touchStageY=a.stageY;switch(a.type){case egret.TouchEvent.TOUCH_TAP:this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onButtonTap));break;case egret.TouchEvent.TOUCH_BEGIN:this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onButtonBegin));
break;case egret.TouchEvent.TOUCH_END:this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onButtonEnd));break;case egret.TouchEvent.TOUCH_MOVE:this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onButtonMove));break;case egret.TouchEvent.TOUCH_RELEASE_OUTSIDE:this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onButtonReleaseOutside))}};d.onCreate=function(){this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onCreated))};Object.defineProperty(d,"enabled",{get:function(){return this.container.touchEnabled},
set:function(a){this.container.touchChildren=this.container.touchEnabled=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"collision",{get:function(){return this._collision},set:function(a){this._collision=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"isCollsioning",{get:function(){return this._isCollisioning},set:function(a){this._isCollisioning=a},enumerable:!0,configurable:!0});d.getBounds=function(){return this.container.numChildren?this.container.getChildAt(0).getBounds():
this.container.getBounds()};d.getGlobalBounds=function(){var a=this.getBounds();if(this.container.numChildren){var c=this.container.getChildAt(0);return egret.DisplayObject.getTransformBounds(a,c._getConcatenatedMatrix())}return egret.DisplayObject.getTransformBounds(a,this.container._getConcatenatedMatrix())};d.setIsColliding=function(a,c){this.collisionTarget=c;a&&(this.isCollsioning=a);this.isOldCollision!=a&&(this.isOldCollision=a,c&&a&&(this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,
this.onCollisionWithOtherObject,c)),c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onCollisionWithOtherObject,this))))};Object.defineProperty(d,"mirrored",{get:function(){return this._mirrored},set:function(a){if(this._mirrored!=a)switch(this._mirrored=a,this._mirrored){case 0:this.scaleX=-1;break;case 1:this.scaleY=-1;break;case 2:this.scaleY=this.scaleX=-1;break;case 3:this.scaleY=this.scaleX=1}},enumerable:!0,configurable:!0});d.addBehavior=function(a){return null!=a?(a.inst=this,a.enabled=
a.enabled,this.isInScreenOnce=!1,this.behaivors.push(a),!0):!1};d.removeBehavior=function(a){return null!=a&&(a=this.behaivors.indexOf(a),-1!=a)?this.behaivors.splice(a,1):null};d.removeAllBehaviors=function(){this.behaivors.length=0};Object.defineProperty(d,"container",{get:function(){return this._container},enumerable:!0,configurable:!0});Object.defineProperty(d,"x",{get:function(){return this.container.x},set:function(a){this.container.x!=a&&(this.update=!0,this.container.x=a)},enumerable:!0,configurable:!0});
Object.defineProperty(d,"y",{get:function(){return this.container.y},set:function(a){this.container.y!=a&&(this.update=!0,this.container.y=a)},enumerable:!0,configurable:!0});Object.defineProperty(d,"width",{get:function(){return this.container.width},set:function(a){this.container.width!=a&&(this.update=!0,this._width=this.container.width=a)},enumerable:!0,configurable:!0});Object.defineProperty(d,"height",{get:function(){return this.container.height},set:function(a){this.container.height!=a&&(this.update=
!0,this._height=this.container.height=a)},enumerable:!0,configurable:!0});Object.defineProperty(d,"angle",{get:function(){return this.container.rotation},set:function(a){this.container.rotation!=a&&(this.update=!0,this.container.rotation=a)},enumerable:!0,configurable:!0});Object.defineProperty(d,"alpha",{get:function(){return this.container.alpha},set:function(a){this.container.alpha!=a&&(this.update=!0,this.container.alpha=a)},enumerable:!0,configurable:!0});Object.defineProperty(d,"visible",{get:function(){return this.container.visible},
set:function(a){this.container.visible!=a&&(this.update=!0,this.container.visible=a)},enumerable:!0,configurable:!0});Object.defineProperty(d,"scale",{get:function(){return this.container.scaleX},set:function(a){this._scale!=a&&(this.update=!0,this._scale=this.container.scaleX=this.container.scaleY=a)},enumerable:!0,configurable:!0});Object.defineProperty(d,"scaleX",{get:function(){return this.container.scaleX},set:function(a){this.container.scaleX!=a&&(this.update=!0,this._scaleX=this.container.scaleX=
a)},enumerable:!0,configurable:!0});Object.defineProperty(d,"scaleY",{get:function(){return this.container.scaleY},set:function(a){this.container.scaleY!=a&&(this.update=!0,this._scaleY=this.container.scaleY=a)},enumerable:!0,configurable:!0});Object.defineProperty(d,"anchorX",{get:function(){return this.container.anchorX},set:function(a){this.container.anchorX!=a&&(this.update=!0,this.container.anchorX=a)},enumerable:!0,configurable:!0});Object.defineProperty(d,"anchorY",{get:function(){return this.container.anchorY},
set:function(a){this.container.anchorY!=a&&(this.update=!0,this.container.anchorY=a)},enumerable:!0,configurable:!0});d.isTouchDown=function(a){return{instances:[this],status:this._isTouchDown}};d.onButtonTap=function(a){return{instances:[this],status:!0}};d.onButtonBegin=function(a){return{instances:[this],status:!0}};d.onButtonEnd=function(a){return{instances:[this],status:!0}};d.onButtonMove=function(a){return{instances:[this],status:!0}};d.onButtonReleaseOutside=function(a){return{instances:[this],
status:!0}};d.isEnabled=function(a){return{instances:[this],status:this.enabled}};d.isBetweenAngles=function(a){var c=eval_e(a.angle),b=eval_e(a.angle1);a=eval_e(a.angle2);return this._isClosewideform(b,a)?{instances:[this],status:this._isClosewideform(c,b)&&this._isClosewideform(c,a)}:{instances:[this],status:this._isClosewideform(c,b)&&!this._isClosewideform(c,a)}};d.isclockwiseform=function(a){var c=eval_e(a.angle1);a=eval_e(a.angle2);return{instances:[this],status:this._isClosewideform(c,a)}};
d._isClosewideform=function(a,c){var b=MathUtils.toRadian(a),d=MathUtils.toRadian(c),e=Math.sin(b),b=Math.cos(b),l=Math.sin(d),d=Math.cos(d);return 0>=b*l-e*d};d.isObjectMoving=function(a){a=this.x;var c=this.y;return this._oldX!=a||this._oldY!=c?(this._oldX=a,this._oldY=c,{instances:[this],status:!0}):{instances:[this],status:!1}};d.onCreated=function(a){return{instances:[this],status:!0}};d.compareInstanceVariable=function(a){return{instances:[this],status:Utils.compare(this[a.instanceVariable],
a.operationType,a.value)}};d.compareX=function(a){return{instances:[this],status:Utils.compare(this.x,a.operationType,a.x)}};d.compareY=function(a){return{instances:[this],status:Utils.compare(this.y,a.operationType,a.y)}};d.compareWidth=function(a){return{instances:[this],status:Utils.compare(this.width,a.operationType,a.width)}};d.compareHeight=function(a){return{instances:[this],status:Utils.compare(this.height,a.operationType,a.height)}};d.compareAlpha=function(a){return{instances:[this],status:Utils.compare(this.alpha,
a.operationType,a.alpha)}};d.compareMirored=function(a){return{instances:[this],status:eval_e(a.mirrored)==this._mirrored}};d.compareObjectMoveAngle=function(a){var c=this.x,b=this.y,d=!1;if(isNaN(this._oldMoveX)||isNaN(this._oldMoveY))this._oldMoveX=c,this._oldMoveY=b;else if(this._oldMoveX!=c||this._oldMoveY!=b)d=Math.atan2(b-this._oldMoveY,c-this._oldMoveX),d=MathUtils.toAngle(d),d=Utils.compare(d,a.operationType,a.angle),this._oldMoveX=c,this._oldMoveY=b;return{instances:[this],status:d}};d.compareObjectAngle=
function(a){return{instances:[this],status:Utils.compare(this.angle,a.operationType,a.angle)}};d.compareTargetDistance=function(a){var c=eval_e(a.x),b=eval_e(a.y),c=c-this.x,b=b-this.y,b=Math.sqrt(c*c+b*b);return{instances:[this],status:Utils.compare(b,a.operationType,a.distance)}};d.onAddToStage=function(a){return{instances:[this],status:null!=this.container.stage||this._isAddToStage}};d.onRemoveToToStage=function(){return{instances:[this],status:!this.container.stage||!this._isAddToStage}};d.isOnScreenOrFalse=
function(a){var c=0<=this.x&&this.x<=EgretToolUI.stage.stageWidth&&0<=this.y&&this.y<EgretToolUI.stage.stageHeight;return{instances:[this],status:1===a.isOnScreen?c:!c}};d.isVisible=function(a){return{instances:[this],status:0!==eval_e(a.isVisible)}};d.onCollisionWithOtherObject=function(a){return{instances:[this],status:!0}};d.onEnabledDisabledCollision=function(a){return{instances:[this],status:1==a.status}};d.isOverlappingOtherObject=function(a){return{instances:[this.collisionTarget,a.object],
status:this.collisionTarget.name==a.object.name}};d.pickByUniqueID=function(a){for(var c=EgretWorld.getInstance().objectHash[this.name],b,d=0;d<c.length;d++){var e=c[d];if(e.id==eval_e(a.uniqueID)){b=e;break}}return{instances:[e],status:Boolean(b)}};d.onDestory=function(a){return{instances:[this],status:!0}};d.addTo=function(a,c){var b=eval_e(c);assert("number"!==typeof b,"AIObject addTo parameter type incorrect!!");this[a]+=b};d.setBoolean=function(a,c){var b=eval_e(c);assert("number"!==typeof b,
"AIObject setBoolean parameter type incorrect!!");this[a]=1==b};d.setValue=function(a,c){var b=eval_e(c);this[a]=b};d.subtractFrom=function(a,c){var b=eval_e(c);assert("number"!==typeof b,"AIObject subtractFrom parameter type incorrect!!");this[a]-=b};d.toogleBoolean=function(a){this[a]=!this[a]};d.spawn=function(a,c,b,d,e){c=eval_e(c);b=eval_e(b);d=eval_e(d);e=eval_e(e);assert("number"!==typeof c||"number"!==typeof b||"number"!==typeof d,"AIDisplayObject spawn parameter type incorrect!!");a=a.clone();
a.layer=c;1==e?(a.angle=this.angle,a.relyOnTarget=this):a.relyOnTarget=null;e=MathUtils.angleTo(this.x,this.y,this.container.x+b,this.container.y+d);c=Math.sqrt(b*b+d*d);e=MathUtils.toRadian(a.angle)+MathUtils.toRadian(e);a.x=this.x+Math.cos(e)*c;a.y=this.y+Math.sin(e)*c;a.layer=this.layer;EgretWorld.getInstance().addChild(a);return[a]};d.moveAtAngle=function(a,c){var b=eval_e(a),d=eval_e(c);assert("number"!==typeof b,"AIDisplayObject moveAtAngle parameter type incorrect!!");assert("number"!==typeof d,
"AIDisplayObject moveAtAngle parameter type incorrect!!");b=toRadian(b);this.x+=Math.cos(b)*d*timeScale();this.y+=Math.sin(b)*d*timeScale()};d.moveForward=function(a){a=eval_e(a);assert("number"!==typeof a,"AIDisplayObject moveForward parameter type incorrect!!");var c=toRadian(this.angle);this.x+=Math.cos(c)*a*timeScale();this.y+=Math.sin(c)*a*timeScale()};d.moveToTargetPoint=function(a,c,b){a=eval_e(a);c=eval_e(c);b=eval_e(b);assert("number"!==typeof a||"number"!==typeof c||"number"!==typeof b,
"AIDisplayObject moveToTargetPoint parameter type incorrect!!");var d=a-this.x,e=c-this.y;Math.sqrt(d*d+e*e)<b?(this.x=a,this.y=c):(a=Math.atan2(e,d),this.x+=Math.cos(a)*b*timeScale(),this.y+=Math.sin(a)*b*timeScale())};d.rotateClockWise=function(a){a=eval_e(a);assert("number"!==typeof a,"AIDisplayObject rotateClockWise parameter type incorrect!!");this.angle+=a*timeScale();this.angle=MathUtils.clampAngle(this.angle)};d.rotateCounterClockWise=function(a){a=eval_e(a);assert("number"!==typeof a,"AIDisplayObject rotateCounterClockWise parameter type incorrect!!");
this.angle-=a*timeScale();this.angle=MathUtils.clampAngle(this.angle)};d.rotateTowardAngle=function(a,c){var b=eval_e(a),d=eval_e(c);assert("number"!==typeof b||"number"!==typeof d,"AIDisplayObject rotateTowardAngle parameter type incorrect!!");b=MathUtils.toAngle(MathUtils.angleRadius(MathUtils.toRadian(this.angle),MathUtils.toRadian(b),MathUtils.toRadian(d*timeScale())));isNaN(b)||this.angle==b||(this.angle=b)};d.rotateTowardPosition=function(a,c,b){a=eval_e(a);c=eval_e(c);b=eval_e(b);assert("number"!==
typeof a||"number"!==typeof c||"number"!==typeof b,"AIDisplayObject rotateTowardPosition parameter type incorrect!!");a=MathUtils.angleTo(this.x,this.y,a,c);a=MathUtils.angleRotate(this.angle,a,b*timeScale());isNaN(a)||this.angle==a||(this.angle=a)};d.setAngle=function(a){a=eval_e(a);assert("number"!==typeof a,"AIDisplayObject setAngle parameter type incorrect!!");this.angle=a};d.setAngleTowardPosition=function(a,c){a=eval_e(a);c=eval_e(c);assert("number"!==typeof a||"number"!==typeof c,"AIDisplayObject setAngleTowardPosition parameter type incorrect!!");
this.angle=MathUtils.angleTo(this.x,this.y,a,c)};d.setHeight=function(a){a=eval_e(a);assert("number"!==typeof a,"AIDisplayObject setHeight parameter type incorrect!!");this.height=a};d.setMirrored=function(a){a=eval_e(a);assert("number"!==typeof a,"AIDisplayObject setMirrored parameter type incorrect!!");this.mirrored=a};d.setPosition=function(a,c){var b=eval_e(a),d=eval_e(c);assert("number"!==typeof b||"number"!==typeof d,"AIDisplayObject setPosition parameter type incorrect!!");this.x=b;this.y=
d};d.setPositionToAnotherObject=function(a,c,b){c=eval_e(c);b=eval_e(b);a=a instanceof AIObject?a:eval_e(a);assert("number"!==typeof c||"number"!==typeof c,"AIDisplayObject setPositionToAnotherObject parameter type incorrect!!");this.x=a.x+c;this.y=a.y+b};d.setScale=function(a){a=eval_e(a);assert("number"!==typeof a,"AIDisplayObject setScale parameter type incorrect!!");this.scale=a};d.setScaleX=function(a){a=eval_e(a);assert("number"!==typeof a,"AIDisplayObject setScaleX parameter type incorrect!!");
this.scaleX=a};d.setScaleY=function(a){a=eval_e(a);assert("number"!==typeof a,"AIDisplayObject setScaleY parameter type incorrect!!");this.scaleY=a};d.setSize=function(a,c){var b=eval_e(a),d=eval_e(c);assert("number"!==typeof b||"number"!==typeof d,"AIDisplayObject setSize parameter type incorrect!!");this.width=b;this.height=d};d.setVisible=function(a){a=eval_e(a);assert("number"!==typeof a,"AIDisplayObject setVisible parameter type incorrect!!");this.visible=1==a};d.setAlpha=function(a){a=eval_e(a);
assert("number"!==typeof a,"AIDisplayObject setAlpha parameter type incorrect!!");1E-4>a&&(a=0);1<a&&(a=1);this.alpha=a};d.setWidth=function(a){a=eval_e(a);assert("number"!==typeof a,"AIDisplayObject setWidth parameter type incorrect!!");this.width=a};d.setX=function(a){a=eval_e(a);assert("number"!==typeof a,"AIDisplayObject setX parameter type incorrect!!");this.x=a};d.setY=function(a){a=eval_e(a);assert("number"!==typeof a,"AIDisplayObject setY parameter type incorrect!!");this.y=a};d.setEnabled=
function(a){a=eval_e(a);assert("number"!==typeof a,"AIDisplayObject setEnabled parameter type incorrect!!");this.enabled=1<=a};d.enabledDisabledCollision=function(a){this.collision=1==eval_e(a);a=EgretWorld.getInstance().collisionObjectList;var c=a.indexOf(this);this.collision?-1==c&&a.push(this):(c=a.indexOf(this),-1!=c&&a.splice(c,1))};d.onAddToStageHanlder=function(a){this._isAddToStage=!0};d.onRemoveToStageHanlder=function(a){this._isAddToStage=!1};d.destoryTest=function(){this.destory()};d.destory=
function(){this.container&&this.container.graphics.clear();this.container.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStageHanlder,this);this.container.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveToStageHanlder,this);EgretWorld.getInstance().removeChild(this);this.container=null;this.isDead=!0;if(this instanceof AIMovieClip){var a=LayoutDecoder.movieClipRenders.indexOf(this);-1!=a&&LayoutDecoder.movieClipRenders.splice(a,1)}this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,
this.onDestory))};d.loadFromJSON=function(a){};d.saveToJSON=function(){};d.clone=function(){var a=new e;a.name=this.name;a.collision=this.collision;a.behaivors=[];a.collisionGroupID=this.collisionGroupID;a.anchorX=this.anchorX;a.anchorY=this.anchorY;a.layer=this.layer;a.global=this.global;for(var c=0;c<this.behaivors.length;c++){var b=this.behaivors[c].clone();a.addBehavior(b)}for(var d in this.variables)a.addVariable(d,this.variables[d]);return a};return e}(AIObject);
AIDisplayObject.prototype.__class__="AIDisplayObject";var ModuleEvent=function(){function b(){}b.prototype.getClass=function(){return this.constructor};return b}();ModuleEvent.prototype.__class__="ModuleEvent";
var BaseBehavior=function(b){function e(){b.call(this);this.enabled=1;this.paramInstances={};this.isCreated=!1}__extends(e,b);var d=e.prototype;d.onCreate=function(){};d.tick=function(){};d.clone=function(){var a=new e;a.enabled=this.enabled;a.name=this.name;a.paramInstances=this.paramInstances;return a};return e}(BaseClass);BaseBehavior.prototype.__class__="BaseBehavior";var EventBase=function(b){function e(){b.call(this)}__extends(e,b);return e}(BaseClass);EventBase.prototype.__class__="EventBase";
var Proxy=function(){function b(b){this._module=b}var e=b.prototype;e.registerEvents=function(){return null};e.getClass=function(){return this.constructor};e.getModule=function(){return this._module};e.receivedEvents=function(b){};e.startEvents=function(){var b=this.registerEvents();if(null!=b)for(var a=b.length,c=0;c<a;c++){var e=new EventVo;e.proxy=this;e.eventClass=b[c];EventManager.registerEvent(e)}};e.dispatchModuleEvent=function(b){EventManager.dispatchModuleEvent(b)};return b}();
Proxy.prototype.__class__="Proxy";
var AISprite=function(b){function e(){b.call(this);this._sourceHeight=this._sourceWidth=0;this._isResourceLoaded=!1;this.name="Sprite";this._bitmap=new egret.Bitmap}__extends(e,b);var d=e.prototype;Object.defineProperty(d,"bitmapURL",{get:function(){return this._bitmapURL},enumerable:!0,configurable:!0});d.createBitmap=function(a){if(a&&""!=a){this._bitmapURL=a;var c=this,b=Utils.getTexture(a);if(null!=b)var d=b[0];null!=d?(this._bitmap.texture=d,this._sourceWidth=d.textureWidth,this._sourceHeight=
d.textureHeight,this._bitmap.width=this.width,this._bitmap.height=this.height,b&&(this._bitmap.x=b[1],this._bitmap.y=b[2]),this.container.addChild(this._bitmap),this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.onResourceLoaded))):RES.getResByUrl(a,function(a){a&&(c._bitmap.texture=a,c._sourceWidth=a.textureWidth,c._sourceHeight=a.textureHeight,c._bitmap.width=c.width,c._bitmap.height=c.height,c.container.addChild(c._bitmap),c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.onResourceLoaded)))},
this,RES.ResourceItem.TYPE_IMAGE)}};d.addChild=function(a){EgretWorld.getInstance().addChild(a,this)};d.removeChild=function(a){EgretWorld.getInstance().removeChild(a)};d.loadImage=function(a){a=eval_e(a);this.createBitmap(a)};Object.defineProperty(d,"width",{get:function(){return this._bitmap?this._bitmap.width:this._width},set:function(a){this._bitmap&&this._bitmap.width!=a&&(this._bitmap.width=a);this._width!=a&&(this.update=!0,this._width=a)},enumerable:!0,configurable:!0});Object.defineProperty(d,
"height",{get:function(){return this._bitmap?this._bitmap.height:this._height},set:function(a){this._bitmap&&this._bitmap.height!=a&&(this._bitmap.height=a);this._height!=a&&(this._height=a,this.update=!0)},enumerable:!0,configurable:!0});d.onResourceLoaded=function(a){return{instances:[this],status:!0}};d.subtractFrom=function(a,c){var b=eval_e(c);assert("number"!==typeof b,"AIObject subtractFrom parameter type incorrect!!");this[a]-=b};d.loadFromJSON=function(a){};d.saveToJSON=function(){};d.clone=
function(){var a=new e;a.name=this.name;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;a.scale=this.scale;a.scaleX=this.scaleX;a.scaleY=this.scaleY;a.angle=this.angle;a.alpha=this.alpha;a.visible=this.visible;a.mirrored=this.mirrored;a.collision=this.collision;a.collisionGroupID=this.collisionGroupID;a.anchorX=this.anchorX;a.anchorY=this.anchorY;a.global=this.global;a.layer=this.layer;a.createBitmap(this._bitmapURL);a.behaivors=[];for(var c=0;c<this.behaivors.length;c++){var b=this.behaivors[c].clone();
a.addBehavior(b)}for(var d in this.variables)a.addVariable(d,this.variables[d]);return a};return e}(AIDisplayObject);AISprite.prototype.__class__="AISprite";
var TMXRenderer=function(){function b(b,a,c,e){this.offsetsStaggerX=[{x:0,y:0},{x:1,y:-1},{x:1,y:0},{x:2,y:0}];this.offsetsStaggerY=[{x:0,y:0},{x:-1,y:1},{x:0,y:1},{x:0,y:2}];this._cols=b;this._rows=a;this._tilewidth=c;this._tileheight=e;this.animationTiles=[]}var e=b.prototype;Object.defineProperty(e,"cols",{get:function(){return this._cols},enumerable:!0,configurable:!0});Object.defineProperty(e,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0});Object.defineProperty(e,"tilewidth",
{get:function(){return this._tilewidth},enumerable:!0,configurable:!0});Object.defineProperty(e,"tileheight",{get:function(){return this._tileheight},enumerable:!0,configurable:!0});e.canRender=function(b){return this.cols===b.cols&&this.rows===b.rows&&this.tilewidth===b.tilewidth&&this.tileheight===b.tileheight};e.drawTileLayer=function(b,a){};e.drawTile=function(b,a,c,e){};e.render=function(b){if(this.animationTiles)for(var a=egret.getTimer(),c=0;c<this.animationTiles.length;c++){var e=this.animationTiles[c],
k=e.pos,e=e.tmxTile.animation,m=e.currentAnimationFrame;a-e.oldTime>m.duration&&(e.oldBitmap&&e.oldBitmap.parent&&e.oldBitmap.parent.removeChild(e.oldBitmap),this.drawTile(b,k[0],k[1],m.tile),e.oldBitmap=m.tile.bitmap,e.oldTime=a,e.render())}};return b}();TMXRenderer.prototype.__class__="TMXRenderer";
var Trigger=function(){function b(){}var e=b.prototype;e.register=function(b){b.addEventListener(TriggerEvent.TRIGGER,this.onTrigger,this)};e.removeTrigger=function(b){b.removeEventListener(TriggerEvent.TRIGGER,this.onTrigger,this)};e.removeAllTriggers=function(){for(var b=0,a=EgretWorld.getInstance().objectList.length;b<a;b++)this.removeTrigger(EgretWorld.getInstance().objectList[b])};e.onTrigger=function(b){for(var a=AISystem.instance.disableDataEvents,c=EventSheetDecoder.triggerConditions,e=b.target,
k=e instanceof BaseBehavior,m=0;m<c.length;m++){var l=c[m];if(void 0==a[l.event.index+1]&&l.callCondition==b.triggerCondition)if(k){if(l.callTarget.name==e.name)if(b.triggerData){var f=l.paramsInstance,f=f.data,f=f.children,g=!1;if(f&&0<f.length)for(var n=0;n<f.length;n++){var p=f[n];if(b.triggerData==p.$value){g=!0;break}}g&&EventSheetDecoder.execEvent(l.event,!0,[e.inst],e,l)}else EventSheetDecoder.execEvent(l.event,!0,[e.inst],e,l)}else if(l.targetName==e.name)if(b.triggerData){if(f=l.paramsInstance,
f=f.data,(f=f.children)&&0<f.length)for(n=0;n<f.length;n++)if(p=f[n],"onCollisionWithOtherObject"==l.callConditionName){if(b.triggerData.name==p.$value){EventSheetDecoder.execEvent(l.event,!0,[e,b.triggerData],null,l);break}}else if(b.triggerData==p.$value){EventSheetDecoder.execEvent(l.event,!0,[e],null,l);break}}else EventSheetDecoder.execEvent(l.event,!0,[e],null,l)}};return b}();Trigger.prototype.__class__="Trigger";
var Module=function(){function b(){}var e=b.prototype;e.registerProxys=function(){return[]};e.getProxy=function(b){return b&&this._proxyDic?this._proxyDic[b]:null};e.startProxy=function(){this._resigerProxys=this.registerProxys();this._proxyDic={};for(var b=this._resigerProxys.length,a=0;a<b;a++){var c=this._resigerProxys[a],e=new c(this);this._proxyDic[c]=e;e.startEvents()}};return b}();Module.prototype.__class__="Module";
var TriggerEvent=function(b){function e(d,a,c,e,k){void 0===c&&(c=null);void 0===e&&(e=!1);void 0===k&&(k=!1);b.call(this,d,e,k);this.triggerTargets=[];this.triggerCondition=a;this.triggerData=c}__extends(e,b);e.TRIGGER="TRIGGER";return e}(egret.Event);TriggerEvent.prototype.__class__="TriggerEvent";
var AIArray=function(b){function e(){b.call(this);this._arrCache=[];this._arr=[];this.curValue=this.curZ=this.curY=this.curX=0;this.setArraySize(this.arr_width,this.arr_height,this.arr_depth);trigger.register(this)}__extends(e,b);var d=e.prototype;d.onCreate=function(){this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onArrayCreated))};Object.defineProperty(d,"width",{get:function(){return this.arr_width},enumerable:!0,configurable:!0});Object.defineProperty(d,"height",{get:function(){return this.arr_height},
enumerable:!0,configurable:!0});Object.defineProperty(d,"depth",{get:function(){return this.arr_depth},enumerable:!0,configurable:!0});d.isOutOfRange=function(a,c,b){a=Math.floor(a);c=Math.floor(c);b=Math.floor(b);isNaN(a)&&(a=0);isNaN(c)&&(c=0);isNaN(b)&&(b=0);return 0>a||a>this.arr_width-1||0>c||c>this.arr_height-1||0>b||b>this.arr_depth-1?!0:!1};d.at=function(a,c,b){a=Math.floor(a);c=Math.floor(c);b=Math.floor(b);isNaN(a)&&(a=0);isNaN(c)&&(c=0);isNaN(b)&&(b=0);return 0>a||a>this.arr_width-1||0>
c||c>this.arr_height-1||0>b||b>this.arr_depth-1?0:this._arr[a][c][b]};d.setValue=function(a,c,b,d){a=Math.floor(a);c=Math.floor(c);b=Math.floor(b);isNaN(a)&&(a=0);isNaN(c)&&(c=0);isNaN(b)&&(b=0);0>a||a>this.arr_width-1||0>c||c>this.arr_height-1||0>b||b>this.arr_depth-1||(this._arr[a][c][b]=d)};d.compareValues=function(a,c){if(is_number(a)&&is_number(c))return a-c;var b=""+a,d=""+c;return b<d?-1:b>d?1:0};d.onForEachArrayElement=function(a){this.arr_width=this.arr_width||0;this.arr_height=this.arr_height||
0;this.arr_depth=this.arr_depth||0;a.array=this;return{instances:[this],status:0<this.arr_width||0<this.arr_height||0<this.arr_depth,data:a}};d.compareXDimention=function(a){return{instances:[this],status:this.isOutOfRange(a.xDimention,0,0)?!1:Utils.compare(this.at(a.xDimention,0,0),a.operationType,a.value)}};d.compareXYDimention=function(a){return{instances:[this],status:this.isOutOfRange(a.xDimention,a.yDimention,0)?!1:Utils.compare(this.at(a.xDimention,a.yDimention,0),a.operationType,a.value)}};
d.compareXYZDimention=function(a){return{instances:[this],status:this.isOutOfRange(a.xDimention,a.yDimention,a.zDimention)?!1:Utils.compare(this.at(a.xDimention,a.yDimention,a.zDimention),a.operationType,a.value)}};d.compareArraySize=function(a){var c=0;switch(a.xyzDimention){case 1:c=this.arr_width;break;case 2:c=this.arr_height;break;case 3:c=this.arr_depth}return{instances:[this],status:Utils.compare(c,a.operationType,a.value)}};d.containsValue=function(a){a=a.value;for(var c=0;c<this.arr_width;c++)for(var b=
0;b<this.arr_height;b++)for(var d=0;d<this.arr_depth;d++)if(this.at(c,b,d)===a)return{instances:[this],status:!0};return{instances:[this],status:!1}};d.checkArrayIsEmpty=function(a){return{instances:[this],status:0===this.arr_width||0===this.arr_height||0===this.arr_depth}};d.compareCurrentValue=function(a){return{instances:[this],status:this.isOutOfRange(this.curX,this.curY,this.curZ)?!1:Utils.compare(this.at(this._arr[this.curX],this._arr[this.curY],this._arr[this.curZ]),a.operationType,a.value)}};
d.onArrayCreated=function(a){return{instances:[this],status:!0}};d.onArrayDestroyed=function(a){return{instances:[this],status:!0}};d.clearArray=function(){for(var a=0;a<this.arr_width;a++)for(var c=0;c<this.arr_height;c++)for(var b=0;b<this.arr_depth;b++)this._arr[a][c][b]=0};d.setXDimentionValue=function(a,c){a=eval_e(a);assert("number"!==typeof a,"AIArray setXDimentionValue parameter type incorrect!!");this.setValue(a,0,0,eval_e(c))};d.setXYDimentionValue=function(a,c,b){a=eval_e(a);c=eval_e(c);
assert("number"!==typeof a||"number"!==typeof c,"AIArray setXYDimentionValue parameter type incorrect!!");this.setValue(a,c,0,eval_e(b))};d.setXYZDimentionValue=function(a,c,b,d){a=eval_e(a);c=eval_e(c);b=eval_e(b);assert("number"!==typeof a||"number"!==typeof c||"number"!==typeof b,"AIArray setXYZDimentionValue parameter type incorrect!!");this.setValue(a,c,b,eval_e(d))};d.setArraySize=function(a,c,b){a=Math.floor(eval_e(a));c=Math.floor(eval_e(c));b=Math.floor(eval_e(b));0>a&&(a=0);0>c&&(c=0);0>
b&&(b=0);if(this.arr_width!==a||this.arr_height!==c||this.arr_depth!==b){this.arr_width=a;this.arr_height=c;this.arr_depth=b;var d=this._arr;d.length=a;for(a=0;a<this.arr_width;a++){d[a]=[];d[a].length=c;for(var e=0;e<this.arr_height;e++){d[a][e]=[];d[a][e].length=b;for(var l=0;l<this.arr_depth;l++)d[a][e][l]=0}}}};d.deleteArray=function(a,c){a=eval_e(a);var b=eval_e(c);assert("number"!==typeof a||"number"!==typeof b,"AIArray deleteArray parameter type incorrect!!");if(!(0>a))switch(b){case 1:if(a>=
this.arr_width)break;this._arr.splice(a,1);this.arr_width--;break;case 2:if(a>=this.arr_height)break;for(b=0;b<this.arr_width;b++)this._arr[b].splice(a,1);this.arr_height--;break;case 3:if(a>=this.arr_depth)break;for(b=0;b<this.arr_width;b++)for(var d=0;d<this.arr_height;d++)this._arr[b][d].splice(a,1);this.arr_depth--}};d.insertArray=function(a,c,b){a=eval_e(a);c=eval_e(c);b=eval_e(b);assert("number"!==typeof c||"number"!==typeof b,"AIArray insertArray parameter type incorrect!!");if(!(0>c))switch(b){case 1:if(c>
this.arr_width)break;if(this.isOutOfRange(c,0,0))break;this._arr.splice(c,0,[]);for(b=0;b<this.arr_height;b++){this._arr[c][b]=[];for(var d=0;d<this.arr_depth;d++)this._arr[c][b][d]=a}this.arr_width++;break;case 2:if(c>this.arr_height)break;for(b=0;b<this.arr_width;b++)for(this._arr[b].splice(c,0,[[]]),d=0;d<this.arr_height;d++)this._arr[b][c][d]=a;this.arr_height++;break;case 3:if(c>this.arr_depth)break;for(b=0;b<this.arr_width;b++)for(d=0;d<this.arr_height;d++)this._arr[b][d].splice(c,0,a);this.arr_depth++}};
d.popArray=function(a,c){var b=eval_e(c);a=eval_e(a);assert("number"!==typeof b||"number"!==typeof a,"AIArray popArray parameter type incorrect!!");switch(b){case 1:if(0===this.arr_width)break;0===a?this._arr.pop():this._arr.shift();this.arr_width--;break;case 2:if(0===this.arr_height)break;for(b=0;b<this.arr_width;b++)0===a?this._arr[b].pop():this._arr[b].shift();this.arr_height--;break;case 3:if(0===this.arr_depth)break;for(b=0;b<this.arr_width;b++)for(var d=0;d<this.arr_height;d++)0===a?this._arr[b][d].pop():
this._arr[b][d].shift();this.arr_depth--}};d.pushArray=function(a,c,b){a=eval_e(a);c=eval_e(c);b=eval_e(b);assert("number"!==typeof a||"number"!==typeof b,"AIArray pushArray parameter type incorrect!!");switch(b){case 1:b=0;0===a?(b=this.arr_width,this._arr.push([])):(b=0,this._arr.unshift([]));for(var d=0;d<this.arr_height;d++){this._arr[b][d]=[];for(var e=0;e<this.arr_depth;e++)this._arr[b][d][e]=c}this.arr_width++;break;case 2:for(var l=0;l<this.arr_width;l++)for(0===a?(b=this.arr_height,this._arr[l].push([])):
(b=0,this._arr[l].unshift([])),e=0;e<this.arr_depth;e++)this._arr[l][b][e]=c;this.arr_height++;break;case 3:for(l=0;l<this.arr_width;l++)for(d=0;d<this.arr_height;d++)0===a?this._arr[l][d].push(c):this._arr[l][d].unshift(c);this.arr_depth++}};d.reverseArray=function(a){a=eval_e(a);assert("number"!==typeof a,"AIArray reverseArray parameter type incorrect!!");switch(a){case 1:this._arr.reverse();break;case 2:for(a=0;a<this.arr_width;a++)this._arr[a].reverse();break;case 3:for(a=0;a<this.arr_width;a++)for(var c=
0;c<this.arr_height;c++)this._arr[a][c].reverse()}};d.sortArray=function(a){a=eval_e(a);assert("number"!==typeof a,"AIArray sortArray parameter type incorrect!!");if(0!==this.arr_width&&0!==this.arr_height&&0!==this.arr_depth){var c=this;switch(a){case 1:this._arr.sort(function(a,b){return c.compareValues(a[0][0],b[0][0])});break;case 2:for(a=0;a<this.arr_width;a++)this._arr[a].sort(function(a,b){return c.compareValues(a[0],b[0])});break;case 3:for(a=0;a<this.arr_width;a++)for(var b=0;b<this.arr_height;b++)this._arr[a][b].sort(this.compareValues)}}};
d.destroyArray=function(){this.arr_width=this.arr_height=this.arr_depth=this._arr.length=0;this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onArrayDestroyed))};return e}(AIObject);AIArray.prototype.__class__="AIArray";
var AIAudio=function(b){function e(){b.call(this);this.volume=this.loopTimes=1;this.isPlaying=!1;this.position=0;this.isPaused=this.isMuted=!1;this.curPlayTimes=0;this.isPlayOnStart=!1;this.name="Audio";trigger.register(this)}__extends(e,b);var d=e.prototype;Object.defineProperty(d,"playOnStart",{set:function(a){this.isPlayOnStart!=a&&(this.isPlayOnStart=a)},enumerable:!0,configurable:!0});Object.defineProperty(d,"loop",{set:function(a){this.loopTimes=a},enumerable:!0,configurable:!0});d.startAudio=
function(){this.isPlayOnStart&&this.play(this.loopTimes,this.volume)};d.isSilent=function(a){a=!1;a=this.isMuted?!0:0>=this.volume?!0:!1;return{instances:[this],status:a}};d.isAnyPlaying=function(a){a=!1;for(var c in e.soundCaches)if(e.soundCaches[c].isPlaying){a=!0;break}return{instances:[this],status:a}};d.isSoundPlaying=function(a){return{instances:[this],status:this.isPlaying}};d.onended=function(a){return{instances:[this],status:!0}};d.onLoopOnTimeEnded=function(a){return{instances:[this],status:!0}};
d.onAllPreloadComplete=function(a){return{instances:[this],status:!1}};d.onAudioLoadComplete=function(a){return{instances:[this],status:!0}};d.play=function(a,c){void 0===c&&(c=1);void 0==e.soundCaches[this.url]&&(e.soundCaches[this.url]=this);this.loopTimes=eval_e(a);this.volume=eval_e(c);0>=this.loopTimes&&(this.loopTimes=Number.MAX_VALUE);this.isPlaying=!0;var b=this,d=function(){b.curPlayTimes++;b.curPlayTimes<b.loopTimes?(b.play(b.loopTimes,b.volume),b.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,
b.onLoopOnTimeEnded))):(b.sound.stop(),b.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,b.onended)))};this.sound?(this.sound.volume=this.isMuted?0:this.volume,this.sound.position=this.position,this.sound.path=this.url,this.sound.play(!0,this.position),this.isPaused?this.sound.pause():this.sound.resume(),this.sound.addEventListener(egret.SoundEvent.SOUND_COMPLETE,d,this)):RES.getResByUrl(this.url,function(a){a&&(b.sound=a,b.play(b.loopTimes,b.volume),b.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,
b.onAudioLoadComplete)))},this,RES.ResourceItem.TYPE_SOUND)};d.setLoop=function(a){this.loopTimes=(a=0==eval_e(a))?Number.MAX_VALUE:1;this.curPlayTimes=0;this.sound&&(a?this.sound.play(!0,this.position):this.play(this.loopTimes,this.volume))};d.setMasterVolume=function(a){this.volume=eval_e(a);for(var c in e.soundCaches)e.soundCaches[c].setVolume(this.volume)};d.setVolume=function(a){this.volume=eval_e(a);this.sound&&(this.sound.volume=eval_e(a))};d.setMuted=function(a){this.isMuted=0==eval_e(a);
this.sound&&(this.sound.volume=this.isMuted?0:this.volume)};d.setPaused=function(a){this.isPaused=0==eval_e(a);this.sound&&(this.isPaused?(this.isPlaying=!1,this.sound.pause()):(this.isPlaying=!0,this.sound.resume()))};d.stop=function(){this.sound&&this.sound.stop();this.isPlaying=!1};d.stopAll=function(){for(var a in e.soundCaches){var c=e.soundCaches[a];c.stop();c.position=0}};e.soundCaches={};return e}(AIObject);AIAudio.prototype.__class__="AIAudio";
var AIBitmapText=function(b){function e(){b.call(this);this.name="bitmapText"}__extends(e,b);var d=e.prototype;d.createBitmapText=function(a,c){this._bitmapURL=a;this._fntUrl=c;var b=this,d=Utils.getTexture(a);RES.getResByUrl(b._fntUrl,function(a){b._bitmapText=new egret.BitmapText;b._bitmapText.font=a;b._sourceWidth=b._bitmapText.width;b._sourceHeight=b._bitmapText.height;b.text&&(b._bitmapText.text=b.text);b.width&&(b._bitmapText.width=b.width);b.height&&(b._bitmapText.height=b.height);b.letterSpacing&&
(b._bitmapText.letterSpacing=b.letterSpacing);b.lineSpacing&&(b._bitmapText.lineSpacing=b.lineSpacing);b.container.addChild(b._bitmapText);d&&(b._bitmapText.x=d[1],b._bitmapText.y=d[2]);b.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,b.onResourceLoaded))},this,RES.ResourceItem.TYPE_FONT)};Object.defineProperty(d,"letterSpacing",{get:function(){return this._letterSpacing},set:function(a){this._letterSpacing!=a&&(this._bitmapText?this._bitmapText.letterSpacing=a:this._letterSpacing=a)},enumerable:!0,
configurable:!0});Object.defineProperty(d,"lineSpacing",{get:function(){return this._lineSpacing},set:function(a){this._lineSpacing!=a&&(this._bitmapText?this._bitmapText.lineSpacing=a:this._lineSpacing=a)},enumerable:!0,configurable:!0});Object.defineProperty(d,"text",{get:function(){return this._text},set:function(a){this._bitmapText?this._bitmapText.text=a:this._text=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"width",{get:function(){return this._width},set:function(a){this._bitmapText&&
this._bitmapText.width!=a&&(this._bitmapText.width=a);this._width!=a&&(this.update=!0,this._width=a)},enumerable:!0,configurable:!0});Object.defineProperty(d,"height",{get:function(){return this._height},set:function(a){this._bitmapText&&this._bitmapText.height!=a&&(this._bitmapText.height=a);this._height!=a&&(this.update=!0,this._height=a)},enumerable:!0,configurable:!0});Object.defineProperty(d,"scaleX",{get:function(){return this._scaleX},set:function(a){this._scaleX!=a&&(this._scaleX=a,this.width=
this._scaleX*this._sourceWidth,this.update=!0)},enumerable:!0,configurable:!0});Object.defineProperty(d,"scaleY",{get:function(){return this._scaleY},set:function(a){this._scaleY!=a&&(this._scaleY=a,this.height=this._scaleY*this._sourceHeight,this.update=!0)},enumerable:!0,configurable:!0});Object.defineProperty(d,"scale",{get:function(){return this._scaleX==this._scaleY?this._scaleX:1},set:function(a){this.scale!=a&&(this.update=!0,this.scaleX=this.scaleY=a)},enumerable:!0,configurable:!0});d.compareBitmapFontText=
function(a){return{instances:[this],status:this._text==eval_e(a.text)}};d.setBitmapText=function(a){a=eval_e(a);this._text!=a&&(this._bitmapText&&(this._bitmapText.text="number"===typeof a?a.toString():a),this._text=a)};d.appendBitmapText=function(a){a=eval_e(a);this._bitmapText&&(this._bitmapText.text="number"===typeof a?this._bitmapText.text+a.toString():this._bitmapText.text+a);this._text+=a};d.setBitmapLetterSpace=function(a){a=eval_e(a);this._bitmapText&&(this._bitmapText.letterSpacing=a);this._letterSpacing=
a};d.setBitmapLineSpace=function(a){a=eval_e(a);this._bitmapText&&(this._bitmapText.lineSpacing=a);this._lineSpacing=a};d.loadFromJSON=function(a){};d.saveToJSON=function(){};Object.defineProperty(d,"bitmapText",{get:function(){return this._bitmapText},enumerable:!0,configurable:!0});d.clone=function(){var a=new e;a.name=this.name;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;a.scale=this.scale;a.scaleX=this.scaleX;a.scaleY=this.scaleY;a.angle=this.angle;a.alpha=this.alpha;a.visible=
this.visible;a.collision=this.collision;a.mirrored=this.mirrored;a.collisionGroupID=this.collisionGroupID;a.anchorX=this.anchorX;a.anchorY=this.anchorY;a.text=this.text;a.letterSpacing=this.letterSpacing;a.lineSpacing=this.lineSpacing;a.global=this.global;a.layer=this.layer;a.createBitmapText(this._bitmapURL,this._fntUrl);a.behaivors=[];for(var c=0,b=this.behaivors.length;c<b;c++){var d=this.behaivors[c].clone();a.addBehavior(d)}for(var m in this.variables)a.addVariable(m,this.variables[m]);return a};
return e}(AISprite);AIBitmapText.prototype.__class__="AIBitmapText";
var AIButton=function(b){function e(){b.call(this);this.newHeight=this.newWidth=0;this.initialize()}__extends(e,b);var d=e.prototype;d.initialize=function(){null==this._textfield&&(this._textfield=new egret.TextField);this._up=new egret.Bitmap;this._down=new egret.Bitmap;this._disable=new egret.Bitmap;this._currentState=this._up;this._up.touchEnabled=this._down.touchEnabled=this._disable.touchEnabled=!0;this.container.addChildAt(this._up,0);this.container.touchChildren=this.container.touchEnabled=
!0;EgretToolUI.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this)};Object.defineProperty(d,"text",{get:function(){return null!=this._textfield?this._textfield.text:""},set:function(a){this._textfield.text!=a&&(this._textfield.text=a);this._textfield.textAlign=egret.HorizontalAlign.CENTER;this._textfield.verticalAlign=egret.VerticalAlign.MIDDLE;this._textfield.size=12;null==this._textfield.parent&&this.container.addChild(this._textfield)},enumerable:!0,configurable:!0});Object.defineProperty(d,
"touchX",{get:function(){return this._touchX},enumerable:!0,configurable:!0});Object.defineProperty(d,"touchY",{get:function(){return this._touchY},enumerable:!0,configurable:!0});Object.defineProperty(d,"touchStageX",{get:function(){return this._touchStageX},enumerable:!0,configurable:!0});Object.defineProperty(d,"touchStageY",{get:function(){return this._touchStageY},enumerable:!0,configurable:!0});Object.defineProperty(d,"touchPointID",{get:function(){return this._touchPointID},enumerable:!0,configurable:!0});
Object.defineProperty(d,"width",{get:function(){return 0!=this.newWidth?this.newWidth:this.container.width},set:function(a){this.newWidth!=a&&(this._down&&(this._down.width=a),this._up&&(this._up.width=a),this._disable&&(this._disable.width=a),this.newWidth=a,this.update=!0)},enumerable:!0,configurable:!0});Object.defineProperty(d,"height",{get:function(){return 0!=this.newHeight?this.newHeight:this.container.height},set:function(a){this.newHeight!=a&&(this._down&&(this._down.height=a),this._up&&
(this._up.height=a),this._disable&&(this._disable.height=a),this.newHeight=a,this.update=!0)},enumerable:!0,configurable:!0});Object.defineProperty(d,"enabled",{get:function(){return this._enabled},set:function(a){this._enabled!=a&&(this._enabled=a,this._up.touchEnabled=this._down.touchEnabled=this._disable.touchEnabled=a,this._currentState&&null!=this._currentState.parent&&this.container.removeChild(this._currentState),(this._currentState=a?this._up:this._disable)&&null==this._currentState.parent&&
this.container.addChildAt(this._currentState,0),this.container.touchChildren=this.container.touchEnabled=a)},enumerable:!0,configurable:!0});Object.defineProperty(d,"upSkin",{set:function(a){this._upSkin!=a&&(this._upSkin=a,this.setBitmap(a,this._up))},enumerable:!0,configurable:!0});Object.defineProperty(d,"downSkin",{set:function(a){this._downSkin!=a&&(this._downSkin=a,this.setBitmap(a,this._down))},enumerable:!0,configurable:!0});Object.defineProperty(d,"disableSkin",{set:function(a){this._disableSkin!=
a&&(this._disableSkin=a,this.setBitmap(a,this._disable))},enumerable:!0,configurable:!0});d.onTouchEvent=function(a){this._currentState&&null!=this._currentState.parent&&this._currentState.parent.removeChild(this._currentState);b.prototype.onTouchEvent.call(this,a);switch(a.type){case egret.TouchEvent.TOUCH_BEGIN:this._currentState=this._down}this._currentState&&null==this._currentState.parent&&this.container.addChildAt(this._currentState,0)};d.onStageTouchEnd=function(a){this._currentState&&null!=
this._currentState.parent&&this._currentState.parent.removeChild(this._currentState);switch(a.type){case egret.TouchEvent.TOUCH_END:this._currentState=this._up}this._currentState&&null==this._currentState.parent&&this.container.addChildAt(this._currentState,0)};d.setBitmap=function(a,c){var b=this,d=Utils.getTexture(a);if(null!=d)var e=d[0];null!=e?(c.texture=e,0!=b.newWidth&&(b.width=b.newWidth),0!=b.newHeight&&(b.height=b.newHeight),b._textfield&&(b._textfield.width=c.width,b._textfield.height=
c.height),d&&(c.x=d[1],c.y=d[2])):RES.getResByUrl(a,function(a){a&&(this.texture=a,0!=b.newWidth&&(b.width=b.newWidth),0!=b.newHeight&&(b.height=b.newHeight),b._textfield&&(b._textfield.width=this.width,b._textfield.height=this.height))},c,RES.ResourceItem.TYPE_IMAGE)};d.compareButtonText=function(a){a=eval_e(a.text);return{instances:[this],status:this._textfield.text==a}};d.setButtonText=function(a){this.text=eval_e(a)};d.setButtonFontColor=function(a){a=eval_e(a);assert("number"!==typeof a,"setFontColor parameter type incorrect!!");
this._textfield.textColor=a};d.setButtonFontFamily=function(a){a=eval_e(a);assert("string"!==typeof a,"setFontFamily parameter type incorrect!!");this._textfield.fontFamily=a};d.setButtonFontSize=function(a){a=eval_e(a);assert("number"!==typeof a,"setFontSize parameter type incorrect!!");this._textfield.size=a};d.setButtonTextAlign=function(a){a=eval_e(a);assert("string"!==typeof a,"setTextAlign parameter type incorrect!!");this._textfield.textAlign=a};d.setButtonVerticalAlign=function(a){a=eval_e(a);
assert("string"!==typeof a,"setVerticalAlign parameter type incorrect!!");this._textfield.verticalAlign=a};d.setEnabled=function(a){a=eval_e(a);assert("number"!==typeof a,"AIButton setEnabled parameter type incorrect!!");this.enabled=1==a};d.loadFromJSON=function(a){};d.saveToJSON=function(){};d.clone=function(){var a=new e;a.name=this.name;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;a.scale=this.scale;a.scaleX=this.scaleX;a.scaleY=this.scaleY;a.angle=this.angle;a.alpha=this.alpha;
a.visible=this.visible;a.enabled=this.enabled;a._textfield=this._textfield;a.text=this.text;a.collision=this.collision;a.collisionGroupID=this.collisionGroupID;a.anchorX=this.anchorX;a.anchorY=this.anchorY;a.upSkin=this._upSkin;a.downSkin=this._downSkin;a.disableSkin=this._disableSkin;a.global=this.global;a.layer=this.layer;a.behaivors=[];for(var c=0,b=this.behaivors.length;c<b;c++){var d=this.behaivors[c].clone();a.addBehavior(d)}for(var m in this.variables)a.addVariable(m,this.variables[m]);return a};
return e}(AIDisplayObject);AIButton.prototype.__class__="AIButton";
var AIFunction=function(b){function e(){b.call(this);this.funcStackIndex=-1;this.funcStack=[];if(null!=e._instance)throw Error("AIFunction \u4e3a\u5355\u4f8b\uff01\uff01\uff01");this.name="Function";e._instance=this;trigger.register(this)}__extends(e,b);var d=e.prototype;Object.defineProperty(e,"instance",{get:function(){null==this._instance&&(this._instance=new e);return this._instance},enumerable:!0,configurable:!0});d.pushFuncStack=function(){this.funcStackIndex++;this.funcStackIndex==this.funcStack.length&&
this.funcStack.push(new FuncStackEntry);return this.funcStack[this.funcStackIndex]};d.getCurrentFuncStack=function(){return 0>this.funcStackIndex?null:this.funcStack[this.funcStackIndex]};d.getOneAboveFuncStack=function(){if(!this.funcStack.length)return null;var a=this.funcStackIndex+1;a>=this.funcStack.length&&(a=this.funcStack.length-1);return this.funcStack[a]};d.popFuncStack=function(){this.funcStackIndex--};d.compareParameter=function(a){var c=this.getCurrentFuncStack();if(!c)return{instances:[this],
status:!1};var b=a.index;return 0>b||b>=c.params.length?{instances:[this],status:!1}:{instances:[this],status:Utils.compare(c.params[b],a.operationType,a.value)}};d.onFunction=function(a){var c=this.getCurrentFuncStack();return c?{instances:[this],status:a.tag==c.tag}:{instances:[this],status:!1}};d.callExpression=function(a){};d.callFunction=function(a,c){if(null==a)assert(!0,"\u8c03\u7528\u7684\u51fd\u6570\u540d\u4e0d\u80fd\u4e3a\u7a7a\uff01\uff01\uff01");else{var b;c&&(b=c.split(","));var d=this.pushFuncStack();
d.tag=a;d.retVal=0;d.params=c?d.params.concat(b):[];this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onFunction));this.popFuncStack()}};d.setReturnValue=function(a){var c=this.getCurrentFuncStack();c&&(c.retVal=eval_e(a))};d.param=function(a){a=Math.floor(a);var c=this.getCurrentFuncStack();return c?0>a||a>c.params.length?0:c.params[a]:0};d.call=function(a){for(var c=[],b=1;b<arguments.length;b++)c[b-1]=arguments[b];b=this.pushFuncStack();b.params.length=0;b.params=b.params.concat(c);
this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onFunction));this.popFuncStack()};d.loadFromJSON=function(a){};d.saveToJSON=function(){};return e}(AIObject);AIFunction.prototype.__class__="AIFunction";var FuncStackEntry=function(){return function(){this.retVal=0;this.params=[]}}();FuncStackEntry.prototype.__class__="FuncStackEntry";
var AIProgressBar=function(b){function e(){b.call(this);this._percent=100;this._offsetY=this._offsetX=0;this._barScaleY=this._barScaleX=1;this.name="progressBar"}__extends(e,b);var d=e.prototype;d.initialize=function(a,c,b,d,e,l){this._bgSkin=a;var f=this;this._foreSkin=c;this._w=b;this._h=d;this._initWidth=this._w;this._initHeight=this._h;this._bg9Grid=e;this._fore9Grid=l;BitmapLoader.load(a,function(a,c){f._bgBitmap=new egret.Bitmap;var b=TexturePool.getTexture(a);f._bgBitmap.texture=b;f._bgBitmap.scale9Grid=
c;f._bgBitmap.width=f._w;f._bgBitmap.height=f._h;f.container.addChildAt(f._bgBitmap,0);f._sourceWidth=b.textureWidth;f._sourceHeight=b.textureHeight},[a,e]);BitmapLoader.load(c,function(a,c){f._foreBitmap=new egret.Bitmap;var b=TexturePool.getTexture(a);f._foreBitmap.texture=b;f._foreBitmap.scale9Grid=c;f._foreBitmap.x=f._offsetX;f._foreBitmap.y=f._offsetY;f._foreBitmap.width=(0==f._offsetX?f._w:f._w-2*f._offsetX)*f.percent/100;f._foreBitmap.height=0==f._offsetY?f._h:f._h-2*f._offsetY;f.container.addChild(f._foreBitmap);
f._textfield&&f.container.addChild(f._textfield)},[c,l])};Object.defineProperty(d,"value",{get:function(){return this._value},set:function(a){this._value=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"maxValue",{get:function(){return this._maxValue},set:function(a){this._maxValue=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"width",{get:function(){return this._bgBitmap?this._bgBitmap.width:this._w},set:function(a){this._bgBitmap&&(this._bgBitmap.width!=a&&(this._bgBitmap.width=
this._w),this._barScaleX=a/this._sourceWidth);this._foreBitmap&&this._foreBitmap.width!=a&&(this._foreBitmap.width=(0==this._offsetX?this._w:this._w-2*this._offsetX)*this.percent/100);this._w!=a&&(this._w=a)},enumerable:!0,configurable:!0});Object.defineProperty(d,"height",{get:function(){return this._bgBitmap?this._bgBitmap.height:this._h},set:function(a){this._bgBitmap&&(this._bgBitmap.height!=a&&(this._bgBitmap.height=this._h),this._barScaleY=a/this._sourceHeight);this._foreBitmap&&this._foreBitmap.height!=
a&&(this._foreBitmap.height=0==this._offsetY?this._h:this._h-2*this._offsetY);this._h!=a&&(this._h=a)},enumerable:!0,configurable:!0});Object.defineProperty(d,"scaleX",{get:function(){return this._barScaleX},set:function(a){this._barScaleX!=a&&(this._barScaleX=a,this.width=this._barScaleX*this._sourceWidth)},enumerable:!0,configurable:!0});Object.defineProperty(d,"scaleY",{get:function(){return this._barScaleY},set:function(a){this._barScaleY!=a&&(this._barScaleY=a,this.height=this._barScaleY*this._sourceHeight)},
enumerable:!0,configurable:!0});Object.defineProperty(d,"scale",{get:function(){return this._barScaleX==this._barScaleY?this._barScaleX:1},set:function(a){this.scaleX=this.scaleY=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"percent",{get:function(){return this._percent},set:function(a){this._percent!=a&&(this._percent=a,this._foreBitmap&&(this._foreBitmap.width=this._w*this.percent/100))},enumerable:!0,configurable:!0});Object.defineProperty(d,"textField",{get:function(){null==this._textfield&&
(this._textfield=new egret.TextField);return this._textfield},enumerable:!0,configurable:!0});Object.defineProperty(d,"text",{get:function(){return this._textfield?this._textfield.text:""},set:function(a){null!=a&&(null==this._textfield&&(this._textfield=new egret.TextField),this._textfield.text=a,this._textfield.size=12,this._textfield.textAlign=egret.HorizontalAlign.LEFT,this._textfield.x=this._w-this._textfield.width>>1,this._textfield.y=this._h-this._textfield.height>>1,this.container.addChild(this._textfield))},
enumerable:!0,configurable:!0});d.compareProgress=function(a){return{instances:[this],status:Utils.compare(this.percent,a.operationType,a.percent)}};d.setProgressBarProcess=function(a){eval_e(a);assert("number"!==typeof a,"AIProgressBar setProgressBarProcess parameter type incorrect!!");this.percent=a};d.setProgressBarText=function(a){this.text=eval_e(a)};d.clone=function(){var a=new e;a.name=this.name;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;a.scale=this.scale;a.scaleX=this.scaleX;
a.scaleY=this.scaleY;a.angle=this.angle;a.alpha=this.alpha;a.visible=this.visible;a.x=this.x;a.text=this.text;a.collision=this.collision;a.collisionGroupID=this.collisionGroupID;a.anchorX=this.anchorX;a.anchorY=this.anchorY;a.global=this.global;a.layer=this.layer;a._bgSkin=this._bgSkin;a._foreSkin=this._foreSkin;a._bg9Grid=this._bg9Grid;a._fore9Grid=this._fore9Grid;a.initialize(a.backgroundUrl,a.foregroundUrl,a.width,a.height,new egret.Rectangle(a.back9Grid),new egret.Rectangle(a.fore9Grid));a.behaivors=
[];for(var c=0,b=this.behaivors.length;c<b;c++){var d=this.behaivors[c].clone();a.addBehavior(d)}for(var m in this.variables)a.addVariable(m,this.variables[m]);return a};d.loadFromJSON=function(a){};d.saveToJSON=function(){};return e}(AIDisplayObject);AIProgressBar.prototype.__class__="AIProgressBar";
var AIScale9GridBitmap=function(b){function e(){b.call(this);this.name="scale9GridBitmap"}__extends(e,b);var d=e.prototype;d.createScale9GridBitmap=function(a,c){this._bitmapURL=a;this._scale9GridData=c;var b=this,d=Utils.getTexture(a);if(null!=d)var e=d[0];null!=e?(b._bitmap.texture=e,b._sourceWidth=e.textureWidth,b._sourceHeight=e.textureHeight,b._bitmap.width=b.width,b._bitmap.height=b.height,b._bitmap.scale9Grid=c,b.container.addChild(b._bitmap),d&&(b._bitmap.x=d[1],b._bitmap.y=d[2]),b.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,
b.onResourceLoaded))):RES.getResByUrl(a,function(a){b._bitmap.texture=a;b._sourceWidth=a.textureWidth;b._sourceHeight=a.textureHeight;b._bitmap.width=b.width;b._bitmap.height=b.height;b._bitmap.scale9Grid=this;b.container.addChild(b._bitmap);b.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,b.onResourceLoaded))},c,RES.ResourceItem.TYPE_IMAGE)};d.clone=function(){var a=new e;a.name=this.name;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;a.scale=this.scale;a.scaleX=this.scaleX;a.scaleY=
this.scaleY;a.angle=this.angle;a.alpha=this.alpha;a.visible=this.visible;a.mirrored=this.mirrored;a.collision=this.collision;a.collisionGroupID=this.collisionGroupID;a.anchorX=this.anchorX;a.anchorY=this.anchorY;a.layer=this.layer;a.global=this.global;a.createScale9GridBitmap(this._bitmapURL,this._scale9GridData);a.behaivors=[];for(var c=0,b=this.behaivors.length;c<b;c++){var d=this.behaivors[c].clone();a.addBehavior(d)}for(var m in this.variables)a.addVariable(m,this.variables[m]);return a};return e}(AISprite);
AIScale9GridBitmap.prototype.__class__="AIScale9GridBitmap";
var AITextField=function(b){function e(){b.call(this);this.name="TextField";this._textfield=new egret.TextField;this.container.addChild(this._textfield)}__extends(e,b);var d=e.prototype;Object.defineProperty(d,"textField",{get:function(){return this._textfield},enumerable:!0,configurable:!0});Object.defineProperty(d,"type",{get:function(){return this._textfield.type},set:function(a){this._textfield.type=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"enableInput",{set:function(a){this.type=
a?"input":"dynamic";this._textfield.touchEnabled="dynamic"==this.type?!1:!0},enumerable:!0,configurable:!0});Object.defineProperty(d,"width",{set:function(a){this._textfield.width=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"height",{set:function(a){this._textfield.height=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"text",{get:function(){return this._textfield.text},set:function(a){this._textfield.text=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"bold",
{get:function(){return this._textfield.bold},set:function(a){this._textfield.bold=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"fontFamily",{get:function(){return this._textfield.fontFamily},set:function(a){this._textfield.fontFamily=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"textColor",{get:function(){return this._textfield.textColor},set:function(a){this._textfield.textColor=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"size",{get:function(){return this._textfield.size},
set:function(a){this._textfield.size=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"textAlign",{get:function(){return this._textfield.textAlign},set:function(a){this._textfield.textAlign=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"verticalAlign",{get:function(){return this._textfield.verticalAlign},set:function(a){this._textfield.verticalAlign=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"italic",{get:function(){return this._textfield.italic},set:function(a){this._textfield.italic=
a},enumerable:!0,configurable:!0});Object.defineProperty(d,"border",{get:function(){return this._textfield.border},set:function(a){this._textfield.border=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"borderColor",{get:function(){return this._textfield.borderColor},set:function(a){this._textfield.borderColor=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"background",{get:function(){return this._textfield.background},set:function(a){this._textfield.background=a},enumerable:!0,
configurable:!0});Object.defineProperty(d,"backgroundColor",{get:function(){return this._textfield.backgroundColor},enumerable:!0,configurable:!0});Object.defineProperty(d,"backgourndColor",{set:function(a){this._textfield.backgroundColor=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"maxChars",{get:function(){return this._textfield.maxChars},set:function(a){this._textfield.maxChars=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"displayAsPassword",{get:function(){return this._textfield.displayAsPassword},
set:function(a){this._textfield.displayAsPassword=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"wordWrap",{get:function(){return this._textfield.multiline},set:function(a){this._textfield.multiline=1==a},enumerable:!0,configurable:!0});d.compareText=function(a){a=eval_e(a.text);return{instances:[this],status:this._textfield.text==a}};d.appendText=function(a){a=eval_e(a);this.textField.appendText(a)};d.setFontColor=function(a){a=eval_e(a);assert("number"!==typeof a,"setFontColor parameter type incorrect!!");
this.textColor=a};d.setFontFamily=function(a){a=eval_e(a);assert("string"!==typeof a,"setFontFamily parameter type incorrect!!");this.fontFamily=a};d.setFontSize=function(a){a=eval_e(a);assert("number"!==typeof a,"setFontSize parameter type incorrect!!");this.size=a};d.setBold=function(a){a=eval_e(a);assert("number"!==typeof a,"setBold parameter type incorrect!!");this.bold=1==a?!0:!1};d.setText=function(a){this.text=eval_e(a)};d.setTextAlign=function(a){this.textAlign=a};d.setVerticalAlign=function(a){this.verticalAlign=
a};d.setMaxChars=function(a){a=eval_e(a);assert("number"!==typeof a,"setMaxChars parameter type incorrect!!");this.maxChars=a};d.setItalic=function(a){a=eval_e(a);assert("number"!==typeof a,"setItalic parameter type incorrect!!");this.italic=1==a?!0:!1};d.setDisplayAsPassword=function(a){a=eval_e(a);assert("number"!==typeof a,"setDisplayAsPassword parameter type incorrect!!");this.displayAsPassword=1==a?!0:!1};d.setType=function(a){a=eval_e(a);assert("string"!==typeof a,"setType parameter type incorrect!!");
this.type=a};d.setWordWrap=function(a){var c=eval_e(a);assert("number"!==typeof c,"setType setWordWrap type incorrect!!");this.wordWrap=1==a?!0:!1};d.loadFromJSON=function(a){};d.saveToJSON=function(){};d.clone=function(){var a=new e;a.name=this.name;a.collision=this.collision;a.behaivors=[];a.collisionGroupID=this.collisionGroupID;a.anchorX=this.anchorX;a.anchorY=this.anchorY;a.type=this.type;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;a.scale=this.scale;a.scaleX=this.scaleX;a.scaleY=
this.scaleY;a.angle=this.angle;a.alpha=this.alpha;a.visible=this.visible;a.collision=this.collision;a.mirrored=this.mirrored;a.fontFamily=this.fontFamily;a.textColor=this.textColor;a.size=this.size;a.textAlign=this.textAlign;a.verticalAlign=this.verticalAlign;a.italic=this.italic;a.border=this.border;a.borderColor=this.borderColor;a.background=this.background;a.backgourndColor=this.backgourndColor;a.text=this.text;a.italic=this.italic;a.enableInput=this.enableInput;a.bold=this.bold;a.displayAsPassword=
this.displayAsPassword;a.maxChars=this.maxChars;a.global=this.global;a.layer=this.layer;for(var c=0;c<this.behaivors.length;c++){var b=this.behaivors[c].clone();a.addBehavior(b)}for(var d in this.variables)a.addVariable(d,this.variables[d]);return a};return e}(AIDisplayObject);AITextField.prototype.__class__="AITextField";
var AITiledBackground=function(b){function e(){b.call(this);this.name="tiledBackground"}__extends(e,b);var d=e.prototype;d.createBitmap=function(a){this._bitmapURL=a;var c=this,b=Utils.getTexture(a);if(null!=b)var d=b[0];null!=d?(c._bitmap.texture=d,c._bitmap.fillMode=egret.BitmapFillMode.REPEAT,c._bitmap.width=c.width,c._bitmap.height=c.height,b&&(c._bitmap.x=b[1],c._bitmap.y=b[2]),c._sourceWidth=d.textureWidth,c._sourceHeight=d.textureHeight,c.container.addChild(c._bitmap),c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,
c.onResourceLoaded))):RES.getResByUrl(a,function(a){a&&(c._bitmap.texture=a,c._bitmap.fillMode=egret.BitmapFillMode.REPEAT,c._bitmap.width=c.width,c._bitmap.height=c.height,c._sourceWidth=a.textureWidth,c._sourceHeight=a.textureHeight,c.container.addChild(c._bitmap),c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.onResourceLoaded)))},this,RES.ResourceItem.TYPE_IMAGE)};d.loadFromJSON=function(a){};d.saveToJSON=function(){};d.clone=function(){var a=new e;a.name=this.name;a.x=this.x;a.y=this.y;
a.width=this.width;a.height=this.height;a.scale=this.scale;a.scaleX=this.scaleX;a.scaleY=this.scaleY;a.angle=this.angle;a.alpha=this.alpha;a.visible=this.visible;a.mirrored=this.mirrored;a.collision=this.collision;a.collisionGroupID=this.collisionGroupID;a.anchorX=this.anchorX;a.anchorY=this.anchorY;a._bitmap.fillMode=egret.BitmapFillMode.REPEAT;a.global=this.global;a.layer=this.layer;a.createBitmap(this._bitmapURL);a.behaivors=[];for(var c=0,b=this.behaivors.length;c<b;c++){var d=this.behaivors[c].clone();
a.addBehavior(d)}for(var m in this.variables)a.addVariable(m,this.variables[m]);return a};return e}(AISprite);AITiledBackground.prototype.__class__="AITiledBackground";
var AITiledMap=function(b){function e(){b.call(this)}__extends(e,b);var d=e.prototype;d.createTiled=function(){if(this.url){var a=this,c=new egret.URLLoader;c.dataFormat=egret.URLLoaderDataFormat.TEXT;c.addEventListener(egret.Event.COMPLETE,function(c){try{var b=egret.XML.parse(c.target.data)}catch(d){throw Error("tmx\u6587\u4ef6\u683c\u5f0f\u4e0d\u6b63\u786e\uff01");}a.tiledMap=new TMXTilemap(LayoutDecoder.sceneWidth,LayoutDecoder.sceneHeight,b,a.url);a.tiledMap.render();a.container.addChild(a.tiledMap)},
this);c.load(new egret.URLRequest(a.url));c.addEventListener(egret.IOErrorEvent.IO_ERROR,function(a){throw Error("TMXTiledMap\u52a0\u8f7d\u9519\u8bef\uff01\uff01");},this)}};Object.defineProperty(d,"width",{set:function(a){},enumerable:!0,configurable:!0});Object.defineProperty(d,"height",{set:function(a){},enumerable:!0,configurable:!0});d.loadFromJSON=function(a){};d.saveToJSON=function(){};d.destory=function(){this.tiledMap&&this.tiledMap.parent&&(this.tiledMap.parent.removeChild(this.tiledMap),
this.tiledMap.destory());b.prototype.destory.call(this)};d.clone=function(){var a=new e;a.name=this.name;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;a.scale=this.scale;a.scaleX=this.scaleX;a.scaleY=this.scaleY;a.angle=this.angle;a.alpha=this.alpha;a.visible=this.visible;a.mirrored=this.mirrored;a.collision=this.collision;a.collisionGroupID=this.collisionGroupID;a.anchorX=this.anchorX;a.anchorY=this.anchorY;a.global=this.global;a.layer=this.layer;a.createTiled();a.behaivors=[];for(var c=
0,b=this.behaivors.length;c<b;c++){var d=this.behaivors[c].clone();a.addBehavior(d)}for(var m in this.variables)a.addVariable(m,this.variables[m]);return a};e.aStars={};return e}(AIDisplayObject);AITiledMap.prototype.__class__="AITiledMap";
var AIWeiXin=function(b){function e(){b.call(this);if(null!=e._instance)throw Error("AISystem \u4e3a\u5355\u4f8b\uff01\uff01\uff01");this.name="Weixin"}__extends(e,b);var d=e.prototype;Object.defineProperty(e,"instance",{get:function(){null==this._instance&&(this._instance=new e);return this._instance},enumerable:!0,configurable:!0});d.initialize=function(){this.prevUrl=window.location.href;var a=this.prevUrl.lastIndexOf("/");this.prevUrl=this.prevUrl.slice(0,a+1);this.weixinSDK=new WeixinSDK;this.weixinSDK.debug=
this.weixinDebug;this.weixinSDK.signUrl=this.weixinSignUrl;this.weixinSDK.initialize();this.setShareTimeline(this.title,this.link,this.imgUrl);this.setShareAppMessage(this.title,this.desc,this.link,this.imgUrl);this.setShareQQ(this.title,this.desc,this.link,this.imgUrl);this.setShareWeiBoMessage(this.title,this.desc,this.link,this.imgUrl);this.setShareQZone(this.title,this.desc,this.link,this.imgUrl);var c=this;this.weixinSDK.onTimelineTrigger=function(){c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,
c.weixinTimelineTrigger))};this.weixinSDK.onTimelineCancel=function(){c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.weixinTimelineCancel))};this.weixinSDK.onTimelineSuccess=function(){c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.weixinTimelineSuccess))};this.weixinSDK.onTimelineFail=function(){c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.weixinTimelineFail))};this.weixinSDK.onAppMessageTrigger=function(){c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.weixinShareAppMessageTrigger))};
this.weixinSDK.onAppMessageCancel=function(){c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.weixinShareAppMessageCancel))};this.weixinSDK.onAppMessageSuccess=function(){c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.weixinShareAppMessageSuccess))};this.weixinSDK.onAppMessageFail=function(){c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.weixinShareAppMessageFail))};this.weixinSDK.onQQTrigger=function(){c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.weixinShareQQTrigger))};
this.weixinSDK.onQQCancel=function(){c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.weixinShareQQCancel))};this.weixinSDK.onQQSuccess=function(){c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.weixinShareQQSuccess))};this.weixinSDK.onQQFail=function(){c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.weixinShareQQFail))};this.weixinSDK.onWeiBoTrigger=function(){c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.weixinShareTXWeiBoTrigger))};this.weixinSDK.onWeiBoCancel=
function(){c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.weixinShareTXWeiBoCancel))};this.weixinSDK.onWeiBoSuccess=function(){c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.weixinShareTXWeiBoSuccess))};this.weixinSDK.onWeiBoFail=function(){c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.weixinShareTXWeiBoFail))};this.weixinSDK.onQZoneTrigger=function(){c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.weixinShareQZoneTrigger))};this.weixinSDK.onQZoneCancel=function(){c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,
c.weixinShareQZoneCancel))};this.weixinSDK.onQZoneSuccess=function(){c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.weixinShareQZoneSuccess))};this.weixinSDK.onQZoneFail=function(){c.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,c.weixinShareQZoneFail))}};d.weixinTimelineTrigger=function(a){return{instances:[this],status:!0}};d.weixinTimelineCancel=function(a){return{instances:[this],status:!0}};d.weixinTimelineSuccess=function(a){return{instances:[this],status:!0}};d.weixinTimelineFail=
function(a){return{instances:[this],status:!0}};d.weixinShareAppMessageTrigger=function(a){return{instances:[this],status:!0}};d.weixinShareAppMessageCancel=function(a){return{instances:[this],status:!0}};d.weixinShareAppMessageSuccess=function(a){return{instances:[this],status:!0}};d.weixinShareAppMessageFail=function(a){return{instances:[this],status:!0}};d.weixinShareQQTrigger=function(a){return{instances:[this],status:!0}};d.weixinShareQQCancel=function(a){return{instances:[this],status:!0}};
d.weixinShareQQSuccess=function(a){return{instances:[this],status:!0}};d.weixinShareQQFail=function(a){return{instances:[this],status:!0}};d.weixinShareTXWeiBoTrigger=function(a){return{instances:[this],status:!0}};d.weixinShareTXWeiBoCancel=function(a){return{instances:[this],status:!0}};d.weixinShareTXWeiBoSuccess=function(a){return{instances:[this],status:!0}};d.weixinShareTXWeiBoFail=function(a){return{instances:[this],status:!0}};d.weixinShareQZoneTrigger=function(a){return{instances:[this],
status:!0}};d.weixinShareQZoneCancel=function(a){return{instances:[this],status:!0}};d.weixinShareQZoneSuccess=function(a){return{instances:[this],status:!0}};d.weixinShareQZoneFail=function(a){return{instances:[this],status:!0}};Object.defineProperty(d,"imagePrevUrl",{get:function(){var a=this.prevUrl.split("#")[0],a=a.split("?")[0],c=a.lastIndexOf("/");return a=a.slice(0,c+1)},enumerable:!0,configurable:!0});d.setShareTimeline=function(a,c,b){null==this.weixinSDK.bodyMenuShareTimeline()?assert(!0,
"this.weixinSDK.bodyMenuShareTimeline\u4e3a\u7a7a\uff01"):(this.weixinSDK.bodyMenuShareTimeline().title=eval_e(a),this.weixinSDK.bodyMenuShareTimeline().link=eval_e(c),this.weixinSDK.bodyMenuShareTimeline().imgUrl=this.imagePrevUrl+b,this.weixinDebug&&alert("\u670b\u53cb\u5708\u56fe\u7247\u5206\u4eab\u7684\u5730\u5740\uff1a"+this.imagePrevUrl+b))};d.setShareAppMessage=function(a,c,b,d,e,l){null==this.weixinSDK.bodyMenuShareAppMessage()?assert(!0,"this.weixinSDK.bodyMenuShareAppMessage\u4e3a\u7a7a\uff01"):
(this.weixinSDK.bodyMenuShareAppMessage().title=eval_e(a),this.weixinSDK.bodyMenuShareAppMessage().desc=eval_e(c),this.weixinSDK.bodyMenuShareAppMessage().link=eval_e(b),this.weixinSDK.bodyMenuShareAppMessage().imgUrl=this.imagePrevUrl+d,this.weixinDebug&&alert("\u670b\u53cb\u56fe\u7247\u5206\u4eab\u7684\u5730\u5740\uff1a"+this.imagePrevUrl+d))};d.setShareQQ=function(a,c,b,d,e,l){null==this.weixinSDK.bodyMenuShareQQ()?assert(!0,"this.weixinSDK.bodyMenuShareQQ\u4e3a\u7a7a\uff01"):(this.weixinSDK.bodyMenuShareQQ().title=
eval_e(a),this.weixinSDK.bodyMenuShareQQ().desc=eval_e(c),this.weixinSDK.bodyMenuShareQQ().link=eval_e(b),this.weixinSDK.bodyMenuShareQQ().imgUrl=this.imagePrevUrl+d,this.weixinDebug&&alert("QQ\u56fe\u7247\u5206\u4eab\u7684\u5730\u5740\uff1a"+this.imagePrevUrl+d))};d.setShareWeiBoMessage=function(a,c,b,d){null==this.weixinSDK.bodyMenuShareWeibo()?assert(!0,"this.weixinSDK.bodyMenuShareWeibo\u4e3a\u7a7a\uff01"):(this.weixinSDK.bodyMenuShareWeibo().title=eval_e(a),this.weixinSDK.bodyMenuShareWeibo().desc=
eval_e(c),this.weixinSDK.bodyMenuShareWeibo().link=eval_e(b),this.weixinSDK.bodyMenuShareWeibo().imgUrl=this.imagePrevUrl+d,this.weixinDebug&&alert("\u5fae\u535a\u56fe\u7247\u5206\u4eab\u7684\u5730\u5740\uff1a"+this.imagePrevUrl+d))};d.setShareQZone=function(a,c,b,d){null==this.weixinSDK.bodyMenuShareQZone()?assert(!0,"this.weixinSDK.bodyMenuShareQZone\u4e3a\u7a7a\uff01"):(this.weixinSDK.bodyMenuShareQZone().title=eval_e(a),this.weixinSDK.bodyMenuShareQZone().desc=eval_e(c),this.weixinSDK.bodyMenuShareQZone().link=
b,this.weixinSDK.bodyMenuShareQZone().imgUrl=this.imagePrevUrl+d,this.weixinDebug&&alert("QQ\u7a7a\u95f4\u56fe\u7247\u5206\u4eab\u7684\u5730\u5740\uff1a"+this.imagePrevUrl+d))};return e}(AIDisplayObject);AIWeiXin.prototype.__class__="AIWeiXin";
var LayoutDecoder=function(){function b(){}b.getTexture=function(b){for(var d in this.spriteSheets){var a=this.spriteSheets[d].getTexture(b);if(void 0!=a)return a}return null};b.saveLayout=function(b){var d=EgretConfig.layouts[b],a=new LayoutVo;a.layoutName=b;a.nextLayoutName=d.$next;a.prevLayoutName=d.$previous;a.eventSheetName=d.$eventSheet;d=d.$version;a.version=d?d:"1.1.1";this.layouts[b]=a};b.start=function(b){assert(null==b||""==b,"layout canot null!");var d=EgretConfig.layouts[b];assert(null==
d,"can not find"+b);var a=d.$sceneSize.split(",");this.sceneWidth=+a[0];this.sceneHeight=+a[1];this.saveLayout(b);this.currentLayoutName=b;if(b=d.children)for(d=0,a=b.length;d<a;d++){var c=this.decodeInstance(b[d]);EgretWorld.getInstance().addChild(c)}for(var h in this.curSceneInstances)registerObject(this.curSceneInstances[h].name,this.curSceneInstances[h]);registerObject("Touch",AITouch.instance);registerObject("System",AISystem.instance);registerObject("Keyboard",AIKeyboard.instance);registerObject("Browser",
AIBrowser.instance);registerObject("WebStorage",AIWebStorage.instance);registerObject("WebSocket",AIWebSocket.instance);registerObject("Ajax",AIAjax.instance)};b.decodeInstances=function(b){var d=[];if(b&&(b=b.children))for(var a=0;a<b.length;a++){var c=this.decodeInstance(b[a]);d[a]=c}return d};b.decodeInstance=function(b){if("spritesheets"!=b.localName){var d=parseFloat(b.$UID),a=b.$plugin,c=b.$name,h="true"==b.$isVisual,k=this.curSceneInstances[d];if(void 0==k)k=Utils.getInstance(a);else return k;
k.isModel=!0;k.name=c;k.id=d;k.isVisual=h;k.parallaxX=+b.$parallaxX;k.parallaxY=+b.$parallaxY;if(null!=b.children){null==this.instanceNames[c]&&(this.instanceNames[c]=c);for(var c=!1,h=0,m=b.children.length;h<m;h++){var l=b.children[h],f=l.$name,g=l.$value,n=l.$valueDataType;switch(f){case "layer":c=!0;k[f]=parseFloat(g);break;case "actions":k.setData(l.children);break;case "behaviors":this.decodeBehaviors(k,l);break;default:switch(n){case "number":k[f]=parseFloat(g);break;case "string":k[f]=decodeURIComponent(g);
break;case "boolean":k[f]="true"==g;break;case "any":k[f]=eval_e(decodeURIComponent(g))}}}c||(k.layer=0);switch(a){case "AISprite":k.createBitmap(decodeURIComponent(k.url));break;case "AITiledBackground":k.createBitmap(decodeURIComponent(k.url));break;case "AIMovieClip":this.movieClipRenders.push(k);break;case "AIProgressBar":b=k;var a=k.back9Grid.split(","),c=k.fore9Grid.split(","),p,q;4==a.length&&(p=new egret.Rectangle(+a[0],+a[1],+a[2],+a[3]));4==c.length&&(q=new egret.Rectangle(+c[0],+c[1],+c[2],
+c[3]));b.initialize(decodeURIComponent(k.backgroundUrl),decodeURIComponent(k.foregroundUrl),k.width,k.height,p,q);break;case "AIBitmapText":k.createBitmapText(decodeURIComponent(k.bmpUrl),decodeURIComponent(k.fntUrl));break;case "AIAudio":k.startAudio();break;case "AIWeiXin":k.initialize();break;case "AITiledMap":k.createTiled();break;case "AIScale9GridBitmap":q=k.scale9Grid.split(","),4==q.length&&(p=new egret.Rectangle(+q[0],+q[1],+q[2],+q[3])),k.createScale9GridBitmap(decodeURIComponent(k.url),
p)}null==this.curSceneInstances[d]&&(this.curSceneInstances[d]=k);return k}}};b.decodeBehaviors=function(b,d){if(b&&d&&b.global){var a=d.children;if(a)for(var c=0;c<a.length;c++){var h=a[c],k=Utils.getInstance(h.$behaviorType);k.name=h.$name;if(h=h.children)for(var m=h.length,l=0;l<m;l++){var f=h[l],g=f.$name,n=decodeURIComponent(f.$value);switch(f.$valueDataType){case "number":k[g]=+n;break;case "string":k[g]=n+"";break;case "any":k[g]=n;break;case "boolean":k[g]=Boolean(eval_e(n))}}b instanceof
AIDisplayObject?b.addBehavior(k):assert(!0,b+"must instance of AIDisplayObject for have Behaivors");k.onCreate();k.isCreated=!0}}};b.getInstanceNames=function(){var b="System|Keyboard|AITouch|AIFunction|AIWeixin|Browser|WebStorage|WebSocket|Ajax",d;for(d in this.instanceNames)b+="|"+d;return b};b.destory=function(){for(var b in this.curSceneInstances)this.curSceneInstances[b].global||delete this.curSceneInstances[b];this.instanceNames={}};b.curSceneInstances={};b.instanceNames={};b.layouts={};b.movieClipRenders=
[];b.spriteSheets={};b.spriteSheetDatas={};return b}();LayoutDecoder.prototype.__class__="LayoutDecoder";var OnForEachArrayElementEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnForEachArrayElementEvent.prototype.__class__="OnForEachArrayElementEvent";var ForEachOrderEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);ForEachOrderEvent.prototype.__class__="ForEachOrderEvent";
var ForEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);ForEvent.prototype.__class__="ForEvent";var TimerActualData=function(){return function(){this.remainSecondsTime=this.remainTime=this.runTimeSecondsTime=this.runTime=this.oldRunSecondTime=this.actualTickDuration=this.newTick=this.lastTick=this.totalTime=this.totalSecondTime=this.key=0}}();TimerActualData.prototype.__class__="TimerActualData";
var TimerData=function(){return function(){this.actualTickDuration=this.lastTick=this.newTick=this.repeat=this.currentCount=this.runTime=this.delay=this.key=0}}();TimerData.prototype.__class__="TimerData";
var AIMovieClip=function(b){function e(){b.call(this);this._loop=Number.MAX_VALUE;this._playOrder=this._speedRate=1;this.actions={};this.currentActionName="\u52a8\u4f5c";this.name="MovieClip"}__extends(e,b);var d=e.prototype;d.setData=function(a){this.data=a;this.actions={};for(var c,b,d=0;d<a.length;d++){var e=a[d],l=e.$name,f=+e.$fps,g=+e.$loop;c||(c=l);isNaN(b)&&(b=g);0>f&&(f=1E-5);f={name:l,movieFrames:[],duration:1E3/f,loop:g};this.decodeFrame(f,e.children);this.actions[l]=f}this.currentActionName=
c;this._currentFrame=1;this._loop=b;this._isPlaying=!0;this.play(this._loop)};d.decodeFrame=function(a,c){if(c){for(var b=0;b<c.length;b++)a.movieFrames[b]={src:c[b].$src};a.totalFrames=c.length;this._oldTime=egret.getTimer();this.container.addChild(this._bitmap)}};d.render=function(){if(!(this._currentloop>=this._loop)&&this.currentActionName&&(this.currentAction=this.actions[this.currentActionName])){this._totalFrames=this.currentAction.totalFrames;var a=egret.getTimer(),c=this.currentAction.movieFrames[this._currentFrame-
1];if(c&&(c=decodeURIComponent(c.src),a-this._oldTime>=this.currentAction.duration/this._speedRate)){var b=Utils.getTexture(c);if(null!=b)var d=b[0];null!=d?(this._bitmap.texture=d,b&&(this._bitmap.x=b[1],this._bitmap.y=b[2])):RES.getResByUrl(c,function(a){this._bitmap.texture=a},this);this._oldTime=a;this._isPlaying&&(1==this._playOrder?this._currentFrame<this._totalFrames?(this._currentFrame++,this._currentFrame==this._totalFrames&&this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onPlayComplete))):
(this._currentFrame=1,this._currentloop++):1<this._currentFrame?(this._currentFrame--,1==this._currentFrame&&this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onPlayComplete))):(this._currentFrame=this._totalFrames,this._currentloop++));this._currentloop==this._loop&&(this._isPlaying=!1,this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onAllPlayComplete)))}}};d.onAllPlayComplete=function(a){return{instances:[this],status:!0}};d.onPlayComplete=function(a){return{instances:[this],
status:!0}};d.isPlayingCheck=function(a){return{instances:[this],status:this._isPlaying}};d.compareFrame=function(a){return{instances:[this],status:Utils.compare(this._currentFrame,a.operationType,a.frame)}};d.compareSpeed=function(a){return{instances:[this],status:Utils.compare(this._speedRate,a.operationType,a.speed)}};d.comparePlayOrder=function(a){return{instances:[this],status:this._playOrder==eval_e(a.order)}};d.compareLoop=function(a){return{instances:[this],status:Utils.compare(this._loop,
a.operationType,a.loop)}};d.compareCurrentAction=function(a){return{instances:[this],status:this.currentActionName==eval_e(a.action)}};d.gotoAndPlay=function(a,c){this._currentloop=0;a=eval_e(a);c=eval_e(c);assert("number"!==typeof a||"number"!==typeof c,"AIMovieClip gotoAndPlay parameter type incorrect!!");this._currentFrame=a;this._loop=c;this._isPlaying=!0};d.gotoAndStop=function(a){this._currentloop=0;a=eval_e(a);assert("number"!==typeof a,"AIMovieClip gotoAndStop parameter type incorrect!!");
this._currentFrame=a;this._isPlaying=!1};d.play=function(a){this._currentloop=0;a=eval_e(a);assert("number"!==typeof a,"AIMovieClip play parameter type incorrect!!");this._loop=0>=a?Number.MAX_VALUE:a;this._isPlaying=!0};d.stop=function(){this._currentloop=0;this._isPlaying=!1};d.prevFrame=function(){this._currentloop=0;1<this._currentFrame&&this._currentFrame--;this._isPlaying=!1};d.nextFrame=function(){this._currentloop=0;this._currentFrame<this._totalFrames&&this._currentFrame++;this._isPlaying=
!1};d.setLoop=function(a){a=eval_e(a);assert("number"!==typeof a,"AIMovieClip setLoop parameter type incorrect!!");this._loop=a};d.setPlayOrder=function(a){a=eval_e(a);assert("number"!==typeof a,"AIMovieClip setPlayOrder parameter type incorrect!!");this._playOrder=a||1};d.setSpeedRate=function(a){a=eval_e(a);assert("number"!==typeof a,"AIMovieClip setSpeedRate parameter type incorrect!!");this._speedRate=a||1;0>=this._speedRate&&(this.speedRate=1E-6)};d.setAction=function(a,c){a=eval_e(a);c=eval_e(c);
assert("number"!==typeof a||"string"!==typeof c,"AIMovieClip setAction parameter type incorrect!!");this.currentActionName=c||"\u52a8\u4f5c";this.currentAction=this.actions[c];var b;switch(a){case 1:b=1;break;case 2:b=Math.min(this.currentAction.totalFrames,this.currentFrame)}this.gotoAndPlay(b,this.loop)};Object.defineProperty(d,"currentFrame",{get:function(){return this._currentFrame},enumerable:!0,configurable:!0});Object.defineProperty(d,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,
configurable:!0});Object.defineProperty(d,"totalFrames",{get:function(){return this._totalFrames},enumerable:!0,configurable:!0});Object.defineProperty(d,"loop",{get:function(){return this._loop},enumerable:!0,configurable:!0});Object.defineProperty(d,"speedRate",{get:function(){return this._speedRate},enumerable:!0,configurable:!0});Object.defineProperty(d,"playOrder",{get:function(){return this._playOrder},enumerable:!0,configurable:!0});d.clone=function(){var a=new e;a.name=this.name;a.x=this.x;
a.y=this.y;a.width=this.width;a.height=this.height;a.scale=this.scale;a.scaleX=this.scaleX;a.scaleY=this.scaleY;a.angle=this.angle;a.alpha=this.alpha;a.visible=this.visible;a.mirrored=this.mirrored;a.collision=this.collision;a.collisionGroupID=this.collisionGroupID;a.anchorX=this.anchorX;a.anchorY=this.anchorY;a.global=this.global;a.layer=this.layer;a.setData(this.data);LayoutDecoder.movieClipRenders.push(a);a.behaivors=[];for(var c=0;c<this.behaivors.length;c++){var b=this.behaivors[c].clone();a.addBehavior(b)}for(var d in this.variables)a.addVariable(d,
this.variables[d]);return a};return e}(AISprite);AIMovieClip.prototype.__class__="AIMovieClip";var EventVo=function(){function b(){this._id=0;b._uniqueID+=1;this._id=b._uniqueID}Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});b._uniqueID=0;return b}();EventVo.prototype.__class__="EventVo";
var TexturePool=function(){function b(){}b.addTexture=function(b,d){this.texturePools[b]=d};b.removeTexture=function(b){this.texturePools[b]=null};b.getTexture=function(b){return this.texturePools[b]};b.texturePools={};return b}();TexturePool.prototype.__class__="TexturePool";
var EgretToolUI=function(b){function e(){b.call(this)}__extends(e,b);e.init=function(b){b&&(this.stage=b,this.renderContainer=new egret.DisplayObjectContainer,b.addChild(e.renderContainer),this.preContainer=new egret.Sprite,b.addChild(e.preContainer),this.loadingContainer=new egret.Sprite,b.addChild(this.loadingContainer))};return e}(egret.DisplayObjectContainer);EgretToolUI.prototype.__class__="EgretToolUI";var EventSheetVo=function(){return function(){}}();EventSheetVo.prototype.__class__="EventSheetVo";
var EventSheetDecoder=function(){function b(){}b.saveEventSheetData=function(b){var d=EgretConfig.eventSheets[b];this.eventsheetVo=new EventSheetVo;this.eventsheetVo.eventSheetName=b;this.eventsheetVo.nextEventSheetName=d.$next;this.eventsheetVo.prevEventSheetName=d.$previous;this.eventsheetVo.layoutName=d.$layout;d=d.$version;this.eventsheetVo.version=d?d:"1.1.1";this.eventSheets[b]=this.eventsheetVo};b.start=function(b){assert(null==b||""==b,b+" can not null!");this.saveEventSheetData(b);var d=
EgretConfig.eventSheets[b];assert(null==d,"can not find "+b);this.curSceneInstancesData=[];this.curSceneEventsData=[];this.curSceneAiObjects=[];this.curSceneAiObjectsHash={};this.curSceneEvents=[];EgretWorld.getInstance();this.currentEventSheetName=b;b=d.children;if(void 0!==b){for(var d=0,a=b.length;d<a;d++){var c=b[d];switch(c.$type){case "instance":LayoutDecoder.curSceneInstances[c.$UID]&&this.curSceneInstancesData.push(c);break;case "event":this.curSceneEventsData.push(c);break;case "variable":var h=
c.$variableName,k=c.$variableType,c=decodeURIComponent(c.$initValue);if(void 0==AISystem.instance[h])switch(k){case "number":AISystem.instance[h]=+c;break;case "string":AISystem.instance[h]=c+"";break;case "any":AISystem.instance[h]=c;break;case "boolean":AISystem.instance[h]=Boolean(eval_e(c))}}}this.decode()}};b.decode=function(){this.decodePropertys();this.decodeEvents();this._oldTime=egret.getTimer();AISystem.instance.sendSceneInitComplete();EgretToolUI.stage.addEventListener(egret.Event.ENTER_FRAME,
this.eventsheetRender,this);this.onInstancesCreate()};b.decodePropertys=function(){for(var b=0,d=this.curSceneInstancesData.length;b<d;b++){var a=this.curSceneInstancesData[b],c=+a.$UID,h=LayoutDecoder.curSceneInstances[c];if(null==h)assert(!0,"EventSheetDecoder UID:"+c+" instance is null!");else if(this.curSceneAiObjectsHash[h.name]=h,this.curSceneAiObjects.push(h),a=a.children)for(var c=a.length,k=0;k<c;k++)this.decodeInstancePropertie(a[k],h)}};b.decodeEvents=function(){for(var b=0;b<this.curSceneEventsData.length;b++){var d=
this.decodeEvent(this.curSceneEventsData[b],b);d&&this.curSceneEvents.push(d)}};b.decodeEvent=function(b,d){var a=new AIEvent;a.index=d;var c=b.$conditionRelationShip;c&&(a.conditionRelationShip=eval_e(c));if(c=b.$triggerOnceWhileTrue)a.triggerOnceWhileTrue=eval_e(c);c=b.children;if(null!=c){for(var h,k=c.length,m=0,l=!1,f=0;f<k;f++)if("conditionBlock"===c[f].$type){l=!0;break}if(l)for(f=l=0;f<k;f++){var g=c[f],n=g.$type,p;switch(n){case "conditionBlock":p=this.decodeConditionBlock(g.children,m,a);
p.event=a;null==a.conditionBlocks&&(a.conditionBlocks=[]);a.conditionBlocks.push(p);0===m?h=p:(p.prevConditionBlock=h,h=p,p.prevConditionBlock.nextConditionBlock=p);m++;break;case "event":null==a.children&&(a.children=[]),g=this.decodeEvent(g,l),g.parent=a,a.children.push(g),l++}}else{l=0;p=[];for(f=0;f<k;f++)switch(g=c[f],n=g.$type,n){case "condition":case "action":p.push(g);break;case "event":null==a.children&&(a.children=[]),g=this.decodeEvent(g,l),g.parent=a,a.children.push(g),l++}p=this.decodeConditionBlock(p,
0,a);p.event=a;null==a.conditionBlocks&&(a.conditionBlocks=[]);a.conditionBlocks.push(p);0!==m&&(p.prevConditionBlock=h,p.prevConditionBlock.nextConditionBlock=p)}return a}};b.decodeInstancePropertie=function(b,d){switch(b.$type){case "behavior":if(d.global)break;var a=Utils.getInstance(b.$behaviorType);a.name=b.$name;var c=b.children;if(c)for(var h=c.length,k=0;k<h;k++){var m=c[k],l=m.$name,f=decodeURIComponent(m.$value);switch(m.$valueDataType){case "number":a[l]=+f;break;case "string":a[l]=f+"";
break;case "any":a[l]=f;break;case "boolean":a[l]=Boolean(eval_e(f))}}d instanceof AIDisplayObject?d.addBehavior(a):assert(!0,d+"must instance of AIDisplayObject for have Behaivors");a.onCreate();a.isCreated=!0;break;case "variable":switch(a=b.$variableName,c=b.$variableType,h=decodeURIComponent(b.$initValue),c){case "number":d.addVariable(a,+h);break;case "string":d.addVariable(a,h+"");break;case "any":d.addVariable(a,h);break;case "boolean":d.addVariable(a,Boolean(eval_e(h)))}}};b.decodeConditionBlock=
function(b,d,a){if(b){var c=new ConditionBlock;c.index=d;c.conditions=[];c.actions=[];d=b.length;for(var h=0,k=0,m,l,f=0;f<d;f++){var g=b[f];switch(g.$type){case "condition":g=this.decodeCondition(g,h,a);g.conditionBlock=c;g.event=a;void 0==g.callCondition&&assert(!0,"\u76ee\u6807\uff1a"+g.callTarget+"\u6ca1\u6709"+g.callConditionName+"\u65b9\u6cd5\uff01\uff01\uff01");c.conditions.push(g);0===h?m=g:(g.prevCondition=m,m=g,g.prevCondition.nextCondition=g);h++;break;case "action":g=this.decodeAction(g,
k,a),g.conditionBlock=c,g.event=a,c.actions.push(g),0===k?l=g:(g.prevAction=l,l=g,g.prevAction.nextAction=g),k++}}return c}return null};b.decodeConditionProperties=function(b,d){var a=d.children;if(a)for(var c=a.length,h=0;h<c;h++){var k=a[h],m=k.$name,l=k.$value,f=k.$variable?"true"===k.$variable:!1;switch(k.$valueDataType){case "number":b[m]=+l;break;case "string":k=decodeURIComponent(l+"");k=f?k:Utils.getTransformationStr(k);b[m]=f?k:eval_e(k);break;case "any":b[m]=f?decodeURIComponent(k.$value):
Utils.getTransformationStr(decodeURIComponent(k.$value));break;case "boolean":b[m]=Boolean(eval_e(l))}}return b};b.decodeCondition=function(b,d,a){var c=b.$target,h=b.$behaviorName,k=Utils.getInstance(b.$paramsClass),m=b.$callName,l=!1;b.$invert&&(l="true"===b.$invert);var f=new Condition;f.index=d;f.firstCondition=0==d?f:null;f.targetName=c;f.paramClassName=b.$paramsClass;f.isInvert=l;f.paramsInstance=k;f.callConditionName=m;1===Version.compareVersion(this.eventsheetVo.version,"1.1.1")?(d=0,b.$operatorType&&
(d=+b.$operatorType),f.operatorType=d):f.operatorType=+!a.conditionRelationShip;k&&(k.data=b,f.isTrigger=Boolean(eval_e(b.$isTrigger)),f.isTrigger&&this.triggerConditions.push(f));"onCollisionWithOtherObject"==m&&(b=b.children)&&(b=b[0].$value,k=eval_e(Utils.getTransformationStr(b)),null==this.collisionSearchs[c]?(d=new CollisionSearchVo,d.owerName=c,k instanceof AIObject&&d.enemyNames.push(b),this.collisionSearchs[c]=d):(d=this.collisionSearchs[c],k instanceof AIObject&&d.enemyNames.push(b)));switch(c){case "System":f.callTarget=
AISystem.instance;f.callCondition=AISystem.instance[m];break;case "Keyboard":f.callTarget=AIKeyboard.instance;f.callCondition=AIKeyboard.instance[m];break;case "Touch":f.callTarget=AITouch.instance;f.callCondition=AITouch.instance[m];break;case "Browser":f.callTarget=AIBrowser.instance;f.callCondition=AIBrowser.instance[m];break;case "WebStorage":f.callTarget=AIWebStorage.instance;f.callCondition=AIWebStorage.instance[m];break;case "WebSocket":f.callTarget=AIWebSocket.instance;f.callCondition=AIWebSocket.instance[m];
break;case "Ajax":f.callTarget=AIAjax.instance;f.callCondition=AIAjax.instance[m];break;default:var g;void 0==EgretWorld.getInstance().objectHash[c]&&alert("\u5f53\u524d\u573a\u666f\u4e2d\u6ca1\u6709"+c+"\u5b9e\u4f8b\u5bf9\u8c61\uff01\uff01\uff01");c=EgretWorld.getInstance().objectHash[c][0];if(null!=h&&""!=h){if(c){b=c.behaivors;k=0;for(d=b.length;k<d;k++)if(a=b[k],a.name==h){g=a;break}g=null==g?c:g}}else g=c;f.callTarget=g;f.callCondition=f.callTarget[m];void 0===f.callCondition&&assert(!0,"\u6761\u4ef6\u76ee\u6807:"+
f.targetName+",\u6ca1\u6709\u8c03\u7528\u7684\u65b9\u6cd5\u540d\uff1a"+m)}return f};b.decodeAction=function(b,d,a){a=b.$target;var c=b.$behaviorName,h=b.$callName,k;switch(a){case "System":k=AISystem.instance;break;case "Keyboard":k=AIKeyboard.instance;break;case "Touch":k=AITouch.instance;break;case "Browser":k=AIBrowser.instance;break;case "WebStorage":k=AIWebStorage.instance;break;case "WebSocket":k=AIWebSocket.instance;break;case "Ajax":k=AIAjax.instance;break;default:if(this.curSceneAiObjects)for(var m=
0,l=this.curSceneAiObjects.length;m<l;m++)if(this.curSceneAiObjects[m].name==a){k=this.curSceneAiObjects[m];var f;if(null!=c&&""!=c&&k&&(m=k.behaivors)){k=0;for(l=m.length;k<l;k++){var g=m[k];if(g.name==c){f=g;break}}k=f}break}}void 0==k&&(k=eval_e(a));f=new Action;f.index=d;f.targetName=a;f.callTarget=k;f.paramData=b.children;f.callHanlderName=h;return f};b.decodeActionParams=function(b){var d=[];if(b&&b.length)for(var a=0,c=b.length;a<c;a++){var h=b[a],k=h.$valueDataType,m=decodeURIComponent(h.$value),
h=h.$variable?"true"===h.$variable:!1,l;switch(k){case "number":l=+m;break;case "string":m=h?m:Utils.getTransformationStr(m);l=h?m:eval_e(m+"");break;case "any":l=h?m:Utils.getTransformationStr(m);break;case "boolean":l=Boolean(eval_e(m))}d.push(l)}return d};Object.defineProperty(b,"tickInterval",{get:function(){return this._tickInterval},enumerable:!0,configurable:!0});b.eventsheetRender=function(b){b=egret.getTimer();this._tick=b-this._oldTime;this._tickInterval=1E3/this._tick;this._oldTime=b;this.renderMovieClips();
this.renderBehaivors();this.renderEvents();this.checkCollistions();this.renderCamera()};b.renderCamera=function(){EgretWorld.getInstance().render()};b.onInstancesCreate=function(){for(var b in LayoutDecoder.curSceneInstances)if(LayoutDecoder.curSceneInstances[b]instanceof AIDisplayObject)LayoutDecoder.curSceneInstances[b].onCreate()};b.renderMovieClips=function(){for(var b=0;b<LayoutDecoder.movieClipRenders.length;b++)LayoutDecoder.movieClipRenders[b].render()};b.renderBehaivors=function(){for(var b=
EgretWorld.getInstance().objectList,d=0;d<b.length;d++){var a=b[d];if(a&&(a=a.behaivors))for(var c=0;c<a.length;c++){var h=a[c];!h.enabled||!h.inst||0===h.inst.dt||1E6<h.inst.dt||h.tick()}}};b.renderEvents=function(){for(var b=AISystem.instance.disableDataEvents,d=0;d<this.curSceneEvents.length;d++)void 0==b[d+1]&&this.execEvent(this.curSceneEvents[d],!1)};b.execEvent=function(b,d,a,c,h){void 0===a&&(a=null);void 0===h&&(h=null);if(c=b.conditionBlocks){for(var k=0;k<c.length;k++){var m=c[k];m.currentConditionStatus=
[];m.results=[];for(var l=m.loopLayers=0;l<m.conditions.length;l++){var f=m.conditions[l];f.conditionInstances={};f.instanceTypeStatus={};f.statusInfo=null}}for(k=0;k<EgretWorld.getInstance().objectList.length;k++){var g=EgretWorld.getInstance().objectList[k];g.currentStatus=!0;g.selfStatus=!0}for(k=0;k<c.length;k++){var m=c[k],n=m.conditions;if(n)for(l=0;l<n.length;l++){var f=n[l],g=f.targetName,p=f.callTarget,q=f.callCondition,r=f.isInvert,s=f.paramsInstance,t;switch(g){case "System":t=[AISystem.instance];
break;case "Touch":t=[AITouch.instance];break;case "Keyboard":t=[AIKeyboard.instance];break;case "Browser":t=[AIBrowser.instance];break;case "WebStorage":t=[AIWebStorage.instance];break;case "WebSocket":t=[AIWebSocket.instance];break;case "Ajax":t=[AIAjax.instance];break;default:t=d&&f.isTrigger?a:EgretWorld.getInstance().objectHash[g]}for(var u=0;u<t.length;u++)if(g=t[u],!g.isDead){var z,w;if(p instanceof BaseBehavior){var x=g.behaivors;if(x)for(w=0;w<x.length;w++){var y=x[w];if(y.name==p.name){z=
y;break}}}this.decodeConditionProperties(s,s.data);w=s;if(f.isTrigger)if(d)w=q.apply(z?z:g,[w]);else break;else w=q.apply(z?z:g,[w]),f.isTrigger&&(w.status=!1);w.status=r?!w.status:w.status;x=w.status;if(w.instances)for(y=0;y<w.instances.length;y++){var v=w.instances[y];d&&f.isTrigger?f==h&&(v.selfStatus=x):v.selfStatus=x;null==f.instanceTypeStatus[v.name]?f.instanceTypeStatus[v.name]={instances:[v],status:x}:(f.instanceTypeStatus[v.name].status=f.instanceTypeStatus[v.name].status||x,f.instanceTypeStatus[v.name].instances.push(v))}(y=
w.data)&&(w.data instanceof ForEvent||w.data instanceof ForEachOrderEvent||w.data instanceof OnForEachArrayElementEvent)&&(m.loopDatas[m.loopLayers++]=y);null==m.results&&(m.results=[]);null==m.results[f.index]&&(m.results[f.index]={});null==f.statusInfo&&(f.statusInfo={});f.statusInfo[g.u_id]={instance:g,condition:f,status:x};null==f.conditionInstances&&(f.conditionInstances={});null==f.conditionInstances[g.u_id]&&(f.conditionInstances[g.u_id]=g)}var p=!1,B;for(B in f.instanceTypeStatus){p=f.instanceTypeStatus[B].status;
break}f.currentStatus=0===l?p:1===f.operatorType?f.prevCondition.currentStatus||p:f.prevCondition.currentStatus&&p;m.currentConditionStatus[f.index]=f.currentStatus}if(0!==m.conditions.length&&(l={},n=!1,m.status=m.conditions[m.conditions.length-1].currentStatus,m.status)){m.event.triggerOnceWhileTrue&&(f=this.curSceneEvents.indexOf(m.event),-1!=f&&this.curSceneEvents.splice(f,1));m.instancesStatus={};for(p=0;p<m.conditions.length;p++)if(f=m.conditions[p],f.currentStatus&&f.instanceTypeStatus){var q=
f.statusInfo,A;for(A in q)r=q[A],s=r.status,void 0==m.instancesStatus[A]?m.instancesStatus[A]={instance:r.instance,status:r.status}:f.prevCondition&&(m.instancesStatus[A].status=0==f.prevCondition.operatorType?m.instancesStatus[A].status&&s:m.instancesStatus[A].status||s)}if(f=m.instancesStatus)for(var C in f)f[C].status&&void 0==l[C]&&(l[C]=f[C].instance),n=!0;if(n&&(m.execActions(l),b.children))for(w=0;w<b.children.length;w++)(m=b.children[w])&&this.execEvent(m,!1)}}}};b.checkCollistions=function(){var b=
EgretWorld.getInstance().objectList,d={},a;for(a in this.collisionSearchs){var c=this.collisionSearchs[a],h=EgretWorld.getInstance().objectHash[c.owerName],k;for(k in h){var m=h[k],l=m.getGlobalBounds();if(null!=l&&!m.isDead)for(var f=0;f<c.enemyNames.length;f++){var g=c.enemyNames[f],g=EgretWorld.getInstance().objectHash[g],n;for(n in g){var p=g[n],q=p.getGlobalBounds();null==q||p.isDead||(q=l.intersects(q),null==d[m.u_id]&&q&&(d[m.u_id]=[m,p]),null==d[p.u_id]&&q&&(d[p.u_id]=[p,m]))}}}}a={};for(c=
0;c<b.length;c++)b[c]instanceof AIDisplayObject&&(h=b[c],k=d[h.u_id],null!=k?(k=k[1],m=0,null==a[h.u_id]&&(m++,a[h.u_id]=h),null==a[k.u_id]&&(m++,a[k.u_id]=k),2!=m&&h.setIsColliding(!0,k)):h.setIsColliding(!1,null))};b.destory=function(){this.curSceneInstancesData=[];this.curSceneEventsData=[];this.curSceneAiObjects=[];this.curSceneAiObjectsHash={};this.curSceneEvents=[];this.triggerConditions=[];for(var b=0;b<LayoutDecoder.movieClipRenders.length;b++)LayoutDecoder.movieClipRenders[b].global||LayoutDecoder.movieClipRenders.splice(b,
1);EgretToolUI.stage.removeEventListener(egret.Event.ENTER_FRAME,this.eventsheetRender,this)};b.curSceneInstancesData=[];b.curSceneEventsData=[];b.curSceneAiObjects=[];b.curSceneAiObjectsHash={};b.curSceneEvents=[];b.eventSheets={};b.collisionSearchs={};b._oldTime=0;b._tickInterval=16.6;b._tick=60;b.triggerConditions=[];return b}();EventSheetDecoder.prototype.__class__="EventSheetDecoder";var CollisionSearchVo=function(){return function(){this.enemyNames=[]}}();
CollisionSearchVo.prototype.__class__="CollisionSearchVo";var LayoutVo=function(){return function(){}}();LayoutVo.prototype.__class__="LayoutVo";
var TimerManager=function(){function b(){throw Error("\u4e0d\u80fd\u88ab\u5b9e\u4f8b\u5316");}b.initialize=function(){if(0<b._initTimes++)throw Error("TimerManager\u53ea\u80fd\u521d\u59cb\u5316\u4e00\u6b21");b._lastTick=egret.getTimer();b._timerActualDataHash={};b._timerDataHash={};b._timer=new egret.Timer(20);b._timer.start();b._timer.addEventListener(egret.TimerEvent.TIMER,b.onTimer,b)};b.createTimer=function(e,d){void 0===d&&(d=0);if(!b._timerDataHash[b.key]){var a=new TimerData;a.key=b.key;a.delay=
e;a.repeat=d;a.runTime=0;a.lastTick=egret.getTimer();b._timerDataHash[b.key]=a;b.key++;return a}return b._timerDataHash[b.key]};b.createActualTimer=function(e){void 0===e&&(e=0);if(!b._timerActualDataHash[b.key]){var d=new TimerActualData;d.key=b.key;d.lastTick=egret.getTimer();d.runTimeSecondsTime=0;d.totalSecondTime=e/1E3;d.totalTime=e;d.remainSecondsTime=e/1E3;d.remainTime=d.totalTime;b._timerActualDataHash[b.key]=d;b.key++;return d}return b._timerActualDataHash[b.key]};b.destoryActualTimer=function(e){void 0===
e&&(e=0);b._timerActualDataHash[e]&&(b._timerActualDataHash[e]=null,delete b._timerActualDataHash[e]);b._timerDataHash[e]&&(b._timerDataHash[e]=null,delete b._timerDataHash[e])};b.getTimerData=function(e){void 0===e&&(e=0);return b._timerDataHash[e]};b.onTimer=function(e){b._newTick=egret.getTimer();b._actualTickDuration=b._newTick-b._lastTick;b._lastTick=b._newTick;b._runTime+=b._actualTickDuration;b._runTimeSecondsTime=Math.floor(b._runTime/1E3);for(var d in b._timerActualDataHash)e=b._timerActualDataHash[d],
e.newTick=egret.getTimer(),e.actualTickDuration=e.newTick-e.lastTick,e.lastTick=e.newTick,e.runTime+=e.actualTickDuration,e.runTimeSecondsTime=Math.floor(e.runTime/1E3),e.remainTime=e.totalTime-e.runTime,e.remainSecondsTime=Math.ceil(e.remainTime/1E3),null!=e.onTick&&e.onTick.apply(null,e.onTickParams),e.runTime>=e.totalTime&&(null!=e.onComplete&&e.onComplete.apply(null,e.onCompleteParams),b._timerActualDataHash[d]=null,delete b._timerActualDataHash[d]),e.runTimeSecondsTime!=e.oldRunSecondTime&&(e.oldRunSecondTime=
e.runTimeSecondsTime,null!=e.onSecondTick&&e.onSecondTick.apply(null,e.onSecondTickParams));for(d in b._timerDataHash)e=b._timerDataHash[d],e.newTick=egret.getTimer(),e.actualTickDuration=e.newTick-e.lastTick,e.lastTick=e.newTick,e.runTime+=e.actualTickDuration,e.running=!0,e.runTime>e.delay*(e.currentCount+1)&&(e.currentCount++,null!=e.onTick&&e.onTick.apply(null,e.onTickParams),0<e.repeat&&e.currentCount==e.repeat&&(e.running=!1,null!=e.onComplete&&e.onComplete.apply(null,e.onCompleteParams),b._timerDataHash[d]=
null,delete b._timerDataHash[d]))};b.getTimerStr=function(b,d){void 0===d&&(d=!1);var a=Math.floor(b/3600),c=Math.floor((b-3600*a)/60),h=b-3600*a-60*c,k="",m="",l="",k=10>a?"0"+a:a.toString(),m=10>c?"0"+c:c.toString(),l=10>h?"0"+h:h.toString();return d?k+":"+m+":"+l:k+"\u65f6"+m+"\u5206"+l+"\u79d2"};b._lastTick=0;b._newTick=0;b._actualTickDuration=0;b._runTime=0;b._runTimeSecondsTime=0;b._initTimes=0;b.key=0;return b}();TimerManager.prototype.__class__="TimerManager";
var E_loader_Config_Loader=function(b){function e(){b.call(this)}__extends(e,b);return e}(ModuleEvent);E_loader_Config_Loader.prototype.__class__="E_loader_Config_Loader";
var TMXObject=function(b){function e(a,c,d,e,m){b.call(this);this._points=void 0;this._name=a.$name;this.x=+a.$x;this.y=+a.$y;this._z=+e;this.width=+a.$width||0;this.height=+a.$height||0;this._gid=+a.$gid||null;this._type=a.$type;this.rotation=+a.$rotation||0;this._id=+a.$id||void 0;this._orientation=c;this._shapes=void 0;this._color=m;this._isPolyLine=this._isPolygon=this._isEllipse=!1;this.visible="undefined"!==typeof a.$visible?Boolean(+a.$visible):!0;if("number"===typeof this._gid)this._isImage=
!0,this.setTile(d);else if(this._points=[],a=a.children)for(c=0;c<a.length;c++)switch(e=a[c],e.localName){case TMXConstants.ELLIPSE:this._isEllipse=!0;this._isImage=!1;this._ellipse=this.parseEllipse(e);break;case TMXConstants.POLYGON:this._isPolygon=!0;this._isImage=!1;this._points=this.parsePolygonOrPolyline(e.$points);break;case TMXConstants.POLYLINE:this._isPolyLine=!0;this._isImage=!1;this._points=this.parsePolygonOrPolyline(e.$points);break;case TMXConstants.PROPERTIES:d.tilemap&&(this._properties=
d.tilemap.parseProperties(e))}this._shapes||(this._shapes=this.parseTMXShapes());for(c=0;c<this._shapes.length;c++)this.addChild(this._shapes[c])}__extends(e,b);var d=e.prototype;Object.defineProperty(d,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(d,"gid",{get:function(){return this._gid},enumerable:!0,configurable:!0});Object.defineProperty(d,"name",{get:function(){return this._name},enumerable:!0,configurable:!0});Object.defineProperty(d,"type",{get:function(){return this._type},
enumerable:!0,configurable:!0});Object.defineProperty(d,"z",{get:function(){return this._z},enumerable:!0,configurable:!0});Object.defineProperty(d,"isEllipse",{get:function(){return this._isEllipse},enumerable:!0,configurable:!0});Object.defineProperty(d,"isPolygon",{get:function(){return this._isPolygon},enumerable:!0,configurable:!0});Object.defineProperty(d,"isPolyLine",{get:function(){return this._isPolyLine},enumerable:!0,configurable:!0});Object.defineProperty(d,"isImage",{get:function(){return this._isImage},
enumerable:!0,configurable:!0});d.getObjectPropertyByName=function(a){return this[a]};d.parsePolygonOrPolyline=function(a){var c=[];if(a=a.split(" "))for(var b=0;b<a.length;b++){var d=a[b].split(",");c[b]=[+d[0],+d[1]]}return c};d.parseEllipse=function(a){return[+a.$width||32,+a.$height||32]};d.parseTMXShapes=function(){var a=[];if(this._isEllipse){var c=new Ellipse(0,0,this.width,this.height);c.draw(this._color);a.push(c)}else this._isPolygon?(c=new Polygon(0,0,this._points),c.draw(this._color),
a.push(c)):this._isPolyLine?(c=new PolyLine(0,0,this._points),c.draw(this._color),a.push(c)):this._gid||(c=new Polygon(0,0,[[0,0],[this.width,0],[this.width,this.height],[0,this.height]]),c.draw(this._color),a.push(c));if("isometric"===this._orientation)for(c=0;c<a.length;c++){var b=a[c];b.rotation=45;b.scaleX=Math.SQRT1_2;b.scaleY=Math.SQRT1_2}return a};d.setTile=function(a){if(a=a.getTilesetByGid(this._gid))this._tile=new TMXTile(0,0,this.gid,a.tilemap,a),a.drawTile(this,a.tileoffset.x,a.tileoffset.y-
a.tileheight,this._tile)};return e}(egret.Sprite);TMXObject.prototype.__class__="TMXObject";var EventManager=function(){function b(){}b.registerEvent=function(b){null!=b&&(this._events[b.id]=b)};b.getEvents=function(){return this._events};b.dispatchModuleEvent=function(b){if(b)for(var d in this._events){var a=this._events[d];a.eventClass==b.getClass()&&a.proxy.receivedEvents(b)}};b._events={};return b}();EventManager.prototype.__class__="EventManager";
var BitmapLoader=function(){function b(){}b.load=function(b,d,a){void 0===a&&(a=null);TexturePool.getTexture(b)?null!=d&&d.apply(null,a):this.startload(b,{url:b,onComplete:d,onCompleteParams:a})};b.startload=function(b,d){RES.getResByUrl(b,this.onRESComplete,d)};b.onRESComplete=function(b){TexturePool.addTexture(this.url,b);null!=this.onComplete&&this.onComplete.apply(null,this.onCompleteParams)};return b}();BitmapLoader.prototype.__class__="BitmapLoader";
var AISystem=function(b){function e(){b.call(this);this.disableDataEvents={};if(null!=e._instance)throw Error("AISystem \u4e3a\u5355\u4f8b\uff01\uff01\uff01");this.name="System";e._instance=this;trigger.register(this)}__extends(e,b);var d=e.prototype;Object.defineProperty(e,"instance",{get:function(){null==this._instance&&(this._instance=new e);return this._instance},enumerable:!0,configurable:!0});d.sendSceneInitComplete=function(){this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onSceneInitComplete))};
d.everyTick=function(a){return{instances:[this],status:!0}};d.everyXSecondEvent=function(a){a.curTime=egret.getTimer();return a.curTime-a.oldTime>=1E3*eval_e(a.interval)?(a.oldTime=a.curTime,{instances:[this],status:!0}):{instances:[this],status:!1}};d.onSceneInitComplete=function(a){return{instances:[this],status:!0}};d.onSceneEndComplete=function(a){return{instances:[this],status:!0}};d.isValueType=function(a){return{instances:[this],status:!0}};d.ObjectUIDExist=function(a){return{instances:[this],
status:null!=LayoutDecoder.curSceneInstances[eval_e(a.UID)]}};d.pickRandomInstance=function(a){a=EgretWorld.getInstance().objectHash[a.object.name];return{instances:[a[Math.floor(Math.random()*a.length)]],status:a&&0<a.length,selectSingle:!0}};d.pickAll=function(a){return{instances:EgretWorld.getInstance().objectHash[a.object.name],status:!0}};d.pickInstanceByCondition=function(a){var c=[],b=EgretWorld.getInstance().objectHash[a.object.name];if(b)for(var d=0;d<b.length;d++){var e=b[d];window[e.name]=
e;Utils.compare(a.expression,a.operationType,a.value)&&c.push(e)}return 0<c.length?{instances:c,status:!0}:{instances:[this],status:!1}};d.pickInstanceByIndex=function(a){var c=EgretWorld.getInstance().objectHash[a.object.name];return c&&(a=eval_e(a.index),a<c.length-1&&0<=a)?{instances:[c[a]],status:!0}:{instances:[this],status:!1}};d.pickInstanceOverlapping=function(a){var c=EgretWorld.getInstance().objectHash[a.object.name];if(c){var b=[],d=eval_e(a.x);a=eval_e(a.y);for(var e=0;e<c.length;e++){var l=
c[e];l.getGlobalBounds().contains(d,a)&&b.push(l)}if(0<b.length)return{instances:b,status:!0}}return{instances:[this],status:!1}};d.execFor=function(a){return{instances:[this],status:!0,data:a}};d.execForEachSort=function(a){return{instances:[this],status:!0,data:a}};d.compareVariable=function(a){return{instances:[this],status:Utils.compare(e.instance[a.variable],a.operationType,a.value)}};d.createObject=function(a,c,b,d){c=eval_e(c);b=eval_e(b);d=eval_e(d);assert("number"!==typeof c||"number"!==
typeof b||"number"!==typeof d,"AISystem createObject parameter type incorrect!!");a=a.clone();a.layer=c;a.x=Math.round(b);a.y=Math.round(d);EgretWorld.getInstance().addChild(a)};d.gotoNextPrevScene=function(a){EgretWorld.getInstance().destory();var c=LayoutDecoder.layouts[LayoutDecoder.currentLayoutName];if(c){var b;"previous"==a?b=c.prevLayoutName:"next"==a?b=c.nextLayoutName:assert(!0,"The GoToNextSceneAction which value must be previous or next!! but now which value is:"+a);""==b&&assert(!0,"The GoToNextSceneAction which must not null");
a=new E_loader_Config_Loader;a.layoutName=b;EventManager.dispatchModuleEvent(a)}else assert(!0,"Search eventSheet is not exist! this is According by layoutName:"+LayoutDecoder.currentLayoutName)};d.gotoScene=function(a){this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onSceneEndComplete));EgretWorld.getInstance().destory();var c=new E_loader_Config_Loader;c.layoutName=a;EventManager.dispatchModuleEvent(c)};d.gotoSceneByName=function(a){EgretWorld.getInstance().destory();var c=new E_loader_Config_Loader;
c.layoutName=a;EventManager.dispatchModuleEvent(c)};d.disableEvents=function(a,c){var b=eval_e(a),d=c+"";if(0!=d.length)for(var d=1==d.length?[d]:d.split(","),e=0;e<d.length;e++){var l=+d[e];1==b?delete this.disableDataEvents[l]:this.disableDataEvents[l]=l}};d.showLoadingLogo=function(a){a=eval_e(a);EgretToolUI.stage.addChild(EgretToolUI.preContainer);EgretToolUI.preContainer.alpha=1;var c=egret.Tween.get(EgretToolUI.preContainer);c.wait(1E3*a-250);c.to({alpha:0},250);setTimeout(function(){EgretToolUI.stage.removeChild(EgretToolUI.preContainer)},
1E3*a)};d.addTo=function(a,c){var b=eval_e(c);assert("number"!==typeof b,"AIObject addTo parameter type incorrect!!");e.instance[a]+=b};d.setBoolean=function(a,c){var b=eval_e(c);assert("number"!==typeof b,"AIObject setBoolean parameter type incorrect!!");e.instance[a]=1==b};d.setValue=function(a,c){var b=eval_e(c);e.instance[a]=b};d.subtractFrom=function(a,c){var b=eval_e(c);assert("number"!==typeof b,"AIObject subtractFrom parameter type incorrect!!");e.instance[a]-=b};d.toogleBoolean=function(a){this[a]=
!this[a]};d.stopLoop=function(){};d.load=function(a){};d.restartScene=function(){assert(null==LayoutDecoder.currentLayoutName,"current layout name is null!");this.gotoSceneByName(LayoutDecoder.currentLayoutName)};d.resetGlobalVariables=function(){};d.scrollToObject=function(a){(a=a.getFirstPicked())&&EgretWorld.getInstance().sceneCamera.lookAtChar(a)};d.scrollToPos=function(a,c){var b=eval_e(a),d=eval_e(c);EgretWorld.getInstance().sceneCamera.lookAtPoint(new egret.Point(b,d))};d.scrollToXPos=function(a){a=
eval_e(a);EgretWorld.getInstance().sceneCamera.lookAtX(a)};d.scrollToYPos=function(a){a=eval_e(a);EgretWorld.getInstance().sceneCamera.lookAtY(a)};d.setCanvasSize=function(a,c){};d.setLayerAlpha=function(a,c){};d.setLayerScale=function(a,c){};d.setLayerVisible=function(a,c){};d.setObjectTimeScale=function(a,c){};d.setTimeScale=function(a){};d.wait=function(a){if(null==this.timerData)if("number"===typeof eval_e(a)){this.timerData=TimerManager.createTimer(1E3*a,1);var c=this;this.timerData.onComplete=
function(){c.onTimeComplete=!0;c.timerData=null}}else assert(!0,"wait parameter type incorrect!!")};d.onLoadComplete=function(){};d.loadFromJSON=function(a){};d.saveToJSON=function(){};d.destory=function(){};return e}(AIObject);AISystem.prototype.__class__="AISystem";
var TMXConstants=function(){function b(){}b.TMX_FLIP_H=2147483648;b.TMX_FLIP_V=1073741824;b.TMX_FLIP_AD=536870912;b.TMX_CLEAR_BIT_MASK=536870911;b.LAYER="layer";b.OBJECT_GROUP="objectgroup";b.PROPERTIES="properties";b.DATA="data";b.OBJECT="object";b.IMAGE="image";b.IMAGE_LAYER="imagelayer";b.TILE_SET="tileset";b.TILE="tile";b.TILE_OFFSET="tileoffset";b.ANIMATION="animation";b.DEFAULT_COLOR=10526884;b.DRAWORDER_INDEX="index";b.POLYGON="polygon";b.POLYLINE="polyline";b.ELLIPSE="ellipse";b.TILE_OBJECT_GROUP=
"tileobjectgroup";b.ORIENTATION_ORTHOGONAL="orthogonal";b.ORIENTATION_ISOMETRIC="isometric";b.ORIENTATION_STAGGERED="staggered";b.ORIENTATION_HEXAGONAL="hexagonal";b.TILESET_IMAGE="tilesetImage";b.COLLECTION_OF_IMAGE="collectionOfImage";return b}();TMXConstants.prototype.__class__="TMXConstants";
var TMXImageLoadEvent=function(b){function e(d,a,c,e){void 0===a&&(a=null);void 0===c&&(c=!0);void 0===e&&(e=!1);b.call(this,d,c,e);this.texture=a}__extends(e,b);e.IMAGE_COMPLETE="complete";e.ALL_IMAGE_COMPLETE="allComplete";return e}(egret.Event);TMXImageLoadEvent.prototype.__class__="TMXImageLoadEvent";
var TMXLayer=function(b){function e(a,c,d,e,m,l,f){b.call(this);this._staticContainer=new egret.Sprite;this._staticContainer.cacheAsBitmap=!0;this.addChild(this._staticContainer);this._animationContainer=new egret.Sprite;this.addChild(this._animationContainer);this._tilemap=a;this._tilewidth=c;this._tileheight=d;this._orientation=e;this.tileset=(this._tilesets=m)?this._tilesets.getTilesetByIndex(0):null;this.maxTileSize={width:0,height:0};for(a=0;a<this._tilesets.length;a++)c=this._tilesets.getTilesetByIndex(a),
this.maxTileSize.width=Math.max(this.maxTileSize.width,c.tilewidth),this.maxTileSize.height=Math.max(this.maxTileSize.height,c.tileheight);this._name=f.$name;this._cols=+f.$width;this._rows=+f.$height;this._opacity="undefined"!==typeof f.$opacity?parseFloat(f.$opacity):1;this.visible="undefined"!==typeof f.$visible?Boolean(+f.$visible):!0;this._hexsidelength=+f.$hexsidelength;this._staggeraxis=f.$staggeraxis;this._staggerindex=+f.$staggerindex;"isometric"===this._orientation?(this.width=this._tilewidth/
2*(this._cols+this._rows),this.height=this._tileheight/2*(this._cols+this._rows)):(this.width=this._cols*this._tilewidth,this.height=this._rows*this._tileheight);this.initArray(this._cols,this._rows);if(f=f.children)for(a=0;a<f.length;a++)switch(c=f[a],c.localName){case TMXConstants.DATA:this.setLayerData(TMXUtils.decode(c,c.$encoding,c.$compression));break;case TMXConstants.PROPERTIES:this._properties=this.tilemap.parseProperties(c);break;default:throw Error("TMXTileMap decode Layer is Error\uff1a"+
c.localName);}this.alpha=this._opacity;this.visible=this.visible}__extends(e,b);var d=e.prototype;Object.defineProperty(d,"name",{get:function(){return this._name},enumerable:!0,configurable:!0});Object.defineProperty(d,"staticContainer",{get:function(){return this._staticContainer},enumerable:!0,configurable:!0});Object.defineProperty(d,"animationContainer",{get:function(){return this._animationContainer},enumerable:!0,configurable:!0});Object.defineProperty(d,"tilewidth",{get:function(){return this._tilewidth},
enumerable:!0,configurable:!0});Object.defineProperty(d,"tileheight",{get:function(){return this._tileheight},enumerable:!0,configurable:!0});Object.defineProperty(d,"orientation",{get:function(){return this._orientation},enumerable:!0,configurable:!0});Object.defineProperty(d,"cols",{get:function(){return this._cols},enumerable:!0,configurable:!0});Object.defineProperty(d,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0});Object.defineProperty(d,"hexsidelength",{get:function(){return this._hexsidelength},
enumerable:!0,configurable:!0});Object.defineProperty(d,"staggeraxis",{get:function(){return this._staggeraxis},enumerable:!0,configurable:!0});Object.defineProperty(d,"staggerindex",{get:function(){return this.staggerindex},enumerable:!0,configurable:!0});Object.defineProperty(d,"opacity",{get:function(){return this._opacity},enumerable:!0,configurable:!0});Object.defineProperty(d,"properties",{get:function(){return this._properties},enumerable:!0,configurable:!0});Object.defineProperty(d,"tilemap",
{get:function(){return this._tilemap},enumerable:!0,configurable:!0});d.setRenderer=function(a){this.renderer=a};d.getTileId=function(a,c){var b=this.getTile(a,c);return b?b.gid:0};d.getTile=function(a,c){return this.renderer instanceof TMXOrthogonalRenderer?this.layerData[~~this.renderer.pixelToTileX(a)][~~this.renderer.pixelToTileY(c)]:this.layerData[~~this.renderer.pixelToTileX(a,c)][~~this.renderer.pixelToTileY(c,a)]};d.setTile=function(a,c,b){this.tileset.contains(b)||(this.tileset=this._tilesets.getTilesetByGid(b));
return this.tileset?this.layerData[a][c]=new TMXTile(a,c,b,this.tilemap,this.tileset):null};d.clearTile=function(a,c){this.layerData[a][c]=null};d.draw=function(a){this.renderer.drawTileLayer(this,a)};d.render=function(){this.renderer.render(this._animationContainer)};d.initArray=function(a,c){this.layerData=[];for(var b=0;b<a;b++){this.layerData[b]=[];for(var d=0;d<c;d++)this.layerData[b][d]=null}};d.setLayerData=function(a){if(a)for(var c=0,b=0;b<this.rows;b++)for(var d=0;d<this.cols;d++){var e=
a[c];0!==e&&this.setTile(d,b,e);c++}};return e}(egret.Sprite);TMXLayer.prototype.__class__="TMXLayer";var TMXProperty=function(){return function(){this.gid=0}}();TMXProperty.prototype.__class__="TMXProperty";
var TMXTileset=function(){function b(d,a){this._imageCount=0;this.getFileExtension=function(a){return a.substring(a.lastIndexOf(".")+1,a.length)};this._tileDatas=[];b._cacheRenderTextures={};this._lastgid=this._firstgid=+a.$firstgid;this._tilemap=d;var c=a.$source;if(c&&"tsx"===this.getFileExtension(c))throw Error("tmx not support tsx file load!!!");this._images={};this._transformMatrix=new egret.Matrix;this._name=a.$name;this._tilewidth=+a.$tilewidth;this._tileheight=+a.$tileheight;this._spacing=
+a.$spacing||0;this._margin=+a.$margin||0;this._tileoffset=new egret.Point;this._vTileCount=this._hTileCount=0;if(c=a.children)for(var e=0;e<c.length;e++){var k=c[e];switch(k.localName){case TMXConstants.IMAGE:k=new TMXImage(k,this.tilemap.baseURL);this._imagesource=k.source;this._images[this._firstgid]=k;this._hTileCount=~~(k.width/(this._tilewidth+this._spacing));this._vTileCount=~~(k.height/(this._tileheight+this._margin));this._lastgid=this._firstgid+(this._hTileCount*this._vTileCount-1||0);this._tilesetType=
TMXConstants.TILESET_IMAGE;this._imageCount=1;break;case TMXConstants.TILE_OFFSET:this._tileoffset=new egret.Point(+k.$x,+k.$y);break;case TMXConstants.TILE:var m=+k.$id+this._firstgid;null==this._tileDatas[m]&&(this._tileDatas[m]=k);k.children&&0<k.children.length&&this.decodeColletionOfImages(k,m);break;case TMXConstants.PROPERTIES:this._properties=d.parseProperties(k)}}}var e=b.prototype;Object.defineProperty(e,"name",{get:function(){return this._name},enumerable:!0,configurable:!0});Object.defineProperty(e,
"tilesetType",{get:function(){return this._tilesetType},enumerable:!0,configurable:!0});Object.defineProperty(e,"imageCount",{get:function(){return this._imageCount},enumerable:!0,configurable:!0});Object.defineProperty(e,"firstgid",{get:function(){return this._firstgid},enumerable:!0,configurable:!0});Object.defineProperty(e,"lastgid",{get:function(){return this._lastgid},enumerable:!0,configurable:!0});Object.defineProperty(e,"tilewidth",{get:function(){return this._tilewidth},enumerable:!0,configurable:!0});
Object.defineProperty(e,"tileheight",{get:function(){return this._tileheight},enumerable:!0,configurable:!0});Object.defineProperty(e,"spacing",{get:function(){return this._spacing},enumerable:!0,configurable:!0});Object.defineProperty(e,"margin",{get:function(){return this._margin},enumerable:!0,configurable:!0});Object.defineProperty(e,"tileoffset",{get:function(){return this._tileoffset},enumerable:!0,configurable:!0});Object.defineProperty(e,"horizontalTileCount",{get:function(){return this._hTileCount},
enumerable:!0,configurable:!0});Object.defineProperty(e,"verticalTileCount",{get:function(){return this._vTileCount},enumerable:!0,configurable:!0});Object.defineProperty(e,"tilemap",{get:function(){return this._tilemap},enumerable:!0,configurable:!0});Object.defineProperty(e,"properties",{get:function(){return this._properties},enumerable:!0,configurable:!0});Object.defineProperty(e,"images",{get:function(){return this._images},enumerable:!0,configurable:!0});e.getSpecialTileDataByTileId=function(b){return this._tileDatas[b]};
e.getTileProperties=function(b){return this._properties[b]};e.contains=function(b){return b>=this._firstgid&&b<=this._lastgid};e.decodeColletionOfImages=function(b,a){for(var c=0;c<b.children.length;c++){var e=b.children[c];e.localName==TMXConstants.IMAGE&&(e=new TMXImage(e,this.tilemap.baseURL),this._imagesource=e.source,this._images[a]=e,this._lastgid++,this._vTileCount=this._hTileCount=1,this._tilesetType=TMXConstants.COLLECTION_OF_IMAGE,this._imageCount++)}};e.renderImage=function(b,a,c,e,k){var m=
!1;b instanceof TMXObject&&(m=!0);this._transformMatrix.identity();var l=m?b.width/k.textureWidth:1,f=m?b.height/k.textureHeight:1;e.flippedAD?(this._transformMatrix.scale(-1*l,-1*f),this._transformMatrix.translate(a+b.width*l,c+b.height*f)):e.flippedY?(this._transformMatrix.scale(1*l,-1*f),this._transformMatrix.translate(a,c+b.height*f)):e.flippedX?(this._transformMatrix.scale(-1*l,1*f),this._transformMatrix.translate(a+b.width*l,c)):(this._transformMatrix.scale(l,f),this._transformMatrix.translate(a,
c+(m?k.textureHeight-b.height:0)));null==e.bitmap&&(e.bitmap=new egret.Bitmap);e.bitmap.texture=k;e.bitmap.transform.matrix=this._transformMatrix;b.addChild(e.bitmap)};e.drawTile=function(d,a,c,e){var k,m=e.gid-this.firstgid,l=this.firstgid+"_"+m;if(l)switch(this._tilesetType){case TMXConstants.TILESET_IMAGE:l=this.firstgid+"_"+m;if(null==b._cacheRenderTextures[l]){var f=this._images[this._firstgid];k=new egret.RenderTexture;k.drawToTexture(f.bitmap,new egret.Rectangle(m%this.horizontalTileCount*
(this.tilewidth+this._spacing)+this._spacing,Math.floor(m/this.horizontalTileCount)*(this.tileheight+this._margin)+this._margin,this.tilewidth,this.tileheight));b._cacheRenderTextures[l]=k}else k=b._cacheRenderTextures[l];this.renderImage(d,a,c,e,k);break;case TMXConstants.COLLECTION_OF_IMAGE:f=this._images[e.gid],null==b._cacheRenderTextures[e.gid]?(k=new egret.RenderTexture,k.drawToTexture(f.bitmap,new egret.Rectangle(0,0,this.tilewidth,this.tileheight)),b._cacheRenderTextures[e.gid]=k):k=b._cacheRenderTextures[e.gid],
this.renderImage(d,a,c,e,k)}};return b}();TMXTileset.prototype.__class__="TMXTileset";
var MathUtils=function(){function b(){}b.toRadian=function(b){return b*this.TO_RADIAN};b.toAngle=function(b){return b*this.TO_ANGLE};b.clampAngle=function(b){b%=360;0>b&&(b+=360);return b};b.clampRadian=function(b){b%=2*Math.PI;0>b&&(b+=2*Math.PI);return b};b.angleRotate=function(b,d,a){var c=this.toRadian(b),h=this.toRadian(d),k=Math.sin(c),c=Math.cos(c),m=Math.sin(h),h=Math.cos(h);return Math.acos(k*m+c*h)>this.toRadian(a)?0<c*m-k*h?this.clampAngle(b+a):this.clampAngle(b-a):this.clampAngle(d)};
b.angleRadius=function(b,d,a){var c=Math.sin(b),h=Math.cos(b),k=Math.sin(d),m=Math.cos(d);return Math.acos(c*k+h*m)>a?0<h*k-c*m?this.clampRadian(b+a):this.clampRadian(b-a):this.clampRadian(d)};b.angleClockWise=function(b,d){var a=this.toRadian(b),c=this.toRadian(d),h=Math.sin(a),a=Math.cos(a),k=Math.sin(c),c=Math.cos(c);return 0>=a*k-h*c};b.angleTo=function(b,d,a,c){return this.toAngle(Math.atan2(c-d,a-b))};b.radianTo=function(b,d,a,c){return Math.atan2(c-d,a-b)};b.distance=function(b,d,a,c){b=a-
b;d=c-d;return Math.sqrt(b*b+d*d)};b.color16ToUnit=function(b){b="0x"+b.slice(1);return parseInt(b,16)};b.TO_RADIAN=Math.PI/180;b.TO_ANGLE=180/Math.PI;return b}();MathUtils.prototype.__class__="MathUtils";
var EgretWorld=function(){function b(){this._objectList=[];this._collisionObjectList=[];this._objectHash={};this._updateCamera=!0;this._childCaches={};if(b._instance)throw Error(this.constructor+"\u4e3a\u5355\u4f8b\uff01");b._instance=this;this._sceneCamera=new SceneCamera(this)}var e=b.prototype;b.getInstance=function(){null==this._instance&&(this._instance=new b);return this._instance};Object.defineProperty(e,"sceneCamera",{get:function(){return this._sceneCamera},enumerable:!0,configurable:!0});
Object.defineProperty(e,"collisionObjectList",{get:function(){return this._collisionObjectList},enumerable:!0,configurable:!0});Object.defineProperty(e,"objectList",{get:function(){return this._objectList},enumerable:!0,configurable:!0});Object.defineProperty(e,"objectHash",{get:function(){return this._objectHash},enumerable:!0,configurable:!0});e.scrollToTarget=function(b){this._sceneCamera.lookAtChar(b)};e.render=function(){this._sceneCamera.render();var b=[],a;for(a in this._childCaches){var c=
this._childCaches[a];b.push(c)}b.sort(function(a,b){return a.layer>b.layer?1:a.layer<b.layer?-1:0});for(a=0;a<b.length;a++)for(var c=b[a],e=c.instances,c=c.parent,k=0;k<e.length;k++)c.addChild(e[k].container)};e.getChildByUID=function(b){void 0===b&&(b=0);for(var a=0,c=this._objectList.length;a<c;a++){var e=this._objectList[a];if(e.id==b)return e}return null};e.getChildByName=function(b){var a=[];if(null==b||""==b)return a;for(var c=0,e=this._objectList.length;c<e;c++){var k=this._objectList[c];k.name==
b&&a.push(k)}return a};e.addChild=function(b,a){if(b){this._objectList.push(b);var c=b.container,e=b.layer,k=LayerManager.getLayerByIndex(b,e);c&&null==c.parent&&(null==this._childCaches[e]&&(this._childCaches[e]={instances:[],parent:k,layer:e}),this._childCaches[e].instances.push(b));c=b.name;this._objectHash.hasOwnProperty(c)||(this._objectHash[c]=[]);this._objectHash[c].push(b);b instanceof AIDisplayObject&&b.collision&&this._collisionObjectList.push(b);trigger.register(b)}};e.removeChild=function(b){if(b){var a=
this.objectList.indexOf(b);-1!=a&&this._objectList.splice(a,1);(a=b.container)&&null!=a.parent&&a.parent.removeChild(a);if(this._objectHash.hasOwnProperty(name)){var a=this._objectHash[name],c=a.indexOf(b);-1!=c&&a.splice(c,1)}b instanceof AIDisplayObject&&(a=this._collisionObjectList.indexOf(b),-1!=a&&this._collisionObjectList.splice(a,1));b&&this._childCaches[b.layer]&&(a=this._childCaches[b.layer].instances)&&(c=a.indexOf(b),-1!=c&&a.splice(c,1),0==a.length&&delete this._childCaches[b.layer]);
trigger.removeTrigger(b)}};e.removeAllChildrens=function(){trigger.removeAllTriggers();for(var b in this._objectHash){var a=this._objectHash[b];if(a)for(var c=0;c<a.length;c++){var e=a[c];e instanceof AIAudio&&e.stopAll();delete this._objectHash[b]}}for(c=0;c<this._objectList.length;c++)if(e=this._objectList[c],(b=e.container)&&null!=b.parent&&b.parent.removeChild(b),e&&this._childCaches[e.layer]&&(b=this._childCaches[e.layer].instances))a=b.indexOf(e),-1!=a&&b.splice(a,1),0==b.length&&delete this._childCaches[e.layer];
this._objectList.length=0;b=[];for(c=0;c<this._collisionObjectList.length;c++)e=this._collisionObjectList[c],e.global&&b.push(e);this._collisionObjectList=b};e.destory=function(){LayoutDecoder.destory();EventSheetDecoder.destory();this.removeAllChildrens()};return b}();EgretWorld.prototype.__class__="EgretWorld";window.lakeshoreInstances={};window.lakeshoreVariables={};function lakeshoreInst(){return window}function lakeshoreVars(){return window}
var typeInstances={},trigger=new Trigger,loopIndex={};function system(){return AISystem.instance}function registerObject(b,e){window[b]=e}function getSceneInstance(b){return window[b]}function eval_e(b){try{return eval(b)}catch(e){return b}}function $get(b){return(b=EgretWorld.getInstance().objectHash[b])&&b[0]?b[0]:null}function $class(b){return egret.getDefinitionByName(b)}
function assert(b,e){if(b){var d;try{throw Error();}catch(a){d=a.stack}e="\u3010ERROR\u3011:"+e+"\n\nStack trace: \n"+d;console.error&&console.error(e);isWeixinLogin()&&(document.write(e),alert(e))}}function fps(){return 1E3/this.dt}function dt(){return EventSheetDecoder.tickInterval}function timeScale(){return 60/EventSheetDecoder.tickInterval}function isWeixinLogin(){var b=window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i);return b&&0<b.length&&"micromessenger"==b[0]?!0:!1}
function IsPC(){for(var b=navigator.userAgent,e="Android;iPhone;SymbianOS;Windows Phone;iPad;iPod".split(";"),d=!0,a=0;a<e.length;a++)if(0<b.indexOf(e[a])){d=!1;break}return d}function getByteLen(b){if(b){b=eval_e(b);for(var e=0,d=0;d<b.length;d++)e=null!=b[d].match(/[^\x00-\xff]/ig)?e+2:e+1;return e}return 0}function getByteValue(b,e,d){if(b){b=eval_e(b);d="";for(var a=0,c=0;c<b.length;c++){a=null!=b[c].match(/[^\x00-\xff]/ig)?a+2:a+1;if(a>e)break;d+=b[c]}return d}return null}
function objectCount(){return EgretWorld.getInstance().objectList.length}function clamp(b,e,d){return b<e?e:b>d?d:b}function toRadian(b){return MathUtils.toRadian(b)}function toAngle(b){return MathUtils.toAngle(b)}function angleRotate(b,e,d){MathUtils.toRadian(b);MathUtils.toRadian(e);MathUtils.toRadian(d)}function getRGB(b,e,d){return Math.max(Math.min(b,255),0)|Math.max(Math.min(e,255),0)<<8|Math.max(Math.min(d,255),0)<<16}function getRed(b){return b&255}
function getGreen(b){return(b&65280)>>8}function getBlue(b){return(b&16711680)>>16}function trim(b){return b.trim()}function uppercase(b){return b.toUpperCase()}function lowercase(b){return b.toLowerCase()}function windowWidth(){return EgretToolUI.stage.stageWidth}function windowHeight(){return EgretToolUI.stage.stageHeight}function layoutWidth(){return EgretToolUI.stage.stageWidth}function layoutHeight(){return EgretToolUI.stage.stageHeight}function projectName(){return"lakeshore"}
function projectversion(){return"1.0.0"}function distance(b,e,d,a){return Math.sqrt((d-b)*(d-b)+(a-e)*(a-e))}function round6dp(b){return Math.round(1E6*b)/1E6}function is_undefined(b){return"undefined"===typeof b}function is_number(b){return"number"===typeof b}function is_string(b){return"string"===typeof b}function isPOT(b){return 0<b&&0===(b-1&b)}
function segments_intersect(b,e,d,a,c,h,k,m){var l,f,g,n;b<d?(f=b,l=d):(f=d,l=b);c<k?(n=c,g=k):(n=k,g=c);if(l<n||f>g)return!1;e<a?(f=e,l=a):(f=a,l=e);h<m?(n=h,g=m):(n=m,g=h);if(l<n||f>g)return!1;l=c-b+k-d;f=h-e+m-a;b=d-b;e=a-e;c=k-c;h=m-h;m=Math.abs(e*c-h*b);return Math.abs(c*f-h*l)>m?!1:Math.abs(b*f-e*l)<=m}function getMiniSeconds(b){return(new Date(Date.parse(b.replace(/-/g,"/")))).getTime()}
function getRemainTimeStr(b,e,d){void 0===e&&(e=":");void 0===d&&(d=!0);b=this.getMiniSeconds(b);var a=(new Date).getTime();b-=a;return 0<=b?(a=Math.round(b/1E3),d=Math.floor(a/3600),b=Math.floor((a-3600*d)/60),a=a-3600*d-60*b,(10>d?"0"+d:d.toString())+e+(10>b?"0"+b:b.toString())+e+(10>a?"0"+a:a.toString())):d?"00"+e+"00"+e+"00":""}var OnAjaxRequestErrorEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnAjaxRequestErrorEvent.prototype.__class__="OnAjaxRequestErrorEvent";
var OnAjaxRequestProressEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnAjaxRequestProressEvent.prototype.__class__="OnAjaxRequestProressEvent";var IsCookiesEnabledEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsCookiesEnabledEvent.prototype.__class__="IsCookiesEnabledEvent";var IsFullscreenEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsFullscreenEvent.prototype.__class__="IsFullscreenEvent";
var IsHasJavaEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsHasJavaEvent.prototype.__class__="IsHasJavaEvent";var IsOnlineEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsOnlineEvent.prototype.__class__="IsOnlineEvent";var IsPortraitLandscapeEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsPortraitLandscapeEvent.prototype.__class__="IsPortraitLandscapeEvent";
var IsSupportFullscreenEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsSupportFullscreenEvent.prototype.__class__="IsSupportFullscreenEvent";var OnOfflineEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnOfflineEvent.prototype.__class__="OnOfflineEvent";var OnOnlineEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnOnlineEvent.prototype.__class__="OnOnlineEvent";
var OnResizeEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnResizeEvent.prototype.__class__="OnResizeEvent";var OnAnyKeyIsDownEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnAnyKeyIsDownEvent.prototype.__class__="OnAnyKeyIsDownEvent";var OnAnyKeyIsReleasedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnAnyKeyIsReleasedEvent.prototype.__class__="OnAnyKeyIsReleasedEvent";
var OnKeyCodeIsReleasedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnKeyCodeIsReleasedEvent.prototype.__class__="OnKeyCodeIsReleasedEvent";var OnKeyIsDownEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnKeyIsDownEvent.prototype.__class__="OnKeyIsDownEvent";var OnKeyIsReleasedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnKeyIsReleasedEvent.prototype.__class__="OnKeyIsReleasedEvent";
var IsTouchDownEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsTouchDownEvent.prototype.__class__="IsTouchDownEvent";var OnTouchBeginEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnTouchBeginEvent.prototype.__class__="OnTouchBeginEvent";var OnTouchEndEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnTouchEndEvent.prototype.__class__="OnTouchEndEvent";
var OnTouchMoveEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnTouchMoveEvent.prototype.__class__="OnTouchMoveEvent";var OnTouchReleaseOutsideEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnTouchReleaseOutsideEvent.prototype.__class__="OnTouchReleaseOutsideEvent";var OnTouchTapEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnTouchTapEvent.prototype.__class__="OnTouchTapEvent";
var IsWebSocketOpenEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsWebSocketOpenEvent.prototype.__class__="IsWebSocketOpenEvent";var IsWebSocketSupportEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsWebSocketSupportEvent.prototype.__class__="IsWebSocketSupportEvent";var OnWebSocketCloseEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnWebSocketCloseEvent.prototype.__class__="OnWebSocketCloseEvent";
var OnWebSocketErrorEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnWebSocketErrorEvent.prototype.__class__="OnWebSocketErrorEvent";var OnWebSocketMessageEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnWebSocketMessageEvent.prototype.__class__="OnWebSocketMessageEvent";var OnWebSocketOpenEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnWebSocketOpenEvent.prototype.__class__="OnWebSocketOpenEvent";
var TMXTiledMapCreateGridEvent=function(b){function e(d,a,c,e){void 0===c&&(c=!0);void 0===e&&(e=!1);b.call(this,d,c,e);this.data=a}__extends(e,b);e.CREATE_GRID_START="createGridStart";e.CREATE_GRID_COMPLETE="createGridComplete";e.CREATE_GRID_READY="createGridReady";return e}(egret.Event);TMXTiledMapCreateGridEvent.prototype.__class__="TMXTiledMapCreateGridEvent";
var TMXColorLayer=function(b){function e(d,a,c){b.call(this);this._tilemap=d;this._color=a;this._z=c;this.graphics.beginFill(TMXUtils.color16ToUnit(this._color),1);this.graphics.drawRect(0,0,d.renderwidth,d.renderheight);this.graphics.endFill()}__extends(e,b);return e}(egret.Sprite);TMXColorLayer.prototype.__class__="TMXColorLayer";
var TMXImageLayer=function(b){function e(a,c,d){b.call(this);this._tilemap=a;this._name=c.$name;this.x=+c.$x;this.y=+c.$y;this._z=+c.$z;this._opacity="undefined"!==typeof+c.$opacity?+c.$opacity:1;this.visible="undefined"!==typeof c.$visible?Boolean(+c.$visible):!0;if(a=c.children)for(d=0;d<a.length;d++){var e=c.children[d];switch(e.localName){case TMXConstants.IMAGE:this._source=e.$source;this._transColor=e.$trans;this.loadImage(this.tilemap.baseURL+this._source);break;case TMXConstants.PROPERTIES:this._properties=
this._tilemap.parseProperties(e)}}}__extends(e,b);var d=e.prototype;Object.defineProperty(d,"tilemap",{get:function(){return this._tilemap},enumerable:!0,configurable:!0});Object.defineProperty(d,"bitmap",{get:function(){return this._bitmap},enumerable:!0,configurable:!0});Object.defineProperty(d,"z",{get:function(){return this._z},enumerable:!0,configurable:!0});Object.defineProperty(d,"name",{get:function(){return this._name},enumerable:!0,configurable:!0});Object.defineProperty(d,"alpha",{get:function(){return this._opacity},
enumerable:!0,configurable:!0});Object.defineProperty(d,"transColor",{get:function(){return this._transColor},enumerable:!0,configurable:!0});d.loadImage=function(a){var b=this;BitmapLoader.load(a,function(a){a=TexturePool.getTexture(a);b._sourcebitmap=new egret.Bitmap(a);b.dispatchEvent(new TMXImageLoadEvent(TMXImageLoadEvent.IMAGE_COMPLETE,a))},[a])};d.draw=function(a){var b=new egret.RenderTexture;a=(new egret.Rectangle(this.x,this.y,this._sourcebitmap.width,this._sourcebitmap.height)).intersection(a);
a.right=Math.ceil(this.tilemap.width/this.tilemap.tilewidth)*this.tilemap.tilewidth;a.bottom=Math.ceil(this.tilemap.height/this.tilemap.tileheight)*this.tilemap.tileheight;b.drawToTexture(this._sourcebitmap,a);this._bitmap=new egret.Bitmap;this._bitmap.texture=b;this._bitmap.alpha=this._opacity;this._bitmap.visible=this.visible;this.addChild(this._bitmap)};return e}(egret.Sprite);TMXImageLayer.prototype.__class__="TMXImageLayer";
var TMXImage=function(b){function e(a,c){b.call(this,this);this._width=+a.$width;this._height=+a.$height;this._source=a.$source;this._trans="undefined"!==typeof a.$trans?+a.$trans:1;this._source=c+this._source;this.loadImage(this._source)}__extends(e,b);var d=e.prototype;Object.defineProperty(d,"texture",{get:function(){return this._texture},enumerable:!0,configurable:!0});Object.defineProperty(d,"source",{get:function(){return this._source},enumerable:!0,configurable:!0});Object.defineProperty(d,
"bitmap",{get:function(){return this._bitmap},enumerable:!0,configurable:!0});Object.defineProperty(d,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(d,"height",{get:function(){return this._height},enumerable:!0,configurable:!0});d.loadImage=function(a){var b=Utils.getTexture(a);if(null!=b)var d=b[0];null!=d?(this._bitmap=new egret.Bitmap(d),b&&(this._bitmap.x=b[1],this._bitmap.y=b[2]),this.dispatchEvent(new TMXImageLoadEvent(TMXImageLoadEvent.IMAGE_COMPLETE,
d))):RES.getResByUrl(a,function(a){this._bitmap=new egret.Bitmap(a);this.dispatchEvent(new TMXImageLoadEvent(TMXImageLoadEvent.IMAGE_COMPLETE,a))},this)};return e}(egret.EventDispatcher);TMXImage.prototype.__class__="TMXImage";
var TMXHexagonalRenderer=function(b){function e(a,c,d,e,m,l,f){b.call(this,a,c,d,e);this._hexsidelength=m;this._staggeraxis=l;this._staggerindex=f;this._sidelengthy=this._sidelengthx=0;"x"===l?this._sidelengthx=m:this._sidelengthy=m;this._sideoffsetx=(this.tilewidth-this._sidelengthx)/2;this._sideoffsety=(this.tileheight-this._sidelengthy)/2;this._columnwidth=this._sideoffsetx+this._sidelengthx;this._rowheight=this._sideoffsety+this._sidelengthy;this._centers=[new egret.Point,new egret.Point,new egret.Point,
new egret.Point]}__extends(e,b);var d=e.prototype;d.canRender=function(a){return a.orientation===TMXConstants.ORIENTATION_HEXAGONAL&&b.prototype.canRender.call(this,a)};d.pixelToTileCoords=function(a,b){"x"===this._staggeraxis?a-="old"===this._staggerindex?this._sidelengthx:this.tilewidth:b-="old"===this._staggerindex?this._sideoffsety:this.tileheight;var d=new egret.Point(Math.floor(a/(this.tilewidth+this._sidelengthx)),Math.floor(b/(this.tileheight+this._sidelengthy))),e=new egret.Point(a-d.x*(this.tilewidth+
this._sidelengthx),b-d.y*(this.tilewidth+this._sidelengthy));"x"===this._staggeraxis?(d.x*=2,"even"===this._staggerindex&&++d.x):(d.y*=2,"even"===this._staggerindex&&++d.y);var m,l,f;"x"===this._staggeraxis?(m=this._sidelengthx/2,l=m+this._columnwidth,f=this.tileheight/2,this._centers[0].setTo(m,f),this._centers[1].setTo(l,f-this._rowheight),this._centers[2].setTo(l,f+this._rowheight),this._centers[3].setTo(l+this._columnwidth,f)):(m=this._sidelengthy/2,l=this.tilewidth/2,f=m+this._rowheight,this._centers[0].setTo(l,
m),this._centers[1].setTo(l-this._columnwidth,f),this._centers[2].setTo(l+this._columnwidth,f),this._centers[3].setTo(l,f+this._rowheight));l=0;f=Number.MAX_VALUE;for(var g=0;4>g;++g)m=Math.pow(this._centers[g].x-e.x,2)+Math.pow(this._centers[g].y-e.y,2),m<f&&(f=m,l=g);e="x"===this._staggeraxis?this.offsetsStaggerX:this.offsetsStaggerY;return new egret.Point(d.x+e[l].x,d.y+e[l].y)};d.pixelToTileX=function(a,b){return this.pixelToTileCoords(a,b).x};d.pixelToTileY=function(a,b){return this.pixelToTileCoords(b,
a).y};d.tileToPixelCoords=function(a,b){var d,e;"x"===this._staggeraxis?(d=a*this._columnwidth,"odd"===this._staggerindex?(e=b*(this.tileheight+this._sidelengthy),e+=this._rowheight*(a&1)):(e=b*(this.tileheight+this._sidelengthy),e+=this._rowheight*(1-(a&1)))):(e=b*this._rowheight,"odd"===this._staggerindex?(d=a*(this.tilewidth+this._sidelengthx),d+=this._columnwidth*(b&1)):(d=a*(this.tilewidth+this._sidelengthx),d+=this._columnwidth*(1-(b&1))));return new egret.Point(d,e)};d.drawTile=function(a,
b,d,e){b=this.tileToPixelCoords(b,d);d=e.tileset;d.drawTile(a,d.tileoffset.x+b.x,d.tileoffset.y+b.y+(this.tileheight-d.tileheight),e)};d.drawTileLayer=function(a,b){var d=a.staticContainer,e=this.pixelToTileCoords(Math.floor(b.x),Math.floor(b.y)),m=this.pixelToTileCoords(Math.floor(b.x+b.width+this.tilewidth),Math.floor(b.y+b.height+this.tileheight));e.x=0>e.x?0:e.x;e.y=0>e.y?0:e.y;m.x=m.x>this.cols?this.cols:m.x;m.y=m.y>this.rows?this.rows:m.y;for(var l=e.y;l<m.y;l++)for(var f=e.x;f<m.x;f++){var g=
a.layerData[f][l];g&&(g.animation?this.animationTiles.push({tmxTile:g,pos:[f,l]}):this.drawTile(d,f,l,g))}};return e}(TMXRenderer);TMXHexagonalRenderer.prototype.__class__="TMXHexagonalRenderer";
var TMXIsometricRenderer=function(b){function e(a,c,d,e){b.call(this,a,c,d,e);this._hTilewidth=this.tilewidth/2;this._hTileheight=this.tileheight/2;this._originX=this.rows*this._hTilewidth}__extends(e,b);var d=e.prototype;d.canRender=function(a){return a.orientation===TMXConstants.ORIENTATION_ISOMETRIC&&b.prototype.canRender.call(this,a)};d.pixelToTileCoords=function(a,b){return new egret.Point(Math.floor(this.pixelToTileX(a,b)),Math.floor(this.pixelToTileY(b,a)))};d.pixelToTileX=function(a,b){return b/
this.tileheight+(a-this._originX)/this.tilewidth};d.pixelToTileY=function(a,b){return a/this.tileheight-(b-this._originX)/this.tilewidth};d.tileToPixelCoords=function(a,b){return new egret.Point((a-b)*this._hTilewidth+this._originX,(a+b)*this._hTileheight)};d.drawTile=function(a,b,d,e){var m=e.tileset;m.drawTile(a,m.tileoffset.x+b,m.tileoffset.y+d-m.tileheight,e)};d.drawTileLayer=function(a,b){var d=a.staticContainer,e=a.tileset,m=e.tileoffset,l=this.pixelToTileCoords(b.x-e.tilewidth,b.y-e.tileheight),
l=new egret.Point(Math.floor(l.x),Math.floor(l.y)),f=this.pixelToTileCoords(b.x+b.width+e.tilewidth,b.y+b.height+e.tileheight),f=new egret.Point(Math.ceil(f.x),Math.ceil(f.y)),f=this.tileToPixelCoords(f.x,f.y),g=this.tileToPixelCoords(l.x,l.y);g.x-=this._hTilewidth;g.y+=this.tileheight;e=g.y-b.y>this._hTileheight;m=b.x-g.x<this._hTilewidth;e&&(m?(l.x--,g.x-=this._hTilewidth):(l.y--,g.x+=this._hTilewidth),g.y-=this._hTileheight);for(var n=Boolean(+e^+m),p=l.clone(),q=g.y;q-this.tileheight<f.y;q+=this._hTileheight){p.setTo(l.x,
l.y);for(var r=g.x;r<f.x;r+=this.tilewidth){if(0<=p.x&&0<=p.y&&p.x<this.cols&&p.y<this.rows){var s=a.layerData[p.x][p.y];s&&(e=s.tileset,m=e.tileoffset,s&&(s.animation?this.animationTiles.push({tmxTile:s,pos:[m.x+r,m.y+q]}):this.drawTile(d,r,q,s)))}p.x++;p.y--}n?(l.y++,g.x-=this._hTilewidth,n=!1):(l.x++,g.x+=this._hTilewidth,n=!0)}};return e}(TMXRenderer);TMXIsometricRenderer.prototype.__class__="TMXIsometricRenderer";
var TMXOrthogonalRenderer=function(b){function e(a,c,d,e){b.call(this,a,c,d,e)}__extends(e,b);var d=e.prototype;d.canRender=function(a){return a.orientation===TMXConstants.ORIENTATION_ORTHOGONAL&&b.prototype.canRender.call(this,a)};d.pixelToTileCoords=function(a,b){return new egret.Point(this.pixelToTileX(a),this.pixelToTileY(b))};d.pixelToTileX=function(a){return Math.floor(a/this.tilewidth)};d.pixelToTileY=function(a){return Math.floor(a/this.tileheight)};d.tileToPixelCoords=function(a,b){return new egret.Point(a*
this.tilewidth,b*this.tileheight)};d.drawTile=function(a,b,d,e){var m=e.tileset;m.drawTile(a,m.tileoffset.x+b*this.tilewidth,m.tileoffset.y+(d+1)*this.tileheight-m.tileheight,e)};d.drawTileLayer=function(a,b){var d=a.staticContainer,e=this.pixelToTileCoords(Math.floor(Math.max(b.x-(a.maxTileSize.width-a.tilewidth),0)),Math.floor(Math.max(b.y-(a.maxTileSize.height-a.tileheight),0))),m=this.pixelToTileCoords(Math.ceil(b.x+b.width+this.tilewidth),Math.ceil(b.y+b.height+this.tileheight));m.x=m.x>this.cols?
this.cols:m.x;m.y=m.y>this.rows?this.rows:m.y;for(var l=e.y;l<m.y;l++)for(var f=e.x;f<m.x;f++){var g=a.layerData[f][l];g&&(g.animation?this.animationTiles.push({tmxTile:g,pos:[f,l]}):this.drawTile(d,f,l,g))}};return e}(TMXRenderer);TMXOrthogonalRenderer.prototype.__class__="TMXOrthogonalRenderer";
var TMXTilesetGroup=function(){function b(b){this._tilesets=[];this._imagelength=this._length=0;this._tilemap=b}var e=b.prototype;Object.defineProperty(e,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});Object.defineProperty(e,"imagelength",{get:function(){return this._imagelength},enumerable:!0,configurable:!0});Object.defineProperty(e,"tilemap",{get:function(){return this._tilemap},enumerable:!0,configurable:!0});e.add=function(b){this._tilesets.push(b);this._length++;
switch(b.tilesetType){case TMXConstants.TILESET_IMAGE:this._imagelength++;break;case TMXConstants.COLLECTION_OF_IMAGE:this._imagelength+=b.imageCount}};e.getTilesetByIndex=function(b){return this._tilesets[b]};e.getTilesetByGid=function(b){if(0===b)return null;var a=-1;b&=TMXConstants.TMX_CLEAR_BIT_MASK;for(var c=0,e=this._tilesets.length;c<e;c++){var k=this._tilesets[c];if(k.contains(b))return k;k.firstgid===k.lastgid&&b>=k.firstgid&&(a=c)}if(-1!==a)return this._tilesets[a];throw Error("no matching tileset found for gid "+
b);};return b}();TMXTilesetGroup.prototype.__class__="TMXTilesetGroup";var Action=function(){function b(){this.index=0;this.instances={};this._sid=0;Condition.UID++;this._sid=Condition.UID}Object.defineProperty(b.prototype,"sid",{get:function(){return this._sid},enumerable:!0,configurable:!0});b.UID=0;return b}();Action.prototype.__class__="Action";
var ANode=function(){function b(b,d){this.walkable=!0;this.version=this.costMultiplier=1;this.x=b;this.y=d}b.prototype.toString=function(){return"x:"+this.x+" y:"+this.y};return b}();ANode.prototype.__class__="ANode";var AIEvent=function(b){function e(){b.call(this);this._sid=this.index=0;e.UID++;this._sid=e.UID}__extends(e,b);Object.defineProperty(e.prototype,"sid",{get:function(){return this._sid},enumerable:!0,configurable:!0});e.UID=0;return e}(EventBase);AIEvent.prototype.__class__="AIEvent";
var AIAjax=function(b){function e(){b.call(this);this.next_request_headers={};this.next_override_mime="";this.datas={};if(null!=e._instance)throw Error("AIWebSocket \u4e3a\u5355\u4f8b\uff01\uff01\uff01");this.name="Ajax";e._instance=this;trigger.register(this);this.initialize()}__extends(e,b);var d=e.prototype;Object.defineProperty(e,"instance",{get:function(){null==this._instance&&(this._instance=new e);return this._instance},enumerable:!0,configurable:!0});d.initialize=function(){this.curTag=this._lastData=
"";this._progress=0;this.timeout=-1};d.doRequest=function(a,b,d,e){void 0===e&&(e=null);var m=this,l=function(){m.curTag=this.requestTag;m.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,m.onAjaxRequestError,this.requestTag))},f=function(a){a.lengthComputable&&(m._progress=a.loaded/a.total,m.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,m.onAjaxRequestProress,this.requestTag)))};try{var g;g=this.isWindowsPhone8?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;g.requestTag=a;g.requestURL=
b;g.requestData=e;g.onreadystatechange=function(){if(4===this.readyState){m.curTag=this.requestTag;var a="",a=this.responseText?this.responseText.replace(/\r\n/g,"\n"):"";m._lastData=a;null==m.datas[this.requestTag]?m.datas[this.requestTag]={tag:this.requestTag,data:a}:m.datas[this.requestTag].data=a;400<=this.status?m.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,m.onAjaxRequestError,this.requestTag)):0<m._lastData.length&&m.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,m.onAjaxRequestComplete,
this.requestTag))}};this.isWindowsPhone8||(g.onerror=l,g.ontimeout=l,g.onabort=l,g.onprogress=f);g.open(d,b);!this.isWindowsPhone8&&0<=this.timeout&&"undefined"!=typeof g.timeout&&(g.timeout=this.timeout);try{g.responseType="text"}catch(n){}e&&g.setRequestHeader&&!this.next_request_headers.hasOwnProperty("Content-Type")&&g.setRequestHeader("Content-Type","application/x-www-form-urlencoded");if(g.setRequestHeader){for(var p in this.next_request_headers)if(this.next_request_headers.hasOwnProperty(p))try{g.setRequestHeader(p,
this.next_request_headers[p])}catch(q){}this.next_request_headers={}}if(this.next_override_mime&&g.overrideMimeType){try{g.overrideMimeType(this.next_override_mime)}catch(r){}this.next_override_mime=""}e?g.send(e):g.send()}catch(s){l()}};d.onAjaxRequestComplete=function(a){return{instances:[this],status:!0}};d.onAjaxRequestError=function(a){return{instances:[this],status:!0}};d.onAjaxRequestProress=function(a){return{instances:[this],status:!0}};d.ajaxSendToURL=function(a,b,d,e){void 0===e&&(e="POST");
this.doRequest(a,eval_e(b),e,eval_e(d))};d.requestFromURL=function(a,b){this.doRequest(a,eval_e(b),"GET")};d.setRequestHeader=function(a,b){this.next_request_headers[a]=eval_e(b)};d.setRequestTimeout=function(a){this.timeout=1E3*eval_e(a)};d.overrideMIMEType=function(a){this.next_override_mime=a};Object.defineProperty(d,"lastData",{get:function(){return this._lastData},enumerable:!0,configurable:!0});Object.defineProperty(d,"progress",{get:function(){return this._progress},enumerable:!0,configurable:!0});
d.getData=function(a){return(a=this.datas[a])?a.data:""};return e}(AIObject);AIAjax.prototype.__class__="AIAjax";
var AIBrowser=function(b){function e(){b.call(this);this.firstRequestFullscreen=!0;this._isSupportVibrate=!1;this.orientations="portrait landscape portrait-primary portrait-secondary landscape-primary landscape-secondary".split(" ");if(null!=e._instance)throw Error("AITouch\u4e3a\u5355\u4f8b\uff01\uff01\uff01");this.name="Browser";e._instance=this;this.initialize();trigger.register(this)}__extends(e,b);var d=e.prototype;Object.defineProperty(e,"instance",{get:function(){null==this._instance&&(this._instance=
new e);return this._instance},enumerable:!0,configurable:!0});d.initialize=function(){var a=this;window.addEventListener("resize",function(){a.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,a.onResize))});"undefined"!==typeof navigator.onLine&&(window.addEventListener("online",function(){a.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,a.onOnline))}),window.addEventListener("offline",function(){a.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,a.onOffline))}));"undefined"!==typeof window.applicationCache&&
(window.applicationCache.addEventListener("updateready",function(){}),window.applicationCache.addEventListener("progress",function(){}))};Object.defineProperty(d,"URL",{get:function(){return window.location.toString()},enumerable:!0,configurable:!0});Object.defineProperty(d,"protocol",{get:function(){return window.location.protocol},enumerable:!0,configurable:!0});Object.defineProperty(d,"host",{get:function(){return window.location.host},enumerable:!0,configurable:!0});Object.defineProperty(d,"hostname",
{get:function(){return window.location.hostname},enumerable:!0,configurable:!0});Object.defineProperty(d,"port",{get:function(){return window.location.port},enumerable:!0,configurable:!0});Object.defineProperty(d,"pathname",{get:function(){return window.location.pathname},enumerable:!0,configurable:!0});Object.defineProperty(d,"hash",{get:function(){return window.location.hash},enumerable:!0,configurable:!0});Object.defineProperty(d,"Referer",{get:function(){return document.referrer},enumerable:!0,
configurable:!0});Object.defineProperty(d,"Title",{get:function(){return document.title},enumerable:!0,configurable:!0});Object.defineProperty(d,"appName",{get:function(){return navigator.appName},enumerable:!0,configurable:!0});Object.defineProperty(d,"appVersion",{get:function(){return navigator.appVersion},enumerable:!0,configurable:!0});Object.defineProperty(d,"language",{get:function(){return navigator&&navigator.language?navigator.language:""},enumerable:!0,configurable:!0});Object.defineProperty(d,
"queryString",{get:function(){return window.location.search},enumerable:!0,configurable:!0});Object.defineProperty(d,"screenWidth",{get:function(){return screen.width},enumerable:!0,configurable:!0});Object.defineProperty(d,"screenHeight",{get:function(){return screen.height},enumerable:!0,configurable:!0});Object.defineProperty(d,"platform",{get:function(){return navigator.platform},enumerable:!0,configurable:!0});Object.defineProperty(d,"isSupportVibrate",{get:function(){return this._isSupportVibrate=
navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate},enumerable:!0,configurable:!0});d.isCanSupportVibrated=function(a){return{instances:[this],status:this.isSupportVibrate}};d.cookiesEnabled=function(a){return navigator?{instances:[this],status:navigator.cookieEnabled}:{instances:[this],status:!1}};d.isOnline=function(a){return navigator?{instances:[this],status:navigator.onLine}:{instances:[this],status:!1}};d.hasJava=function(a){return navigator?{instances:[this],
status:navigator.javaEnabled()}:{instances:[this],status:!1}};d.onOnline=function(a){return{instances:[this],status:!0}};d.onOffline=function(a){return{instances:[this],status:!0}};d.onResize=function(a){return{instances:[this],status:!0}};d.isFullscreen=function(a){return{instances:[this],status:!!(document.mozFullScreen||document.webkitIsFullScreen||document.fullScreen)}};d.isPortraitLandscape=function(a){return{instances:[this],status:(window.innerWidth<=window.innerHeight?0:1)===eval_e(a.orientaion)}};
d.supportsFullscreen=function(a){return(a=document.getElementById("gameDiv"))?{instances:[this],status:!!(a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||a.webkitRequestFullScreen)}:{instances:[this],status:!1}};d.showAlert=function(a){alert(a)};d.closeWindow=function(){window.close()};d.focus=function(){window.focus()};d.blur=function(){window.blur()};d.gotoURL=function(a,b){var d=parseInt(b);0==d?window.location.href=a:1==d?window.parent.location.href=a:window.top.location.href=
a};d.gotoURLWindow=function(a,b){setTimeout(function(a,b){window.open(a,b)},100,a,b)};d.reload=function(){window.location.reload()};d.requestFullScreen=function(){var a=document.getElementById("gameDiv");a&&(this.firstRequestFullscreen&&(this.firstRequestFullscreen=!1,a.addEventListener("mozfullscreenerror",this.onFullscreenError),a.addEventListener("webkitfullscreenerror",this.onFullscreenError),a.addEventListener("MSFullscreenError",this.onFullscreenError),a.addEventListener("fullscreenerror",this.onFullscreenError)),
a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullScreen&&a.msRequestFullScreen())};d.cancelFullScreen=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()};d.vibrate=function(a){try{var b=["200","100","200"];for(a=0;a<b.length;a++)b[a]=parseInt(b[a],10);navigator.vibrate?
navigator.vibrate(b):navigator.mozVibrate?navigator.mozVibrate(b):navigator.webkitVibrate?navigator.webkitVibrate(b):navigator.msVibrate&&navigator.msVibrate(b)}catch(d){}};d.execJs=function(a){try{eval&&eval(a)}catch(b){console&&console.error&&console.error("\u6267\u884cJS\u8bed\u53e5\u53d1\u751f\u9519\u8bef\uff01\uff01",b)}};d.lockOrientation=function(a){a=eval_e(a);a=Math.floor(a);0>a||a>=this.orientations.length||(a=this.orientations[a],screen.orientation&&screen.orientation.lock?screen.orientation.lock(a):
screen.lockOrientation?screen.lockOrientation(a):screen.webkitLockOrientation?screen.webkitLockOrientation(a):screen.mozLockOrientation?screen.mozLockOrientation(a):screen.msLockOrientation&&screen.msLockOrientation(a))};d.unLockOrientation=function(){screen.orientation&&screen.orientation.unlock?screen.orientation.unlock():screen.unlockOrientation?screen.unlockOrientation():screen.webkitUnlockOrientation?screen.webkitUnlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&
screen.msUnlockOrientation()};d.onFullscreenError=function(a){};d.loadFromJSON=function(a){};d.saveToJSON=function(){};return e}(AIObject);AIBrowser.prototype.__class__="AIBrowser";
var AIKeyboard=function(b){function e(){b.call(this);this.isKeyDown=!1;this.keyCode=0;this.key=null;this.oldTime=this.charCode=0;if(null!=e._instance)throw Error("AIKeyboard\u4e3a\u5355\u4f8b\uff01\uff01\uff01");this.name="keyboard";this.initilize();e._instance=this;trigger.register(this)}__extends(e,b);var d=e.prototype;d.initilize=function(){leo.Keyboard.getInstance().addEventListener(leo.KeyboardEvent.KEY_DOWN,function(a){this.isKeyDown=!0;this.keyCode=a.keyCode;this.key=a.key;this.charCode=a.charCode;
this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onKeyCodeIsDown));this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onKeyIsDown));this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onAnyKeyIsDown))},this);leo.Keyboard.getInstance().addEventListener(leo.KeyboardEvent.KEY_UP,function(a){this.isKeyDown=!1;this.keyCode=a.keyCode;this.key=a.key;this.charCode=a.charCode;this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onKeyCodeIsReleased));this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,
this.onKeyIsReleased));this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onAnyKeyIsReleased))},this)};Object.defineProperty(e,"instance",{get:function(){null==this._instance&&(this._instance=new e);return this._instance},enumerable:!0,configurable:!0});d.onKeyCodeIsDown=function(a){return{instances:[this],status:e.instance.isKeyDown&&e.instance.keyCode==eval_e(a.keyCode)}};d.onKeyCodeIsReleased=function(a){return{instances:[this],status:!e.instance.isKeyDown&&e.instance.keyCode==eval_e(a.keyCode)}};
d.onKeyIsDown=function(a){return{instances:[this],status:e.instance.isKeyDown&&e.getKey(e.instance.keyCode)==eval_e(a.key)}};d.onKeyIsReleased=function(a){return{instances:[this],status:!e.instance.isKeyDown&&e.getKey(e.instance.keyCode)==eval_e(a.key)}};d.onAnyKeyIsDown=function(a){return{instances:[this],status:e.instance.isKeyDown}};d.onAnyKeyIsReleased=function(a){return{instances:[this],status:!e.instance.isKeyDown}};d.stringFromKeyCode=function(a){return e.getKey(eval_e(a))};d.lastKeyCode=function(){return this.keyCode};
e.getKey=function(a){a=Math.floor(a);switch(a){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"\u2190";case 38:return"\u2191";case 39:return"\u2192";case 40:return"\u2193";case 45:return"insert";case 46:return"del";case 91:return"left window key";
case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";
case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(a)}};
d.loadFromJSON=function(a){};d.saveToJSON=function(){};return e}(AIObject);AIKeyboard.prototype.__class__="AIKeyboard";
var AITouch=function(b){function e(){b.call(this);if(null!=e._instance)throw Error("AITouch\u4e3a\u5355\u4f8b\uff01\uff01\uff01");this.name="Touch";e._instance=this;this.initilize();trigger.register(this)}__extends(e,b);var d=e.prototype;d.initilize=function(){EgretToolUI.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageTouchEvent,this);EgretToolUI.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onStageTouchEvent,this);EgretToolUI.stage.addEventListener(egret.TouchEvent.TOUCH_END,
this.onStageTouchEvent,this);EgretToolUI.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageTouchEvent,this);EgretToolUI.stage.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onStageTouchEvent,this)};d.onStageTouchEvent=function(a){this._touchX=a.stageX;this._touchY=a.stageY;this._touchPointID=a.touchPointID;this._isTouchDown=a.touchDown;this._altKey=a.altKey;this._ctrlKey=a.ctrlKey;this._shiftKey=a.shiftKey;switch(a.type){case egret.TouchEvent.TOUCH_TAP:this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,
this.onTouchTap));break;case egret.TouchEvent.TOUCH_BEGIN:this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onTouchBegin));break;case egret.TouchEvent.TOUCH_END:this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onTouchEnd));break;case egret.TouchEvent.TOUCH_MOVE:this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onTouchMove));break;case egret.TouchEvent.TOUCH_RELEASE_OUTSIDE:this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onTouchReleaseOutside))}};
Object.defineProperty(e,"instance",{get:function(){null==this._instance&&(this._instance=new e);return this._instance},enumerable:!0,configurable:!0});Object.defineProperty(d,"touchX",{get:function(){return this._touchX},enumerable:!0,configurable:!0});Object.defineProperty(d,"touchY",{get:function(){return this._touchY},enumerable:!0,configurable:!0});Object.defineProperty(d,"touchPointID",{get:function(){return this._touchPointID},enumerable:!0,configurable:!0});d.orientationSupported=function(){return{instances:[this],
status:"undefined"!==typeof window.DeviceOrientationEvent}};d.motionSupported=function(){return{instances:[this],status:"undefined"!==typeof window.DeviceMotionEvent}};d.isTouchDown=function(a){return{instances:[this],status:this._isTouchDown}};d.onTouchTap=function(a){return{instances:[this],status:!0}};d.onTouchBegin=function(a){return{instances:[this],status:!0}};d.onTouchEnd=function(a){return{instances:[this],status:!0}};d.onTouchMove=function(a){return{instances:[this],status:!0}};d.onTouchReleaseOutside=
function(a){return{instances:[this],status:!0}};d.compareOrientation=function(){return{instances:[this],status:!0}};d.compareAcceleration=function(){return{instances:[this],status:!0}};d.loadFromJSON=function(a){};d.saveToJSON=function(){};return e}(AIObject);AITouch.prototype.__class__="AITouch";
var AIWebSocket=function(b){function e(){b.call(this);this._closeCode=0;if(null!=e._instance)throw Error("AIWebSocket \u4e3a\u5355\u4f8b\uff01\uff01\uff01");this.name="WebSocket";e._instance=this;trigger.register(this);this.initialize()}__extends(e,b);var d=e.prototype;Object.defineProperty(e,"instance",{get:function(){null==this._instance&&(this._instance=new e);return this._instance},enumerable:!0,configurable:!0});d.initialize=function(){this.ws=null;this._errorMsg=this._messageText="";this._closeCode=
0;this._closeReason=""};Object.defineProperty(d,"isSupported",{get:function(){return"undefined"!==typeof WebSocket},enumerable:!0,configurable:!0});Object.defineProperty(d,"messageText",{get:function(){return this._messageText},enumerable:!0,configurable:!0});Object.defineProperty(d,"errorMsg",{get:function(){return this._errorMsg},enumerable:!0,configurable:!0});Object.defineProperty(d,"closeCode",{get:function(){return this._closeCode},enumerable:!0,configurable:!0});Object.defineProperty(d,"closeReason",
{get:function(){return this._closeReason},enumerable:!0,configurable:!0});d.isConnecting=function(a){return{instances:[this],status:this.ws&&0===this.ws.readyState}};d.isOpen=function(a){return{instances:[this],status:this.ws&&1===this.ws.readyState}};d.isSupport=function(a){return{instances:[this],status:this.isSupported}};d.onClosed=function(a){return{instances:[this],status:!0}};d.onError=function(a){return{instances:[this],status:!0}};d.onOpened=function(a){return{instances:[this],status:!0}};
d.onMessage=function(a){return{instances:[this],status:!0}};d.connect=function(a,b){void 0===b&&(b="");if(this.isSupported){this.ws&&this.ws.close();var d=this;this.last_url=a;try{this.ws=""===b?new WebSocket(a):new WebSocket(a,b)}catch(e){this.ws=null;d._errorMsg="\u65e0\u6cd5\u521b\u5efa\u4e00\u4e2a\u7ed9\u5b9a\u5730\u5740\u548c\u534f\u8bae\u7684\u901a\u4fe1\u8fde\u63a5";d.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,d.onError));console.log(e.message);return}this.ws.binaryType="arraybuffer";
this.ws.onopen=function(){b.length&&-1===d.ws.protocol.indexOf(b)?(d._errorMsg="WebSocket \u8bf7\u6c42\u7684\u534f\u8bae\u5730\u5740"+b+"\u4e0d\u652f\u6301\uff01",d.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,d.onError))):d.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,d.onOpened))};this.ws.onerror=function(a){d.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,d.onError))};this.ws.onclose=function(a){d._closeCode=a.code||0;d._closeReason=a.reason||"";d.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,
d.onClosed))};this.ws.onmessage=function(a){d._messageText=a.data||"";d.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,d.onMessage))}}};d.close=function(){this.ws&&this.ws.close()};d.send=function(a){this.ws&&1===this.ws.readyState&&(a=eval_e(a),this.ws.send(a))};return e}(AIObject);AIWebSocket.prototype.__class__="AIWebSocket";
var AIWebStorage=function(b){function e(){b.call(this);this.prefix="";if(null!=e._instance)throw Error("WebStorage \u4e3a\u5355\u4f8b\uff01\uff01\uff01");this.name="WebStorage";e._instance=this;this.initilize()}__extends(e,b);var d=e.prototype;Object.defineProperty(e,"instance",{get:function(){null==this._instance&&(this._instance=new e);return this._instance},enumerable:!0,configurable:!0});d.initilize=function(){"undefined"===typeof localStorage&&assert(!0,"Webstorage plugin: local storage is not supported on this platform.");
"undefined"===typeof sessionStorage&&assert(!0,"Webstorage plugin: local storage is not supported on this platform.")};d.localStorageEnabled=function(a){return{instances:[this],status:"undefined"===typeof localStorage}};d.sessionStorageEnabled=function(a){return{instances:[this],status:"undefined"===typeof sessionStorage}};d.onQuotaExceeded=function(a){return{instances:[this],status:!0}};d.localStorageExists=function(a){if("undefined"!==typeof localStorage)return a=eval_e(a.key),{instances:[this],
status:null!=localStorage.getItem(this.prefix+a)}};d.sessionStorageExists=function(a){if("undefined"!==typeof sessionStorage)return a=eval_e(a.key),{instances:[this],status:null!=sessionStorage.getItem(this.prefix+a)}};d.compareKeyText=function(a){if("undefined"===typeof localStorage)return{instances:[this],status:!1};var b=eval_e(a.key),b=localStorage.getItem(this.prefix+b)||"",d=eval_e(a.value);return{instances:[this],status:Utils.compare(b,a.operationType,d)}};d.storeLocal=function(a,b){if("undefined"!==
typeof localStorage)try{a=eval_e(a),b=eval_e(b),localStorage.setItem(this.prefix+a,b)}catch(d){this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onQuotaExceeded))}};d.storeSession=function(a,b){if("undefined"!==typeof sessionStorage)try{a=eval_e(a),b=eval_e(b),sessionStorage.setItem(this.prefix+a,b)}catch(d){this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onQuotaExceeded))}};d.removeLocal=function(a){"undefined"!==typeof localStorage&&(a=eval_e(a),localStorage.removeItem(this.prefix+
a))};d.removeSession=function(a){"undefined"!==typeof sessionStorage&&(a=eval_e(a),sessionStorage.removeItem(this.prefix+a))};d.clearLocal=function(){"undefined"!==typeof localStorage&&localStorage.clear()};d.clearSession=function(){"undefined"!==typeof sessionStorage&&sessionStorage.clear()};d.jsonLoad=function(){};d.localAt=function(a){if("undefined"===typeof localStorage)return"";a=eval_e(a);return localStorage.getItem(a)};d.sessionAt=function(a){if("undefined"===typeof sessionStorage)return"";
a=eval_e(a);return sessionStorage.getItem(a)};return e}(AIObject);AIWebStorage.prototype.__class__="AIWebStorage";
var TMXTilemap=function(b){function e(a,c,d,e){b.call(this);this._tmxRenderer=null;this._data=d;this._renderWidth=a;this._renderHeight=c;this._cols=+d.$width;this._rows=+d.$height;this._tilewidth=+d.$tilewidth;this._tileheight=+d.$tileheight;this._nextobjectid=+d.$nextobjectid;this._version=+d.$version;this._orientation=d.$orientation;this._renderorder=d.$renderorder;this._baseURL=e;this._baseURL=decodeURIComponent(this._baseURL);a=this._baseURL.lastIndexOf("/");this._baseURL=this._baseURL.slice(0,
a+1);this._orientation===TMXConstants.ORIENTATION_ISOMETRIC?(this.width=this._tilewidth/2*(this._cols+this._rows),this.height=this._tileheight/2*(this._cols+this._rows)):(this.width=this._cols*this._tilewidth,this.height=this._rows*this._tileheight);this._hexsidelength=+d.$hexsidelength;this._staggeraxis=d.$staggeraxis||void 0;this._staggerindex=d.$staggerindex||void 0;this._backgroundcolor=d.$backgroundcolor;this._z=0;this._layers=[];this._objectGroups=[];null!==this._tmxRenderer&&this._tmxRenderer.canRender(this)||
(this._tmxRenderer=this.getNewDefaultRenderer(this));this._initialized=!1}__extends(e,b);var d=e.prototype;Object.defineProperty(d,"nextobjectid",{get:function(){return this._nextobjectid},enumerable:!0,configurable:!0});Object.defineProperty(d,"tilewidth",{get:function(){return this._tilewidth},enumerable:!0,configurable:!0});Object.defineProperty(d,"tileheight",{get:function(){return this._tileheight},enumerable:!0,configurable:!0});Object.defineProperty(d,"baseURL",{get:function(){return this._baseURL},
enumerable:!0,configurable:!0});Object.defineProperty(d,"renderwidth",{get:function(){return this._renderWidth},enumerable:!0,configurable:!0});Object.defineProperty(d,"renderheight",{get:function(){return this._renderHeight},enumerable:!0,configurable:!0});d.parseProperties=function(a){var b;if(a=a.children){b=[];for(var d=0;d<a.length;d++){var e=a[d],m=new TMXProperty;m.name=e.$name;m.value=e.$value;b[d]=m}}return b};d.render=function(){for(var a=this.getLayers(),b=0;b<a.length;b++)this.addChild(a[b]);
a=this.getObjects();for(b=0;b<a.length;b++)this.addChild(a[b]);this.addEventListener(egret.Event.ENTER_FRAME,this.onStartRendering,this)};d.getLayers=function(){this.readMapObjects(this._data);return this._layers};d.getObjects=function(){this.readMapObjects(this._data);return this._objectGroups};d.showHideBackground=function(a){this._showHideBackground=a;for(var b=0;b<this._layers.length;b++){var d=this._layers[b];if(d instanceof TMXColorLayer){d.visible=a;break}}};d.destory=function(){this._tilesets=
void 0;this._layers=[];this._objectGroups=[];this._initialized=!1;this.removeEventListener(egret.Event.ENTER_FRAME,this.onStartRendering,this)};d.readMapObjects=function(a){if(!0!==this._initialized){var b=this._z,d=this;this._tilesets||(this._tilesets=new TMXTilesetGroup(this));this._backgroundcolor&&this._showHideBackground&&this._layers.push(new TMXColorLayer(this,this._backgroundcolor,b++));var e=this._data.children;if(e)for(a=0;a<e.length;a++){var m=e[a];switch(m.localName){case TMXConstants.TILE_SET:this._tilesets.add(new TMXTileset(this,
m));break;case TMXConstants.LAYER:this._layers.push(this.parseLayer(m,b++));break;case TMXConstants.OBJECT_GROUP:this._objectGroups.push(this.parseObjectGroup(m,b++));break;case TMXConstants.PROPERTIES:this._properties=this.parseProperties(m);break;case TMXConstants.IMAGE_LAYER:this._layers.push(this.parseImageLayer(m,b++))}}var l=0;for(a=0;a<this._tilesets.length;a++){var b=this._tilesets.getTilesetByIndex(a),f;for(f in b.images)b.images[f].addEventListener(TMXImageLoadEvent.IMAGE_COMPLETE,function(a){l++;
l==this._tilesets.imagelength&&(d.dispatchEvent(new TMXImageLoadEvent(TMXImageLoadEvent.ALL_IMAGE_COMPLETE)),d.dispatchEvent(new TMXTiledMapCreateGridEvent(TMXTiledMapCreateGridEvent.CREATE_GRID_READY,this)))},this)}this._initialized=!0}};d.onStartRendering=function(a){var b=this.getLayers();for(a=0;a<b.length;a++){var d=b[a];d instanceof TMXLayer&&d.render()}b=this.getObjects();for(a=0;a<b.length;a++);};d.getNewDefaultRenderer=function(a){switch(a._orientation){case "orthogonal":return new TMXOrthogonalRenderer(a._cols,
a._rows,a._tilewidth,a._tileheight);case "isometric":return new TMXIsometricRenderer(a._cols,a._rows,a._tilewidth,a._tileheight);case "hexagonal":return new TMXHexagonalRenderer(a._cols,a._rows,a._tilewidth,a._tileheight,a._hexsidelength,a._staggeraxis,a._staggerindex);default:throw Error(a._orientation+" type TMX Tile Map not supported!");}};d.parseLayer=function(a,b){var d=new TMXLayer(this,this._tilewidth,this._tileheight,this._orientation,this._tilesets,b,a);this._tmxRenderer.canRender(d)?d.setRenderer(this.getNewDefaultRenderer(this)):
d.setRenderer(this._tmxRenderer);var e=this;this.addEventListener(TMXImageLoadEvent.ALL_IMAGE_COMPLETE,function(a){this.draw(new egret.Rectangle(0,0,e._renderWidth,e._renderHeight))},d);return d};d.parseObjectGroup=function(a,b){var d=new TMXObjectGroup(a,this._orientation,this._tilesets,b),e=this;this.addEventListener(TMXImageLoadEvent.ALL_IMAGE_COMPLETE,function(a){this.draw(new egret.Rectangle(0,0,e._renderWidth,e._renderHeight))},d);return d};d.parseTileset=function(a){return new TMXTileset(a,
this)};d.parseImageLayer=function(a,b){var d=this,e=new TMXImageLayer(this,a,b);e.addEventListener(TMXImageLoadEvent.IMAGE_COMPLETE,function(a){this.draw(new egret.Rectangle(0,0,d._renderWidth,d._renderHeight))},e);return e};return e}(egret.Sprite);TMXTilemap.prototype.__class__="TMXTilemap";
var Base64=function(){function b(){}Object.defineProperty(b,"nativeBase64",{get:function(){return"function"===typeof window.atob},enumerable:!0,configurable:!0});b.decode=function(b){b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");if(this.nativeBase64)return window.atob(b);for(var d=[],a,c,h,k,m,l=0;l<b.length;)a=this._keyStr.indexOf(b.charAt(l++)),c=this._keyStr.indexOf(b.charAt(l++)),k=this._keyStr.indexOf(b.charAt(l++)),m=this._keyStr.indexOf(b.charAt(l++)),a=a<<2|c>>4,c=(c&15)<<4|k>>2,h=(k&3)<<6|m,d.push(String.fromCharCode(a)),
64!==k&&d.push(String.fromCharCode(c)),64!==m&&d.push(String.fromCharCode(h));return d=d.join("")};b.encode=function(b){b=b.replace(/\r\n/g,"\n");if(this.nativeBase64)window.btoa(b);else{for(var d=[],a,c,h,k,m,l,f=0;f<b.length;)a=b.charCodeAt(f++),c=b.charCodeAt(f++),h=b.charCodeAt(f++),k=a>>2,a=(a&3)<<4|c>>4,m=(c&15)<<2|h>>6,l=h&63,isNaN(c)?m=l=64:isNaN(h)&&(l=64),d.push(this._keyStr.charAt(k)),d.push(this._keyStr.charAt(a)),d.push(this._keyStr.charAt(m)),d.push(this._keyStr.charAt(l));return d=
d.join("")}};b.decodeBase64AsArray=function(e,d){d=d||1;var a=b.decode(e),c,h,k,m=new Uint32Array(a.length/d);c=0;for(k=a.length/d;c<k;c++)for(m[c]=0,h=d-1;0<=h;--h)m[c]+=a.charCodeAt(c*d+h)<<(h<<3);return m};b.decompress=function(b,d,a){assert(!0,"GZIP/ZLIB compressed TMX Tile Map not supported!")};b.decodeCSV=function(b){b=b.replace("\n","").trim().split(",");for(var d=[],a=0;a<b.length;a++)d.push(+b[a]);return d};b._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return b}();
Base64.prototype.__class__="Base64";var Link=function(){return function(b,e){this.node=b;this.cost=e}}();Link.prototype.__class__="Link";
var ConditionBlock=function(){function b(){this.loopDatas=[];this.loopLayers=0}var e=b.prototype;Object.defineProperty(e,"loop",{get:function(){if(null==this.conditions)return!1;for(var b=0;b<this.conditions.length;b++)if(this.conditions[b].loop)return!0;return!1},enumerable:!0,configurable:!0});e.execActions=function(b){if(null!=this.actions){var a=[],c;for(c in b)a.push(b[c]);this.lastActionResults=[];for(b=0;b<this.actions.length;b++)this.actions[b].lastSelectInstances=[];if(this.loopDatas&&0<
this.loopDatas.length)if(3<this.loopDatas.length)assert(!0,"\u4e0d\u652f\u6301\u4e09\u5c42\u4ee5\u4e0a\u5faa\u73af\uff01\uff01\uff01");else{b=this.loopDatas[0];c=this.loopDatas[1];var e=this.loopDatas[2];b&&b instanceof ForEachOrderEvent&&(a=this.execForEach(b,a));c&&c instanceof ForEachOrderEvent&&(a=this.execForEach(c,a));e&&e instanceof ForEachOrderEvent&&(a=this.execForEach(e,a));if(b&&b instanceof ForEvent){var k=+eval_e(b.startIndex),m=+eval_e(b.endIndex),l=b.name;for(b=k;k>=m?b>=m:b<=m;k<=
m?b++:b--)if(loopIndex[l]=b,c&&c instanceof ForEvent)for(var f=+eval_e(c.startIndex),g=+eval_e(c.endIndex),n=c.name,p=f;f>=g?p>=g:p<=g;f<=g?p++:p--)if(loopIndex[n]=p,e&&e instanceof ForEvent)for(var q=+eval_e(e.startIndex),r=+eval_e(e.endIndex),s=e.name,t=q;q>=r?t>=r:t<=r;q<=r?t++:t--)loopIndex[s]=t,this.execLoopAction(!0,a);else this.execLoopAction(!0,a);else this.execLoopAction(!0,a)}else if(b&&b instanceof OnForEachArrayElementEvent&&(c=b.array))switch(b=eval_e(b.xyzDimention),b){case 1:for(b=
0;b<c.width;b++)c.curX=b,this.execLoopAction(!0,a),c.curValue=c.at(b,0,0);break;case 2:for(b=0;b<c.width;b++)for(p=0;p<c.height;p++)c.curX=b,c.curY=p,this.execLoopAction(!0,a),c.curValue=c.at(b,p,0);break;case 3:for(b=0;b<c.width;b++)for(p=0;p<c.height;p++)for(t=0;t<c.depth;t++)c.curX=b,c.curY=p,c.curZ=t,this.execLoopAction(!0,a),c.curValue=c.at(b,p,t);break;default:assert(!0,"\u65e0\u6cd5\u89e3\u6790\u5f53\u524d\u6570\u7ec4\u7ef4\u6570\uff1a"+b)}}else this.execLoopAction(!1,a)}};e.execForEach=function(b,
a){var c=b.object,e=eval_e(b.order),k=EgretWorld.getInstance().objectHash[c.name],m=[];if(k){for(var l=0;l<k.length;l++){var f=k[l];this.instancesStatus[f.u_id]&&this.instancesStatus[f.u_id].status&&m.push(f)}k=-1;for(l=0;l<m.length&&(k=b.expression.indexOf(m[l].name),-1==k);l++);-1!=k&&m.sort(function(a,c){lakeshoreInst()[a.name]=a;var f=+eval_e(b.expression),f=f||0;lakeshoreInst()[c.name]=c;var k=+eval_e(b.expression),k=k||0;return 0===e?f>k?1:f<k?-1:0:f>k?-1:f<k?1:0});for(l=0;l<a.length;l++)a[l].name==
c.name&&a.splice(l,1);a=a.concat(m)}return a};e.execLoopAction=function(b,a){for(var c=0;c<this.actions.length;c++){for(var e=this.actions[c],k=e.callTarget,m=k.name,l=EventSheetDecoder.decodeActionParams(e.paramData),f=[],g=0;g<l.length;g++){var n=l[g];if(n instanceof AIObject)for(var p=0;p<a.length;p++){var q=a[p];if(q.name==n.name){f.push(q);break}}}for(g=0;g<f.length;g++)p=f[g],lakeshoreInst()[p.name]=p;k instanceof BaseBehavior&&(m=e.targetName);k=[];switch(m){case "System":k=[AISystem.instance];
break;case "Touch":k=[AITouch.instance];break;case "Keyboard":k=[AIKeyboard.instance];break;case "Browser":k=[AIBrowser.instance];break;case "WebStorage":k=[AIWebStorage.instance];break;case "WebSocket":k=[AIWebSocket.instance];break;case "Ajax":k=[AIAjax.instance];break;default:for(g=0;g<a.length;g++)q=a[g],lakeshoreInst()[q.name]=q,q.name==m&&k.push(q);if(0===k.length)for(p=EgretWorld.getInstance().objectHash[m],p=b?[p[0]]:p,g=0;g<p.length;g++)m=p[g],m.selfStatus&&k.push(m)}m=!1;if(this.lastActionResults&&
0<this.lastActionResults.length){for(g=0;g<k.length;g++)for(f=k[g],p=0;p<this.lastActionResults.length;p++)if(f==this.lastActionResults[p]){m=!0;break}m&&(k=this.lastActionResults)}0<k.length&&(this.lastActionResults=this.execSingleAction(e,k))}};e.execSingleAction=function(b,a){for(var c=b.callTarget,e=b.callHanlderName,k=EventSheetDecoder.decodeActionParams(b.paramData),m=0;m<a.length;m++){var l=a[m];if(!l.isDead){var f;if(c instanceof BaseBehavior)for(var l=l.behaivors,g=0;g<l.length;g++){var n=
l[g];if(n.name==c.name){f=n;break}}else f=l;if(l=f[e])lakeshoreInst()[f.name]=f,l=l.apply(f,k),b.lastSelectInstances=void 0!=l?l:[]}}return b.lastSelectInstances};e.executeTrigger=function(b){for(var a=[],c=[],e=0;e<this.actions.length;e++){for(var k=this.actions[e],m=k.targetName,l=k.callTarget,f=!1,l=0;l<b.length;l++){var g=b[l];g.name==m&&(a.push([g,k]),f=!0)}f||c.push([g,k])}for(e=0;e<a.length;e++){l=a[e];g=l[0];k=l[1];m=k.targetName;l=k.callTarget;b=k.callHanlderName;k=EventSheetDecoder.decodeActionParams(k.paramData);
if(l instanceof BaseBehavior)g=[l];else switch(m){case "System":g=[AISystem.instance];break;case "Touch":g=[AITouch.instance];break;case "Keyboard":g=[AIKeyboard.instance];break;case "Browser":g=[AIBrowser.instance];break;case "WebStorage":g=[AIWebStorage.instance];break;case "WebSocket":g=[AIWebSocket.instance];break;case "Ajax":g=[AIAjax.instance];break;default:g=[g]}for(l=0;l<g.length;l++)m=g[l],(f=m[b])?f.apply(m,k):assert(!0,"\u5f53\u524d\u5b9e\u4f8b"+m+"\u6ca1\u6709"+b+"\u65b9\u6cd5\uff01\uff01")}for(e=
0;e<c.length;e++){l=c[e];k=l[1];m=k.targetName;l=k.callTarget;b=k.callHanlderName;k=EventSheetDecoder.decodeActionParams(k.paramData);if(l instanceof BaseBehavior)g=[l];else switch(m){case "System":g=[AISystem.instance];break;case "Touch":g=[AITouch.instance];break;case "Keyboard":g=[AIKeyboard.instance];break;case "Browser":g=[AIBrowser.instance];break;case "WebStorage":g=[AIWebStorage.instance];break;case "WebSocket":g=[AIWebSocket.instance];break;case "Ajax":g=[AIAjax.instance];break;default:g=
EgretWorld.getInstance().objectHash[m]}for(l=0;l<g.length;l++)m=g[l],(f=m[b])?(lakeshoreInst()[m.name]=m,f.apply(m,k)):assert(!0,"\u5f53\u524d\u5b9e\u4f8b"+m+"\u6ca1\u6709"+b+"\u65b9\u6cd5\uff01\uff01")}};return b}();ConditionBlock.prototype.__class__="ConditionBlock";
var TMXAnimationFrame=function(){function b(b,a,c,e,k){this._tiledid=+b.$tileid;this._duration=+b.$duration;this._tile=new TMXTile(a,c,this._tiledid+k.firstgid,e,k)}var e=b.prototype;Object.defineProperty(e,"tile",{get:function(){return this._tile},enumerable:!0,configurable:!0});Object.defineProperty(e,"tiledId",{get:function(){return this._tiledid},enumerable:!0,configurable:!0});Object.defineProperty(e,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0});return b}();
TMXAnimationFrame.prototype.__class__="TMXAnimationFrame";
var TMXUtils=function(){function b(){}b.create=function(b,d,a,c,h){void 0===h&&(h=null);var k=new egret.URLLoader;k.dataFormat=egret.URLLoaderDataFormat.TEXT;k.addEventListener(egret.Event.COMPLETE,function(k){try{var l=egret.XML.parse(k.target.data)}catch(f){throw Error("tmx\u6587\u4ef6\u683c\u5f0f\u4e0d\u6b63\u786e\uff01");}k=new TMXTilemap(b,d,l,a);k.render();c.addChild(k);null!=h&&h()},this);k.load(new egret.URLRequest(a));k.addEventListener(egret.IOErrorEvent.IO_ERROR,function(a){throw Error("TMXTiledMap\u52a0\u8f7d\u9519\u8bef\uff01\uff01");
},this)};b.decode=function(b,d,a){a=a||"none";d=d||"none";switch(d){case "base64":return d=Base64.decodeBase64AsArray(b.text,4),"none"===a?d:Base64.decompress(b.text,d,a);case "csv":return Base64.decodeCSV(b.text);case "none":a=[];for(d=0;d<b.children.length;d++)a[d]=+b.children[d].$gid;return a;default:throw Error("UnKnown layer encoding:"+d);}};b.color16ToUnit=function(b){b="0x"+b.slice(1);return parseInt(b,16)};return b}();TMXUtils.prototype.__class__="TMXUtils";
var LoadingUI=function(b){function e(){b.call(this);this.createView()}__extends(e,b);var d=e.prototype;d.createView=function(){this.textField=new egret.TextField;this.textField.width=EgretToolUI.stage.stageWidth;this.textField.height=100;this.textField.textAlign="center";this.addChild(this.textField)};d.setProgress=function(a,b){this.textField.text="\u52a0\u8f7d\u4e2d("+a+"/"+b+")..."};return e}(egret.Sprite);LoadingUI.prototype.__class__="LoadingUI";
var EgretConfig=function(){function b(){}b.layouts={};b.eventSheets={};b.sceneWidth=0;b.sceneHeight=0;b.version=0;b.isHasJpg=!1;b.isHasPng=!1;return b}();EgretConfig.prototype.__class__="EgretConfig";
var BinaryHeap=function(){function b(b){void 0===b&&(b=null);this.a=[];this.justMinFun=function(a,b){return a<b};this.a.push(-1);null!=b&&(this.justMinFun=b)}var e=b.prototype;e.ins=function(b){var a=this.a.length;this.a[a]=b;for(b=a>>1;1<a&&this.justMinFun(this.a[a],this.a[b]);){var c=this.a[a];this.a[a]=this.a[b];this.a[b]=c;a=b;b=a>>1}};e.pop=function(){var b=this.a[1];this.a[1]=this.a[this.a.length-1];this.a.pop();for(var a=1,c=this.a.length,e=a<<1,k=e+1;e<c;)if(e=k<c?this.justMinFun(this.a[k],
this.a[e])?k:e:e,this.justMinFun(this.a[e],this.a[a]))k=this.a[a],this.a[a]=this.a[e],this.a[e]=k,a=e,e=a<<1,k=e+1;else break;return b};return b}();BinaryHeap.prototype.__class__="BinaryHeap";
var Grid=function(){function b(b,a){this.type=this._numRows=this._numCols=0;this._straightCost=1;this._diagCost=Math.SQRT2;this._numCols=b;this._numRows=a;this._nodes=[];for(var c=0;c<this._numCols;c++){this._nodes[c]=[];for(var e=0;e<this._numRows;e++)this._nodes[c][e]=new ANode(c,e)}}var e=b.prototype;e.getType=function(){return this.type};Object.defineProperty(e,"startNode",{get:function(){return this._startNode},enumerable:!0,configurable:!0});Object.defineProperty(e,"endNode",{get:function(){return this._endNode},
enumerable:!0,configurable:!0});Object.defineProperty(e,"numCols",{get:function(){return this._numCols},enumerable:!0,configurable:!0});Object.defineProperty(e,"numRows",{get:function(){return this._numRows},enumerable:!0,configurable:!0});e.calculateLinks=function(b){void 0===b&&(b=0);this.type=b;for(var a=0;a<this._numCols;a++)for(var c=0;c<this._numRows;c++)this.initNodeLink(this._nodes[a][c],b)};e.initNodeLink=function(b,a){var c=Math.max(0,b.x-1),e=Math.max(0,b.y-1),k=Math.min(this.numCols-1,
b.x+1),m=Math.min(this.numRows-1,b.y+1);for(b.links=[];c<=k;c++)for(var l=e;l<=m;l++){var f=this.getNode(c,l);if(f!=b&&f.walkable){if(2!=a&&c!=b.x&&l!=b.y){var g=this.getNode(b.x,l);if(!g.walkable)continue;g=this.getNode(c,b.y);if(!g.walkable)continue}g=this._straightCost;if(b.x!=f.x&&b.y!=f.y){if(1==a)continue;if(2==a&&1==(b.x-f.x)*(b.y-f.y))continue;g=2==a?this._straightCost:this._diagCost}b.links.push(new Link(f,g))}}};e.getNode=function(b,a){void 0===b&&(b=0);void 0===a&&(a=0);return this._nodes[b][a]};
e.setEndNode=function(b,a){void 0===b&&(b=0);void 0===a&&(a=0);this._nodes[b]&&this._nodes[b][a]&&(this._endNode=this._nodes[b][a])};e.setStartNode=function(b,a){void 0===b&&(b=0);void 0===a&&(a=0);this._startNode=this._nodes[b][a]};e.setWalkable=function(b,a,c){void 0===b&&(b=0);void 0===a&&(a=0);void 0===c&&(c=!0);this._nodes[b]&&this._nodes[b][a]&&(this._nodes[b][a].walkable=c)};e.getWalkable=function(b,a){void 0===b&&(b=0);void 0===a&&(a=0);return this._nodes[b]&&this._nodes[b][a]?this._nodes[b][a].walkable:
!1};e.destory=function(){this._startNode&&this._startNode.parent&&(this._startNode=this._startNode.parent=null);this._endNode&&this._endNode.parent&&(this._endNode=this._endNode.parent=null);if(this._nodes){for(;this._nodes.length;)this._nodes.shift();this._nodes=null}};e.hasBarrier=function(b,a,c,e){void 0===b&&(b=0);void 0===a&&(a=0);void 0===c&&(c=0);void 0===e&&(e=0);if(b==c&&a==e)return!1;var k=new egret.Point(b,a),m=new egret.Point(c,e),l=Math.abs(c-b),f=Math.abs(e-a);if(l>f)for(k=this.getLineFunc(k,
m,0),m=Math.min(b,c),b=Math.max(b,c),a=m;a<b;a++){c=k(a);c=this.getNodesUnderPoint(a,c);for(var g in c)if(!1==c[g].walkNode)return!0}else for(k=this.getLineFunc(k,m,1),m=Math.min(a,e),b=Math.max(a,e),a=m;a<b;a++)for(g in c=k(a),c=this.getNodesUnderPoint(c,a),c)if(!1==c[g].walkable)return!0;return!1};e.getNodesUnderPoint=function(b,a,c){void 0===b&&(b=0);void 0===a&&(a=0);void 0===c&&(c=null);var e=[],k=0==b%1,m=0==a%1;k&&m?(e[0]=this.getNode(b-1,a-1),e[1]=this.getNode(b,a-1),e[2]=this.getNode(b-1,
a),e[3]=this.getNode(b,a)):k&&!m?(e[0]=this.getNode(b-1,Math.round(a)),e[1]=this.getNode(b,Math.round(a))):!k&&m?(e[0]=this.getNode(Math.round(b),a-1),e[1]=this.getNode(Math.round(b),a)):e[0]=this.getNode(Math.round(b),Math.round(a));if(c&&0<c.length)for(b=0;e.length;b++)-1!=c.indexOf(e[b])&&(e.splice(b,1),b--);return e};e.getLineFunc=function(b,a,c){void 0===c&&(c=0);if(b.x==a.x){if(0==c)throw Error("\u4e24\u70b9\u6240\u786e\u5b9a\u76f4\u7ebf\u5782\u76f4\u4e8ey\u8f74\uff0c\u4e0d\u80fd\u6839\u636ex\u503c\u5f97\u5230y\u503c");
if(1==c)var e=function(a){return b.x};return e}if(b.y==a.y){if(0==c)e=function(a){return b.y};else if(1==c)throw Error("\u4e24\u70b9\u6240\u786e\u5b9a\u76f4\u7ebf\u5782\u76f4\u4e8ey\u8f74\uff0c\u4e0d\u80fd\u6839\u636ex\u503c\u5f97\u5230y\u503c");return e}var k=(b.y-a.y)/(b.x-a.x),m=b.y-k*b.x;0==c?e=function(a){return k*a+m}:1==c&&(e=function(a){return(a-m)/k});return e};return b}();Grid.prototype.__class__="Grid";
var Condition=function(){function b(){this.isInvert=this.isTrigger=!1;this._sid=this.operatorType=0;b.UID++;this._sid=b.UID}var e=b.prototype;Object.defineProperty(e,"sid",{get:function(){return this._sid},enumerable:!0,configurable:!0});Object.defineProperty(e,"isFirstCondition",{get:function(){return 0===this.index},enumerable:!0,configurable:!0});b.UID=0;return b}();Condition.prototype.__class__="Condition";var FadeOnFadeInFinishedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);
FadeOnFadeInFinishedEvent.prototype.__class__="FadeOnFadeInFinishedEvent";var FadeOnFadeOutFinishedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);FadeOnFadeOutFinishedEvent.prototype.__class__="FadeOnFadeOutFinishedEvent";var FadeOnFadeWaitFinishedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);FadeOnFadeWaitFinishedEvent.prototype.__class__="FadeOnFadeWaitFinishedEvent";
var E_GameInit=function(b){function e(){b.call(this)}__extends(e,b);return e}(ModuleEvent);E_GameInit.prototype.__class__="E_GameInit";var E_loader_LogoShowComplete=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);E_loader_LogoShowComplete.prototype.__class__="E_loader_LogoShowComplete";var E_loader_Projects_loader=function(b){function e(){b.call(this)}__extends(e,b);return e}(ModuleEvent);E_loader_Projects_loader.prototype.__class__="E_loader_Projects_loader";
var E_loader_RreResource_Loader=function(b){function e(){b.call(this)}__extends(e,b);return e}(ModuleEvent);E_loader_RreResource_Loader.prototype.__class__="E_loader_RreResource_Loader";var E_loader_loadSpriteSheet=function(b){function e(){b.call(this)}__extends(e,b);return e}(ModuleEvent);E_loader_loadSpriteSheet.prototype.__class__="E_loader_loadSpriteSheet";
var TMXAnimation=function(){function b(b,a,c,e,k){this.oldTime=this._currentFrame=0;if(b&&(this._x=a,this._y=c,this._data=b,this._animations=[],this._currentFrame=0,b=b.children))for(var m=0;m<b.length;m++){var l=new TMXAnimationFrame(b[m],a,c,e,k);this._animations[m]=l}}var e=b.prototype;Object.defineProperty(e,"x",{get:function(){return this._x},enumerable:!0,configurable:!0});Object.defineProperty(e,"y",{get:function(){return this._y},enumerable:!0,configurable:!0});e.render=function(){this._currentFrame++;
this._currentFrame%=this._animations.length};Object.defineProperty(e,"currentAnimationFrame",{get:function(){return this._animations[this._currentFrame]},enumerable:!0,configurable:!0});Object.defineProperty(e,"animations",{get:function(){return this._animations},enumerable:!0,configurable:!0});Object.defineProperty(e,"data",{get:function(){return this._data},enumerable:!0,configurable:!0});return b}();TMXAnimation.prototype.__class__="TMXAnimation";
var TMXObjectGroup=function(b){function e(a,c,d,e){b.call(this);this._name=a.$name;this._opacity="undefined"!==typeof a.$opacity?+a.$opacity:1;this._draworder=a.$draworder;this._color=a.$color?TMXUtils.color16ToUnit(a.$color):TMXConstants.DEFAULT_COLOR;this._orientaion=c;this._tilesets=d;this._z=e;this._objects=[];this._objectHash={};this._childrens=a.children;this.visible="undefined"!==typeof a.$visible?Boolean(+a.$visible):!0}__extends(e,b);var d=e.prototype;Object.defineProperty(d,"name",{get:function(){return this._name},
enumerable:!0,configurable:!0});d.draw=function(){if(this._childrens)for(var a=0;a<this._childrens.length;a++){var b=new TMXObject(this._childrens[a],this._orientaion,this._tilesets,this._z,this._color);b.alpha=this._opacity;this._objects[a]=b;this.addChild(b);this._objectHash[b.id]=b}};d.render=function(){};d.destory=function(){this._objects=null};d.getObjectById=function(a){return this._objectHash[a]};d.removeObjectById=function(a){(a=this.getObjectById(a))&&a.parent&&a.parent.removeChild(a)};d.showObjectById=
function(a){if(a=this.getObjectById(a))a.visible=!0};d.hideObjectById=function(a){if(a=this.getObjectById(a))a.visible=!1};d.getObjectCount=function(){return this._objects.length};d.getObjectByIndex=function(a){return this._objects[a]};d.removeObjectByIndex=function(a){(a=this.getObjectByIndex(a))&&a.parent&&a.parent.removeChild(a)};return e}(egret.Sprite);TMXObjectGroup.prototype.__class__="TMXObjectGroup";var leo;
(function(b){var e=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.KEY_DOWN="keyDown";a.KEY_UP="keyUp";return a}(egret.Event);b.KeyboardEvent=e;e.prototype.__class__="leo.KeyboardEvent"})(leo||(leo={}));
var AStar=function(){function b(b){this._straightCost=1;this._diagCost=Math.SQRT2;this.nowversion=1;this.TwoOneTwoZero=2*Math.cos(Math.PI/3);this._grid=b;this.heuristic=this.euclidian2}var e=b.prototype;Object.defineProperty(e,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0});Object.defineProperty(e,"path",{get:function(){return this._path},enumerable:!0,configurable:!0});Object.defineProperty(e,"floydPath",{get:function(){return this._floydPath},enumerable:!0,configurable:!0});
e.justMin=function(b,a){return b.f<a.f};e.search=function(){if(this.findPath()){this.floyd();for(var b=[],a=0;a<this._floydPath.length;a++)b[a]=[],b[a][0]=this._floydPath[a].x,b[a][1]=this._floydPath[a].y;return b}};e.findPath=function(){this._endNode=this._grid.endNode;this.nowversion++;this._startNode=this._grid.startNode;this._open=new BinaryHeap(this.justMin);this._startNode.g=0;return this.search2()};e.floyd=function(){if(null!=this.path){this._floydPath=this.path.concat();var b=this._floydPath.length;
if(2<b){var a=new ANode(0,0),c=new ANode(0,0);this.floydVector(a,this._floydPath[b-1],this._floydPath[b-2]);for(b=this._floydPath.length-3;0<=b;b--)this.floydVector(c,this._floydPath[b+1],this._floydPath[b]),a.x==c.x&&a.y==c.y?this._floydPath.splice(b+1,1):(a.x=c.x,a.y=c.y)}b=this._floydPath.length;for(b-=1;0<=b;b--)for(a=0;a<=b-2;a++)if(this.floydCrossAble(this._floydPath[b],this._floydPath[a])){for(c=b-1;c>a;c--)this._floydPath.splice(c,1);b=a;break}}};e.floydCrossAble=function(b,a){for(var c=this.bresenhamNodes(new egret.Point(b.x,
b.y),new egret.Point(a.x,a.y)),e=c.length-2;0<e;e--)if(0<=c[e].x&&0<=c[e].y&&c[e].x<this._grid.numCols&&c[e].y<this._grid.numRows&&!this._grid.getNode(c[e].x,c[e].y).walkable)return!1;return!0};e.bresenhamNodes=function(b,a){var c=Math.abs(a.y-b.y)>Math.abs(a.x-b.x);if(c){var e=b.x;b.x=b.y;b.y=e;e=a.x;a.x=a.y;a.y=e}var e=a.x>b.x?1:a.x<b.x?-1:0,k=(a.y-b.y)/Math.abs(a.x-b.x),m=[],l=b.x+e,f=b.y+k;c?m.push(new egret.Point(b.y,b.x)):m.push(new egret.Point(b.x,b.y));for(Math.abs(b.x-a.x)==Math.abs(b.y-
a.y)&&(b.x<a.x&&b.y<a.y?m.push(new egret.Point(b.x,b.y+1),new egret.Point(a.x,a.y-1)):b.x>a.x&&b.y>a.y?m.push(new egret.Point(b.x,b.y-1),new egret.Point(a.x,a.y+1)):b.x<a.x&&b.y>a.y?m.push(new egret.Point(b.x,b.y-1),new egret.Point(a.x,a.y+1)):b.x>a.x&&b.y<a.y&&m.push(new egret.Point(b.x,b.y+1),new egret.Point(a.x,a.y-1)));l!=a.x;){var g=Math.floor(f),n=Math.ceil(f);c?m.push(new egret.Point(g,l)):m.push(new egret.Point(l,g));g!=n?c?m.push(new egret.Point(n,l)):m.push(new egret.Point(l,n)):0!=k&&(c?
(m.push(new egret.Point(n+1,l)),m.push(new egret.Point(n-1,l))):(m.push(new egret.Point(l,n+1)),m.push(new egret.Point(l,n-1))));l+=e;f+=k}c?m.push(new egret.Point(a.y,a.x)):m.push(new egret.Point(a.x,a.y));return m};e.floydVector=function(b,a,c){b.x=a.x-c.x;b.y=a.y-c.y};e.search2=function(){var b=this._startNode;for(b.version=this.nowversion;b!=this._endNode;){for(var a=b.links.length,c=0;c<a;c++){var e=b.links[c].node,k=b.g+b.links[c].cost,m=this.heuristic(e),l=k+m;e.version==this.nowversion?e.f>
l&&(e.f=l,e.g=k,e.h=m,e.parent=b):(e.f=l,e.g=k,e.h=m,e.parent=b,this._open.ins(e),e.version=this.nowversion)}if(1==this._open.a.length)return!1;b=this._open.pop()}this.buildPath();return!0};e.buildPath=function(){this._path=[];var b=this._endNode;for(this._path.push(b);b!=this._startNode;)b=b.parent,this._path.unshift(b)};e.manhattan=function(b){return Math.abs(b.x-this._endNode.x)+Math.abs(b.y-this._endNode.y)};e.manhattan2=function(b){var a=Math.abs(b.x-this._endNode.x);b=Math.abs(b.y-this._endNode.y);
return a+b+Math.abs(a-b)/1E3};e.euclidian=function(b){var a=b.x-this._endNode.x;b=b.y-this._endNode.y;return Math.sqrt(a*a+b*b)};e.chineseCheckersEuclidian2=function(b){var a=b.x+b.y/2-this._endNode.x-this._endNode.y/2;b=b.y/this.TwoOneTwoZero-this._endNode.y/this.TwoOneTwoZero;return Math.sqrt(a*a+b*b)};e.euclidian2=function(b){var a=b.x-this._endNode.x;b=b.x-this._endNode.y;return a*a+b*b};e.diagonal=function(b){var a=Math.abs(b.x-this._endNode.x);b=Math.abs(b.y-this._endNode.y);var c=Math.min(a,
b);return this._diagCost*c+this._straightCost*(a+b-2*c)};return b}();AStar.prototype.__class__="AStar";
var FadeBehavior=function(b){function e(){b.call(this);this.activeAtStartType=1;this.fadeInTime=0;this.fadeOutTime=1;this.destoryType=this.waitTime=0;trigger.register(this)}__extends(e,b);var d=e.prototype;d.onCreate=function(){this.activeAtStartType=eval_e(this.activeAtStartType);this.fadeInTime=eval_e(this.fadeInTime);this.fadeOutTime=eval_e(this.fadeOutTime);this.waitTime=eval_e(this.waitTime);this.destoryType=eval_e(this.destoryType);this._oldTime=egret.getTimer();this._state=1===this.destoryType?
0:3;1==this.activeAtStartType&&(0===this.fadeInTime?(this._state=1,0===this.waitTime&&(this._state=2)):this.inst&&(this.inst.alpha=0));0!==this.fadeInTime&&this.inst&&(this.inst.alpha=0)};d.onFadeInFinished=function(a){return{instances:[this.inst],status:!0}};d.onFadeOutFinished=function(a){return{instances:[this.inst],status:!0}};d.onWaitFinished=function(a){return{instances:[this.inst],status:!0}};d.doStart=function(){this._state=0;this._oldTime=egret.getTimer();0===this.fadeInTime?(this._state=
1,0===this.waitTime&&(this._state=2)):this.inst.alpha=0};d.startFade=function(){3===this._state&&this.doStart()};d.restartFade=function(){this.doStart()};d.setWaitTime=function(a){a=eval_e(a);this.waitTime=0>a?0:a};d.setFadeInTime=function(a){a=eval_e(a);this.fadeInTime=0>a?0:a};d.setFadeOutTime=function(a){a=eval_e(a);this.fadeOutTime=0>a?0:a};d.setActiveAtStartType=function(a){this.activeAtStartType=eval_e(a)};d.tick=function(){0!=this.activeAtStartType&&(this._currentTime=egret.getTimer(),0===
this._state&&(this.inst.alpha+=this.inst.dt/this.fadeInTime,1<=this.inst.alpha&&(this._state=this.inst.alpha=1,this._oldTime=egret.getTimer(),this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onFadeInFinished)))),1===this._state&&(this._currentTime=egret.getTimer(),this._currentTime-this._oldTime>=1E3*this.waitTime&&(this._oldTime=this._currentTime,this._state=2,this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onWaitFinished)))),2===this._state&&0!==this.fadeOutTime&&(this.inst.alpha-=
this.inst.dt/this.fadeOutTime,0>=this.inst.alpha&&(this.inst.alpha=0,this._state=3,this._oldTime=egret.getTimer(),this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onFadeOutFinished)),1===this.destoryType&&this.inst.destory())))};d.clone=function(){var a=new e;a.enabled=this.enabled;a.name=this.name;a.paramInstances=this.paramInstances;a.fadeInTime=this.fadeInTime;a.fadeOutTime=this.fadeOutTime;a.waitTime=this.waitTime;a.destoryType=this.destoryType;a.activeAtStartType=this.activeAtStartType;
a.onCreate();return a};return e}(BaseBehavior);FadeBehavior.prototype.__class__="FadeBehavior";var BehaivorType=function(){function b(){}b.scrollUp="scrollUp";b.scrollDown="scrollDown";b.scrollLeft="scrollLeft";b.scrollRight="scrollRight";return b}();BehaivorType.prototype.__class__="BehaivorType";
var OperationType=function(){function b(){}b.EQUAL_TO="equalTo";b.NOT_EQUAL_TO="notEqualTo";b.LESS_THAN="lessThan";b.LESS_OR_EQUAL="lessOrEqual";b.GREATER_THAN="greaterThan";b.GREATER_OR_EQUAL="greaterOrEqual";return b}();OperationType.prototype.__class__="OperationType";var InstanceVariablesType=function(){function b(){}b.TEXT="text";b.INT="int";b.NUMBER="Number";b.BOOLEAN="boolean";return b}();InstanceVariablesType.prototype.__class__="InstanceVariablesType";
var B_Bullet_compareDistanceTravelledEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);B_Bullet_compareDistanceTravelledEvent.prototype.__class__="B_Bullet_compareDistanceTravelledEvent";var B_CompareSpeedEvent=function(b){function e(){b.call(this);this.speed=this.which=0}__extends(e,b);return e}(EventBase);B_CompareSpeedEvent.prototype.__class__="B_CompareSpeedEvent";var B_IsMovingEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);
B_IsMovingEvent.prototype.__class__="B_IsMovingEvent";var B_DragDrop_IsDraggingEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);B_DragDrop_IsDraggingEvent.prototype.__class__="B_DragDrop_IsDraggingEvent";var B_DragDrop_OnDragStartEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);B_DragDrop_OnDragStartEvent.prototype.__class__="B_DragDrop_OnDragStartEvent";var B_DrapDrop_onDropEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);
B_DrapDrop_onDropEvent.prototype.__class__="B_DrapDrop_onDropEvent";var IsNodeMovingEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsNodeMovingEvent.prototype.__class__="IsNodeMovingEvent";var OnNodeMovingArrivedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnNodeMovingArrivedEvent.prototype.__class__="OnNodeMovingArrivedEvent";var OnNodeMovingReadyEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);
OnNodeMovingReadyEvent.prototype.__class__="OnNodeMovingReadyEvent";var OnNodeMovingSegmentArrivedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnNodeMovingSegmentArrivedEvent.prototype.__class__="OnNodeMovingSegmentArrivedEvent";var IsPathfindingMovingEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsPathfindingMovingEvent.prototype.__class__="IsPathfindingMovingEvent";
var OnPathfindingArrivedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnPathfindingArrivedEvent.prototype.__class__="OnPathfindingArrivedEvent";var OnPathfindingGridCompleteEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnPathfindingGridCompleteEvent.prototype.__class__="OnPathfindingGridCompleteEvent";var OnPathfindingReadyEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);
OnPathfindingReadyEvent.prototype.__class__="OnPathfindingReadyEvent";var OnPathfindingSegmentArrivedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnPathfindingSegmentArrivedEvent.prototype.__class__="OnPathfindingSegmentArrivedEvent";var B_Turret_OnShootEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);B_Turret_OnShootEvent.prototype.__class__="B_Turret_OnShootEvent";
var B_Turret_OnTargetAcquiredEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);B_Turret_OnTargetAcquiredEvent.prototype.__class__="B_Turret_OnTargetAcquiredEvent";var B_Turret_hasTargetEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);B_Turret_hasTargetEvent.prototype.__class__="B_Turret_hasTargetEvent";var FlashIsFlashingEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);
FlashIsFlashingEvent.prototype.__class__="FlashIsFlashingEvent";var FlashOnFlashEndedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);FlashOnFlashEndedEvent.prototype.__class__="FlashOnFlashEndedEvent";var FlashonFlashLoopOnceCompleteEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);FlashonFlashLoopOnceCompleteEvent.prototype.__class__="FlashonFlashLoopOnceCompleteEvent";
var IsPinnedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsPinnedEvent.prototype.__class__="IsPinnedEvent";var IsByWallEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsByWallEvent.prototype.__class__="IsByWallEvent";var IsDoubleJumpEnabledEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsDoubleJumpEnabledEvent.prototype.__class__="IsDoubleJumpEnabledEvent";
var IsFallingEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsFallingEvent.prototype.__class__="IsFallingEvent";var IsJumpingEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsJumpingEvent.prototype.__class__="IsJumpingEvent";var IsOnFloorEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsOnFloorEvent.prototype.__class__="IsOnFloorEvent";
var SinCompareMagnitudeEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);SinCompareMagnitudeEvent.prototype.__class__="SinCompareMagnitudeEvent";var SinCompareWaveEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);SinCompareWaveEvent.prototype.__class__="SinCompareWaveEvent";var IsSolidEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsSolidEvent.prototype.__class__="IsSolidEvent";
var IsWalkableEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsWalkableEvent.prototype.__class__="IsWalkableEvent";var TimerOnTimerCompleteEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);TimerOnTimerCompleteEvent.prototype.__class__="TimerOnTimerCompleteEvent";var TimerOnTimerEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);TimerOnTimerEvent.prototype.__class__="TimerOnTimerEvent";
var GameInit_Proxy=function(b){function e(a){b.call(this,a)}__extends(e,b);var d=e.prototype;d.registerEvents=function(){return[E_GameInit]};d.receivedEvents=function(a){switch(a.getClass()){case E_GameInit:this.onGameInit()}};d.onGameInit=function(){this.dispatchModuleEvent(new E_loader_RreResource_Loader)};return e}(Proxy);GameInit_Proxy.prototype.__class__="GameInit_Proxy";
var Loader_Config_Decoder_Proxy=function(b){function e(a){b.call(this,a);this.loadCompleteData=null;this.showLogoComplete=!1}__extends(e,b);var d=e.prototype;d.registerEvents=function(){return[E_loader_Config_Loader,E_loader_Projects_loader,E_loader_LogoShowComplete]};d.receivedEvents=function(a){switch(a.getClass()){case E_loader_Config_Loader:this.onConfigLoad(a);break;case E_loader_Projects_loader:this.onProjectsLoad();break;case E_loader_LogoShowComplete:this.onLogoShowComplete()}};d.onProjectsLoad=
function(){var a=this;this.loadCompleteData=null;this.execLoad("resource/assets/projects.xml",function(b){b=b.children;for(var d=0,e=b.length;d<e;d++){var m=b[d];switch(m.localName){case "sceneSize":EgretConfig.sceneWidth=+m.$width;EgretConfig.sceneHeight=+m.$height;1===+m.$showFps&&egret.Profiler.getInstance().run();EgretConfig.isHasJpg="true"==m.$hasJpg?!0:!1;EgretConfig.isHasPng="true"==m.$hasPng?!0:!1;break;case "info":var l=m.$baseUrl;a.baseUrl=l;var f=function(){var b=l+this.$layoutUrl;a.execLoad(b,
function(b){a.layouts=this.ln;a.layoutsData=b;a.execLoad(this.eu,function(b){a.loadCompleteData={en:this.en,data:b}},this)},{lu:b,ln:this.$layoutName,eu:l+this.$eventsheetUrl,en:this.$eventsheetName})};a.globalConfigLoad(l,f,m,f,m);break;case "version":EgretConfig.version=parseFloat(m.text)}}EventManager.dispatchModuleEvent(new E_loader_loadSpriteSheet)},a)};d.globalConfigLoad=function(a,b,d,e,m){void 0===e&&(e=null);void 0===m&&(m=null);var l=this;this.execLoad(a+"global.xml",function(a){l.globalData=
a;LayoutDecoder.decodeInstances(a);b&&b.apply(d)},this,e,m)};d.onLogoShowComplete=function(){this.loadCompleteData?(this.showLogoComplete=!1,EgretConfig.layouts[this.layouts]=this.layoutsData,LayoutDecoder.start(this.layouts),EgretConfig.eventSheets[this.loadCompleteData.en]=this.loadCompleteData.data,EventSheetDecoder.start(this.loadCompleteData.en)):this.showLogoComplete=!0};d.execLoad=function(a,b,d,e,m){void 0===e&&(e=null);void 0===m&&(m=null);var l=new egret.URLLoader;l.addEventListener(egret.Event.COMPLETE,
function(a){a=egret.XML.parse(a.target.data);null!=this.onComplete&&this.onComplete.apply(d,[a])},{url:a,onComplete:b,thisObject:d});l.load(new egret.URLRequest(a));l.addEventListener(egret.IOErrorEvent.IO_ERROR,function(a){e&&e.apply(m)},this)};d.onConfigLoad=function(a){a=a.layoutName;var b=this.baseUrl+a+".xml",d=this;d.execLoad(b,function(a){var b=a.$eventSheet;this.en=b;this.eu=d.baseUrl+b+".xml";EgretConfig.layouts[this.ln]=a;a=LayoutDecoder.decodeInstances(d.globalData);for(b=0;b<a.length;b++){var c=
a[b];EgretWorld.getInstance().addChild(c)}LayoutDecoder.start(this.ln);d.execLoad(this.eu,function(a){EgretConfig.eventSheets[this.en]=a;EventSheetDecoder.start(this.en)},this)},{lu:b,ln:a})};return e}(Proxy);Loader_Config_Decoder_Proxy.prototype.__class__="Loader_Config_Decoder_Proxy";
var Loader_PreResource_Load_Proxy=function(b){function e(a){b.call(this,a)}__extends(e,b);var d=e.prototype;d.registerEvents=function(){return[E_loader_RreResource_Loader,E_loader_loadSpriteSheet]};d.receivedEvents=function(a){switch(a.getClass()){case E_loader_RreResource_Loader:this.onPreResourceLoad();break;case E_loader_loadSpriteSheet:this.loadSpriteSheet()}};d.onPreResourceLoad=function(){this.loadingView=new LoadingUI;EgretToolUI.loadingContainer.addChild(this.loadingView);this.loadComplete=
!1;RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);RES.loadConfig("resource/resource.json","resource/")};d.onConfigComplete=function(a){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,function(a){"preload"==a.groupName&&(this.createGameScene(),this.dispatchModuleEvent(new E_loader_Projects_loader))},this);RES.loadGroup("preload")};d.loadSpriteSheet=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,
this.onResourceLoadComplete,this);RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this);RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this);RES.loadGroup("resourceMerger")};d.onResourceLoadComplete=function(a){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this);RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this);RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,
this.onResourceProgress,this);this.onLoadComplete()};d.onLoadComplete=function(){EgretToolUI.loadingContainer.removeChild(this.loadingView);this.loadComplete=!0;EgretToolUI.preContainer.alpha=1;var a=egret.Tween.get(EgretToolUI.preContainer);a.wait(500);a.to({alpha:0},250).call(function(){EgretToolUI.preContainer.parent&&EgretToolUI.preContainer.parent.removeChild(EgretToolUI.preContainer);EventManager.dispatchModuleEvent(new E_loader_LogoShowComplete)})};d.decodeMerger=function(a,b){if(a&&b){var d=
a.frames,e=new egret.Bitmap;e.texture=b;for(var m in d){var l=d[m],f=new egret.RenderTexture;f.drawToTexture(e,new egret.Rectangle(l.x,l.y,l.w,l.h));LayoutDecoder.spriteSheetDatas[m]={offsetX:l.offX,offsetY:l.offY,texture:f}}}};d.onResourceLoadError=function(a){this.onLoadComplete()};d.onResourceProgress=function(a){this.loadingView.setProgress(a.itemsLoaded,a.itemsTotal)};d.createGameScene=function(){var a=EgretToolUI.stage.stageWidth,b=EgretToolUI.stage.stageHeight,d=this.createBitmapByName("egretIcon");
EgretToolUI.preContainer.addChild(d);d.width=a;d.height=b;var e=new egret.TextField;e.width=a;e.textAlign=egret.HorizontalAlign.CENTER;EgretToolUI.preContainer.addChild(e);e.y=b/2+100;e.alpha=0;this.textfield=e;this.loadingView.y=d.height/2+300};d.createBitmapByName=function(a){var b=new egret.Bitmap;a=RES.getRes(a);b.texture=a;return b};return e}(Proxy);Loader_PreResource_Load_Proxy.prototype.__class__="Loader_PreResource_Load_Proxy";
var TMXTile=function(b){function e(a,c,d,e,m){b.call(this);this._tileset=m;this._col=a;this._row=c;this._tilemap=e;this._gid=d;this._flippedX=0!==(this._gid&TMXConstants.TMX_FLIP_H);this._flippedY=0!==(this._gid&TMXConstants.TMX_FLIP_V);this._flippedAD=this._flippedX&&this._flippedY;this._flipped=this._flippedX||this._flippedY||this._flippedAD;this._gid&=TMXConstants.TMX_CLEAR_BIT_MASK;if(this._tileData=m.getSpecialTileDataByTileId(this._gid))if(d=this._tileData.children)for(var l=0;l<d.length;l++){var f=
d[l];switch(f.localName){case TMXConstants.PROPERTIES:this._properties=e.parseProperties(f);break;case TMXConstants.ANIMATION:this._animation=new TMXAnimation(f,a,c,e,m)}}}__extends(e,b);var d=e.prototype;Object.defineProperty(d,"gid",{get:function(){return this._gid},enumerable:!0,configurable:!0});Object.defineProperty(d,"col",{get:function(){return this._col},enumerable:!0,configurable:!0});Object.defineProperty(d,"row",{get:function(){return this._row},enumerable:!0,configurable:!0});Object.defineProperty(d,
"tileset",{get:function(){return this._tileset},enumerable:!0,configurable:!0});Object.defineProperty(d,"tilemap",{get:function(){return this._tilemap},enumerable:!0,configurable:!0});Object.defineProperty(d,"flippedX",{get:function(){return this._flippedX},enumerable:!0,configurable:!0});Object.defineProperty(d,"flippedY",{get:function(){return this._flippedY},enumerable:!0,configurable:!0});Object.defineProperty(d,"flippedAD",{get:function(){return this._flippedAD},enumerable:!0,configurable:!0});
Object.defineProperty(d,"flipped",{get:function(){return this._flipped},enumerable:!0,configurable:!0});Object.defineProperty(d,"animation",{get:function(){return this._animation},enumerable:!0,configurable:!0});return e}(egret.Sprite);TMXTile.prototype.__class__="TMXTile";
var BoundsOfRectBehaivor=function(b){function e(){b.call(this)}__extends(e,b);var d=e.prototype;d.onCreate=function(){this.boundType=eval_e(this.boundType);this.x=eval_e(this.x)||0;this.y=eval_e(this.y)||0;this.width=eval_e(this.width)||EgretToolUI.stage.stageWidth;this.height=eval_e(this.height)||EgretToolUI.stage.stageHeight};d.tick=function(){switch(this.boundType){case 0:this.inst.x<this.x+this.inst.width*this.inst.anchorX&&(this.inst.x=this.x+this.inst.width*this.inst.anchorX);this.inst.x>this.x+
this.width-this.inst.width*this.inst.anchorX&&(this.inst.x=this.x+this.width-this.inst.width*this.inst.anchorX);this.inst.y<this.y+this.inst.height*this.inst.anchorY&&(this.inst.y=this.y+this.inst.height*this.inst.anchorY);this.inst.y>this.y+this.height-this.inst.height*this.inst.anchorY&&(this.inst.y=this.y+this.height-this.inst.height*this.inst.anchorY);break;case 1:this.inst.x<this.x&&(this.inst.x=this.x),this.inst.x>this.x+this.width&&(this.inst.x=this.x+this.width),this.inst.y<this.y&&(this.inst.y=
this.y),this.inst.y>this.y+this.height&&(this.inst.y=this.y+this.height)}};d.setBoundsRect=function(a,b,d,e,m){this.boundType=eval_e(a);this.x=eval_e(b)||0;this.y=eval_e(d)||0;this.width=eval_e(e)||EgretToolUI.stage.stageWidth;this.height=eval_e(m)||EgretToolUI.stage.stageHeight};d.clone=function(){var a=new e;a.enabled=this.enabled;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;a.name=this.name;a.paramInstances=this.paramInstances;a.onCreate();return a};return e}(BaseBehavior);
BoundsOfRectBehaivor.prototype.__class__="BoundsOfRectBehaivor";
var BulletBehaivor=function(b){function e(){b.call(this);this.gravity=this.acceleration=0;this.bounceOffSolids=!1;this._currentGravity=this._currentSpeed=this._travelled=this.dy=this.dx=this.angle=0;this._speed=1;this._travelled=0}__extends(e,b);var d=e.prototype;d.onCreate=function(){this.angle=eval_e(this.angle);this._currentSpeed=eval_e(this.speed);this._acceleration=eval_e(this.acceleration);this._gravity=eval_e(this.gravity);this.inst&&(this._radian=toRadian(this.inst.relyOnTarget?this.inst.relyOnTarget.angle:
eval_e(this.angle)));assert("number"!==typeof this._currentSpeed||"number"!==typeof this._acceleration||"number"!==typeof this._gravity,"BulletBehaivor parameter type incorrect!!")};d.compareSpeed=function(a){return{instances:[this],status:Utils.compare(this._currentSpeed,a.operationType,a.speed)}};d.compareTravelled=function(a){return{instances:[this],status:Utils.compare(this._travelled,a.operationType,a.distance)}};d.setEnabled=function(a){a=eval_e(a);assert("number"!==typeof a,"BulletBehaivor setEnabled parameter type incorrect!!");
this.enabled=1==a};d.setAcceleration=function(a){a=eval_e(a);assert("number"!==typeof a,"BulletBehavior setAcceleration parameter type incorrect!!");this._acceleration=a};d.setAngleOfMotion=function(a){a=eval_e(a);assert("number"!==typeof a,"BulletBehavior setAngleOfMotion parameter type incorrect!!");this.angle=a;this._radian=toRadian(this.inst.relyOnTarget?this.inst.relyOnTarget.angle:eval_e(this.angle))};d.setGravity=function(a){a=eval_e(a);assert("number"!==typeof a,"BulletBehavior setGravity parameter type incorrect!!");
this._gravity=a};d.setSpeed=function(a){a=eval_e(a);assert("number"!==typeof a,"BulletBehavior setSpeed parameter type incorrect!!");this._currentSpeed=this._speed=a};d.tick=function(){this._radian||(this._radian=toRadian(this.inst.relyOnTarget?this.inst.relyOnTarget.angle:eval_e(this.angle)));this.dx=Math.cos(this._radian)*this._currentSpeed;this.dy=Math.sin(this._radian)*this._currentSpeed;var a;a=0===this.dx&&0===this.dy?this._radian:Math.atan2(this.dy,this.dx);this._currentSpeed+=this._acceleration*
this.inst.dt;0>this._currentSpeed&&(this._currentSpeed=0);this.dx=Math.cos(a)*this._currentSpeed;this.dy=Math.sin(a)*this._currentSpeed;0!=this._gravity&&(this._currentGravity+=this._gravity*this.inst.dt);this.dy+=this._currentGravity;1E-6>Math.abs(this.dx)&&(this.dx=0);1E-6>Math.abs(this.dy)&&(this.dy=0);if(0!=this.dx||0!=this.dy)this.inst.x+=this.dx*this.inst.dt,this.inst.y+=this.dy*this.inst.dt,0!=this._currentGravity&&(this.inst.angle=MathUtils.toAngle(Math.atan2(this.dy,this.dx))),0!=this._currentSpeed&&
(this._travelled+=Math.sqrt(this.dx*this.dx+this.dy*this.dy)*this.inst.dt)};Object.defineProperty(d,"speed",{get:function(){return this._speed},set:function(a){this._speed!=a&&(this._speed=a)},enumerable:!0,configurable:!0});d.clone=function(){var a=new e;a.enabled=this.enabled;a.speed=this.speed;a.acceleration=this.acceleration;a.gravity=this.gravity;a.bounceOffSolids=this.bounceOffSolids;a.angle=this.angle;a.name=this.name;a.paramInstances=this.paramInstances;a.onCreate();return a};return e}(BaseBehavior);
BulletBehaivor.prototype.__class__="BulletBehaivor";
var CarBehaivor=function(b){function e(){b.call(this);this.maxspeed=300;this.acceleration=200;this.deceleration=300;this.steerSpeed=225;this.driftRecover=185;this.friction=0;this.defaultControls=this.setAngle=!0}__extends(e,b);var d=e.prototype;d.onCreate=function(){this.maxspeed=eval_e(this.maxspeed);this.acceleration=eval_e(this.acceleration);this.deceleration=eval_e(this.deceleration);this.steerSpeed=eval_e(this.steerSpeed);this.driftRecover=eval_e(this.driftRecover);this.friction=eval_e(this.friction);
this.setAngle=eval_e(this.setAngle);this.defaultControls=eval_e(this.defaultControls)};d.tick=function(){};d.clone=function(){var a=new e;a.enabled=this.enabled;a.maxspeed=this.maxspeed;a.acceleration=this.acceleration;a.deceleration=this.deceleration;a.steerSpeed=this.steerSpeed;a.driftRecover=this.driftRecover;a.friction=this.friction;a.setAngle=this.setAngle;a.defaultControls=this.defaultControls;a.name=this.name;a.paramInstances=this.paramInstances;a.onCreate();return a};return e}(BaseBehavior);
CarBehaivor.prototype.__class__="CarBehaivor";var CollisionBehaivor=function(b){function e(){b.call(this)}__extends(e,b);e.prototype.clone=function(){var b=new e;b.enabled=this.enabled;b.name=this.name;b.paramInstances=this.paramInstances;b.collisionShapeList=this.collisionShapeList.concat();b.onCreate();return b};return e}(BaseBehavior);CollisionBehaivor.prototype.__class__="CollisionBehaivor";
var CustomMovementBehaivor=function(b){function e(){b.call(this);this.dy=this.dx=this.cancelStep=this.dy=this.dx=this.stepMode=0;trigger.register(this)}__extends(e,b);var d=e.prototype;d.isMoving=function(a){return{instances:[this],status:0!=this.dx||0!=this.dy}};d.compareSpeed=function(a){var b=0;switch(a.which){case 0:b=this.speed;break;case 1:b=this.dx;break;case 2:b=this.dy}var d=eval_e(a.speed);assert("number"!==typeof d,"CustomMovementBehaivor parameter type incorrect!!");switch(a.operationType){case OperationType.EQUAL_TO:return{instances:[this],
status:b==d};case OperationType.GREATER_OR_EQUAL:return{instances:[this],status:b==d};case OperationType.GREATER_THAN:return{instances:[this],status:b>=d};case OperationType.LESS_OR_EQUAL:return{instances:[this],status:b<=d};case OperationType.LESS_THAN:return{instances:[this],status:b<d};case OperationType.NOT_EQUAL_TO:return{instances:[this],status:b!=d}}return{instances:[this],status:!1}};Object.defineProperty(d,"speed",{get:function(){return Math.sqrt(this.dx*this.dx+this.dy*this.dy)},enumerable:!0,
configurable:!0});Object.defineProperty(d,"radian",{get:function(){return Math.atan2(this.dy,this.dx)},enumerable:!0,configurable:!0});Object.defineProperty(d,"angle",{get:function(){return MathUtils.toAngle(this.radian)},enumerable:!0,configurable:!0});d.setEnabled=function(a){a=eval_e(a);assert("number"!==typeof a,"CustomMovementBehaivor setEnabled parameter type incorrect!!");this.enabled=1==a};d.clockWiseRotate=function(a){a=eval_e(a);assert("number"!==typeof a,"CustomMovementBehaivor clockWiseRotate parameter type incorrect!!");
a=this.radian+MathUtils.toRadian(a);var b=this.speed;this.dx+=Math.cos(a)*b;this.dy+=Math.sin(a)*b};d.counterClockWiseRotate=function(a){a=eval_e(a);assert("number"!==typeof a,"CustomMovementBehaivor counterClockWiseRotate parameter type incorrect!!");a=this.radian-MathUtils.toRadian(a);var b=this.speed;this.dx+=Math.cos(a)*b;this.dy+=Math.sin(a)*b};d.setAngleOfMotion=function(a){a=eval_e(a);assert("number"!==typeof a,"CustomMovementBehaivor setAngleOfMotion parameter type incorrect!!");a=MathUtils.toRadian(a);
var b=this.speed;this.dx+=Math.cos(a)*b;this.dy+=Math.sin(a)*b};d.accelerate=function(a,b){a=eval_e(a);b=eval_e(b);assert("number"!==typeof a||"number"!==b,"CustomMovementBehaivor accelerate parameter type incorrect!!");var d=b*this.inst.dt;switch(a){case 0:var e=this.radian;this.dx+=Math.cos(e)*d;this.dy+=Math.sin(e)*d;break;case 1:this.dx+=d;break;case 2:this.dy+=d}};d.accelerateTowardAngle=function(a,b){a=eval_e(a);b=eval_e(b);assert("number"!==typeof a||"number"!==b,"CustomMovementBehaivor accelerateTowardAngle parameter type incorrect!!");
var d=a*this.inst.dt,e=MathUtils.toRadian(b);this.dx+=Math.cos(e)*d;this.dy+=Math.sin(e)*d};d.accelerateTowardPosition=function(a,b,d){a=eval_e(a);b=eval_e(b);d=eval_e(d);assert("number"!==typeof a||"number"!==b||"number"!==b,"CustomMovementBehaivor accelerateTowardPosition parameter type incorrect!!");a*=this.inst.dt;b=Math.atan2(d-this.inst.y,b-this.inst.x);this.dx+=Math.cos(b)*a;this.dy+=Math.sin(b)*a};d.reverse=function(a){a=eval_e(a);assert("number"!==typeof a,"CustomMovementBehaivor reverse parameter type incorrect!!");
switch(a){case 0:this.dx*=-1;this.dy*=-1;break;case 1:this.dx*=-1;break;case 2:this.dy*=-1}};d.setSpeed=function(a,b){a=eval_e(a);b=eval_e(b);assert("number"!==typeof a||"number"!==b,"CustomMovementBehaivor setSpeed parameter type incorrect!!");switch(a){case 0:var d=this.radian;this.dx=Math.cos(d)*b;this.dy=Math.sin(d)*b;break;case 1:this.dx=b;break;case 2:this.dy=b}};d.stop=function(){this.dy=this.dx=0};d.stopStepping=function(){};d.step=function(a,b,d){if(0!==a&&0!==b){var e=this.inst.x,m=this.inst.y,
l=eval_e(this.pixelsPerStep);assert("number"!==typeof l,"CustomMovementBehaivor step parameter type incorrect!!");l=Math.round(Math.sqrt(a*a+b*b)/this.pixelsPerStep);0===l&&(l=1);for(var f=0,f=1;f<=l;f++){var g=f/l;this.inst.x=e+a*g;this.inst.y=m+b*g;null!=d&&this.inst.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,d));if(1==this.cancelStep){f--;g=f/l;this.inst.x=e+a*g;this.inst.y=m+b*g;break}else if(2==this.cancelStep)break}}};d.tick=function(){if(0!==this.dx&&0!==this.dy){var a=this.inst.dt,
b=this.dx*a,a=this.dy*a;this.cancelStep=0;switch(this.stepMode){case 0:this.inst.x+=b;this.inst.y+=a;break;case 1:this.step(b,a,null);break;case 2:this.step(b,0,null);this.cancelStep=0;this.step(0,a,null);break;case 3:this.step(0,a,null),this.cancelStep=0,this.step(b,0,null)}}};d.clone=function(){var a=new e;a.enabled=this.enabled;a.name=this.name;a.paramInstances=this.paramInstances;a.stepMode=this.stepMode;a.pixelsPerStep=this.pixelsPerStep;a.onCreate();return a};return e}(BaseBehavior);
CustomMovementBehaivor.prototype.__class__="CustomMovementBehaivor";
var DestoryOutsideLayoutBehaivor=function(b){function e(){b.call(this)}__extends(e,b);var d=e.prototype;d.tick=function(){null==this.rect&&(this.rect=new egret.Rectangle(0,0,EgretToolUI.stage.stageWidth,EgretToolUI.stage.stageHeight));this.inst&&!this.inst.isModel&&(!this.inst.isInScreenOnce&&0<=this.inst.x&&this.inst.x<=EgretToolUI.stage.stageWidth&&0<=this.inst.y&&this.inst.y<EgretToolUI.stage.stageHeight&&(this.inst.isInScreenOnce=!0),this.inst.x>this.rect.right+this.inst.width||this.inst.x<-this.inst.height||
this.inst.y>this.rect.bottom+this.inst.height||this.inst.y<-this.inst.height)&&(this.inst.destory(),this.inst=null)};d.clone=function(){var a=new e;a.enabled=this.enabled;a.name=this.name;a.paramInstances=this.paramInstances;this.rect&&(a.rect=this.rect.clone());a.onCreate();return a};return e}(BaseBehavior);DestoryOutsideLayoutBehaivor.prototype.__class__="DestoryOutsideLayoutBehaivor";
var DragDropBehaivor=function(b){function e(){b.call(this);this.isTouchBegin=!1;this.localY=this.localX=0;this.isMoving=!1;trigger.register(this)}__extends(e,b);var d=e.prototype;d.onCreate=function(){null!=this.inst&&(this.axes=eval_e(this.axes),this.enabled=eval_e(this.enabled),this.inst.container.touchChildren=this.inst.container.touchEnabled=!0,this.inst.container.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onMouseDown,this),EgretToolUI.stage.addEventListener(egret.TouchEvent.TOUCH_END,
this.onMouseUp,this),EgretToolUI.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMouseMove,this))};d.isDragging=function(a){return{instances:[this.inst],status:this.isMoving}};d.onDragStart=function(a){return{instances:[this.inst],status:!0}};d.onDrop=function(a){return{instances:[this.inst],status:!0}};d.drop=function(){if(this.enabled)this.onMouseUp(null)};d.setEnabled=function(a){a=eval_e(a);assert("number"!==typeof a,"DragDropBehaivor setEnabled parameter type incorrect!!");this.enabled=
1==a};d.onMouseDown=function(a){0!=this.enabled&&(this.isTouchBegin=!0,this.localX=a.stageX-this.inst.x-EgretToolUI.renderContainer.x,this.localY=a.stageY-this.inst.y-EgretToolUI.renderContainer.y,this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onDragStart)))};d.onMouseUp=function(a){0!=this.enabled&&(this.isMoving=this.isTouchBegin=!1,this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onDrop)))};d.onMouseMove=function(a){if(0!=this.enabled&&this.isTouchBegin){this.isMoving=
!0;var b=a.stageX-this.localX-EgretToolUI.renderContainer.x;a=a.stageY-this.localY-EgretToolUI.renderContainer.y;switch(this.axes){case 0:this.inst.x=b;this.inst.y=a;break;case 1:this.inst.x=b;break;case 2:this.inst.y=a}}};d.clone=function(){var a=new e;a.enabled=this.enabled;a.name=this.name;a.paramInstances=this.paramInstances;a.axes=this.axes;a.onCreate();return a};return e}(BaseBehavior);DragDropBehaivor.prototype.__class__="DragDropBehaivor";
var EightDirectionBehaivor=function(b){function e(){b.call(this);this.maxSpeed=200;this.acceleration=600;this.deceleration=500;this.angleMode=this.directions=0;this.defaultControls=!0;this.dy=this.dx=0;this.downKey=this.upKey=this.rightKey=this.leftKey=!1;this._currentSpeed=0}__extends(e,b);var d=e.prototype;d.compareSpeed=function(a){return{instances:[this.inst],status:Utils.compare(this._currentSpeed,a.operationType,a.speed)}};d.isMoving=function(a){return{instances:[this.inst],status:0==this._currentSpeed}};
d.reverse=function(){};d.setEnabled=function(a){a=eval_e(a);assert("number"!==typeof a,"EightDirectionBehaivor setEnabled parameter type incorrect!!");this.enabled=1==a};d.setAcceleration=function(a){a=eval_e(a);assert("number"!==typeof a,"EightDirectionBehaivor setAcceleration parameter type incorrect!!");this.acceleration=a};d.setDeceleration=function(a){a=eval_e(a);assert("number"!==typeof a,"EightDirectionBehaivor setDeceleration parameter type incorrect!!");this.deceleration=a};d.setMaxSpeed=
function(a){a=eval_e(a);assert("number"!==typeof a,"EightDirectionBehaivor setMaxSpeed parameter type incorrect!!");this.maxSpeed=a};d.setDirections=function(a){a=eval_e(a);assert("number"!==typeof a,"EightDirectionBehaivor setDirections parameter type incorrect!!");this.directions=a};d.onCreate=function(){this.dx=this.dy=0;leo.Keyboard.getInstance().addEventListener(leo.KeyboardEvent.KEY_DOWN,function(a){switch(a.keyCode){case 37:a.preventDefault();this.leftKey=!0;break;case 38:a.preventDefault();
this.upKey=!0;break;case 39:a.preventDefault();this.rightKey=!0;break;case 40:a.preventDefault(),this.downKey=!0}},this);leo.Keyboard.getInstance().addEventListener(leo.KeyboardEvent.KEY_UP,function(a){switch(a.keyCode){case 37:a.preventDefault();this.leftKey=!1;break;case 38:a.preventDefault();this.upKey=!1;break;case 39:a.preventDefault();this.rightKey=!1;break;case 40:a.preventDefault(),this.downKey=!1}},this)};d.tick=function(){var a=this.inst.dt,b=eval_e(this.maxSpeed),d=eval_e(this.acceleration),
e=eval_e(this.deceleration),m=eval_e(this.directions),l=eval_e(this.angleMode),f=this.leftKey,g=this.rightKey,n=this.upKey,p=this.downKey;0===m?g=f=!1:1===m&&(p=n=!1);2===m&&(n||p)&&(g=f=!1);f==g&&(0>this.dx?(this.dx+=e*a,0<this.dx&&(this.dx=0)):0<this.dx&&(this.dx-=e*a,0>this.dx&&(this.dx=0)));n==p&&(0>this.dy?(this.dy+=e*a,0<this.dy&&(this.dy=0)):0<this.dy&&(this.dy-=e*a,0>this.dy&&(this.dy=0)));f&&!g&&(this.dx=0<this.dx?this.dx-(d+e)*a:this.dx-d*a);g&&!f&&(this.dx=0>this.dx?this.dx+(d+e)*a:this.dx+
d*a);n&&!p&&(this.dy=0<this.dy?this.dy-(d+e)*a:this.dy-d*a);p&&!n&&(this.dy=0>this.dy?this.dy+(d+e)*a:this.dy+d*a);if(0!==this.dx||0!=this.dy)this._currentSpeed=Math.sqrt(this.dx*this.dx+this.dy*this.dy),this._currentSpeed>b&&(d=Math.atan2(this.dy,this.dx),this.dx=b*Math.cos(d),this.dy=b*Math.sin(d)),this.inst.x+=this.dx*a,this.inst.y+=this.dy*a;a=round6dp(this.dx);b=round6dp(this.dy);if(0!==a&&0!==b)switch(l){case 1:this.inst.angle=toAngle(Math.atan2(b,a));break;case 2:this.inst.angle=toAngle(Math.atan2(b,
a));break;case 3:this.inst.angle=toAngle(Math.atan2(b,a))}};d.clone=function(){var a=new e;a.enabled=this.enabled;a.name=this.name;a.paramInstances=this.paramInstances;a.maxSpeed=this.maxSpeed;a.acceleration=this.acceleration;a.deceleration=this.deceleration;a.deceleration=this.deceleration;a.directions=this.directions;a.angleMode=this.angleMode;a.defaultControls=this.defaultControls;a.onCreate();return a};return e}(BaseBehavior);EightDirectionBehaivor.prototype.__class__="EightDirectionBehaivor";
var FlashBehavior=function(b){function e(){b.call(this);trigger.register(this)}__extends(e,b);var d=e.prototype;d.onCreate=function(){this._timesLeft=this._state=this._offtime=this._ontime=0;this.inst.visible=!0};d.tick=function(){if(0>=this._timesLeft)this._timesLeft=0,this.inst.visible=!0,this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onFlashEnded));else{var a=egret.getTimer();0===this._state?(a-this._onOldTime>=1E3*this._ontime&&(this._offOldTime=a,this._state=1),this.inst.visible=
!0):1===this._state&&(this.inst.visible=!1,a-this._offOldTime>=1E3*this._offtime&&(this._onOldTime=a,this._state=0,this._timesLeft--,this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onFlashLoopOnceComplete))))}};d.isFlashing=function(a){return{instances:[this.inst],status:0<this._timesLeft}};d.onFlashEnded=function(a){return{instances:[this.inst],status:!0}};d.onFlashLoopOnceComplete=function(a){return{instances:[this.inst],status:!0}};d.startFlash=function(a,b,d){this._ontime=eval_e(a);
this._offtime=eval_e(b);this._state=0;this._timesLeft=eval_e(d);this._timesLeft=0>=this._timesLeft?Number.MAX_VALUE:this._timesLeft;this.inst.visible=!0;this._onOldTime=egret.getTimer();this._offOldTime=egret.getTimer();0>this._ontime&&(this._ontime=0);0>=this._offtime&&(this._offtime=0)};d.stopFlashing=function(){this._timesLeft=0;this.inst.visible=!0};d.clone=function(){var a=new FadeBehavior;a.enabled=this.enabled;a.name=this.name;a.paramInstances=this.paramInstances;a.onCreate();return a};return e}(BaseBehavior);
FlashBehavior.prototype.__class__="FlashBehavior";var JumpthruBehavior=function(b){function e(){b.call(this)}__extends(e,b);var d=e.prototype;d.onCreate=function(){this.inst.jumpthruEnabled=null!=this.inst&&this.enabled?!0:!1};d.isJumpthruEnabled=function(a){return null};d.clone=function(){var a=new e;a.enabled=this.enabled;a.name=this.name;a.paramInstances=this.paramInstances;a.onCreate();return a};return e}(BaseBehavior);JumpthruBehavior.prototype.__class__="JumpthruBehavior";
var MovingFollowOnMouseBehaivor=function(b){function e(){b.call(this)}__extends(e,b);var d=e.prototype;d.tick=function(){this.inst.x=AITouch.instance.touchY;this.inst.y=AITouch.instance.touchY};d.clone=function(){var a=new e;a.enabled=this.enabled;a.name=this.name;a.paramInstances=this.paramInstances;a.onCreate();return a};return e}(BaseBehavior);MovingFollowOnMouseBehaivor.prototype.__class__="MovingFollowOnMouseBehaivor";
var NodeMovingBehavior=function(b){function e(){b.call(this);this.pathIndex=0;this.moveSpeed=60;trigger.register(this)}__extends(e,b);var d=e.prototype;d.onCreate=function(){this.moveSpeed=eval_e(this.moveSpeed)};d.tick=function(){if(this.isPathfinding&&this.path){var a=this.inst.dt,b=parseFloat(this.path[this.pathIndex][0]),d=parseFloat(this.path[this.pathIndex][1]),e=b-this.inst.x,m=d-this.inst.y,l=Math.sqrt(e*e+m*m),e=Math.atan2(m,e),m=this.inst.x,f=this.inst.y;l<this.moveSpeed*a?(this.pathIndex++,
this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onNodeMovingSegmentArrived)),this.pathIndex>=this.path.length&&(this.isPathfinding=!1,this.inst.x=b,this.inst.y=d,this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onNodeMovingArrived)))):(this.inst.x+=Math.cos(e)*this.moveSpeed*a,this.inst.y+=Math.sin(e)*this.moveSpeed*a);a=MathUtils.angleTo(m,f,this.inst.x,this.inst.y);a=MathUtils.angleRotate(this.inst.angle,a,300);isNaN(a)||this.inst.angle==a||(this.inst.angle=a)}};Object.defineProperty(d,
"nodeIndex",{get:function(){return this.pathIndex},enumerable:!0,configurable:!0});Object.defineProperty(d,"isMoving",{get:function(){return this.isPathfinding},enumerable:!0,configurable:!0});d.isNodeMoving=function(a){return{instances:[this.inst],status:this.isPathfinding}};d.onNodeMovingReady=function(a){return{instances:[this.inst],status:!0}};d.onNodeMovingArrived=function(a){return{instances:[this.inst],status:!0}};d.onNodeMovingSegmentArrived=function(a){return{instances:[this.inst],status:!0}};
d.setMoveSpeed=function(a){this.moveSpeed=eval_e(a);assert("number"!==typeof this.moveSpeed,"NodeMovingBehaivor setMoveSpeed parameter type incorrect!!")};d.startNodePath=function(a){if(a){a=a.replace(/[\(\)]/g,"");a=a.split(",");for(var b=[],d=0,e=0,m=a.length;e<m;e++)0==e%2&&(b[d]=[]),b[d].push(eval_e(a[e])),1==e%2&&d++;this.path=b;this.isPathfinding=!0;this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onNodeMovingReady))}};d.clone=function(){var a=new e;a.enabled=this.enabled;a.name=
this.name;a.paramInstances=this.paramInstances;a.moveSpeed=this.moveSpeed;return a};return e}(BaseBehavior);NodeMovingBehavior.prototype.__class__="NodeMovingBehavior";
var PathfindingBehaivor=function(b){function e(){b.call(this);this.moveSpeed=60;this.pathIndex=0;this.isSet=!0;this.oldTime=-1E3;this.oldTargetY=this.oldTargetX=-1E8;trigger.register(this)}__extends(e,b);var d=e.prototype;d.onCreate=function(){this.moveSpeed=eval_e(this.moveSpeed);this.aiTiledmap=eval_e(this.tiledmapName);this.gridLayerName=eval_e(this.gridLayerName)};d.tick=function(){this.isSet&&(this.setTiledmap(this.aiTiledmap,this.gridLayerName),this.isSet=!1);if(this.isPathfinding&&this.path&&
(null!=this.aiTiledmap||null!=this.aiTiledmap.tiledMap)){this.isRealFindPathing=!0;var a=this.inst.dt,b=this.path[this.pathIndex][0]*this.aiTiledmap.tiledMap.tilewidth+this.aiTiledmap.tiledMap.tilewidth/2,d=this.path[this.pathIndex][1]*this.aiTiledmap.tiledMap.tileheight+this.aiTiledmap.tiledMap.tileheight/2,e=b-this.inst.x,m=d-this.inst.y,l=Math.sqrt(e*e+m*m),e=Math.atan2(m,e),m=this.inst.x,f=this.inst.y;l<this.moveSpeed*this.inst.dt?(this.pathIndex++,this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,
this.onPathfindingSegmentArrived)),this.pathIndex>=this.path.length&&(this.isPathfinding=!1,this.inst.x=b,this.inst.y=d,this.isRealFindPathing=!1,this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onPathfindingArrived)))):(this.inst.x+=Math.cos(e)*this.moveSpeed*a,this.inst.y+=Math.sin(e)*this.moveSpeed*a);a=MathUtils.angleTo(m,f,this.inst.x,this.inst.y);a=MathUtils.angleRotate(this.inst.angle,a,300);isNaN(a)||this.inst.angle==a||(this.inst.angle=a)}};Object.defineProperty(d,"nodeIndex",
{get:function(){return this.pathIndex},enumerable:!0,configurable:!0});Object.defineProperty(d,"isMoving",{get:function(){return this.isRealFindPathing},enumerable:!0,configurable:!0});d.isPathfindingMoving=function(a){return{instances:[this.inst],status:this.isRealFindPathing}};d.isSolid=function(a){if(this.tmxLayer&&this.grid){var b=eval_e(a.touchX);a=eval_e(a.touchY);return{instances:[this.inst],status:!this.grid.getWalkable(Math.floor(b/this.tmxLayer.width),Math.floor(a/this.tmxLayer.height))}}return{instances:[this.inst],
status:!0}};d.isWalkable=function(a){if(this.tmxLayer&&this.grid){var b=eval_e(a.touchX);a=eval_e(a.touchY);return{instances:[this.inst],status:this.grid.getWalkable(Math.floor(b/this.tmxLayer.width),Math.floor(a/this.tmxLayer.height))}}return{instances:[this.inst],status:!1}};d.onPathfindingReady=function(a){return{instances:[this.inst],status:!0}};d.onPathfindingArrived=function(a){return{instances:[this.inst],status:!0}};d.onPathfindingSegmentArrived=function(a){return{instances:[this.inst],status:!0}};
d.setTiledmap=function(a,b){this.aiTiledmap=eval_e(a);this.gridLayerName=eval_e(b);if(this.inst&&this.aiTiledmap&&this.aiTiledmap.tiledMap)this.onCreateReady(null)};d.onCreateReady=function(a){var b;if(null==AITiledMap.aStars[this.gridLayerName]){this.gridLayerName=this.gridLayerName;if(a=this.aiTiledmap.tiledMap)for(var d=a.getLayers(),e=0;e<d.length;e++)if(a=d[e],a.name==this.gridLayerName){b=new Grid(a.cols,a.rows);a=a.layerData;for(d=0;d<a.length;d++)for(var e=a[d],m=0;m<e.length;m++){var l=a[d][m];
l?0!=l.gid?b.setWalkable(d,m,!1):b.setWalkable(d,m,!0):b.setWalkable(d,m,!0)}this.grid=b;b.calculateLinks(1);b=new AStar(b);break}b&&(AITiledMap.aStars[this.gridLayerName]=b)}this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onPathGridComplete))};d.onPathGridComplete=function(a){return{instances:[this.inst],status:!0}};d.setMoveSpeed=function(a){this.moveSpeed=eval_e(a);assert("number"!==typeof this.moveSpeed,"PathfindingBehaivor setMoveSpeed parameter type incorrect!!")};d.findPath=function(a,
b){var d=egret.getTimer();if(200<d-this.oldTime){this.oldTime=d;this.targetX=eval_e(a);this.targetY=eval_e(b);if(this.oldTargetX!=this.targetX||this.oldTargetY!=this.targetY)this.oldTargetX=this.targetX,this.oldTargetY=this.targetY,this.isRealFindPathing=!1;if(!this.isRealFindPathing&&(this.oldTargetX=this.targetX,this.oldTargetY=this.targetY,assert("number"!==typeof this.targetX||"number"!==typeof this.targetY,"PathfindingBehaivor findPath parameter type incorrect!!"),this.aiTiledmap)){var e=this.aiTiledmap.tiledMap;
if(e){this.isPathfinding=!0;this.pathIndex=0;var m=e.tilewidth,l=e.tileheight,d=Math.floor(this.targetX/m),f=Math.floor(this.targetY/l),m=Math.floor(this.inst.x/m),l=Math.floor(this.inst.y/l);if(!(0>d||0>f||0>m||0>l||d>e.tilewidth-1||f>e.tileheight-1||m>e.tilewidth-1||l>e.tileheight-1)&&(e=AITiledMap.aStars[this.gridLayerName])){var g=e.grid;g.setStartNode(m,l);g.setEndNode(d,f);(this.path=e.search())&&1<this.path.length&&this.path.shift();this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,
this.onPathfindingReady))}}}}};d.onCreateGrid=function(a){this.aiTiledmap.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)};d.onTouchBegin=function(a){};d.clone=function(){var a=new e;a.enabled=this.enabled;a.name=this.name;a.paramInstances=this.paramInstances;a.tiledmapName=this.tiledmapName;a.gridLayerName=this.gridLayerName;a.moveSpeed=this.moveSpeed;a.onCreate();return a};return e}(BaseBehavior);PathfindingBehaivor.prototype.__class__="PathfindingBehaivor";
var PinBehavior=function(b){function e(){b.call(this)}__extends(e,b);var d=e.prototype;d.tick=function(){if(this._pinObject){this._lastKnownAngle!==this.inst.angle&&(this._myStartAngle=MathUtils.clampAngle(this._myStartAngle+(this.inst.angle-this._lastKnownAngle)));var a=this.inst.x,b=this.inst.y;if(3===this._mode||4===this._mode){var d=MathUtils.distance(this.inst.x,this.inst.y,this._pinObject.x,this._pinObject.y);if(d>this._pinDist||4===this._mode&&d<this._pinDist)b=MathUtils.radianTo(this._pinObject.x,
this._pinObject.y,this.inst.x,this.inst.y),a=this._pinObject.x+Math.cos(b)*this._pinDist,b=this._pinObject.y+Math.sin(b)*this._pinDist}else b=MathUtils.toRadian(this._pinObject.angle)+MathUtils.toRadian(this._pinAngle),a=this._pinObject.x+Math.cos(b)*this._pinDist,b=this._pinObject.y+Math.sin(b)*this._pinDist;this._lastKnownAngle=d=MathUtils.clampAngle(this._myStartAngle+this._pinObject.angle);0!==this._mode&&1!==this._mode&&3!==this._mode&&4!==this._mode||this.inst.x==a&&this.inst.y==b||(this.inst.x=
a,this.inst.y=b);0!=this._mode&&2!==this._mode||this.inst.angle==d||(this.inst.angle=d)}};d.pin=function(a,b){this._pinObject=a;this._mode=eval_e(b);var d=EgretWorld.getInstance().objectHash[this._pinObject.name];d&&0<d.length&&(this._pinObject=d=d[0],this._pinAngle=MathUtils.angleTo(d.x,d.y,this.inst.x,this.inst.y),this._pinDist=MathUtils.distance(this.inst.x,this.inst.y,this._pinObject.x,this._pinObject.y),this._lastKnownAngle=this._myStartAngle=this.inst.angle)};d.unpin=function(){this._pinObject=
null};d.isPinned=function(a){return{instances:[this.inst],status:!!this._pinObject}};d.clone=function(){var a=new e;a.enabled=this.enabled;a.name=this.name;a.paramInstances=this.paramInstances;a.onCreate();return a};return e}(BaseBehavior);PinBehavior.prototype.__class__="PinBehavior";
var PlatformBehaivor=function(b){function e(){b.call(this);this.ANIMMODE_STOPPED=0;this.ANIMMODE_MOVING=1;this.ANIMMODE_JUMPING=2;this.ANIMMODE_FALLING=3;this.simjump=this.simright=this.simleft=this.ignoreInput=this.canDoubleJump=this.doubleJumped=this.jumped=this.jumpkey=this.rightkey=this.leftkey=!1;this.loadFloorObject=-1;this.lastFloorY=this.lastFloorX=0;this.floorIsJumpthru=!1;this.animMode=this.ANIMMODE_STOPPED;this.fallthrough=0;this.firstTick=!0;this.dy=this.dx=0;this.maxspeed=330;this.dec=
this.acc=1500;this.jumpStrength=650;this.g=1500;this.maxFall=1E3;this.jumpSustain=this.enableDoubleJump=0;this.enabled=this.defaultControls=1;this.moveDirStatus=Number.MAX_VALUE;this.isMove=!1;trigger.register(this)}__extends(e,b);var d=e.prototype;d.onCreate=function(){this.maxspeed=eval_e(this.maxspeed);this.acc=eval_e(this.acc);this.dec=eval_e(this.dec);this.jumpStrength=eval_e(this.jumpStrength);this.g1=this.g=eval_e(this.g);this.maxFall=eval_e(this.maxFall);this.enableDoubleJump=1==eval_e(this.enableDoubleJump);
this.jumpSustain=eval_e(this.jumpSustain);this.defaultControls=1==eval_e(this.defaultControls);this.enabled=1==eval_e(this.enabled);this.wasOnFloor=!1;this.wasOverJumpthru=CollisionUtils.testOverlapJumpThru(this.inst);this.loadOverJumpthru=-1;this.sustainTime=0;this.simjump=this.simright=this.simleft=!1;this.ga=Math.PI/2;this.updateGravity();this.defaultControls&&(leo.Keyboard.getInstance().addEventListener(leo.KeyboardEvent.KEY_DOWN,this.onKeyDown,this),leo.Keyboard.getInstance().addEventListener(leo.KeyboardEvent.KEY_UP,
this.onKeyUp,this))};d.onKeyDown=function(a){switch(a.keyCode){case 38:a.preventDefault();this.jumpkey=!0;break;case 37:a.preventDefault();this.leftkey=!0;break;case 39:a.preventDefault(),this.rightkey=!0}};d.onKeyUp=function(a){switch(a.keyCode){case 38:a.preventDefault();this.jumped=this.jumpkey=!1;break;case 37:a.preventDefault();this.leftkey=!1;break;case 39:a.preventDefault(),this.rightkey=!1}};d.updateGravity=function(){this.downx=Math.cos(this.ga);this.downy=Math.sin(this.ga);this.rightx=Math.cos(this.ga-
Math.PI/2);this.righty=Math.sin(this.ga-Math.PI/2);this.downx=round6dp(this.downx);this.downy=round6dp(this.downy);this.rightx=round6dp(this.rightx);this.righty=round6dp(this.righty);this.g1=this.g;0>this.g&&(this.downx*=-1,this.downy*=-1,this.g=Math.abs(this.g))};d.tick=function(){var a=this.inst.dt;this.jumpkey||this.simjump||(this.jumped=!1);var b=this.leftkey||this.simleft,d=this.rightkey||this.simright,e=this.jumpkey||this.simjump,m=e&&!this.jumped;this.simjump=this.simright=this.simleft=!1;
if(this.enabled){this.ignoreInput&&(m=e=d=b=!1);e||(this.sustainTime=0);var l=this.lastFloorObject,f=!1;this.firstTick&&((CollisionUtils.testOverlapSolid(this.inst)||CollisionUtils.testOverlapJumpThru(this.inst))&&CollisionUtils.pushOutSolid(this.inst,-this.downx,-this.downy,4,!0),this.firstTick=!1);if(l&&0===this.dy&&(l.y!==this.lastFloorY||l.x!==this.lastFloorX)){var g=l.x-this.lastFloorX,n=l.y-this.lastFloorY;this.inst.x+=g;this.inst.y+=n;this.lastFloorX=l.x;this.lastFloorY=l.y;f=!0;CollisionUtils.testOverlapSolid(this.inst)&&
CollisionUtils.pushOutSolid(this.inst,-g,-n,2.5*Math.sqrt(g*g+n*n))}var p=this.isOnFloor();if(n=CollisionUtils.testOverlapSolid(this.inst))if(this.inst.inputPredicted)CollisionUtils.pushOutSolid(this.inst,-this.downx,-this.downy,10,!1);else if(CollisionUtils.pushOutSolidNearest(this.inst,Math.max(this.inst.width,this.inst.height)/2))CollisionUtils.registerCollision(this.inst,n);else return;p?(this.canDoubleJump=this.doubleJumped=!1,0<this.dy&&(this.wasOnFloor||(CollisionUtils.pushInFractional(this.inst,
-this.downx,-this.downy,p,16),this.wasOnFloor=!0),this.dy=0),l!=p)?(this.lastFloorObject=p,this.lastFloorX=p.x,this.lastFloorY=p.y,CollisionUtils.registerCollision(this.inst,p)):f&&(n=CollisionUtils.testOverlapSolid(this.inst))&&(CollisionUtils.registerCollision(this.inst,n),0!==g&&(0<g?CollisionUtils.pushOutSolid(this.inst,-this.rightx,-this.righty):CollisionUtils.pushOutSolid(this.inst,this.rightx,this.righty)),CollisionUtils.pushOutSolid(this.inst,-this.downx,-this.downy)):this.jumpkey||(this.canDoubleJump=
!0);if(p&&m||!p&&this.enableDoubleJump&&e&&this.canDoubleJump&&!this.doubleJumped)l=this.inst.x,f=this.inst.y,this.inst.x-=this.downx,this.inst.y-=this.downy,CollisionUtils.testOverlapSolid(this.inst)?m=!1:(this.sustainTime=this.jumpSustain,this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onJump)),this.animMode=this.ANIMMODE_JUMPING,this.dy=-this.jumpStrength,m=!0,p?this.jumped=!0:this.doubleJumped=!0),this.inst.x=l,this.inst.y=f;p||(e&&0<this.sustainTime?(this.dy=-this.jumpStrength,
this.sustainTime-=a):(this.lastFloorObject=null,this.dy+=this.g*a,this.dy>this.maxFall&&(this.dy=this.maxFall)),m&&(this.jumped=!0));this.wasOnFloor=!!p;b==d&&(0>this.dx?(this.dx+=this.dec*a,0<this.dx&&(this.dx=0)):0<this.dx&&(this.dx-=this.dec*a,0>this.dx&&(this.dx=0)));b&&!d&&(this.dx=0<this.dx?this.dx-(this.acc+this.dec)*a:this.dx-this.acc*a);d&&!b&&(this.dx=0>this.dx?this.dx+(this.acc+this.dec)*a:this.dx+this.acc*a);this.dx>this.maxspeed?this.dx=this.maxspeed:this.dx<-this.maxspeed&&(this.dx=
-this.maxspeed);b=!1;if(0!==this.dx){l=this.inst.x;f=this.inst.y;g=this.dx*a*this.rightx;n=this.dy*a*this.righty;this.inst.x+=this.rightx*(1<this.dx?1:-1)-this.downx;this.inst.y+=this.righty*(1<this.dx?1:-1)-this.downy;d=!1;e=CollisionUtils.testOverlapSolid(this.inst);this.inst.x=l+g;this.inst.y=f+n;var q=CollisionUtils.testOverlapSolid(this.inst);!q&&p&&(q=CollisionUtils.testOverlapJumpThru(this.inst))&&(this.inst.x=l,this.inst.y=f,CollisionUtils.testOverlap(this.inst,q)?(q=null,d=!1):d=!0,this.inst.x=
l+g,this.inst.y=f+n);q?(g=Math.abs(this.dx*a)+2,e||!CollisionUtils.pushOutSolid(this.inst,-this.downx,-this.downy,g,d,q))?(CollisionUtils.registerCollision(this.inst,q),g=Math.max(Math.abs(this.dx*a*2.5),30),CollisionUtils.pushOutSolid(this.inst,this.rightx*(0>this.dx?1:-1),this.righty*(0>this.dx?1:-1),g,!1)?!p||d||this.floorIsJumpthru||(l=this.inst.x,f=this.inst.y,this.inst.x+=this.downx,this.inst.y+=this.downy,CollisionUtils.testOverlapSolid(this.inst)?CollisionUtils.pushOutSolid(this.inst,-this.downx,
-this.downy,3,!1)||(this.inst.x=l,this.inst.y=f):(this.inst.x=l,this.inst.y=f)):(this.inst.x=l,this.inst.y=f),d||(this.dx=0)):!e&&!m&&Math.abs(this.dy)<Math.abs(this.jumpStrength/4)&&(this.dy=0,p||(b=!0)):(l=this.isOnFloor(),p&&!l?(n=Math.ceil(Math.abs(this.dx*a))+2,l=this.inst.x,f=this.inst.y,this.inst.x+=this.downx*n,this.inst.y+=this.downy*n,CollisionUtils.testOverlapSolid(this.inst)||CollisionUtils.testOverlapJumpThru(this.inst)?CollisionUtils.pushOutSolid(this.inst,-this.downx,-this.downy,n+
2,!0):(this.inst.x=l,this.inst.y=f)):l&&0===this.dy&&CollisionUtils.pushInFractional(this.inst,-this.downx,-this.downy,l,16))}if(0!==this.dy){l=this.inst.x;f=this.inst.y;this.inst.x+=this.dy*a*this.downx;this.inst.y+=this.dy*a*this.downy;g=this.inst.x;d=this.inst.y;n=CollisionUtils.testOverlapSolid(this.inst);e=!1;if(!n&&0<this.dy&&!p){if((e=0<this.fallthrough?null:CollisionUtils.testOverlapJumpThru(this.inst,!0))&&e.length){if(this.wasOverJumpthru){this.inst.x=l;this.inst.y=f;for(var r=q=0;q<e.length;q++)e[r]=
e[q],CollisionUtils.testOverlap(this.inst,e[q])||r++;e.length=r;this.inst.x=g;this.inst.y=d}1<=e.length&&(n=e[0])}e=!!n}n&&(CollisionUtils.registerCollision(this.inst,n),this.sustainTime=0,g=e?Math.abs(this.dy*a*2.5+10):Math.max(Math.abs(this.dy*a*2.5+10),30),CollisionUtils.pushOutSolid(this.inst,this.downx*(0>this.dy?1:-1),this.downy*(0>this.dy?1:-1),g,e,n)?(this.lastFloorObject=n,this.lastFloorX=n.x,this.lastFloorY=n.y,(this.floorIsJumpthru=e)&&(b=!0),this.dy=0):(this.inst.x=l,this.inst.y=f,this.wasOnFloor=
!0,e||(this.dy=0)))}this.animMode!=this.ANIMMODE_FALLING&&0<this.dy&&!p&&(this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onFall)),this.animMode=this.ANIMMODE_FALLING);if(p||b)this.animMode===this.ANIMMODE_FALLING||b||m&&0===this.dy?(this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onLand)),0===this.dx&&0===this.dy?this.animMode=this.ANIMMODE_STOPPED:(this.animMode=this.ANIMMODE_MOVING,this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onMove)))):(this.animMode!=
this.ANIMMODE_STOPPED&&0===this.dx&&0===this.dy&&(this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onStop)),this.animMode=this.ANIMMODE_STOPPED),this.animMode===this.ANIMMODE_MOVING||0===this.dx&&0===this.dy||m||(this.animMode=this.ANIMMODE_MOVING,this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onMove))));0!=this.dx&&(a=0<this.dx?1:-1,a!=this.moveDirStatus&&(this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,1==a?this.onMoveRight:this.onMoveLeft)),this.moveDirStatus=
a));0<this.fallthrough&&this.fallthrough--;this.wasOverJumpthru=CollisionUtils.testOverlapJumpThru(this.inst)}};d.getGDir=function(){return 0>this.g?-1:1};d.isOnFloor=function(){var a=null,b=null,d=this.inst.x,e=this.inst.y;this.inst.x+=this.downx;this.inst.y+=this.downy;if(this.lastFloorObject)var m=this.lastFloorObject.x,l=this.lastFloorObject.y;if(this.lastFloorObject&&CollisionUtils.testOverlap(this.inst,this.lastFloorObject))return this.inst.x=d,this.inst.y=e,this.lastFloorObject.x=m,this.lastFloorObject.y=
l,this.lastFloorObject;(a=CollisionUtils.testOverlapSolid(this.inst))||0!==this.fallthrough||(b=CollisionUtils.testOverlapJumpThru(this.inst,!0));this.inst.x=d;this.inst.y=e;this.lastFloorObject&&(this.lastFloorObject.x=m,this.lastFloorObject.y=l);if(a){if(CollisionUtils.testOverlap(this.inst,a))return null;this.floorIsJumpthru=!1;return a}if(b&&b.length){a=d=a=0;for(e=b.length;d<e;d++)b[a]=b[d],CollisionUtils.testOverlap(this.inst,b[d])||a++;if(1<=a)return this.floorIsJumpthru=!0,b[0]}return null};
d.onJump=function(a){return{instances:[this],status:!0}};d.onFall=function(a){return{instances:[this],status:!0}};d.onLand=function(a){return{instances:[this],status:!0}};d.onStop=function(a){return{instances:[this],status:!0}};d.onMove=function(a){return{instances:[this],status:!0}};d.onMoveLeft=function(a){return{instances:[this],status:!0}};d.onMoveRight=function(a){return{instances:[this],status:!0}};d.isMovingPlatform=function(a){return{instances:[this.inst],status:0!==this.dx||0!==this.dy}};
d.compareSpeedPlatform=function(a){return{instances:[this],status:Utils.compare(Math.sqrt(this.dx*this.dx+this.dy*this.dy),a.operationType,a.speed)}};d.isOnFloorFlatform=function(a){if(0!==this.dy)return{instances:[this.inst],status:!1};this.inst.x+=this.downx;this.inst.y+=this.downy;a=null;CollisionUtils.testOverlapSolid(this.inst)||0!==this.fallthrough||(a=CollisionUtils.testOverlapJumpThru(this.inst,!0));if(a&&a.length){for(var b=0,d=0;b<a.length;b++)a[d]=a[b],CollisionUtils.testOverlap(this.inst,
a[b])||d++;if(1<=d)return{instances:[this.inst],status:!0}}return{instances:[this.inst],status:!1}};d.isByWall=function(a){var b=this.inst.x,d=this.inst.y;this.inst.x-=3*this.downx;this.inst.y-=3*this.downy;if(CollisionUtils.testOverlapSolid(this.inst))return this.inst.x=b,this.inst.y=d,{instances:[this.inst],status:!1};0===a.side?(this.inst.x-=2*this.rightx,this.inst.y-=2*this.righty):(this.inst.x+=2*this.rightx,this.inst.y+=2*this.righty);a=CollisionUtils.testOverlapSolid(this.inst);this.inst.x=
b;this.inst.y=d;return{instances:[this.inst],status:!!a}};d.isJumping=function(a){return{instances:[this.inst],status:0>this.dy}};d.isFalling=function(a){return{instances:[this.inst],status:0<this.dy}};d.isDoubleJumpEnabled=function(a){return{instances:[this.inst],status:this.enableDoubleJump}};d.setIgnoreInput=function(a){this.ignoreInput=0!==eval_e(a)};d.setMaxSpeed=function(a){this.maxspeed=eval_e(a);0>this.maxspeed&&(this.maxspeed=0)};d.setAcceleration=function(a){this.acc=eval_e(a);0>this.acc&&
(this.acc=0)};d.setDeceleration=function(a){this.dec=eval_e(a);0>this.dec&&(this.dec=0)};d.setJumpStrength=function(a){this.jumpStrength=eval_e(a);0>this.jumpStrength&&(this.jumpStrength=0)};d.setGravity=function(a){this.g1=eval_e(a);this.g1!==a&&(this.updateGravity(),CollisionUtils.testOverlapSolid(this.inst)&&(CollisionUtils.pushOutSolid(this.inst,this.downx,this.downy,10),this.inst.x+=2*this.downx,this.inst.y+=2*this.downy),this.lastFloorObject=null)};d.setMaxFallSpeed=function(a){this.maxFall=
eval_e(a);0>this.maxFall&&(this.maxFall=0)};d.simulateControl=function(a){a=eval_e(a);switch(a){case 0:this.simleft=!0;break;case 1:this.simright=!0;break;case 2:this.simjump=!0}};d.setVectorX=function(a){this.dx=eval_e(a)};d.setVectorY=function(a){this.dy=eval_e(a)};d.setGravityAngle=function(a){a=MathUtils.toRadian(eval_e(a));a=MathUtils.clampAngle(a);this.ga!==a&&(this.ga=a,this.updateGravity(),this.lastFloorObject=null)};d.setEnabled=function(a){a=eval_e(a);this.enabled!==(1===a)&&(this.enabled=
1===a,this.enabled||(this.lastFloorObject=null))};d.setfallThrough=function(){var a=this.inst.x,b=this.inst.y;this.inst.x+=this.downx;this.inst.y+=this.downy;var d=CollisionUtils.testOverlapJumpThru(this.inst,!1);this.inst.x=a;this.inst.y=b;d&&(this.fallthrough=3,this.lastFloorObject=null)};d.setDoubleJumpEnabled=function(a){this.enableDoubleJump=0!==eval_e(a)};d.setJumpSustain=function(a){this.jumpSustain=eval_e(a)/1E3};d.clone=function(){var a=new e;a.enabled=this.enabled;a.name=this.name;a.paramInstances=
this.paramInstances;a.onCreate();return a};return e}(BaseBehavior);PlatformBehaivor.prototype.__class__="PlatformBehaivor";
var RotateBehaivor=function(b){function e(){b.call(this);this._speed=180;this._acceleration=0}__extends(e,b);var d=e.prototype;Object.defineProperty(d,"acceleration",{get:function(){return this._acceleration},set:function(a){a=eval_e(a);assert("number"!==typeof a,"RotateBehaivor acceleration parameter type incorrect!!");this._acceleration=a},enumerable:!0,configurable:!0});Object.defineProperty(d,"speed",{get:function(){return this._speed},set:function(a){a=eval_e(a);assert("number"!==typeof a,"RotateBehaivor speed parameter type incorrect!!");
this._speed=a},enumerable:!0,configurable:!0});d.setEnabled=function(a){a=eval_e(a);assert("number"!==typeof a,"RotateBehaivor setEnabled parameter type incorrect!!");this.enabled=1==a};d.setAcceleration=function(a){this.acceleration=a};d.setSpeed=function(a){this.speed=a};d.tick=function(){var a=this.inst.dt;0!=this._acceleration&&(this._speed+=this._acceleration*a);0!=this._speed&&(this.inst.angle=MathUtils.clampAngle(this.inst.angle+=this._speed*a))};d.clone=function(){var a=new e;a.enabled=this.enabled;
a.name=this.name;a.paramInstances=this.paramInstances;a.speed=this._speed;a.acceleration=this._acceleration;a.onCreate();return a};return e}(BaseBehavior);RotateBehaivor.prototype.__class__="RotateBehaivor";
var ScrollBehaivor=function(b){function e(){b.call(this);this.scrollDirectionType=BehaivorType.scrollDown;this.speed=0;this.active=1}__extends(e,b);var d=e.prototype;d.tick=function(){this.active=eval_e(this.active);if(1==this.active){var a=eval_e(this.speed);assert("number"!==typeof a,"ScrollBehaivor speed parameter type incorrect!!");var b=this.inst;if(b)switch(a/=60,this.scrollDirectionType){case BehaivorType.scrollUp:b.y-=a;b.y<-b.height+b.anchorY*b.height&&(b.y+=2*b.height);break;case BehaivorType.scrollDown:b.y+=
a;b.y>b.height+b.anchorY*b.height&&(b.y+=-2*b.height);break;case BehaivorType.scrollLeft:b.x-=a;b.x<-b.width+b.anchorX*b.width&&(b.x+=2*b.width);break;case BehaivorType.scrollRight:b.x+=a,b.x>b.width+b.anchorX*b.width&&(b.x+=-2*b.width)}}};d.setActive=function(a){this.active=eval_e(a)};d.setScrollDirection=function(a){this.scrollDirectionType=eval_e(a)};d.setScrollSpeed=function(a){this.speed=eval_e(a)};d.clone=function(){var a=new e;a.enabled=this.enabled;a.name=this.name;a.paramInstances=this.paramInstances;
a.scrollDirectionType=this.scrollDirectionType;a.speed=this.speed;a.onCreate();return a};return e}(BaseBehavior);ScrollBehaivor.prototype.__class__="ScrollBehaivor";
var ScrollToBehavior=function(b){function e(){b.call(this)}__extends(e,b);var d=e.prototype;d.onCreate=function(){};d.tick=function(){var a=egret.getTimer();a>=this._shakeStart&&a<this._shakeEnd&&(a=Math.random()*Math.PI*2,Math.random(),Math.cos(a),Math.sin(a));EgretWorld.getInstance().scrollToTarget(this.inst)};d.shake=function(a,b,d){this._magnitude=eval_e(a);this._duration=eval_e(b);this._mode=eval_e(d);this._shakeStart=egret.getTimer();this._shakeEnd=this._shakeStart+this._duration};d.clone=function(){var a=
new e;a.enabled=this.enabled;a.name=this.name;a.onCreate();return a};return e}(BaseBehavior);ScrollToBehavior.prototype.__class__="ScrollToBehavior";
var SinBehavior=function(b){function e(){b.call(this);this._2pi=2*Math.PI;this._pi_2=Math.PI/2;this._3pi_2=3*Math.PI/2;trigger.register(this)}__extends(e,b);var d=e.prototype;d.onCreate=function(){this.active=eval_e(this.active);this.movement=eval_e(this.movement);this.wave=eval_e(this.wave);this.period=eval_e(this.period);this.periodRandom=eval_e(this.periodRandom);this.period+=this.periodRandom;this.periodOffset=eval_e(this.periodOffset);this.periodOffsetRandom=eval_e(this.periodOffsetRandom);this.magnitude=
eval_e(this.magnitude);this.magnitudeRandom=eval_e(this.magnitudeRandom);0===this.period?this.i=0:(this.i=this.periodOffset/this.period*this._2pi,this.i+=Math.random()*this.periodOffsetRandom/this.period*this._2pi);this.magnitude+=Math.random()*this.magnitudeRandom;this._ratio=this._initialValue2=this._initialValue=0;this.init()};d.init=function(){if(this.inst)switch(this.movement){case 0:this._initialValue=this.inst.x;break;case 1:this._initialValue=this.inst.y;break;case 2:this._initialValue=this.inst.width;
this._ratio=this.inst.height/this.inst.width;break;case 3:this._initialValue=this.inst.width;break;case 4:this._initialValue=this.inst.height;break;case 5:this._initialValue=this.inst.angle;break;case 6:this._initialValue=this.inst.alpha;break;case 7:this._initialValue=0;break;case 8:this._initialValue=this.inst.x;this._initialValue2=this.inst.y;break;default:assert(!0,"\u65e0\u6548\u7684sine\u7c7b\u578b\uff01\uff01")}this._lastKnownValue=this._initialValue;this._lastKnownValue2=this._initialValue2};
d.waveFunc=function(a){a=eval_e(a);switch(this.wave){case 0:return Math.sin(a);case 1:return a<this._pi_2?a/this._pi_2:a<=this._3pi_2?1-2*(a-this._pi_2)/Math.PI:(a-this._3pi_2)/this._pi_2-1;case 2:return 2*a/this._2pi-1;case 3:return-2*a/this._2pi+1;case 4:return a<Math.PI?-1:1}return 0};d.tick=function(){if(0!==this.active){var a=this.inst.dt;0===this.period?this.i=0:(this.i+=a/this.period*this._2pi,this.i%=this._2pi);switch(this.movement){case 0:this.inst.x!==this._lastKnownValue&&(this._initialValue+=
this.inst.x-this._lastKnownValue);this.inst.x=this._initialValue+this.waveFunc(this.i)*this.magnitude;this._lastKnownValue=this.inst.x;break;case 1:this.inst.y!=this._lastKnownValue&&(this._initialValue+=this.inst.y-this._lastKnownValue);this.inst.y=this._initialValue+this.waveFunc(this.i)*this.magnitude;this._lastKnownValue=this.inst.y;break;case 2:this.inst.width=this._initialValue+this.waveFunc(this.i)*this.magnitude;this.inst.height=this.inst.width*this._ratio;break;case 3:this.inst.width=this._initialValue+
this.waveFunc(this.i)*this.magnitude;break;case 4:this.inst.height=this._initialValue+this.waveFunc(this.i)*this.magnitude;break;case 5:this.inst.angle!==this._lastKnownValue&&(this._initialValue+=this.inst.angle-this._lastKnownValue);this.inst.angle=this._initialValue+this.waveFunc(this.i)*this.magnitude;this._lastKnownValue=this.inst.angle;break;case 6:this.inst.alpha=this._initialValue+this.waveFunc(this.i)*this.magnitude/100;0>this.inst.alpha&&(this.inst.alpha=0);1<this.inst.alpha&&(this.inst.alpha=
1);break;case 8:this.inst.x!==this._lastKnownValue&&(this._initialValue+=this.inst.x-this._lastKnownValue),this.inst.y!==this._lastKnownValue2&&(this._initialValue2+=this.inst.y-this._lastKnownValue2),a=MathUtils.toRadian(this.inst.angle),this.inst.x=this._initialValue+Math.cos(a)*this.waveFunc(this.i)*this.magnitude,this.inst.y=this._initialValue2+Math.sin(a)*this.waveFunc(this.i)*this.magnitude,this._lastKnownValue=this.inst.x,this._lastKnownValue2=this.inst.y}}};d.isActive=function(a){return{instances:[this.inst],
status:this.active}};d.compareMovement=function(a){return{instances:[this.inst],status:this.movement==eval_e(a.movement)}};d.comparePeriod=function(a){return{instances:[this.inst],status:Utils.compare(this.period,a.operationType,a.value)}};d.compareMagnitude=function(a){return{instances:[this.inst],status:Utils.compare(this.period,a.operationType,a.value)}};d.compareWave=function(a){return{instances:[this.inst],status:this.wave==eval_e(a.wave)}};d.setActive=function(a){this.active=eval_e(a)};d.setPeriod=
function(a){this.period=eval_e(a)};d.setMagnitude=function(a){this.magnitude=eval_e(a)};d.setMovement=function(a){this.movement=eval_e(this.movement);this.init()};d.setWave=function(a){this.wave=eval_e(this.wave)};d.setPhase=function(a){a=eval_e(a);this.i=a*this._2pi%this._2pi};d.updateInitialState=function(){this.init()};Object.defineProperty(d,"cyclePosition",{get:function(){return Math.floor(this.i/this._2pi)},enumerable:!0,configurable:!0});Object.defineProperty(d,"value",{get:function(){return Math.floor(this.waveFunc(this.i)*
this.magnitude)},enumerable:!0,configurable:!0});d.clone=function(){var a=new e;a.enabled=this.enabled;a.name=this.name;a.paramInstances=this.paramInstances;a.active=this.active;a.movement=this.movement;a.wave=this.wave;a.period=this.period;a.periodRandom=this.periodRandom;a.periodOffset=this.periodOffset;a.periodOffsetRandom=this.periodOffsetRandom;a.magnitude=this.magnitude;a.magnitudeRandom=this.magnitudeRandom;a.onCreate();return a};return e}(BaseBehavior);SinBehavior.prototype.__class__="SinBehavior";
var SolidBehaivor=function(b){function e(){b.call(this)}__extends(e,b);var d=e.prototype;d.onCreate=function(){this.inst.solidEnabeld=null!=this.inst&&this.enabled?!0:!1};d.isSolidEnabled=function(a){return null};d.clone=function(){var a=new e;a.enabled=this.enabled;a.name=this.name;a.paramInstances=this.paramInstances;a.onCreate();return a};return e}(BaseBehavior);SolidBehaivor.prototype.__class__="SolidBehaivor";
var TimerBehavior=function(b){function e(){b.call(this);trigger.register(this)}__extends(e,b);var d=e.prototype;d.onCreate=function(){this._timers={}};d.tick=function(){for(var a in this._timers){var b=this._timers[a];if(b.isRunning){var d=egret.getTimer();d-b.oldtime>b.duration&&(0==b.repeatCount||b.runtimes<b.repeatCount?b.runtimes++:(this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onTimerComplete,a)),delete this._timers[b.tag]),this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,
this.onTimer,a)),b.oldtime=d)}}};d.onTimer=function(a){return{instances:[this.inst],status:!0}};d.onTimerComplete=function(a){return{instances:[this.inst],status:!0}};d.startTimer=function(a,b,d){d||assert(!0,"\u8ba1\u65f6\u5668\u6807\u7b7e\u540d\u4e0d\u80fd\u4e3a\u7a7a\uff01\uff01\uff01\uff01");a=eval_e(a);b=eval_e(b);var e=this._timers[d];e||(e={tag:d,duration:a,repeatCount:b,runtimes:0,oldtime:egret.getTimer(),isRunning:!0},this._timers[d]=e)};d.stopTimer=function(a){a||assert(!0,"\u8ba1\u65f6\u5668\u6807\u7b7e\u540d\u4e0d\u80fd\u4e3a\u7a7a\uff01\uff01\uff01\uff01");
var b=this._timers[a];b&&(b.runtimes=0,b.isRunning=!0,b.oldtime=Number.MIN_VALUE,delete this._timers[a])};d.resetTimer=function(a){a||assert(!0,"\u8ba1\u65f6\u5668\u6807\u7b7e\u540d\u4e0d\u80fd\u4e3a\u7a7a\uff01\uff01\uff01\uff01");if(a=this._timers[a])a.runtimes=0,a.isRunning=!0,a.oldtime=Number.MIN_VALUE};d.parseTimer=function(a){a||assert(!0,"\u8ba1\u65f6\u5668\u6807\u7b7e\u540d\u4e0d\u80fd\u4e3a\u7a7a\uff01\uff01\uff01\uff01");if(a=this._timers[a])a.isRunning=!1};d.resumeTimer=function(a){a||
assert(!0,"\u8ba1\u65f6\u5668\u6807\u7b7e\u540d\u4e0d\u80fd\u4e3a\u7a7a\uff01\uff01\uff01\uff01");if(a=this._timers[a])a.isRunning=!0};return e}(BaseBehavior);TimerBehavior.prototype.__class__="TimerBehavior";
var TurretBehaivor=function(b){function e(){b.call(this);this.range=300;this.targetMode=this.rotateSpeed=this.rateOfFire=1;this.turretTargets={};this.lastCheckTime=0;this.firstTickWidhTarget=!1;this.oldTargetY=this.oldTargetX=0;this.sortMode=1;trigger.register(this)}__extends(e,b);var d=e.prototype;d.onCreate=function(){this.currentTarget=null;this.range=eval_e(this.range);this.rateOfFire=eval_e(this.rateOfFire);this.rotateSpeed=eval_e(this.rotateSpeed);this.targetMode=eval_e(this.targetMode);this.sortMode=
eval_e(this.sortMode);assert("number"!==typeof this.range||"number"!==typeof this.rateOfFire||"number"!==typeof this.rotateSpeed,"TurretBehaivor parameter type incorrect!!")};d.isInRange=function(a){var b=this.inst,d=a.x-b.x;a=a.y-b.y;return d*d+a*a<this.range*this.range?[this]:null};d.lookForFirstTarget=function(){for(var a in this.turretTargets){var b=EgretWorld.getInstance().objectHash[this.turretTargets[a].name],d;for(d in b){var e=b[d];if(!e.isDead&&this.isInRange(e)&&e!=this.inst){this.currentTarget=
e;return}}}};d.lookForNearestTarget=function(){var a=Number.MAX_VALUE,b;for(b in this.turretTargets){var d=EgretWorld.getInstance().objectHash[this.turretTargets[b].name],e=this.range*this.range,m;for(m in d){var l=d[m];if(this.inst!=l&&!l.isDead){var f=this.inst.x-l.x,g=this.inst.y-l.y,f=f*f+g*g;f<e&&a>=f&&(e=f,this.currentTarget=l,a=f)}}}};d.lookForCustomTarget=function(){var a=[],b;for(b in this.turretTargets)var d=EgretWorld.getInstance().objectHash[this.turretTargets[b].name],a=a.concat(d);if(0<
a.length){b=[];for(d=0;d<a.length;d++)this.isInRange(a[d])&&!a[d].isDead&&b.push(a[d]);0==b.length?this.currentTarget=null:void 0!=b[0][this.compareInstanceVariables]&&(b.sort(function(a,b){var c=a[this.compareInstanceVariables],d=b[this.compareInstanceVariables];return c>d?1:c<d?-1:0}),this.currentTarget=1==this.sortMode?b[0]:b.reverse()[0])}};d.lookForAllTarget=function(){for(var a in this.turretTargets){a=EgretWorld.getInstance().objectHash[this.turretTargets[a].name];var b=[],d;for(d in a){var e=
a[d];this.isInRange(e)&&e!=this.inst&&b.push(e)}return this.currentTargets=b}};d.hasTarget=function(a){return 2!=this.targetMode?{instances:[this.currentTarget],status:!!this.currentTarget}:{instances:this.currentTargets,status:0!=this.currentTargets.length}};d.onShoot=function(a){return 2!=this.targetMode?null==this.currentTarget?{instances:[this.inst],status:!1}:{instances:[this.inst,this.currentTarget],status:!0}:{instances:this.currentTargets,status:!0}};d.onTargetAcquired=function(a){return{instances:[this.inst],
status:!0}};d.acquireTarget=function(){};d.addTarget=function(a){null!=a&&null==this.turretTargets[a.u_id]&&(this.turretTargets[a.u_id]=a)};d.clearTarget=function(a){null!=a&&delete this.turretTargets[a.u_id]};d.clearAllTargets=function(){this.turretTargets={}};d.unacquireTarget=function(){};d.setRange=function(a){this.range=eval_e(a);assert("number"!==typeof this.range,"TurretBehaivor setRange parameter type incorrect!!")};d.setRateOfFire=function(a){this.rateOfFire=eval_e(a);assert("number"!==typeof this.rateOfFire,
"TurretBehaivor setRateOfFire parameter type incorrect!!")};d.setRotateSpeed=function(a){this.rotateSpeed=eval_e(a);assert("number"!==typeof this.rotateSpeed,"TurretBehaivor setRotateSpeed parameter type incorrect!!")};d.setTargetMode=function(a,b){void 0===b&&(b="");this.targetMode=eval_e(a);assert("number"!==typeof this.targetMode,"TurretBehaivor setTargetMode parameter type incorrect!!");this.compareInstanceVariables=b;assert(3==a&&(null==b||""==b),"TurretBehaivor setTargetMode $instanceVariables not null!")};
d.setSortMode=function(a){this.sortMode=eval_e(a);assert("number"!==typeof this.sortMode,"TurretBehaivor setSortMode parameter type incorrect!!")};d.tick=function(){if(null!=this.turretTargets)if(this.currentTarget&&this.currentTarget.isDead)this.currentTarget=null;else if(this.currentTarget&&!this.isInRange(this.currentTarget))this.currentTarget=null;else{var a=egret.getTimer();if(0.1<=a-this.lastCheckTime){this.lastCheckTime=a;if(0!=this.targetMode||this.currentTarget)if(1==this.targetMode){var b=
this.currentTarget;this.lookForNearestTarget();this.currentTarget!=b&&this.currentTarget&&(this.firstTickWidhTarget=!0,this.oldTargetX=this.currentTarget.x,this.oldTargetY=this.currentTarget.y,this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onTargetAcquired)))}else 2!=this.targetMode&&3==this.targetMode&&(this.lookForCustomTarget(),this.currentTarget&&(this.firstTickWidhTarget=!0,this.oldTargetX=this.currentTarget.x,this.oldTargetY=this.currentTarget.y,this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,
this.onTargetAcquired))));else this.lookForFirstTarget(),this.currentTarget&&(this.firstTickWidhTarget=!0,this.oldTargetX=this.currentTarget.x,this.oldTargetY=this.currentTarget.y,this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onTargetAcquired)));if(2==this.targetMode){var d=this.lookForAllTarget();if(0<d.length){for(var e=0,m=0,l=d.length;m<l;m++)b=d[m],e+=MathUtils.toAngle(Math.atan2(b.y-this.inst.y,b.x-this.inst.x));b=e/d.length;if(isNaN(b))return;this.inst.angle!=b&&(this.inst.angle=
b)}}else if(this.currentTarget){b=MathUtils.angleTo(this.inst.x,this.inst.y,this.currentTarget.x,this.currentTarget.y);b=MathUtils.angleRotate(this.inst.angle,b,this.rotateSpeed);if(isNaN(b))return;this.inst.angle!=b&&(this.inst.angle=b)}void 0==this.inst.oldTurretTime&&(this.inst.oldTurretTime=0);if(a-this.inst.oldTurretTime>=1E3*this.rateOfFire){if(2!=this.targetMode)this.currentTarget&&this.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,this.onShoot));else for(e=0;e<d.length;e++)b=d[e],b.dispatchEvent(new TriggerEvent(TriggerEvent.TRIGGER,
this.onShoot));this.inst.oldTurretTime=a}}}};d.clone=function(){var a=new e;a.enabled=this.enabled;a.name=this.name;a.paramInstances=this.paramInstances;a.range=this.range;a.rateOfFire=this.rateOfFire;a.rotateSpeed=this.rotateSpeed;a.targetMode=this.targetMode;a.useCollisionCells=this.useCollisionCells;a.onCreate();return a};return e}(BaseBehavior);TurretBehaivor.prototype.__class__="TurretBehaivor";var OnAjaxRequestCompleteEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);
OnAjaxRequestCompleteEvent.prototype.__class__="OnAjaxRequestCompleteEvent";var CheckArrayIsEmptyEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);CheckArrayIsEmptyEvent.prototype.__class__="CheckArrayIsEmptyEvent";var CompareArraySizeEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);CompareArraySizeEvent.prototype.__class__="CompareArraySizeEvent";var CompareCurrentValueEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);
CompareCurrentValueEvent.prototype.__class__="CompareCurrentValueEvent";var CompareXDimentionEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);CompareXDimentionEvent.prototype.__class__="CompareXDimentionEvent";var CompareXYDimentionEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);CompareXYDimentionEvent.prototype.__class__="CompareXYDimentionEvent";var CompareXYZDimentionEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);
CompareXYZDimentionEvent.prototype.__class__="CompareXYZDimentionEvent";var ContainsValueEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);ContainsValueEvent.prototype.__class__="ContainsValueEvent";var OnArrayCreatedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnArrayCreatedEvent.prototype.__class__="OnArrayCreatedEvent";var OnArrayDestroyedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);
OnArrayDestroyedEvent.prototype.__class__="OnArrayDestroyedEvent";var PickArrayInstanceByUIDEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);PickArrayInstanceByUIDEvent.prototype.__class__="PickArrayInstanceByUIDEvent";var IsAnyPlayingEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsAnyPlayingEvent.prototype.__class__="IsAnyPlayingEvent";var IsSilentEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);
IsSilentEvent.prototype.__class__="IsSilentEvent";var IsSoundPlayingEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsSoundPlayingEvent.prototype.__class__="IsSoundPlayingEvent";var OnEndEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnEndEvent.prototype.__class__="OnEndEvent";var OnLoopOnTimeEndedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnLoopOnTimeEndedEvent.prototype.__class__="OnLoopOnTimeEndedEvent";
var PreloadCompleteEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);PreloadCompleteEvent.prototype.__class__="PreloadCompleteEvent";var IsBetweenAnglesEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsBetweenAnglesEvent.prototype.__class__="IsBetweenAnglesEvent";var IsClockwiseFromEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsClockwiseFromEvent.prototype.__class__="IsClockwiseFromEvent";
var IsWithInAngleEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsWithInAngleEvent.prototype.__class__="IsWithInAngleEvent";var B_OnHorizontalStepEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);B_OnHorizontalStepEvent.prototype.__class__="B_OnHorizontalStepEvent";var B_OnStepEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);B_OnStepEvent.prototype.__class__="B_OnStepEvent";
var B_OnVerticalStepEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);B_OnVerticalStepEvent.prototype.__class__="B_OnVerticalStepEvent";var CompareBitmapFontTextEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);CompareBitmapFontTextEvent.prototype.__class__="CompareBitmapFontTextEvent";var IsSupportVibrateEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsSupportVibrateEvent.prototype.__class__="IsSupportVibrateEvent";
var IsButtonDownEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsButtonDownEvent.prototype.__class__="IsButtonDownEvent";var IsButtonEnabledEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsButtonEnabledEvent.prototype.__class__="IsButtonEnabledEvent";var OnButtonBeginEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnButtonBeginEvent.prototype.__class__="OnButtonBeginEvent";
var OnButtonEndEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnButtonEndEvent.prototype.__class__="OnButtonEndEvent";var OnButtonMoveEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnButtonMoveEvent.prototype.__class__="OnButtonMoveEvent";var OnButtonReleaseOutsideEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnButtonReleaseOutsideEvent.prototype.__class__="OnButtonReleaseOutsideEvent";
var OnButtonTapEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnButtonTapEvent.prototype.__class__="OnButtonTapEvent";var CompareParameterEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);CompareParameterEvent.prototype.__class__="CompareParameterEvent";var OnFunctionCallEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnFunctionCallEvent.prototype.__class__="OnFunctionCallEvent";
var GamepadsAreSupportedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);GamepadsAreSupportedEvent.prototype.__class__="GamepadsAreSupportedEvent";var HasGamePadEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);HasGamePadEvent.prototype.__class__="HasGamePadEvent";var OnGamePadConnectedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnGamePadConnectedEvent.prototype.__class__="OnGamePadConnectedEvent";
var OnGamePadUnConnectedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnGamePadUnConnectedEvent.prototype.__class__="OnGamePadUnConnectedEvent";var OnKeyCodeIsDownEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnKeyCodeIsDownEvent.prototype.__class__="OnKeyCodeIsDownEvent";var CompareCurrentActionEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);CompareCurrentActionEvent.prototype.__class__="CompareCurrentActionEvent";
var CompareFrameEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);CompareFrameEvent.prototype.__class__="CompareFrameEvent";var CompareLoopEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);CompareLoopEvent.prototype.__class__="CompareLoopEvent";var ComparePlayOrderEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);ComparePlayOrderEvent.prototype.__class__="ComparePlayOrderEvent";
var CompareSpeedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);CompareSpeedEvent.prototype.__class__="CompareSpeedEvent";var IsPlayingEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsPlayingEvent.prototype.__class__="IsPlayingEvent";var IsReversePlayingEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsReversePlayingEvent.prototype.__class__="IsReversePlayingEvent";
var OnAllPlayCompleteEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnAllPlayCompleteEvent.prototype.__class__="OnAllPlayCompleteEvent";var OnFrameChangedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnFrameChangedEvent.prototype.__class__="OnFrameChangedEvent";var OnPlayCompleteEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnPlayCompleteEvent.prototype.__class__="OnPlayCompleteEvent";
var CompareSpeedPlatformEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);CompareSpeedPlatformEvent.prototype.__class__="CompareSpeedPlatformEvent";var IsMovingPlatformEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsMovingPlatformEvent.prototype.__class__="IsMovingPlatformEvent";var OnPlatformFallEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnPlatformFallEvent.prototype.__class__="OnPlatformFallEvent";
var OnPlatformJumpEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnPlatformJumpEvent.prototype.__class__="OnPlatformJumpEvent";var OnPlatformLandEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnPlatformLandEvent.prototype.__class__="OnPlatformLandEvent";var OnPlatformMoveEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnPlatformMoveEvent.prototype.__class__="OnPlatformMoveEvent";
var OnPlatformMoveLeftEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnPlatformMoveLeftEvent.prototype.__class__="OnPlatformMoveLeftEvent";var OnPlatformMoveRightEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnPlatformMoveRightEvent.prototype.__class__="OnPlatformMoveRightEvent";var OnPlatformStopEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnPlatformStopEvent.prototype.__class__="OnPlatformStopEvent";
var CompareProgressEvent=function(b){function e(){b.call(this);this.percent=0}__extends(e,b);return e}(EventBase);CompareProgressEvent.prototype.__class__="CompareProgressEvent";var SinCompareMovementEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);SinCompareMovementEvent.prototype.__class__="SinCompareMovementEvent";var SinComparePeriodEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);SinComparePeriodEvent.prototype.__class__="SinComparePeriodEvent";
var SinIsActiveEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);SinIsActiveEvent.prototype.__class__="SinIsActiveEvent";var CompareHeightEvent=function(b){function e(){b.call(this);this.height=0}__extends(e,b);return e}(EventBase);CompareHeightEvent.prototype.__class__="CompareHeightEvent";var CompareInstanceVariableEvent=function(b){function e(){b.call(this);this.value=0}__extends(e,b);return e}(EventBase);CompareInstanceVariableEvent.prototype.__class__="CompareInstanceVariableEvent";
var CompareMirroredStatusEvent=function(b){function e(){b.call(this);this.mirrored=0}__extends(e,b);return e}(EventBase);CompareMirroredStatusEvent.prototype.__class__="CompareMirroredStatusEvent";var CompareObjectAngleEvent=function(b){function e(){b.call(this);this.angle=0}__extends(e,b);return e}(EventBase);CompareObjectAngleEvent.prototype.__class__="CompareObjectAngleEvent";var CompareObjectMoveAngleEvent=function(b){function e(){b.call(this);this.angle=0}__extends(e,b);return e}(EventBase);
CompareObjectMoveAngleEvent.prototype.__class__="CompareObjectMoveAngleEvent";var CompareOpacityEvent=function(b){function e(){b.call(this);this.alpha=100}__extends(e,b);return e}(EventBase);CompareOpacityEvent.prototype.__class__="CompareOpacityEvent";var CompareTargetDistanceEvent=function(b){function e(){b.call(this);this.distance=this.y=this.x=0}__extends(e,b);return e}(EventBase);CompareTargetDistanceEvent.prototype.__class__="CompareTargetDistanceEvent";
var CompareWidthEvent=function(b){function e(){b.call(this);this.width=0}__extends(e,b);return e}(EventBase);CompareWidthEvent.prototype.__class__="CompareWidthEvent";var CompareXPosEvent=function(b){function e(){b.call(this);this.x=0}__extends(e,b);return e}(EventBase);CompareXPosEvent.prototype.__class__="CompareXPosEvent";var CompareYPosEvent=function(b){function e(){b.call(this);this.y=0}__extends(e,b);return e}(EventBase);CompareYPosEvent.prototype.__class__="CompareYPosEvent";
var IsMirroredEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsMirroredEvent.prototype.__class__="IsMirroredEvent";var IsMovingEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsMovingEvent.prototype.__class__="IsMovingEvent";var IsObjectMovingEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsObjectMovingEvent.prototype.__class__="IsObjectMovingEvent";
var IsOnLayerEvent=function(b){function e(){b.call(this);this.layer=0}__extends(e,b);return e}(EventBase);IsOnLayerEvent.prototype.__class__="IsOnLayerEvent";var IsOnScreenEvent=function(b){function e(){b.call(this);this.isOnScreen=1}__extends(e,b);return e}(EventBase);IsOnScreenEvent.prototype.__class__="IsOnScreenEvent";var IsOutsideLayoutEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsOutsideLayoutEvent.prototype.__class__="IsOutsideLayoutEvent";
var IsOverlappingOtherObjectEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsOverlappingOtherObjectEvent.prototype.__class__="IsOverlappingOtherObjectEvent";var IsVisibleEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsVisibleEvent.prototype.__class__="IsVisibleEvent";var IsflippedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsflippedEvent.prototype.__class__="IsflippedEvent";
var OnCollisionWithOtherObjectEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnCollisionWithOtherObjectEvent.prototype.__class__="OnCollisionWithOtherObjectEvent";var OnCreatedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnCreatedEvent.prototype.__class__="OnCreatedEvent";var OnDestoryEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnDestoryEvent.prototype.__class__="OnDestoryEvent";
var OnEnabledDisabledCollisionEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnEnabledDisabledCollisionEvent.prototype.__class__="OnEnabledDisabledCollisionEvent";var OnFinishedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnFinishedEvent.prototype.__class__="OnFinishedEvent";var PickButtomEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);PickButtomEvent.prototype.__class__="PickButtomEvent";
var PickByUniqueIDEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);PickByUniqueIDEvent.prototype.__class__="PickByUniqueIDEvent";var PickNearestEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);PickNearestEvent.prototype.__class__="PickNearestEvent";var PickUpEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);PickUpEvent.prototype.__class__="PickUpEvent";
var CompareTwoValuesEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);CompareTwoValuesEvent.prototype.__class__="CompareTwoValuesEvent";var CompareVariableEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);CompareVariableEvent.prototype.__class__="CompareVariableEvent";var ElseEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);ElseEvent.prototype.__class__="ElseEvent";
var EveryTickEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);EveryTickEvent.prototype.__class__="EveryTickEvent";var EveryXSecondsEvent=function(b){function e(){b.call(this);this.curTime=this.oldTime=this.interval=0}__extends(e,b);return e}(EventBase);EveryXSecondsEvent.prototype.__class__="EveryXSecondsEvent";var IsBetweenValuesEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsBetweenValuesEvent.prototype.__class__="IsBetweenValuesEvent";
var IsNumberNaNEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsNumberNaNEvent.prototype.__class__="IsNumberNaNEvent";var IsOnMobileDeviceEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsOnMobileDeviceEvent.prototype.__class__="IsOnMobileDeviceEvent";var IsValueTypeEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsValueTypeEvent.prototype.__class__="IsValueTypeEvent";
var ObjectUIDExistEvent=function(b){function e(){b.call(this);this.UID=0}__extends(e,b);return e}(EventBase);ObjectUIDExistEvent.prototype.__class__="ObjectUIDExistEvent";var OnLoadCompleteEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnLoadCompleteEvent.prototype.__class__="OnLoadCompleteEvent";var OnLoadFailureEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnLoadFailureEvent.prototype.__class__="OnLoadFailureEvent";
var OnSceneEndCompleteEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnSceneEndCompleteEvent.prototype.__class__="OnSceneEndCompleteEvent";var OnSceneInitCompleteEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnSceneInitCompleteEvent.prototype.__class__="OnSceneInitCompleteEvent";var OnStartOfLayoutEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnStartOfLayoutEvent.prototype.__class__="OnStartOfLayoutEvent";
var PickAllEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);PickAllEvent.prototype.__class__="PickAllEvent";var PickByComparisionEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);PickByComparisionEvent.prototype.__class__="PickByComparisionEvent";var PickInstanceByIndexEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);PickInstanceByIndexEvent.prototype.__class__="PickInstanceByIndexEvent";
var PickInstanecOverlappingEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);PickInstanecOverlappingEvent.prototype.__class__="PickInstanecOverlappingEvent";var PickRandomInstanceEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);PickRandomInstanceEvent.prototype.__class__="PickRandomInstanceEvent";var RepeatEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);RepeatEvent.prototype.__class__="RepeatEvent";
var TestRegexEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);TestRegexEvent.prototype.__class__="TestRegexEvent";var TriggerOnceWhileTrueEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);TriggerOnceWhileTrueEvent.prototype.__class__="TriggerOnceWhileTrueEvent";var WhileEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WhileEvent.prototype.__class__="WhileEvent";
var CompareTextEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);CompareTextEvent.prototype.__class__="CompareTextEvent";var IsWebSocketConnectionEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);IsWebSocketConnectionEvent.prototype.__class__="IsWebSocketConnectionEvent";var WeiXinShareAppMessageCancelEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WeiXinShareAppMessageCancelEvent.prototype.__class__="WeiXinShareAppMessageCancelEvent";
var WeiXinShareAppMessageFailEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WeiXinShareAppMessageFailEvent.prototype.__class__="WeiXinShareAppMessageFailEvent";var WeiXinShareAppMessageSuccessEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WeiXinShareAppMessageSuccessEvent.prototype.__class__="WeiXinShareAppMessageSuccessEvent";var WeiXinShareAppMessageTriggerEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);
WeiXinShareAppMessageTriggerEvent.prototype.__class__="WeiXinShareAppMessageTriggerEvent";var WeiXinShareQQCancelEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WeiXinShareQQCancelEvent.prototype.__class__="WeiXinShareQQCancelEvent";var WeiXinShareQQFailEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WeiXinShareQQFailEvent.prototype.__class__="WeiXinShareQQFailEvent";
var WeiXinShareQQSuccessEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WeiXinShareQQSuccessEvent.prototype.__class__="WeiXinShareQQSuccessEvent";var WeiXinShareQQTriggerEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WeiXinShareQQTriggerEvent.prototype.__class__="WeiXinShareQQTriggerEvent";var WeiXinShareQZoneCancelEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);
WeiXinShareQZoneCancelEvent.prototype.__class__="WeiXinShareQZoneCancelEvent";var WeiXinShareQZoneFailEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WeiXinShareQZoneFailEvent.prototype.__class__="WeiXinShareQZoneFailEvent";var WeiXinShareQZoneSuccessEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WeiXinShareQZoneSuccessEvent.prototype.__class__="WeiXinShareQZoneSuccessEvent";
var WeiXinShareQZoneTriggerEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WeiXinShareQZoneTriggerEvent.prototype.__class__="WeiXinShareQZoneTriggerEvent";var WeiXinShareTXWeiBoCancelEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WeiXinShareTXWeiBoCancelEvent.prototype.__class__="WeiXinShareTXWeiBoCancelEvent";var WeiXinShareTXWeiBoFailEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);
WeiXinShareTXWeiBoFailEvent.prototype.__class__="WeiXinShareTXWeiBoFailEvent";var WeiXinShareTXWeiBoSuccessEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WeiXinShareTXWeiBoSuccessEvent.prototype.__class__="WeiXinShareTXWeiBoSuccessEvent";var WeiXinShareTXWeiBoTriggerEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WeiXinShareTXWeiBoTriggerEvent.prototype.__class__="WeiXinShareTXWeiBoTriggerEvent";
var WeiXinTimelineCancelEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WeiXinTimelineCancelEvent.prototype.__class__="WeiXinTimelineCancelEvent";var WeiXinTimelineFailEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WeiXinTimelineFailEvent.prototype.__class__="WeiXinTimelineFailEvent";var WeiXinTimelineSuccessEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);
WeiXinTimelineSuccessEvent.prototype.__class__="WeiXinTimelineSuccessEvent";var WeiXinTimelineTriggerEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WeiXinTimelineTriggerEvent.prototype.__class__="WeiXinTimelineTriggerEvent";var GameInit_Module=function(b){function e(){b.call(this)}__extends(e,b);e.prototype.registerProxys=function(){return[GameInit_Proxy]};return e}(Module);GameInit_Module.prototype.__class__="GameInit_Module";
var Loader_Module=function(b){function e(){b.call(this)}__extends(e,b);e.prototype.registerProxys=function(){return[Loader_Config_Decoder_Proxy,Loader_PreResource_Load_Proxy]};return e}(Module);Loader_Module.prototype.__class__="Loader_Module";var ModuleManager=function(){function b(){}b.resigerModule=function(b){this._modules=b};b.startModule=function(){for(var e=b._modules.length,d=0;d<e;d++)(new b._modules[d]).startProxy()};return b}();ModuleManager.prototype.__class__="ModuleManager";
var ModuleList=function(){function b(){}b.startModule=function(){ModuleManager.resigerModule([Loader_Module,GameInit_Module]);ModuleManager.startModule()};return b}();ModuleList.prototype.__class__="ModuleList";
var Utils=function(){function b(){}b.injectProp=function(b,d,a){void 0===d&&(d=null);void 0===a&&(a=!0);if(!d)return!1;for(var c in d){var h=d[c];a&&"function"==typeof h||(b[c]=h)}return!0};b.getTransformationStr=function(b){return b};b.getName=function(b){if(b){b=b.split(".");if(1>=b.length)return null;b=b[0].split("/");if(1>=b.length)return null;var d=b[b.length-1]}return d};b.getTexture=function(b){b=this.getName(b);var d;if(b){var a=LayoutDecoder.spriteSheetDatas[b];a&&(d=a.texture);if(void 0==
d||null==d)d=RES.getRes(b);if(void 0!=d&&null!=d)return[d,a?a.offsetX:0,a?a.offsetY:0]}return null};b.compare=function(b,d,a){b=eval_e(b);a=eval_e(a);switch(d){case OperationType.EQUAL_TO:return b==a;case OperationType.GREATER_OR_EQUAL:return b>=a;case OperationType.GREATER_THAN:return b>a;case OperationType.LESS_OR_EQUAL:return b<=a;case OperationType.LESS_THAN:return b<a;case OperationType.NOT_EQUAL_TO:return b!=a}return!1};b.getInstance=function(b){switch(b){case "System":return AISystem.instance;
case "Keyboard":return AIKeyboard.instance;case "AITouch":return AITouch.instance;case "AIFunction":return AIFunction.instance;case "AIWeixin":return AIWeiXin.instance;case "Browser":return AIBrowser.instance;case "WebStorage":return AIWebStorage.instance;case "WebSocket":return AIWebSocket.instance;case "Ajax":return AIAjax.instance;default:var d=egret.getDefinitionByName(b);return null==d?(alert("name:"+b),null):new d}};b.initializeClassDefinition=function(){BoundsOfRectBehaivor;BulletBehaivor;
CarBehaivor;CollisionBehaivor;CustomMovementBehaivor;DestoryOutsideLayoutBehaivor;DragDropBehaivor;EightDirectionBehaivor;FadeBehavior;MovingFollowOnMouseBehaivor;PathfindingBehaivor;PlatformBehaivor;JumpthruBehavior;RotateBehaivor;ScrollBehaivor;ScrollToBehavior;SolidBehaivor;TurretBehaivor;NodeMovingBehavior;IsAnyPlayingEvent;IsSilentEvent;IsSoundPlayingEvent;OnEndEvent;PreloadCompleteEvent;IsBetweenAnglesEvent;IsClockwiseFromEvent;IsWithInAngleEvent;B_CompareSpeedEvent;B_IsMovingEvent;B_OnHorizontalStepEvent;
B_OnStepEvent;B_OnVerticalStepEvent;GamepadsAreSupportedEvent;HasGamePadEvent;OnGamePadConnectedEvent;OnGamePadUnConnectedEvent;OnAnyKeyIsDownEvent;OnAnyKeyIsReleasedEvent;OnKeyCodeIsDownEvent;OnKeyCodeIsReleasedEvent;OnKeyIsDownEvent;OnKeyIsReleasedEvent;CompareProgressEvent;CompareHeightEvent;CompareInstanceVariableEvent;CompareOpacityEvent;CompareWidthEvent;CompareXPosEvent;CompareYPosEvent;CompareMirroredStatusEvent;CompareObjectMoveAngleEvent;CompareObjectAngleEvent;CompareTargetDistanceEvent;
IsflippedEvent;IsMirroredEvent;IsMovingEvent;IsOnLayerEvent;IsOnScreenEvent;IsOutsideLayoutEvent;IsObjectMovingEvent;IsOverlappingOtherObjectEvent;IsVisibleEvent;OnCollisionWithOtherObjectEvent;OnEnabledDisabledCollisionEvent;OnCreatedEvent;OnDestoryEvent;OnFinishedEvent;PickButtomEvent;PickByUniqueIDEvent;PickNearestEvent;PickUpEvent;CompareTwoValuesEvent;CompareVariableEvent;ElseEvent;EveryTickEvent;EveryXSecondsEvent;ForEachOrderEvent;ForEvent;IsBetweenValuesEvent;IsNumberNaNEvent;IsOnMobileDeviceEvent;
IsValueTypeEvent;ObjectUIDExistEvent;OnLoadCompleteEvent;OnLoadFailureEvent;OnStartOfLayoutEvent;RepeatEvent;TestRegexEvent;TriggerOnceWhileTrueEvent;WhileEvent;CompareTextEvent;B_Turret_OnShootEvent;B_Turret_OnTargetAcquiredEvent;PickRandomInstanceEvent;PickAllEvent;PickByComparisionEvent;PickInstanceByIndexEvent;PickInstanecOverlappingEvent;WeiXinShareAppMessageCancelEvent;WeiXinShareAppMessageFailEvent;WeiXinShareAppMessageSuccessEvent;WeiXinShareAppMessageTriggerEvent;WeiXinShareQQCancelEvent;
WeiXinShareQQFailEvent;WeiXinShareQQSuccessEvent;WeiXinShareQQTriggerEvent;WeiXinShareTXWeiBoCancelEvent;WeiXinShareTXWeiBoFailEvent;WeiXinShareTXWeiBoSuccessEvent;WeiXinShareTXWeiBoTriggerEvent;WeiXinTimelineCancelEvent;WeiXinTimelineFailEvent;WeiXinTimelineSuccessEvent;WeiXinTimelineTriggerEvent;WeiXinShareQZoneTriggerEvent;WeiXinShareQZoneCancelEvent;WeiXinShareQZoneSuccessEvent;WeiXinShareQZoneFailEvent;OnTouchBeginEvent;OnTouchTapEvent;OnTouchMoveEvent;OnTouchEndEvent;IsTouchDownEvent;OnTouchReleaseOutsideEvent;
IsButtonEnabledEvent;IsButtonDownEvent;OnButtonBeginEvent;OnButtonEndEvent;OnButtonMoveEvent;OnButtonReleaseOutsideEvent;OnButtonTapEvent;OnNodeMovingArrivedEvent;OnNodeMovingReadyEvent;OnNodeMovingSegmentArrivedEvent;OnPathfindingArrivedEvent;OnPathfindingReadyEvent;OnPathfindingSegmentArrivedEvent;IsSolidEvent;IsWalkableEvent;IsPathfindingMovingEvent;IsNodeMovingEvent;CompareParameterEvent;OnFunctionCallEvent;IsWebSocketConnectionEvent;IsWebSocketOpenEvent;IsWebSocketSupportEvent;OnWebSocketCloseEvent;
OnWebSocketErrorEvent;OnWebSocketOpenEvent;OnWebSocketMessageEvent;IsSupportVibrateEvent;IsCookiesEnabledEvent;IsOnlineEvent;IsHasJavaEvent;OnOnlineEvent;OnOfflineEvent;OnResizeEvent;IsFullscreenEvent;IsPortraitLandscapeEvent;IsSupportFullscreenEvent;CompareFrameEvent;CompareLoopEvent;ComparePlayOrderEvent;CompareSpeedEvent;CompareCurrentActionEvent;IsPlayingEvent;IsReversePlayingEvent;OnAllPlayCompleteEvent;OnFrameChangedEvent;OnPlayCompleteEvent;PinBehavior;IsPinnedEvent;TimerBehavior;TimerOnTimerCompleteEvent;
TimerOnTimerEvent;FadeBehavior;FadeOnFadeInFinishedEvent;FadeOnFadeOutFinishedEvent;FadeOnFadeWaitFinishedEvent;FlashBehavior;FlashIsFlashingEvent;FlashOnFlashEndedEvent;FlashonFlashLoopOnceCompleteEvent;SinBehavior;SinCompareMagnitudeEvent;SinCompareMovementEvent;SinComparePeriodEvent;SinCompareWaveEvent;SinIsActiveEvent;ForEachOrderEvent;ForEvent;CompareXDimentionEvent;CompareXYDimentionEvent;CompareXYZDimentionEvent;CompareArraySizeEvent;ContainsValueEvent;CheckArrayIsEmptyEvent;CompareCurrentValueEvent;
OnArrayCreatedEvent;OnArrayDestroyedEvent;PickArrayInstanceByUIDEvent;OnPlatformJumpEvent;OnPlatformFallEvent;OnPlatformLandEvent;OnPlatformStopEvent;OnPlatformMoveEvent;OnPlatformMoveLeftEvent;OnPlatformMoveRightEvent;IsMovingPlatformEvent;CompareSpeedPlatformEvent;IsOnFloorEvent;IsByWallEvent;IsJumpingEvent;IsFallingEvent;IsDoubleJumpEnabledEvent;CompareBitmapFontTextEvent;OnSceneInitCompleteEvent;OnSceneEndCompleteEvent;OnAjaxRequestCompleteEvent;OnAjaxRequestErrorEvent;OnAjaxRequestProressEvent;
OnLoopOnTimeEndedEvent};b.hashs={};return b}();Utils.prototype.__class__="Utils";var Main=function(b){function e(){b.call(this);this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,b);e.prototype.onAddToStage=function(b){EgretToolUI.init(this.stage);EgretToolUI.document=this;ModuleList.startModule();TimerManager.initialize();Utils.initializeClassDefinition();EventManager.dispatchModuleEvent(new E_GameInit)};return e}(egret.DisplayObjectContainer);
Main.prototype.__class__="Main";
(function(b){var e=function(d){function a(){d.call(this);window.addEventListener("keydown",this.onkeydown.bind(this),!0);window.addEventListener("keyup",this.onKeyUp.bind(this),!0)}__extends(a,d);var c=a.prototype;a.getInstance=function(){null==this._instance&&(this._instance=new a);return this._instance};c.onkeydown=function(a){var c=new b.KeyboardEvent(b.KeyboardEvent.KEY_DOWN);Utils.injectProp(c,a);this.dispatchEvent(c)};c.onKeyUp=function(a){var c=new b.KeyboardEvent(b.KeyboardEvent.KEY_UP);Utils.injectProp(c,
a);this.dispatchEvent(c)};return a}(egret.EventDispatcher);b.Keyboard=e;e.prototype.__class__="leo.Keyboard"})(leo||(leo={}));
var SceneCamera=function(){function b(b){this.updateCamera=!1;this.scene=b}var e=b.prototype;e.lookAtPoint=function(b){this.pos!=b&&(this.pos=b,this.updateCamera=!0)};e.lookAtX=function(b){this._scrollX!=b&&(this.updateCamera=!0,this._scrollX=b)};e.lookAtY=function(b){this._scrollY!=b&&(this.updateCamera=!0,this._scrollY=b)};e.lookAtChar=function(b){this.lookAtTarget=b;if(this._scrollX!=this.lookAtTarget.x||this._scrollY!=this.lookAtTarget.y)this.updateCamera=!0,this._scrollX=this.lookAtTarget.x,
this._scrollY=this.lookAtTarget.y};e.render=function(){if(this.updateCamera){var b=LayoutDecoder.sceneWidth,a=LayoutDecoder.sceneHeight,c=EgretToolUI.stage.stageWidth,e=EgretToolUI.stage.stageHeight,k=EgretToolUI.renderContainer,m=EgretWorld.getInstance().objectList;this._scrollX>c/2&&this._scrollX<b-c/2?this.newSceneX=c/2-this._scrollX:this._scrollX<=EgretToolUI.stage.stageWidth/2?this.newSceneX=0:this._scrollX>b-c/2&&(this.newSceneX=c-b);this._scrollY>e/2&&this._scrollY<a-e/2?this.newSceneY=e/2-
this._scrollY:this._scrollY<=e/2?this.newSceneY=0:this._scrollY>a-e/2&&(this.newSceneY=e-a);for(b=0;b<m.length;b++)a=m[b],isNaN(this.oldSceneX)||isNaN(this.oldSceneY)||(a.x+=1*-((this.newSceneX-this.oldSceneX)*(100-a.parallaxX)/100),a.y+=1*-((this.newSceneY-this.oldSceneY)*(100-a.parallaxY)/100));isNaN(this.oldSceneX)||isNaN(this.oldSceneY)||(k.x+=this.newSceneX-this.oldSceneX,k.y+=this.newSceneY-this.oldSceneY);this.oldSceneX=this.newSceneX;this.oldSceneY=this.newSceneY}};return b}();
SceneCamera.prototype.__class__="SceneCamera";
var CollisionUtils=function(){function b(){}b.isCollision=function(b,d,a,c,h,k){return b>=a&&b<=a+h&&d>=c&&d<=c+k};b.isCollsionWithRect=function(b,d,a,c,h,k,m,l){return b>=h&&b>=h+m||b<=h&&b+a<=h||d>=k&&d>=k+l||d<=k&&d+c<=k?!1:!0};b.isCollisionPointWithCircle=function(b,d,a,c,h){return Math.sqrt(Math.pow(b-a,2)+Math.pow(d-c,2))<=h};b.isCollisionCircleWithCircle=function(b,d,a,c,h,k){return Math.sqrt(Math.pow(b-a,2)+Math.pow(d-c,2))<=h+k};b.isCollisionRectWithCircle=function(b,d,a,c,h,k,m){a*=0.5;
c*=0.5;b=h-(b+a);d=k-(d+c);k=Math.min(b,a);a=Math.max(k,-a);k=Math.min(d,c);c=Math.max(k,-c);return(a-b)*(a-b)+(c-d)*(c-d)<=m*m};b.checkPointCollideShape=function(b,d,a){var c=a.length;if(3>c)return!1;for(var h=0,k=[],h=0;h<a.length;h++){var m=new egret.Point(a[h].x,a[h].y);k.push(m)}for(h=0;h<k.length;h++)k[h].x+=d.x,k[h].y+=d.y;if(0<this.vectorCrossPoint(k[0],b,k[1])||0>this.vectorCrossPoint(k[0],b,k[c-1]))return!1;h=2;d=c-1;for(a=-1;h<=d;)c=h+d>>1,0<this.vectorCrossPoint(k[0],b,k[c])?(a=c,d=c-
1):h=c+1;return 0>a?!1:0>this.vectorCrossPoint(k[a-1],b,k[a])};b.vectorCrossPoint=function(b,d,a){return(d.x-b.x)*(a.y-b.y)-(a.x-b.x)*(d.y-b.y)};b.hitTest=function(b,d){for(var a=0;a<b.length;a++)for(var c=0;c<d.length;c++)if(this.simpleLineTest(b[a],d[c]))return!0;return!1};b.simpleLineTest=function(b,d){var a=b.p1x,c=b.p1y,h=b.p2x,k=b.p2y,m=d.p1x,l=d.p1y,f=d.p2x,g=d.p2y;return 0>=((h-a)*(l-c)-(m-a)*(k-c))*((h-a)*(g-c)-(f-a)*(k-c))&&0>=((f-m)*(c-l)-(a-m)*(g-l))*((f-m)*(k-l)-(h-m)*(g-l))};b.testOverlap=
function(b,d){if(!b||!d||b===d)return!1;var a=!1;if(0==b.angle&&0==d.angle)a=b.getGlobalBounds().intersects(d.getGlobalBounds());else{var a=this.getLines(b),c=this.getLines(d);return this.hitTest(a,c)}return a};b.getLines=function(b){var d=MathUtils.toRadian(b.angle),a=new egret.Matrix;a.translate(-b.width/2,-b.height/2);a.rotate(d);var c=new egret.Matrix;c.translate(b.width/2,-b.height/2);c.rotate(d);var h=new egret.Matrix;h.translate(b.width/2,b.height/2);h.rotate(d);var k=new egret.Matrix;k.translate(-b.width/
2,b.height/2);k.rotate(d);d=[];d.push({p1x:a.tx+b.x,p1y:a.ty+b.y,p2x:c.tx+b.x,p2y:c.tx+b.y},{p1x:c.tx+b.x,p1y:c.ty+b.y,p2x:h.tx+b.x,p2y:h.ty+b.y},{p1x:h.tx+b.x,p1y:h.ty+b.y,p2x:k.tx+b.x,p2y:k.ty+b.y},{p1x:k.tx+b.x,p1y:k.ty+b.y,p2x:a.tx+b.x,p2y:a.ty+b.y});return d};b.testOverlapSolid=function(b){for(var d=EgretWorld.getInstance().objectList,a=0;a<d.length;a++){var c=d[a];if(c.solidEnabeld&&this.testOverlap(b,c))return c}return null};b.testOverlapJumpThru=function(b,d){void 0===d&&(d=!1);var a=EgretWorld.getInstance().objectList,
c=null;d&&(c=[]);for(var h=0;h<a.length;h++){var k=a[h];if(k.jumpthruEnabled&&this.testOverlap(b,k))if(d)c.push(k);else return[k]}return c};b.pushInFractional=function(b,d,a,c,h){var k,m=2,l=!1;k=!1;for(var f=b.x,g=b.y;m<=h;)k=1/m,m*=2,b.x+=d*k*(l?1:-1),b.y+=a*k*(l?1:-1),this.testOverlap(b,c)?k=l=!0:(k=l=!1,f=b.x,g=b.y);k&&(b.x=f,b.y=g)};b.pushOutSolid=function(b,d,a,c,h,k){void 0===c&&(c=0);void 0===h&&(h=!1);void 0===k&&(k=null);c=c||50;for(var m=b.x,l=b.y,f=null,g=null,n=0;n<c;n++)if(b.x=m+d*n,
b.y=l+a*n,!this.testOverlap(b,f))if(f=this.testOverlapSolid(b))g=f;else if(h&&(f=k?this.testOverlap(b,k)?k:null:this.testOverlapJumpThru(b))&&(g=f),!f)return g&&this.pushInFractional(b,d,a,g,16),!0;b.x=m;b.y=l;return!1};b.pushOutSolidNearest=function(b,d){var a=is_undefined(a)?100:a,c=0,h=b.x,k=b.y,m=0,l=0,f=0,g=this.testOverlapSolid(b);if(!g)return!0;for(;c<a;){switch(m){case 0:l=0;f=-1;c++;break;case 1:l=1;f=-1;break;case 2:l=1;f=0;break;case 3:f=l=1;break;case 4:l=0;f=1;break;case 5:l=-1;f=1;break;
case 6:l=-1;f=0;break;case 7:f=l=-1}m=(m+1)%8;b.x=Math.floor(h+l*c);b.y=Math.floor(k+f*c);if(!this.testOverlap(b,g)&&(g=this.testOverlapSolid(b),!g))return!0}b.x=h;b.y=k;return!1};b.registerCollision=function(b,d){b.collisionsEnabled&&d.collisionsEnabled&&this.registered_collisions.push([b,d])};b.checkRegisteredCollision=function(b,d){for(var a=0;a<this.registered_collisions.length;a++){var c=this.registered_collisions[a];if(c[0]==b&&c[1]==d||c[0]==d&&c[1]==b)return!0}return!1};b.registered_collisions=
[];return b}();CollisionUtils.prototype.__class__="CollisionUtils";var OnAudioLoadCompleteEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);OnAudioLoadCompleteEvent.prototype.__class__="OnAudioLoadCompleteEvent";var B_Bullet_compareSpeedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);B_Bullet_compareSpeedEvent.prototype.__class__="B_Bullet_compareSpeedEvent";
var B_EightDirection_CompareSpeedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);B_EightDirection_CompareSpeedEvent.prototype.__class__="B_EightDirection_CompareSpeedEvent";var B_EightDirection_isMovingEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);B_EightDirection_isMovingEvent.prototype.__class__="B_EightDirection_isMovingEvent";var OnResourceLoadedEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);
OnResourceLoadedEvent.prototype.__class__="OnResourceLoadedEvent";var WebStorageCompareKeyTextEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WebStorageCompareKeyTextEvent.prototype.__class__="WebStorageCompareKeyTextEvent";var WebStorageLocalStorageEnabledEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WebStorageLocalStorageEnabledEvent.prototype.__class__="WebStorageLocalStorageEnabledEvent";
var WebStorageLocalStorageExists=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WebStorageLocalStorageExists.prototype.__class__="WebStorageLocalStorageExists";var WebStorageOnQuataExceededEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WebStorageOnQuataExceededEvent.prototype.__class__="WebStorageOnQuataExceededEvent";var WebStorageSessionStorageEnabledEvent=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);
WebStorageSessionStorageEnabledEvent.prototype.__class__="WebStorageSessionStorageEnabledEvent";var WebStorageSessionStorageExists=function(b){function e(){b.call(this)}__extends(e,b);return e}(EventBase);WebStorageSessionStorageExists.prototype.__class__="WebStorageSessionStorageExists";
var LayerManager=function(){function b(){}b.getLayerByIndex=function(b,d){var a=this.layers[d];if(null==a){a=new egret.Sprite;a.layerIndex=d;this.layers.push(a);this.layers.sort(function(a,b){return a.layerIndex>b.layerIndex?1:a.layerIndex<b.layerIndex?-1:0});for(var c=0,h=this.layers.length;c<h;c++)a=this.layers[c],EgretToolUI.renderContainer.addChild(a)}return a};b.getLayerIndex=function(b){return b?this.layers.indexOf(b):-1};b.layers=[];return b}();LayerManager.prototype.__class__="LayerManager";
var Ellipse=function(b){function e(d,a,c,e){b.call(this);this._x=d;this._y=a;this.width=c;this.height=e}__extends(e,b);e.prototype.draw=function(b){this.graphics.clear();this.graphics.lineStyle(2,b);this.graphics.beginFill(b,0.2);this.graphics.drawEllipse(this._x,this._y,this.width,this.height);this.graphics.endFill()};return e}(egret.Sprite);Ellipse.prototype.__class__="Ellipse";
var PolyLine=function(b){function e(d,a,c){b.call(this);this._x=d;this._y=a;this._points=c}__extends(e,b);e.prototype.draw=function(b){this.graphics.clear();this.graphics.lineStyle(2,b);this.graphics.beginFill(b,0.2);if(this._points)for(b=0;b<this._points.length;b++){var a=this._points[b];0==b?this.graphics.moveTo(a[0],a[1]):this.graphics.lineTo(a[0],a[1])}this.graphics.endFill()};return e}(egret.Sprite);PolyLine.prototype.__class__="PolyLine";
var Polygon=function(b){function e(d,a,c){b.call(this);this._x=d;this._y=a;this._points=c}__extends(e,b);e.prototype.draw=function(b){this.graphics.clear();this.graphics.lineStyle(2,b);this.graphics.beginFill(b,0.2);if(this._points)for(b=0;b<this._points.length;b++){var a=this._points[b];0==b?this.graphics.moveTo(a[0],a[1]):this.graphics.lineTo(a[0],a[1])}this.graphics.endFill()};return e}(egret.Sprite);Polygon.prototype.__class__="Polygon";
var Version=function(){function b(){}b.compareVersion=function(b,d){var a=b.split("."),c=d.split("."),h=a[0]+"."+a[1];a[2]&&(h+=a[2]);a=c[0]+"."+c[1];c[2]&&(a+=c[2]);c=+h;h=+a;return c>h?1:c===h?0:-1};b.version="1.2";return b}();Version.prototype.__class__="Version";
var WeixinSDK=function(){function b(){this.debug=!0;this._bodyMenuShareTimeline=new BodyMenuShareTimeline;this._bodyMenuShareAppMessage=new BodyMenuShareAppMessage;this._bodyMenuShareQQ=new BodyMenuShareQQ;this._bodyMenuShareWeibo=new BodyMenuShareWeibo;this._bodyMenuShareQZone=new BodyMenuShareQZone}var e=b.prototype;e.bodyMenuShareTimeline=function(){return this._bodyMenuShareTimeline};e.bodyMenuShareAppMessage=function(){return this._bodyMenuShareAppMessage};e.bodyMenuShareQQ=function(){return this._bodyMenuShareQQ};
e.bodyMenuShareWeibo=function(){return this._bodyMenuShareWeibo};e.bodyMenuShareQZone=function(){return this._bodyMenuShareQZone};e.initialize=function(){var b=this;this.self=this;if(null!=this.signUrl&&""!=this.signUrl){var a=window.location.href.split("#")[0],a=a.slice(0,a.length-1),c=this.signUrl+"?url="+encodeURIComponent(location.href.split("#")[0]),a=new egret.URLLoader,c=new egret.URLRequest(c);a.load(c);c.method=egret.URLRequestMethod.GET;a.addEventListener(egret.Event.COMPLETE,function(a){b.signPackage=
JSON.parse(a.target.data);b.getWeiXinConfig();b.registerWeiXinShareTimeline();b.registerWeiXinShareAppMessage();b.registerWeiXinShareQQ();b.registerWeiXinShareWeiBo();b.registerWeiXinShareQZone()},this)}};e.getWeiXinConfig=function(){var b=new BodyConfig;b.debug=this.debug;b.appId=this.signPackage.appId;b.timestamp=this.signPackage.timestamp;b.nonceStr=this.signPackage.nonceStr;b.signature=this.signPackage.signature;b.jsApiList="checkJsApi onMenuShareTimeline onMenuShareAppMessage onMenuShareQQ onMenuShareWeibo onMenuShareQZone hideMenuItems showMenuItems hideAllNonBaseMenuItem showAllNonBaseMenuItem translateVoice startRecord stopRecord playVoice pauseVoice stopVoice uploadVoice downloadVoice chooseImage previewImage uploadImage downloadImage getNetworkType openLocation getLocation hideOptionMenu showOptionMenu closeWindow scanQRCode chooseWXPay openProductSpecificView addCard chooseCard openCard".split(" ");
wx.config(b)};e.registerWeiXinShareTimeline=function(){var b=this;this.bodyMenuShareTimeline().trigger=function(){b.debug&&alert("\u7528\u6237\u70b9\u51fb\u5206\u4eab\u5230\u670b\u53cb\u5708");if(null!=b.onTimelineTrigger)b.onTimelineTrigger()};this.bodyMenuShareTimeline().success=function(){b.debug&&alert("\u5df2\u5206\u4eab");if(null!=b.onTimelineSuccess)b.onTimelineSuccess()};this.bodyMenuShareTimeline().cancel=function(){b.debug&&alert("\u5df2\u53d6\u6d88");if(null!=b.onTimelineCancel)b.onTimelineCancel()};
this.bodyMenuShareTimeline().fail=function(a){b.debug&&alert(JSON.stringify(a));if(null!=b.onTimelineFail)b.onTimelineFail()};wx.onMenuShareTimeline(this.bodyMenuShareTimeline())};e.registerWeiXinShareAppMessage=function(){var b=this;this.bodyMenuShareAppMessage().trigger=function(){b.debug&&alert("\u7528\u6237\u70b9\u51fb\u53d1\u9001\u7ed9\u670b\u53cb");if(null!=b.onAppMessageTrigger)b.onAppMessageTrigger()};this.bodyMenuShareAppMessage().success=function(){b.debug&&alert("\u5df2\u5206\u4eab");if(null!=
b.onAppMessageSuccess)b.onAppMessageSuccess()};this.bodyMenuShareAppMessage().cancel=function(){b.debug&&alert("\u5df2\u53d6\u6d88");if(null!=b.onAppMessageCancel)b.onAppMessageCancel()};this.bodyMenuShareAppMessage().fail=function(a){b.debug&&alert(JSON.stringify(a));if(null!=b.onAppMessageFail)b.onAppMessageFail()};wx.onMenuShareAppMessage(this.bodyMenuShareAppMessage())};e.registerWeiXinShareQQ=function(){var b=this;this.bodyMenuShareQQ().trigger=function(){b.debug&&alert("\u7528\u6237\u70b9\u51fb\u5206\u4eab\u5230QQ");
if(null!=b.onQQTrigger)b.onQQTrigger()};this.bodyMenuShareQQ().complete=function(a){b.debug&&alert(JSON.stringify(a))};this.bodyMenuShareQQ().success=function(){b.debug&&alert("\u5df2\u5206\u4eab");if(null!=b.onQQSuccess)b.onQQSuccess()};this.bodyMenuShareQQ().cancel=function(){b.debug&&alert("\u5df2\u53d6\u6d88");if(null!=b.onQQCancel)b.onQQCancel()};this.bodyMenuShareQQ().fail=function(a){b.debug&&alert(JSON.stringify(a));if(null!=b.onQQFail)b.onQQFail()};wx.onMenuShareQQ(this.bodyMenuShareQQ())};
e.registerWeiXinShareWeiBo=function(){var b=this;this.bodyMenuShareWeibo().trigger=function(){b.debug&&alert("\u7528\u6237\u70b9\u51fb\u5206\u4eab\u5230\u5fae\u535a");if(null!=b.onWeiBoTrigger)b.onWeiBoTrigger()};this.bodyMenuShareWeibo().complete=function(a){b.debug&&alert(JSON.stringify(a))};this.bodyMenuShareWeibo().success=function(){b.debug&&alert("\u5df2\u5206\u4eab");if(null!=b.onWeiBoSuccess)b.onWeiBoSuccess()};this.bodyMenuShareWeibo().cancel=function(){b.debug&&alert("\u5df2\u53d6\u6d88");
if(null!=b.onWeiBoCancel)b.onWeiBoCancel()};this.bodyMenuShareWeibo().fail=function(a){b.debug&&alert(JSON.stringify(a));if(null!=b.onWeiBoFail)b.onWeiBoFail()};wx.onMenuShareWeibo(this.bodyMenuShareWeibo())};e.registerWeiXinShareQZone=function(){var b=this;this.bodyMenuShareQZone().trigger=function(){b.debug&&alert("\u7528\u6237\u70b9\u51fb\u5206\u4eab\u5230\u5fae\u535a");if(null!=b.onQZoneTrigger)b.onQZoneTrigger()};this.bodyMenuShareQZone().complete=function(a){b.debug&&alert(JSON.stringify(a))};
this.bodyMenuShareQZone().success=function(){b.debug&&alert("\u5df2\u5206\u4eab");if(null!=b.onQZoneSuccess)b.onQZoneSuccess()};this.bodyMenuShareQZone().cancel=function(){b.debug&&alert("\u5df2\u53d6\u6d88");if(null!=b.onQZoneCancel)b.onQZoneCancel()};this.bodyMenuShareQZone().fail=function(a){b.debug&&alert(JSON.stringify(a));if(null!=b.onQZoneFail)b.onQZoneFail()};wx.onMenuShareQZone(this.bodyMenuShareQZone())};return b}();WeixinSDK.prototype.__class__="WeixinSDK";
